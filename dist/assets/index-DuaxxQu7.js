var mR=Object.defineProperty;var gR=(t,e,n)=>e in t?mR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var mn=(t,e,n)=>gR(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function kA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $g={exports:{}},Pu={},Ug={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function yR(){if(nE)return He;nE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function N(z,J,me){this.props=z,this.context=J,this.refs=C,this.updater=me||w}N.prototype.isReactComponent={},N.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},N.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function I(){}I.prototype=N.prototype;function S(z,J,me){this.props=z,this.context=J,this.refs=C,this.updater=me||w}var M=S.prototype=new I;M.constructor=S,_(M,N.prototype),M.isPureReactComponent=!0;var U=Array.isArray,H=Object.prototype.hasOwnProperty,B={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function T(z,J,me){var _e,xe={},he=null,ye=null;if(J!=null)for(_e in J.ref!==void 0&&(ye=J.ref),J.key!==void 0&&(he=""+J.key),J)H.call(J,_e)&&!j.hasOwnProperty(_e)&&(xe[_e]=J[_e]);var je=arguments.length-2;if(je===1)xe.children=me;else if(1<je){for(var Ve=Array(je),Ye=0;Ye<je;Ye++)Ve[Ye]=arguments[Ye+2];xe.children=Ve}if(z&&z.defaultProps)for(_e in je=z.defaultProps,je)xe[_e]===void 0&&(xe[_e]=je[_e]);return{$$typeof:t,type:z,key:he,ref:ye,props:xe,_owner:B.current}}function k(z,J){return{$$typeof:t,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function R(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(me){return J[me]})}var L=/\/+/g;function O(z,J){return typeof z=="object"&&z!==null&&z.key!=null?R(""+z.key):J.toString(36)}function Z(z,J,me,_e,xe){var he=typeof z;(he==="undefined"||he==="boolean")&&(z=null);var ye=!1;if(z===null)ye=!0;else switch(he){case"string":case"number":ye=!0;break;case"object":switch(z.$$typeof){case t:case e:ye=!0}}if(ye)return ye=z,xe=xe(ye),z=_e===""?"."+O(ye,0):_e,U(xe)?(me="",z!=null&&(me=z.replace(L,"$&/")+"/"),Z(xe,J,me,"",function(Ye){return Ye})):xe!=null&&(D(xe)&&(xe=k(xe,me+(!xe.key||ye&&ye.key===xe.key?"":(""+xe.key).replace(L,"$&/")+"/")+z)),J.push(xe)),1;if(ye=0,_e=_e===""?".":_e+":",U(z))for(var je=0;je<z.length;je++){he=z[je];var Ve=_e+O(he,je);ye+=Z(he,J,me,Ve,xe)}else if(Ve=x(z),typeof Ve=="function")for(z=Ve.call(z),je=0;!(he=z.next()).done;)he=he.value,Ve=_e+O(he,je++),ye+=Z(he,J,me,Ve,xe);else if(he==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return ye}function re(z,J,me){if(z==null)return z;var _e=[],xe=0;return Z(z,_e,"","",function(he){return J.call(me,he,xe++)}),_e}function le(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(me){(z._status===0||z._status===-1)&&(z._status=1,z._result=me)},function(me){(z._status===0||z._status===-1)&&(z._status=2,z._result=me)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var te={current:null},q={transition:null},ie={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:q,ReactCurrentOwner:B};function ne(){throw Error("act(...) is not supported in production builds of React.")}return He.Children={map:re,forEach:function(z,J,me){re(z,function(){J.apply(this,arguments)},me)},count:function(z){var J=0;return re(z,function(){J++}),J},toArray:function(z){return re(z,function(J){return J})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},He.Component=N,He.Fragment=n,He.Profiler=s,He.PureComponent=S,He.StrictMode=r,He.Suspense=d,He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,He.act=ne,He.cloneElement=function(z,J,me){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var _e=_({},z.props),xe=z.key,he=z.ref,ye=z._owner;if(J!=null){if(J.ref!==void 0&&(he=J.ref,ye=B.current),J.key!==void 0&&(xe=""+J.key),z.type&&z.type.defaultProps)var je=z.type.defaultProps;for(Ve in J)H.call(J,Ve)&&!j.hasOwnProperty(Ve)&&(_e[Ve]=J[Ve]===void 0&&je!==void 0?je[Ve]:J[Ve])}var Ve=arguments.length-2;if(Ve===1)_e.children=me;else if(1<Ve){je=Array(Ve);for(var Ye=0;Ye<Ve;Ye++)je[Ye]=arguments[Ye+2];_e.children=je}return{$$typeof:t,type:z.type,key:xe,ref:he,props:_e,_owner:ye}},He.createContext=function(z){return z={$$typeof:a,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:i,_context:z},z.Consumer=z},He.createElement=T,He.createFactory=function(z){var J=T.bind(null,z);return J.type=z,J},He.createRef=function(){return{current:null}},He.forwardRef=function(z){return{$$typeof:c,render:z}},He.isValidElement=D,He.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:le}},He.memo=function(z,J){return{$$typeof:f,type:z,compare:J===void 0?null:J}},He.startTransition=function(z){var J=q.transition;q.transition={};try{z()}finally{q.transition=J}},He.unstable_act=ne,He.useCallback=function(z,J){return te.current.useCallback(z,J)},He.useContext=function(z){return te.current.useContext(z)},He.useDebugValue=function(){},He.useDeferredValue=function(z){return te.current.useDeferredValue(z)},He.useEffect=function(z,J){return te.current.useEffect(z,J)},He.useId=function(){return te.current.useId()},He.useImperativeHandle=function(z,J,me){return te.current.useImperativeHandle(z,J,me)},He.useInsertionEffect=function(z,J){return te.current.useInsertionEffect(z,J)},He.useLayoutEffect=function(z,J){return te.current.useLayoutEffect(z,J)},He.useMemo=function(z,J){return te.current.useMemo(z,J)},He.useReducer=function(z,J,me){return te.current.useReducer(z,J,me)},He.useRef=function(z){return te.current.useRef(z)},He.useState=function(z){return te.current.useState(z)},He.useSyncExternalStore=function(z,J,me){return te.current.useSyncExternalStore(z,J,me)},He.useTransition=function(){return te.current.useTransition()},He.version="18.3.1",He}var rE;function bv(){return rE||(rE=1,Ug.exports=yR()),Ug.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function xR(){if(sE)return Pu;sE=1;var t=bv(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,f){var p,y={},x=null,w=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(w=d.ref);for(p in d)r.call(d,p)&&!i.hasOwnProperty(p)&&(y[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)y[p]===void 0&&(y[p]=d[p]);return{$$typeof:e,type:c,key:x,ref:w,props:y,_owner:s.current}}return Pu.Fragment=n,Pu.jsx=a,Pu.jsxs=a,Pu}var iE;function vR(){return iE||(iE=1,$g.exports=xR()),$g.exports}var u=vR(),V=bv();const wR=kA(V);var Kf={},zg={exports:{}},Bn={},Hg={exports:{}},Wg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function bR(){return oE||(oE=1,function(t){function e(q,ie){var ne=q.length;q.push(ie);e:for(;0<ne;){var z=ne-1>>>1,J=q[z];if(0<s(J,ie))q[z]=ie,q[ne]=J,ne=z;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ie=q[0],ne=q.pop();if(ne!==ie){q[0]=ne;e:for(var z=0,J=q.length,me=J>>>1;z<me;){var _e=2*(z+1)-1,xe=q[_e],he=_e+1,ye=q[he];if(0>s(xe,ne))he<J&&0>s(ye,xe)?(q[z]=ye,q[he]=ne,z=he):(q[z]=xe,q[_e]=ne,z=_e);else if(he<J&&0>s(ye,ne))q[z]=ye,q[he]=ne,z=he;else break e}}return ie}function s(q,ie){var ne=q.sortIndex-ie.sortIndex;return ne!==0?ne:q.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var d=[],f=[],p=1,y=null,x=3,w=!1,_=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(q){for(var ie=n(f);ie!==null;){if(ie.callback===null)r(f);else if(ie.startTime<=q)r(f),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=n(f)}}function U(q){if(C=!1,M(q),!_)if(n(d)!==null)_=!0,le(H);else{var ie=n(f);ie!==null&&te(U,ie.startTime-q)}}function H(q,ie){_=!1,C&&(C=!1,I(T),T=-1),w=!0;var ne=x;try{for(M(ie),y=n(d);y!==null&&(!(y.expirationTime>ie)||q&&!R());){var z=y.callback;if(typeof z=="function"){y.callback=null,x=y.priorityLevel;var J=z(y.expirationTime<=ie);ie=t.unstable_now(),typeof J=="function"?y.callback=J:y===n(d)&&r(d),M(ie)}else r(d);y=n(d)}if(y!==null)var me=!0;else{var _e=n(f);_e!==null&&te(U,_e.startTime-ie),me=!1}return me}finally{y=null,x=ne,w=!1}}var B=!1,j=null,T=-1,k=5,D=-1;function R(){return!(t.unstable_now()-D<k)}function L(){if(j!==null){var q=t.unstable_now();D=q;var ie=!0;try{ie=j(!0,q)}finally{ie?O():(B=!1,j=null)}}else B=!1}var O;if(typeof S=="function")O=function(){S(L)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,re=Z.port2;Z.port1.onmessage=L,O=function(){re.postMessage(null)}}else O=function(){N(L,0)};function le(q){j=q,B||(B=!0,O())}function te(q,ie){T=N(function(){q(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,le(H))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var ne=x;x=ie;try{return q()}finally{x=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ie){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ne=x;x=q;try{return ie()}finally{x=ne}},t.unstable_scheduleCallback=function(q,ie,ne){var z=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ne+J,q={id:p++,callback:ie,priorityLevel:q,startTime:ne,expirationTime:J,sortIndex:-1},ne>z?(q.sortIndex=ne,e(f,q),n(d)===null&&q===n(f)&&(C?(I(T),T=-1):C=!0,te(U,ne-z))):(q.sortIndex=J,e(d,q),_||w||(_=!0,le(H))),q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(q){var ie=x;return function(){var ne=x;x=ie;try{return q.apply(this,arguments)}finally{x=ne}}}}(Wg)),Wg}var aE;function ER(){return aE||(aE=1,Hg.exports=bR()),Hg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function kR(){if(lE)return Bn;lE=1;var t=bv(),e=ER();function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(s[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},y={};function x(o){return d.call(y,o)?!0:d.call(p,o)?!1:f.test(o)?y[o]=!0:(p[o]=!0,!1)}function w(o,l,h,g){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function _(o,l,h,g){if(l===null||typeof l>"u"||w(o,l,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(o,l,h,g,v,E,P){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=E,this.removeEmptyString=P}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){N[o]=new C(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];N[l]=new C(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){N[o]=new C(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){N[o]=new C(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){N[o]=new C(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){N[o]=new C(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){N[o]=new C(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){N[o]=new C(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){N[o]=new C(o,5,!1,o.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function S(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(I,S);N[l]=new C(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(I,S);N[l]=new C(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(I,S);N[l]=new C(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){N[o]=new C(o,1,!1,o.toLowerCase(),null,!1,!1)}),N.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){N[o]=new C(o,1,!1,o.toLowerCase(),null,!0,!0)});function M(o,l,h,g){var v=N.hasOwnProperty(l)?N[l]:null;(v!==null?v.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(_(l,h,v,g)&&(h=null),g||v===null?x(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):v.mustUseProperty?o[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,g=v.attributeNamespace,h===null?o.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,g?o.setAttributeNS(g,l,h):o.setAttribute(l,h))))}var U=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),B=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),R=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),q=Symbol.iterator;function ie(o){return o===null||typeof o!="object"?null:(o=q&&o[q]||o["@@iterator"],typeof o=="function"?o:null)}var ne=Object.assign,z;function J(o){if(z===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);z=l&&l[1]||""}return`
`+z+o}var me=!1;function _e(o,l){if(!o||me)return"";me=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var g=X}Reflect.construct(o,[],l)}else{try{l.call()}catch(X){g=X}o.call(l.prototype)}else{try{throw Error()}catch(X){g=X}o()}}catch(X){if(X&&g&&typeof X.stack=="string"){for(var v=X.stack.split(`
`),E=g.stack.split(`
`),P=v.length-1,$=E.length-1;1<=P&&0<=$&&v[P]!==E[$];)$--;for(;1<=P&&0<=$;P--,$--)if(v[P]!==E[$]){if(P!==1||$!==1)do if(P--,$--,0>$||v[P]!==E[$]){var W=`
`+v[P].replace(" at new "," at ");return o.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",o.displayName)),W}while(1<=P&&0<=$);break}}}finally{me=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?J(o):""}function xe(o){switch(o.tag){case 5:return J(o.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return o=_e(o.type,!1),o;case 11:return o=_e(o.type.render,!1),o;case 1:return o=_e(o.type,!0),o;default:return""}}function he(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case B:return"Portal";case k:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case Z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case R:return(o.displayName||"Context")+".Consumer";case D:return(o._context.displayName||"Context")+".Provider";case L:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case re:return l=o.displayName||null,l!==null?l:he(o.type)||"Memo";case le:l=o._payload,o=o._init;try{return he(o(l))}catch{}}return null}function ye(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(l);case 8:return l===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function je(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ve(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ye(o){var l=Ve(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),g=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,E=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return v.call(this)},set:function(P){g=""+P,E.call(this,P)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function tt(o){o._valueTracker||(o._valueTracker=Ye(o))}function Ft(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return o&&(g=Ve(o)?o.checked?"true":"false":o.value),o=g,o!==h?(l.setValue(o),!0):!1}function Ei(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Io(o,l){var h=l.checked;return ne({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Va(o,l){var h=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;h=je(l.value!=null?l.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Lc(o,l){l=l.checked,l!=null&&M(o,"checked",l,!1)}function Fc(o,l){Lc(o,l);var h=je(l.value),g=l.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ba(o,l.type,h):l.hasOwnProperty("defaultValue")&&Ba(o,l.type,je(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function Rh(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Ba(o,l,h){(l!=="number"||Ei(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var Ms=Array.isArray;function Os(o,l,h,g){if(o=o.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<o.length;h++)v=l.hasOwnProperty("$"+o[h].value),o[h].selected!==v&&(o[h].selected=v),v&&g&&(o[h].defaultSelected=!0)}else{for(h=""+je(h),l=null,v=0;v<o.length;v++){if(o[v].value===h){o[v].selected=!0,g&&(o[v].defaultSelected=!0);return}l!==null||o[v].disabled||(l=o[v])}l!==null&&(l.selected=!0)}}function Vc(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function $a(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(Ms(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:je(h)}}function Ua(o,l){var h=je(l.value),g=je(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Bc(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Vt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Vt(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ls,$c=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,g,v){MSApp.execUnsafeLocalFunction(function(){return o(l,h,g,v)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Ls=Ls||document.createElement("div"),Ls.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ls.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function ki(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},No=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(o){No.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),So[l]=So[o]})});function Uc(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||So.hasOwnProperty(o)&&So[o]?(""+l).trim():l+"px"}function zc(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var g=h.indexOf("--")===0,v=Uc(h,l[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,v):o[h]=v}}var Hc=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(o,l){if(l){if(Hc[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function qc(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Po=null;function za(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ha=null,or=null,ls=null;function Wa(o){if(o=gu(o)){if(typeof Ha!="function")throw Error(n(280));var l=o.stateNode;l&&(l=cf(l),Ha(o.stateNode,o.type,l))}}function cs(o){or?ls?ls.push(o):ls=[o]:or=o}function Gc(){if(or){var o=or,l=ls;if(ls=or=null,Wa(o),l)for(o=0;o<l.length;o++)Wa(l[o])}}function Ro(o,l){return o(l)}function Kc(){}var Fs=!1;function Yc(o,l,h){if(Fs)return o(l,h);Fs=!0;try{return Ro(o,l,h)}finally{Fs=!1,(or!==null||ls!==null)&&(Kc(),Gc())}}function At(o,l){var h=o.stateNode;if(h===null)return null;var g=cf(h);if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var qa=!1;if(c)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){qa=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{qa=!1}function jo(o,l,h,g,v,E,P,$,W){var X=Array.prototype.slice.call(arguments,3);try{l.apply(h,X)}catch(ue){this.onError(ue)}}var Do=!1,Ga=null,Pr=!1,Qc=null,m0={onError:function(o){Do=!0,Ga=o}};function Ka(o,l,h,g,v,E,P,$,W){Do=!1,Ga=null,jo.apply(m0,arguments)}function jh(o,l,h,g,v,E,P,$,W){if(Ka.apply(this,arguments),Do){if(Do){var X=Ga;Do=!1,Ga=null}else throw Error(n(198));Pr||(Pr=!0,Qc=X)}}function Rr(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function Mo(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function jr(o){if(Rr(o)!==o)throw Error(n(188))}function Dh(o){var l=o.alternate;if(!l){if(l=Rr(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,g=l;;){var v=h.return;if(v===null)break;var E=v.alternate;if(E===null){if(g=v.return,g!==null){h=g;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===h)return jr(v),o;if(E===g)return jr(v),l;E=E.sibling}throw Error(n(188))}if(h.return!==g.return)h=v,g=E;else{for(var P=!1,$=v.child;$;){if($===h){P=!0,h=v,g=E;break}if($===g){P=!0,g=v,h=E;break}$=$.sibling}if(!P){for($=E.child;$;){if($===h){P=!0,h=E,g=v;break}if($===g){P=!0,g=E,h=v;break}$=$.sibling}if(!P)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function Xc(o){return o=Dh(o),o!==null?Ya(o):null}function Ya(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Ya(o);if(l!==null)return l;o=o.sibling}return null}var Qa=e.unstable_scheduleCallback,Zc=e.unstable_cancelCallback,Mh=e.unstable_shouldYield,g0=e.unstable_requestPaint,ct=e.unstable_now,Oh=e.unstable_getCurrentPriorityLevel,Oo=e.unstable_ImmediatePriority,_i=e.unstable_UserBlockingPriority,ar=e.unstable_NormalPriority,Jc=e.unstable_LowPriority,Lh=e.unstable_IdlePriority,Lo=null,Yn=null;function Fh(o){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Lo,o,void 0,(o.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:Bh,eu=Math.log,Vh=Math.LN2;function Bh(o){return o>>>=0,o===0?32:31-(eu(o)/Vh|0)|0}var Xa=64,Za=4194304;function Ti(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Fo(o,l){var h=o.pendingLanes;if(h===0)return 0;var g=0,v=o.suspendedLanes,E=o.pingedLanes,P=h&268435455;if(P!==0){var $=P&~v;$!==0?g=Ti($):(E&=P,E!==0&&(g=Ti(E)))}else P=h&~v,P!==0?g=Ti(P):E!==0&&(g=Ti(E));if(g===0)return 0;if(l!==0&&l!==g&&(l&v)===0&&(v=g&-g,E=l&-l,v>=E||v===16&&(E&4194240)!==0))return l;if((g&4)!==0&&(g|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=g;0<l;)h=31-kn(l),v=1<<h,g|=o[h],l&=~v;return g}function y0(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vs(o,l){for(var h=o.suspendedLanes,g=o.pingedLanes,v=o.expirationTimes,E=o.pendingLanes;0<E;){var P=31-kn(E),$=1<<P,W=v[P];W===-1?(($&h)===0||($&g)!==0)&&(v[P]=y0($,l)):W<=l&&(o.expiredLanes|=$),E&=~$}}function Qn(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Vo(){var o=Xa;return Xa<<=1,(Xa&4194240)===0&&(Xa=64),o}function Ai(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function Ci(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-kn(l),o[l]=h}function at(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var v=31-kn(h),E=1<<v;l[v]=0,g[v]=-1,o[v]=-1,h&=~E}}function Ii(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var g=31-kn(h),v=1<<g;v&l|o[g]&l&&(o[g]|=l),h&=~v}}var Ge=0;function Si(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var $h,Ja,Uh,zh,Hh,tu=!1,us=[],nn=null,Dr=null,Mr=null,Ni=new Map,lr=new Map,ds=[],x0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wh(o,l){switch(o){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Ni.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":lr.delete(l.pointerId)}}function jn(o,l,h,g,v,E){return o===null||o.nativeEvent!==E?(o={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:E,targetContainers:[v]},l!==null&&(l=gu(l),l!==null&&Ja(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),o)}function v0(o,l,h,g,v){switch(l){case"focusin":return nn=jn(nn,o,l,h,g,v),!0;case"dragenter":return Dr=jn(Dr,o,l,h,g,v),!0;case"mouseover":return Mr=jn(Mr,o,l,h,g,v),!0;case"pointerover":var E=v.pointerId;return Ni.set(E,jn(Ni.get(E)||null,o,l,h,g,v)),!0;case"gotpointercapture":return E=v.pointerId,lr.set(E,jn(lr.get(E)||null,o,l,h,g,v)),!0}return!1}function qh(o){var l=Ho(o.target);if(l!==null){var h=Rr(l);if(h!==null){if(l=h.tag,l===13){if(l=Mo(h),l!==null){o.blockedOn=l,Hh(o.priority,function(){Uh(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Bs(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=el(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Po=g,h.target.dispatchEvent(g),Po=null}else return l=gu(h),l!==null&&Ja(l),o.blockedOn=h,!1;l.shift()}return!0}function Bo(o,l,h){Bs(o)&&h.delete(l)}function Gh(){tu=!1,nn!==null&&Bs(nn)&&(nn=null),Dr!==null&&Bs(Dr)&&(Dr=null),Mr!==null&&Bs(Mr)&&(Mr=null),Ni.forEach(Bo),lr.forEach(Bo)}function Or(o,l){o.blockedOn===l&&(o.blockedOn=null,tu||(tu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gh)))}function Lr(o){function l(v){return Or(v,o)}if(0<us.length){Or(us[0],o);for(var h=1;h<us.length;h++){var g=us[h];g.blockedOn===o&&(g.blockedOn=null)}}for(nn!==null&&Or(nn,o),Dr!==null&&Or(Dr,o),Mr!==null&&Or(Mr,o),Ni.forEach(l),lr.forEach(l),h=0;h<ds.length;h++)g=ds[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<ds.length&&(h=ds[0],h.blockedOn===null);)qh(h),h.blockedOn===null&&ds.shift()}var $s=U.ReactCurrentBatchConfig,Pi=!0;function pt(o,l,h,g){var v=Ge,E=$s.transition;$s.transition=null;try{Ge=1,nu(o,l,h,g)}finally{Ge=v,$s.transition=E}}function w0(o,l,h,g){var v=Ge,E=$s.transition;$s.transition=null;try{Ge=4,nu(o,l,h,g)}finally{Ge=v,$s.transition=E}}function nu(o,l,h,g){if(Pi){var v=el(o,l,h,g);if(v===null)P0(o,l,g,$o,h),Wh(o,g);else if(v0(v,o,l,h,g))g.stopPropagation();else if(Wh(o,g),l&4&&-1<x0.indexOf(o)){for(;v!==null;){var E=gu(v);if(E!==null&&$h(E),E=el(o,l,h,g),E===null&&P0(o,l,g,$o,h),E===v)break;v=E}v!==null&&g.stopPropagation()}else P0(o,l,g,null,h)}}var $o=null;function el(o,l,h,g){if($o=null,o=za(g),o=Ho(o),o!==null)if(l=Rr(o),l===null)o=null;else if(h=l.tag,h===13){if(o=Mo(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return $o=o,null}function ru(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oh()){case Oo:return 1;case _i:return 4;case ar:case Jc:return 16;case Lh:return 536870912;default:return 16}default:return 16}}var Xn=null,tl=null,Dn=null;function su(){if(Dn)return Dn;var o,l=tl,h=l.length,g,v="value"in Xn?Xn.value:Xn.textContent,E=v.length;for(o=0;o<h&&l[o]===v[o];o++);var P=h-o;for(g=1;g<=P&&l[h-g]===v[E-g];g++);return Dn=v.slice(o,1<g?1-g:void 0)}function nl(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function hs(){return!0}function iu(){return!1}function rn(o){function l(h,g,v,E,P){this._reactName=h,this._targetInst=v,this.type=g,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(h=o[$],this[$]=h?h(E):E[$]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?hs:iu,this.isPropagationStopped=iu,this}return ne(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),l}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=rn(Fr),fs=ne({},Fr,{view:0,detail:0}),b0=rn(fs),sl,Us,Ri,Uo=ne({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ps,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ri&&(Ri&&o.type==="mousemove"?(sl=o.screenX-Ri.screenX,Us=o.screenY-Ri.screenY):Us=sl=0,Ri=o),sl)},movementY:function(o){return"movementY"in o?o.movementY:Us}}),il=rn(Uo),ou=ne({},Uo,{dataTransfer:0}),Kh=rn(ou),ol=ne({},fs,{relatedTarget:0}),al=rn(ol),Yh=ne({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),zs=rn(Yh),Qh=ne({},Fr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Xh=rn(Qh),Zh=ne({},Fr,{data:0}),au=rn(Zh),ll={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ef(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Jh[o])?!!l[o]:!1}function ps(){return ef}var m=ne({},fs,{key:function(o){if(o.key){var l=ll[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=nl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?_n[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ps,charCode:function(o){return o.type==="keypress"?nl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?nl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),b=rn(m),A=ne({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=rn(A),K=ne({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ps}),ee=rn(K),ge=ne({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),it=rn(ge),$t=ne({},Uo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Qe=rn($t),Qt=[9,13,27,32],Pt=c&&"CompositionEvent"in window,cr=null;c&&"documentMode"in document&&(cr=document.documentMode);var Zn=c&&"TextEvent"in window&&!cr,zo=c&&(!Pt||cr&&8<cr&&11>=cr),cl=" ",Qw=!1;function Xw(o,l){switch(o){case"keyup":return Qt.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ul=!1;function h5(o,l){switch(o){case"compositionend":return Zw(l);case"keypress":return l.which!==32?null:(Qw=!0,cl);case"textInput":return o=l.data,o===cl&&Qw?null:o;default:return null}}function f5(o,l){if(ul)return o==="compositionend"||!Pt&&Xw(o,l)?(o=su(),Dn=tl=Xn=null,ul=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return zo&&l.locale!=="ko"?null:l.data;default:return null}}var p5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jw(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!p5[o.type]:l==="textarea"}function eb(o,l,h,g){cs(g),l=of(l,"onChange"),0<l.length&&(h=new rl("onChange","change",null,h,g),o.push({event:h,listeners:l}))}var lu=null,cu=null;function m5(o){xb(o,0)}function tf(o){var l=ml(o);if(Ft(l))return o}function g5(o,l){if(o==="change")return l}var tb=!1;if(c){var E0;if(c){var k0="oninput"in document;if(!k0){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),k0=typeof nb.oninput=="function"}E0=k0}else E0=!1;tb=E0&&(!document.documentMode||9<document.documentMode)}function rb(){lu&&(lu.detachEvent("onpropertychange",sb),cu=lu=null)}function sb(o){if(o.propertyName==="value"&&tf(cu)){var l=[];eb(l,cu,o,za(o)),Yc(m5,l)}}function y5(o,l,h){o==="focusin"?(rb(),lu=l,cu=h,lu.attachEvent("onpropertychange",sb)):o==="focusout"&&rb()}function x5(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return tf(cu)}function v5(o,l){if(o==="click")return tf(l)}function w5(o,l){if(o==="input"||o==="change")return tf(l)}function b5(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Vr=typeof Object.is=="function"?Object.is:b5;function uu(o,l){if(Vr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var v=h[g];if(!d.call(l,v)||!Vr(o[v],l[v]))return!1}return!0}function ib(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ob(o,l){var h=ib(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=l&&g>=l)return{node:h,offset:l-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ib(h)}}function ab(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?ab(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function lb(){for(var o=window,l=Ei();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=Ei(o.document)}return l}function _0(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function E5(o){var l=lb(),h=o.focusedElem,g=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&ab(h.ownerDocument.documentElement,h)){if(g!==null&&_0(h)){if(l=g.start,o=g.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var v=h.textContent.length,E=Math.min(g.start,v);g=g.end===void 0?E:Math.min(g.end,v),!o.extend&&E>g&&(v=g,g=E,E=v),v=ob(h,E);var P=ob(h,g);v&&P&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),o.removeAllRanges(),E>g?(o.addRange(l),o.extend(P.node,P.offset)):(l.setEnd(P.node,P.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var k5=c&&"documentMode"in document&&11>=document.documentMode,dl=null,T0=null,du=null,A0=!1;function cb(o,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;A0||dl==null||dl!==Ei(g)||(g=dl,"selectionStart"in g&&_0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),du&&uu(du,g)||(du=g,g=of(T0,"onSelect"),0<g.length&&(l=new rl("onSelect","select",null,l,h),o.push({event:l,listeners:g}),l.target=dl)))}function nf(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var hl={animationend:nf("Animation","AnimationEnd"),animationiteration:nf("Animation","AnimationIteration"),animationstart:nf("Animation","AnimationStart"),transitionend:nf("Transition","TransitionEnd")},C0={},ub={};c&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function rf(o){if(C0[o])return C0[o];if(!hl[o])return o;var l=hl[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in ub)return C0[o]=l[h];return o}var db=rf("animationend"),hb=rf("animationiteration"),fb=rf("animationstart"),pb=rf("transitionend"),mb=new Map,gb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(o,l){mb.set(o,l),i(l,[o])}for(var I0=0;I0<gb.length;I0++){var S0=gb[I0],_5=S0.toLowerCase(),T5=S0[0].toUpperCase()+S0.slice(1);ji(_5,"on"+T5)}ji(db,"onAnimationEnd"),ji(hb,"onAnimationIteration"),ji(fb,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(pb,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A5=new Set("cancel close invalid load scroll toggle".split(" ").concat(hu));function yb(o,l,h){var g=o.type||"unknown-event";o.currentTarget=h,jh(g,l,void 0,o),o.currentTarget=null}function xb(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],v=g.event;g=g.listeners;e:{var E=void 0;if(l)for(var P=g.length-1;0<=P;P--){var $=g[P],W=$.instance,X=$.currentTarget;if($=$.listener,W!==E&&v.isPropagationStopped())break e;yb(v,$,X),E=W}else for(P=0;P<g.length;P++){if($=g[P],W=$.instance,X=$.currentTarget,$=$.listener,W!==E&&v.isPropagationStopped())break e;yb(v,$,X),E=W}}}if(Pr)throw o=Qc,Pr=!1,Qc=null,o}function dt(o,l){var h=l[L0];h===void 0&&(h=l[L0]=new Set);var g=o+"__bubble";h.has(g)||(vb(l,o,2,!1),h.add(g))}function N0(o,l,h){var g=0;l&&(g|=4),vb(h,o,g,l)}var sf="_reactListening"+Math.random().toString(36).slice(2);function fu(o){if(!o[sf]){o[sf]=!0,r.forEach(function(h){h!=="selectionchange"&&(A5.has(h)||N0(h,!1,o),N0(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[sf]||(l[sf]=!0,N0("selectionchange",!1,l))}}function vb(o,l,h,g){switch(ru(l)){case 1:var v=pt;break;case 4:v=w0;break;default:v=nu}h=v.bind(null,l,h,o),v=void 0,!qa||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),g?v!==void 0?o.addEventListener(l,h,{capture:!0,passive:v}):o.addEventListener(l,h,!0):v!==void 0?o.addEventListener(l,h,{passive:v}):o.addEventListener(l,h,!1)}function P0(o,l,h,g,v){var E=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var $=g.stateNode.containerInfo;if($===v||$.nodeType===8&&$.parentNode===v)break;if(P===4)for(P=g.return;P!==null;){var W=P.tag;if((W===3||W===4)&&(W=P.stateNode.containerInfo,W===v||W.nodeType===8&&W.parentNode===v))return;P=P.return}for(;$!==null;){if(P=Ho($),P===null)return;if(W=P.tag,W===5||W===6){g=E=P;continue e}$=$.parentNode}}g=g.return}Yc(function(){var X=E,ue=za(h),de=[];e:{var ce=mb.get(o);if(ce!==void 0){var ve=rl,Te=o;switch(o){case"keypress":if(nl(h)===0)break e;case"keydown":case"keyup":ve=b;break;case"focusin":Te="focus",ve=al;break;case"focusout":Te="blur",ve=al;break;case"beforeblur":case"afterblur":ve=al;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ee;break;case db:case hb:case fb:ve=zs;break;case pb:ve=it;break;case"scroll":ve=b0;break;case"wheel":ve=Qe;break;case"copy":case"cut":case"paste":ve=Xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=F}var Ae=(l&4)!==0,Ct=!Ae&&o==="scroll",Y=Ae?ce!==null?ce+"Capture":null:ce;Ae=[];for(var G=X,Q;G!==null;){Q=G;var pe=Q.stateNode;if(Q.tag===5&&pe!==null&&(Q=pe,Y!==null&&(pe=At(G,Y),pe!=null&&Ae.push(pu(G,pe,Q)))),Ct)break;G=G.return}0<Ae.length&&(ce=new ve(ce,Te,null,h,ue),de.push({event:ce,listeners:Ae}))}}if((l&7)===0){e:{if(ce=o==="mouseover"||o==="pointerover",ve=o==="mouseout"||o==="pointerout",ce&&h!==Po&&(Te=h.relatedTarget||h.fromElement)&&(Ho(Te)||Te[Hs]))break e;if((ve||ce)&&(ce=ue.window===ue?ue:(ce=ue.ownerDocument)?ce.defaultView||ce.parentWindow:window,ve?(Te=h.relatedTarget||h.toElement,ve=X,Te=Te?Ho(Te):null,Te!==null&&(Ct=Rr(Te),Te!==Ct||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(ve=null,Te=X),ve!==Te)){if(Ae=il,pe="onMouseLeave",Y="onMouseEnter",G="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=F,pe="onPointerLeave",Y="onPointerEnter",G="pointer"),Ct=ve==null?ce:ml(ve),Q=Te==null?ce:ml(Te),ce=new Ae(pe,G+"leave",ve,h,ue),ce.target=Ct,ce.relatedTarget=Q,pe=null,Ho(ue)===X&&(Ae=new Ae(Y,G+"enter",Te,h,ue),Ae.target=Q,Ae.relatedTarget=Ct,pe=Ae),Ct=pe,ve&&Te)t:{for(Ae=ve,Y=Te,G=0,Q=Ae;Q;Q=fl(Q))G++;for(Q=0,pe=Y;pe;pe=fl(pe))Q++;for(;0<G-Q;)Ae=fl(Ae),G--;for(;0<Q-G;)Y=fl(Y),Q--;for(;G--;){if(Ae===Y||Y!==null&&Ae===Y.alternate)break t;Ae=fl(Ae),Y=fl(Y)}Ae=null}else Ae=null;ve!==null&&wb(de,ce,ve,Ae,!1),Te!==null&&Ct!==null&&wb(de,Ct,Te,Ae,!0)}}e:{if(ce=X?ml(X):window,ve=ce.nodeName&&ce.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ce.type==="file")var Ie=g5;else if(Jw(ce))if(tb)Ie=w5;else{Ie=x5;var Pe=y5}else(ve=ce.nodeName)&&ve.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Ie=v5);if(Ie&&(Ie=Ie(o,X))){eb(de,Ie,h,ue);break e}Pe&&Pe(o,ce,X),o==="focusout"&&(Pe=ce._wrapperState)&&Pe.controlled&&ce.type==="number"&&Ba(ce,"number",ce.value)}switch(Pe=X?ml(X):window,o){case"focusin":(Jw(Pe)||Pe.contentEditable==="true")&&(dl=Pe,T0=X,du=null);break;case"focusout":du=T0=dl=null;break;case"mousedown":A0=!0;break;case"contextmenu":case"mouseup":case"dragend":A0=!1,cb(de,h,ue);break;case"selectionchange":if(k5)break;case"keydown":case"keyup":cb(de,h,ue)}var Re;if(Pt)e:{switch(o){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ul?Xw(o,h)&&(Le="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Le="onCompositionStart");Le&&(zo&&h.locale!=="ko"&&(ul||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ul&&(Re=su()):(Xn=ue,tl="value"in Xn?Xn.value:Xn.textContent,ul=!0)),Pe=of(X,Le),0<Pe.length&&(Le=new au(Le,o,null,h,ue),de.push({event:Le,listeners:Pe}),Re?Le.data=Re:(Re=Zw(h),Re!==null&&(Le.data=Re)))),(Re=Zn?h5(o,h):f5(o,h))&&(X=of(X,"onBeforeInput"),0<X.length&&(ue=new au("onBeforeInput","beforeinput",null,h,ue),de.push({event:ue,listeners:X}),ue.data=Re))}xb(de,l)})}function pu(o,l,h){return{instance:o,listener:l,currentTarget:h}}function of(o,l){for(var h=l+"Capture",g=[];o!==null;){var v=o,E=v.stateNode;v.tag===5&&E!==null&&(v=E,E=At(o,h),E!=null&&g.unshift(pu(o,E,v)),E=At(o,l),E!=null&&g.push(pu(o,E,v))),o=o.return}return g}function fl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wb(o,l,h,g,v){for(var E=l._reactName,P=[];h!==null&&h!==g;){var $=h,W=$.alternate,X=$.stateNode;if(W!==null&&W===g)break;$.tag===5&&X!==null&&($=X,v?(W=At(h,E),W!=null&&P.unshift(pu(h,W,$))):v||(W=At(h,E),W!=null&&P.push(pu(h,W,$)))),h=h.return}P.length!==0&&o.push({event:l,listeners:P})}var C5=/\r\n?/g,I5=/\u0000|\uFFFD/g;function bb(o){return(typeof o=="string"?o:""+o).replace(C5,`
`).replace(I5,"")}function af(o,l,h){if(l=bb(l),bb(o)!==l&&h)throw Error(n(425))}function lf(){}var R0=null,j0=null;function D0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var M0=typeof setTimeout=="function"?setTimeout:void 0,S5=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,N5=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(o){return Eb.resolve(null).then(o).catch(P5)}:M0;function P5(o){setTimeout(function(){throw o})}function O0(o,l){var h=l,g=0;do{var v=h.nextSibling;if(o.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(g===0){o.removeChild(v),Lr(l);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=v}while(h);Lr(l)}function Di(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function kb(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var pl=Math.random().toString(36).slice(2),ms="__reactFiber$"+pl,mu="__reactProps$"+pl,Hs="__reactContainer$"+pl,L0="__reactEvents$"+pl,R5="__reactListeners$"+pl,j5="__reactHandles$"+pl;function Ho(o){var l=o[ms];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Hs]||h[ms]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=kb(o);o!==null;){if(h=o[ms])return h;o=kb(o)}return l}o=h,h=o.parentNode}return null}function gu(o){return o=o[ms]||o[Hs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ml(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function cf(o){return o[mu]||null}var F0=[],gl=-1;function Mi(o){return{current:o}}function ht(o){0>gl||(o.current=F0[gl],F0[gl]=null,gl--)}function ut(o,l){gl++,F0[gl]=o.current,o.current=l}var Oi={},dn=Mi(Oi),Mn=Mi(!1),Wo=Oi;function yl(o,l){var h=o.type.contextTypes;if(!h)return Oi;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var v={},E;for(E in h)v[E]=l[E];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=v),v}function On(o){return o=o.childContextTypes,o!=null}function uf(){ht(Mn),ht(dn)}function _b(o,l,h){if(dn.current!==Oi)throw Error(n(168));ut(dn,l),ut(Mn,h)}function Tb(o,l,h){var g=o.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var v in g)if(!(v in l))throw Error(n(108,ye(o)||"Unknown",v));return ne({},h,g)}function df(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Oi,Wo=dn.current,ut(dn,o),ut(Mn,Mn.current),!0}function Ab(o,l,h){var g=o.stateNode;if(!g)throw Error(n(169));h?(o=Tb(o,l,Wo),g.__reactInternalMemoizedMergedChildContext=o,ht(Mn),ht(dn),ut(dn,o)):ht(Mn),ut(Mn,h)}var Ws=null,hf=!1,V0=!1;function Cb(o){Ws===null?Ws=[o]:Ws.push(o)}function D5(o){hf=!0,Cb(o)}function Li(){if(!V0&&Ws!==null){V0=!0;var o=0,l=Ge;try{var h=Ws;for(Ge=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Ws=null,hf=!1}catch(v){throw Ws!==null&&(Ws=Ws.slice(o+1)),Qa(Oo,Li),v}finally{Ge=l,V0=!1}}return null}var xl=[],vl=0,ff=null,pf=0,ur=[],dr=0,qo=null,qs=1,Gs="";function Go(o,l){xl[vl++]=pf,xl[vl++]=ff,ff=o,pf=l}function Ib(o,l,h){ur[dr++]=qs,ur[dr++]=Gs,ur[dr++]=qo,qo=o;var g=qs;o=Gs;var v=32-kn(g)-1;g&=~(1<<v),h+=1;var E=32-kn(l)+v;if(30<E){var P=v-v%5;E=(g&(1<<P)-1).toString(32),g>>=P,v-=P,qs=1<<32-kn(l)+v|h<<v|g,Gs=E+o}else qs=1<<E|h<<v|g,Gs=o}function B0(o){o.return!==null&&(Go(o,1),Ib(o,1,0))}function $0(o){for(;o===ff;)ff=xl[--vl],xl[vl]=null,pf=xl[--vl],xl[vl]=null;for(;o===qo;)qo=ur[--dr],ur[dr]=null,Gs=ur[--dr],ur[dr]=null,qs=ur[--dr],ur[dr]=null}var Jn=null,er=null,mt=!1,Br=null;function Sb(o,l){var h=mr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function Nb(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,Jn=o,er=Di(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,Jn=o,er=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=qo!==null?{id:qs,overflow:Gs}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=mr(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,Jn=o,er=null,!0):!1;default:return!1}}function U0(o){return(o.mode&1)!==0&&(o.flags&128)===0}function z0(o){if(mt){var l=er;if(l){var h=l;if(!Nb(o,l)){if(U0(o))throw Error(n(418));l=Di(h.nextSibling);var g=Jn;l&&Nb(o,l)?Sb(g,h):(o.flags=o.flags&-4097|2,mt=!1,Jn=o)}}else{if(U0(o))throw Error(n(418));o.flags=o.flags&-4097|2,mt=!1,Jn=o}}}function Pb(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Jn=o}function mf(o){if(o!==Jn)return!1;if(!mt)return Pb(o),mt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!D0(o.type,o.memoizedProps)),l&&(l=er)){if(U0(o))throw Rb(),Error(n(418));for(;l;)Sb(o,l),l=Di(l.nextSibling)}if(Pb(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){er=Di(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}er=null}}else er=Jn?Di(o.stateNode.nextSibling):null;return!0}function Rb(){for(var o=er;o;)o=Di(o.nextSibling)}function wl(){er=Jn=null,mt=!1}function H0(o){Br===null?Br=[o]:Br.push(o)}var M5=U.ReactCurrentBatchConfig;function yu(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var g=h.stateNode}if(!g)throw Error(n(147,o));var v=g,E=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(P){var $=v.refs;P===null?delete $[E]:$[E]=P},l._stringRef=E,l)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function gf(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function jb(o){var l=o._init;return l(o._payload)}function Db(o){function l(Y,G){if(o){var Q=Y.deletions;Q===null?(Y.deletions=[G],Y.flags|=16):Q.push(G)}}function h(Y,G){if(!o)return null;for(;G!==null;)l(Y,G),G=G.sibling;return null}function g(Y,G){for(Y=new Map;G!==null;)G.key!==null?Y.set(G.key,G):Y.set(G.index,G),G=G.sibling;return Y}function v(Y,G){return Y=Wi(Y,G),Y.index=0,Y.sibling=null,Y}function E(Y,G,Q){return Y.index=Q,o?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<G?(Y.flags|=2,G):Q):(Y.flags|=2,G)):(Y.flags|=1048576,G)}function P(Y){return o&&Y.alternate===null&&(Y.flags|=2),Y}function $(Y,G,Q,pe){return G===null||G.tag!==6?(G=Mg(Q,Y.mode,pe),G.return=Y,G):(G=v(G,Q),G.return=Y,G)}function W(Y,G,Q,pe){var Ie=Q.type;return Ie===j?ue(Y,G,Q.props.children,pe,Q.key):G!==null&&(G.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===le&&jb(Ie)===G.type)?(pe=v(G,Q.props),pe.ref=yu(Y,G,Q),pe.return=Y,pe):(pe=Bf(Q.type,Q.key,Q.props,null,Y.mode,pe),pe.ref=yu(Y,G,Q),pe.return=Y,pe)}function X(Y,G,Q,pe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=Og(Q,Y.mode,pe),G.return=Y,G):(G=v(G,Q.children||[]),G.return=Y,G)}function ue(Y,G,Q,pe,Ie){return G===null||G.tag!==7?(G=ta(Q,Y.mode,pe,Ie),G.return=Y,G):(G=v(G,Q),G.return=Y,G)}function de(Y,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Mg(""+G,Y.mode,Q),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case H:return Q=Bf(G.type,G.key,G.props,null,Y.mode,Q),Q.ref=yu(Y,null,G),Q.return=Y,Q;case B:return G=Og(G,Y.mode,Q),G.return=Y,G;case le:var pe=G._init;return de(Y,pe(G._payload),Q)}if(Ms(G)||ie(G))return G=ta(G,Y.mode,Q,null),G.return=Y,G;gf(Y,G)}return null}function ce(Y,G,Q,pe){var Ie=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ie!==null?null:$(Y,G,""+Q,pe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:return Q.key===Ie?W(Y,G,Q,pe):null;case B:return Q.key===Ie?X(Y,G,Q,pe):null;case le:return Ie=Q._init,ce(Y,G,Ie(Q._payload),pe)}if(Ms(Q)||ie(Q))return Ie!==null?null:ue(Y,G,Q,pe,null);gf(Y,Q)}return null}function ve(Y,G,Q,pe,Ie){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Y=Y.get(Q)||null,$(G,Y,""+pe,Ie);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case H:return Y=Y.get(pe.key===null?Q:pe.key)||null,W(G,Y,pe,Ie);case B:return Y=Y.get(pe.key===null?Q:pe.key)||null,X(G,Y,pe,Ie);case le:var Pe=pe._init;return ve(Y,G,Q,Pe(pe._payload),Ie)}if(Ms(pe)||ie(pe))return Y=Y.get(Q)||null,ue(G,Y,pe,Ie,null);gf(G,pe)}return null}function Te(Y,G,Q,pe){for(var Ie=null,Pe=null,Re=G,Le=G=0,Jt=null;Re!==null&&Le<Q.length;Le++){Re.index>Le?(Jt=Re,Re=null):Jt=Re.sibling;var Je=ce(Y,Re,Q[Le],pe);if(Je===null){Re===null&&(Re=Jt);break}o&&Re&&Je.alternate===null&&l(Y,Re),G=E(Je,G,Le),Pe===null?Ie=Je:Pe.sibling=Je,Pe=Je,Re=Jt}if(Le===Q.length)return h(Y,Re),mt&&Go(Y,Le),Ie;if(Re===null){for(;Le<Q.length;Le++)Re=de(Y,Q[Le],pe),Re!==null&&(G=E(Re,G,Le),Pe===null?Ie=Re:Pe.sibling=Re,Pe=Re);return mt&&Go(Y,Le),Ie}for(Re=g(Y,Re);Le<Q.length;Le++)Jt=ve(Re,Y,Le,Q[Le],pe),Jt!==null&&(o&&Jt.alternate!==null&&Re.delete(Jt.key===null?Le:Jt.key),G=E(Jt,G,Le),Pe===null?Ie=Jt:Pe.sibling=Jt,Pe=Jt);return o&&Re.forEach(function(qi){return l(Y,qi)}),mt&&Go(Y,Le),Ie}function Ae(Y,G,Q,pe){var Ie=ie(Q);if(typeof Ie!="function")throw Error(n(150));if(Q=Ie.call(Q),Q==null)throw Error(n(151));for(var Pe=Ie=null,Re=G,Le=G=0,Jt=null,Je=Q.next();Re!==null&&!Je.done;Le++,Je=Q.next()){Re.index>Le?(Jt=Re,Re=null):Jt=Re.sibling;var qi=ce(Y,Re,Je.value,pe);if(qi===null){Re===null&&(Re=Jt);break}o&&Re&&qi.alternate===null&&l(Y,Re),G=E(qi,G,Le),Pe===null?Ie=qi:Pe.sibling=qi,Pe=qi,Re=Jt}if(Je.done)return h(Y,Re),mt&&Go(Y,Le),Ie;if(Re===null){for(;!Je.done;Le++,Je=Q.next())Je=de(Y,Je.value,pe),Je!==null&&(G=E(Je,G,Le),Pe===null?Ie=Je:Pe.sibling=Je,Pe=Je);return mt&&Go(Y,Le),Ie}for(Re=g(Y,Re);!Je.done;Le++,Je=Q.next())Je=ve(Re,Y,Le,Je.value,pe),Je!==null&&(o&&Je.alternate!==null&&Re.delete(Je.key===null?Le:Je.key),G=E(Je,G,Le),Pe===null?Ie=Je:Pe.sibling=Je,Pe=Je);return o&&Re.forEach(function(pR){return l(Y,pR)}),mt&&Go(Y,Le),Ie}function Ct(Y,G,Q,pe){if(typeof Q=="object"&&Q!==null&&Q.type===j&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case H:e:{for(var Ie=Q.key,Pe=G;Pe!==null;){if(Pe.key===Ie){if(Ie=Q.type,Ie===j){if(Pe.tag===7){h(Y,Pe.sibling),G=v(Pe,Q.props.children),G.return=Y,Y=G;break e}}else if(Pe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===le&&jb(Ie)===Pe.type){h(Y,Pe.sibling),G=v(Pe,Q.props),G.ref=yu(Y,Pe,Q),G.return=Y,Y=G;break e}h(Y,Pe);break}else l(Y,Pe);Pe=Pe.sibling}Q.type===j?(G=ta(Q.props.children,Y.mode,pe,Q.key),G.return=Y,Y=G):(pe=Bf(Q.type,Q.key,Q.props,null,Y.mode,pe),pe.ref=yu(Y,G,Q),pe.return=Y,Y=pe)}return P(Y);case B:e:{for(Pe=Q.key;G!==null;){if(G.key===Pe)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){h(Y,G.sibling),G=v(G,Q.children||[]),G.return=Y,Y=G;break e}else{h(Y,G);break}else l(Y,G);G=G.sibling}G=Og(Q,Y.mode,pe),G.return=Y,Y=G}return P(Y);case le:return Pe=Q._init,Ct(Y,G,Pe(Q._payload),pe)}if(Ms(Q))return Te(Y,G,Q,pe);if(ie(Q))return Ae(Y,G,Q,pe);gf(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,G!==null&&G.tag===6?(h(Y,G.sibling),G=v(G,Q),G.return=Y,Y=G):(h(Y,G),G=Mg(Q,Y.mode,pe),G.return=Y,Y=G),P(Y)):h(Y,G)}return Ct}var bl=Db(!0),Mb=Db(!1),yf=Mi(null),xf=null,El=null,W0=null;function q0(){W0=El=xf=null}function G0(o){var l=yf.current;ht(yf),o._currentValue=l}function K0(o,l,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===h)break;o=o.return}}function kl(o,l){xf=o,W0=El=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Ln=!0),o.firstContext=null)}function hr(o){var l=o._currentValue;if(W0!==o)if(o={context:o,memoizedValue:l,next:null},El===null){if(xf===null)throw Error(n(308));El=o,xf.dependencies={lanes:0,firstContext:o}}else El=El.next=o;return l}var Ko=null;function Y0(o){Ko===null?Ko=[o]:Ko.push(o)}function Ob(o,l,h,g){var v=l.interleaved;return v===null?(h.next=h,Y0(l)):(h.next=v.next,v.next=h),l.interleaved=h,Ks(o,g)}function Ks(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Fi=!1;function Q0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lb(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ys(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function Vi(o,l,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Ze&2)!==0){var v=g.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),g.pending=l,Ks(o,h)}return v=g.interleaved,v===null?(l.next=l,Y0(g)):(l.next=v.next,v.next=l),g.interleaved=l,Ks(o,h)}function vf(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Ii(o,h)}}function Fb(o,l){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var v=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};E===null?v=E=P:E=E.next=P,h=h.next}while(h!==null);E===null?v=E=l:E=E.next=l}else v=E=l;h={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function wf(o,l,h,g){var v=o.updateQueue;Fi=!1;var E=v.firstBaseUpdate,P=v.lastBaseUpdate,$=v.shared.pending;if($!==null){v.shared.pending=null;var W=$,X=W.next;W.next=null,P===null?E=X:P.next=X,P=W;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,$=ue.lastBaseUpdate,$!==P&&($===null?ue.firstBaseUpdate=X:$.next=X,ue.lastBaseUpdate=W))}if(E!==null){var de=v.baseState;P=0,ue=X=W=null,$=E;do{var ce=$.lane,ve=$.eventTime;if((g&ce)===ce){ue!==null&&(ue=ue.next={eventTime:ve,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Te=o,Ae=$;switch(ce=l,ve=h,Ae.tag){case 1:if(Te=Ae.payload,typeof Te=="function"){de=Te.call(ve,de,ce);break e}de=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ae.payload,ce=typeof Te=="function"?Te.call(ve,de,ce):Te,ce==null)break e;de=ne({},de,ce);break e;case 2:Fi=!0}}$.callback!==null&&$.lane!==0&&(o.flags|=64,ce=v.effects,ce===null?v.effects=[$]:ce.push($))}else ve={eventTime:ve,lane:ce,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ue===null?(X=ue=ve,W=de):ue=ue.next=ve,P|=ce;if($=$.next,$===null){if($=v.shared.pending,$===null)break;ce=$,$=ce.next,ce.next=null,v.lastBaseUpdate=ce,v.shared.pending=null}}while(!0);if(ue===null&&(W=de),v.baseState=W,v.firstBaseUpdate=X,v.lastBaseUpdate=ue,l=v.shared.interleaved,l!==null){v=l;do P|=v.lane,v=v.next;while(v!==l)}else E===null&&(v.shared.lanes=0);Xo|=P,o.lanes=P,o.memoizedState=de}}function Vb(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var g=o[l],v=g.callback;if(v!==null){if(g.callback=null,g=h,typeof v!="function")throw Error(n(191,v));v.call(g)}}}var xu={},gs=Mi(xu),vu=Mi(xu),wu=Mi(xu);function Yo(o){if(o===xu)throw Error(n(174));return o}function X0(o,l){switch(ut(wu,l),ut(vu,o),ut(gs,xu),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Bt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Bt(l,o)}ht(gs),ut(gs,l)}function _l(){ht(gs),ht(vu),ht(wu)}function Bb(o){Yo(wu.current);var l=Yo(gs.current),h=Bt(l,o.type);l!==h&&(ut(vu,o),ut(gs,h))}function Z0(o){vu.current===o&&(ht(gs),ht(vu))}var xt=Mi(0);function bf(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var J0=[];function eg(){for(var o=0;o<J0.length;o++)J0[o]._workInProgressVersionPrimary=null;J0.length=0}var Ef=U.ReactCurrentDispatcher,tg=U.ReactCurrentBatchConfig,Qo=0,vt=null,Ut=null,Xt=null,kf=!1,bu=!1,Eu=0,O5=0;function hn(){throw Error(n(321))}function ng(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Vr(o[h],l[h]))return!1;return!0}function rg(o,l,h,g,v,E){if(Qo=E,vt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Ef.current=o===null||o.memoizedState===null?B5:$5,o=h(g,v),bu){E=0;do{if(bu=!1,Eu=0,25<=E)throw Error(n(301));E+=1,Xt=Ut=null,l.updateQueue=null,Ef.current=U5,o=h(g,v)}while(bu)}if(Ef.current=Af,l=Ut!==null&&Ut.next!==null,Qo=0,Xt=Ut=vt=null,kf=!1,l)throw Error(n(300));return o}function sg(){var o=Eu!==0;return Eu=0,o}function ys(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?vt.memoizedState=Xt=o:Xt=Xt.next=o,Xt}function fr(){if(Ut===null){var o=vt.alternate;o=o!==null?o.memoizedState:null}else o=Ut.next;var l=Xt===null?vt.memoizedState:Xt.next;if(l!==null)Xt=l,Ut=o;else{if(o===null)throw Error(n(310));Ut=o,o={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Xt===null?vt.memoizedState=Xt=o:Xt=Xt.next=o}return Xt}function ku(o,l){return typeof l=="function"?l(o):l}function ig(o){var l=fr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=Ut,v=g.baseQueue,E=h.pending;if(E!==null){if(v!==null){var P=v.next;v.next=E.next,E.next=P}g.baseQueue=v=E,h.pending=null}if(v!==null){E=v.next,g=g.baseState;var $=P=null,W=null,X=E;do{var ue=X.lane;if((Qo&ue)===ue)W!==null&&(W=W.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),g=X.hasEagerState?X.eagerState:o(g,X.action);else{var de={lane:ue,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};W===null?($=W=de,P=g):W=W.next=de,vt.lanes|=ue,Xo|=ue}X=X.next}while(X!==null&&X!==E);W===null?P=g:W.next=$,Vr(g,l.memoizedState)||(Ln=!0),l.memoizedState=g,l.baseState=P,l.baseQueue=W,h.lastRenderedState=g}if(o=h.interleaved,o!==null){v=o;do E=v.lane,vt.lanes|=E,Xo|=E,v=v.next;while(v!==o)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function og(o){var l=fr(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=h.dispatch,v=h.pending,E=l.memoizedState;if(v!==null){h.pending=null;var P=v=v.next;do E=o(E,P.action),P=P.next;while(P!==v);Vr(E,l.memoizedState)||(Ln=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,g]}function $b(){}function Ub(o,l){var h=vt,g=fr(),v=l(),E=!Vr(g.memoizedState,v);if(E&&(g.memoizedState=v,Ln=!0),g=g.queue,ag(Wb.bind(null,h,g,o),[o]),g.getSnapshot!==l||E||Xt!==null&&Xt.memoizedState.tag&1){if(h.flags|=2048,_u(9,Hb.bind(null,h,g,v,l),void 0,null),Zt===null)throw Error(n(349));(Qo&30)!==0||zb(h,l,v)}return v}function zb(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=vt.updateQueue,l===null?(l={lastEffect:null,stores:null},vt.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function Hb(o,l,h,g){l.value=h,l.getSnapshot=g,qb(l)&&Gb(o)}function Wb(o,l,h){return h(function(){qb(l)&&Gb(o)})}function qb(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Vr(o,h)}catch{return!0}}function Gb(o){var l=Ks(o,1);l!==null&&Hr(l,o,1,-1)}function Kb(o){var l=ys();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:o},l.queue=o,o=o.dispatch=V5.bind(null,vt,o),[l.memoizedState,o]}function _u(o,l,h,g){return o={tag:o,create:l,destroy:h,deps:g,next:null},l=vt.updateQueue,l===null?(l={lastEffect:null,stores:null},vt.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,l.lastEffect=o)),o}function Yb(){return fr().memoizedState}function _f(o,l,h,g){var v=ys();vt.flags|=o,v.memoizedState=_u(1|l,h,void 0,g===void 0?null:g)}function Tf(o,l,h,g){var v=fr();g=g===void 0?null:g;var E=void 0;if(Ut!==null){var P=Ut.memoizedState;if(E=P.destroy,g!==null&&ng(g,P.deps)){v.memoizedState=_u(l,h,E,g);return}}vt.flags|=o,v.memoizedState=_u(1|l,h,E,g)}function Qb(o,l){return _f(8390656,8,o,l)}function ag(o,l){return Tf(2048,8,o,l)}function Xb(o,l){return Tf(4,2,o,l)}function Zb(o,l){return Tf(4,4,o,l)}function Jb(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function e2(o,l,h){return h=h!=null?h.concat([o]):null,Tf(4,4,Jb.bind(null,l,o),h)}function lg(){}function t2(o,l){var h=fr();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&ng(l,g[1])?g[0]:(h.memoizedState=[o,l],o)}function n2(o,l){var h=fr();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&ng(l,g[1])?g[0]:(o=o(),h.memoizedState=[o,l],o)}function r2(o,l,h){return(Qo&21)===0?(o.baseState&&(o.baseState=!1,Ln=!0),o.memoizedState=h):(Vr(h,l)||(h=Vo(),vt.lanes|=h,Xo|=h,o.baseState=!0),l)}function L5(o,l){var h=Ge;Ge=h!==0&&4>h?h:4,o(!0);var g=tg.transition;tg.transition={};try{o(!1),l()}finally{Ge=h,tg.transition=g}}function s2(){return fr().memoizedState}function F5(o,l,h){var g=zi(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},i2(o))o2(l,h);else if(h=Ob(o,l,h,g),h!==null){var v=An();Hr(h,o,g,v),a2(h,l,g)}}function V5(o,l,h){var g=zi(o),v={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(i2(o))o2(l,v);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var P=l.lastRenderedState,$=E(P,h);if(v.hasEagerState=!0,v.eagerState=$,Vr($,P)){var W=l.interleaved;W===null?(v.next=v,Y0(l)):(v.next=W.next,W.next=v),l.interleaved=v;return}}catch{}finally{}h=Ob(o,l,v,g),h!==null&&(v=An(),Hr(h,o,g,v),a2(h,l,g))}}function i2(o){var l=o.alternate;return o===vt||l!==null&&l===vt}function o2(o,l){bu=kf=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function a2(o,l,h){if((h&4194240)!==0){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Ii(o,h)}}var Af={readContext:hr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},B5={readContext:hr,useCallback:function(o,l){return ys().memoizedState=[o,l===void 0?null:l],o},useContext:hr,useEffect:Qb,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,_f(4194308,4,Jb.bind(null,l,o),h)},useLayoutEffect:function(o,l){return _f(4194308,4,o,l)},useInsertionEffect:function(o,l){return _f(4,2,o,l)},useMemo:function(o,l){var h=ys();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var g=ys();return l=h!==void 0?h(l):l,g.memoizedState=g.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},g.queue=o,o=o.dispatch=F5.bind(null,vt,o),[g.memoizedState,o]},useRef:function(o){var l=ys();return o={current:o},l.memoizedState=o},useState:Kb,useDebugValue:lg,useDeferredValue:function(o){return ys().memoizedState=o},useTransition:function(){var o=Kb(!1),l=o[0];return o=L5.bind(null,o[1]),ys().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var g=vt,v=ys();if(mt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),Zt===null)throw Error(n(349));(Qo&30)!==0||zb(g,l,h)}v.memoizedState=h;var E={value:h,getSnapshot:l};return v.queue=E,Qb(Wb.bind(null,g,E,o),[o]),g.flags|=2048,_u(9,Hb.bind(null,g,E,h,l),void 0,null),h},useId:function(){var o=ys(),l=Zt.identifierPrefix;if(mt){var h=Gs,g=qs;h=(g&~(1<<32-kn(g)-1)).toString(32)+h,l=":"+l+"R"+h,h=Eu++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=O5++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},$5={readContext:hr,useCallback:t2,useContext:hr,useEffect:ag,useImperativeHandle:e2,useInsertionEffect:Xb,useLayoutEffect:Zb,useMemo:n2,useReducer:ig,useRef:Yb,useState:function(){return ig(ku)},useDebugValue:lg,useDeferredValue:function(o){var l=fr();return r2(l,Ut.memoizedState,o)},useTransition:function(){var o=ig(ku)[0],l=fr().memoizedState;return[o,l]},useMutableSource:$b,useSyncExternalStore:Ub,useId:s2,unstable_isNewReconciler:!1},U5={readContext:hr,useCallback:t2,useContext:hr,useEffect:ag,useImperativeHandle:e2,useInsertionEffect:Xb,useLayoutEffect:Zb,useMemo:n2,useReducer:og,useRef:Yb,useState:function(){return og(ku)},useDebugValue:lg,useDeferredValue:function(o){var l=fr();return Ut===null?l.memoizedState=o:r2(l,Ut.memoizedState,o)},useTransition:function(){var o=og(ku)[0],l=fr().memoizedState;return[o,l]},useMutableSource:$b,useSyncExternalStore:Ub,useId:s2,unstable_isNewReconciler:!1};function $r(o,l){if(o&&o.defaultProps){l=ne({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function cg(o,l,h,g){l=o.memoizedState,h=h(g,l),h=h==null?l:ne({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Cf={isMounted:function(o){return(o=o._reactInternals)?Rr(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var g=An(),v=zi(o),E=Ys(g,v);E.payload=l,h!=null&&(E.callback=h),l=Vi(o,E,v),l!==null&&(Hr(l,o,v,g),vf(l,o,v))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var g=An(),v=zi(o),E=Ys(g,v);E.tag=1,E.payload=l,h!=null&&(E.callback=h),l=Vi(o,E,v),l!==null&&(Hr(l,o,v,g),vf(l,o,v))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=An(),g=zi(o),v=Ys(h,g);v.tag=2,l!=null&&(v.callback=l),l=Vi(o,v,g),l!==null&&(Hr(l,o,g,h),vf(l,o,g))}};function l2(o,l,h,g,v,E,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,E,P):l.prototype&&l.prototype.isPureReactComponent?!uu(h,g)||!uu(v,E):!0}function c2(o,l,h){var g=!1,v=Oi,E=l.contextType;return typeof E=="object"&&E!==null?E=hr(E):(v=On(l)?Wo:dn.current,g=l.contextTypes,E=(g=g!=null)?yl(o,v):Oi),l=new l(h,E),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Cf,o.stateNode=l,l._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=E),l}function u2(o,l,h,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==o&&Cf.enqueueReplaceState(l,l.state,null)}function ug(o,l,h,g){var v=o.stateNode;v.props=h,v.state=o.memoizedState,v.refs={},Q0(o);var E=l.contextType;typeof E=="object"&&E!==null?v.context=hr(E):(E=On(l)?Wo:dn.current,v.context=yl(o,E)),v.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(cg(o,l,E,h),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&Cf.enqueueReplaceState(v,v.state,null),wf(o,h,v,g),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function Tl(o,l){try{var h="",g=l;do h+=xe(g),g=g.return;while(g);var v=h}catch(E){v=`
Error generating stack: `+E.message+`
`+E.stack}return{value:o,source:l,stack:v,digest:null}}function dg(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function hg(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var z5=typeof WeakMap=="function"?WeakMap:Map;function d2(o,l,h){h=Ys(-1,h),h.tag=3,h.payload={element:null};var g=l.value;return h.callback=function(){Df||(Df=!0,Cg=g),hg(o,l)},h}function h2(o,l,h){h=Ys(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var v=l.value;h.payload=function(){return g(v)},h.callback=function(){hg(o,l)}}var E=o.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(h.callback=function(){hg(o,l),typeof g!="function"&&($i===null?$i=new Set([this]):$i.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})}),h}function f2(o,l,h){var g=o.pingCache;if(g===null){g=o.pingCache=new z5;var v=new Set;g.set(l,v)}else v=g.get(l),v===void 0&&(v=new Set,g.set(l,v));v.has(h)||(v.add(h),o=rR.bind(null,o,l,h),l.then(o,o))}function p2(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function m2(o,l,h,g,v){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Ys(-1,1),l.tag=2,Vi(h,l,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=v,o)}var H5=U.ReactCurrentOwner,Ln=!1;function Tn(o,l,h,g){l.child=o===null?Mb(l,null,h,g):bl(l,o.child,h,g)}function g2(o,l,h,g,v){h=h.render;var E=l.ref;return kl(l,v),g=rg(o,l,h,g,E,v),h=sg(),o!==null&&!Ln?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~v,Qs(o,l,v)):(mt&&h&&B0(l),l.flags|=1,Tn(o,l,g,v),l.child)}function y2(o,l,h,g,v){if(o===null){var E=h.type;return typeof E=="function"&&!Dg(E)&&E.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=E,x2(o,l,E,g,v)):(o=Bf(h.type,null,g,l,l.mode,v),o.ref=l.ref,o.return=l,l.child=o)}if(E=o.child,(o.lanes&v)===0){var P=E.memoizedProps;if(h=h.compare,h=h!==null?h:uu,h(P,g)&&o.ref===l.ref)return Qs(o,l,v)}return l.flags|=1,o=Wi(E,g),o.ref=l.ref,o.return=l,l.child=o}function x2(o,l,h,g,v){if(o!==null){var E=o.memoizedProps;if(uu(E,g)&&o.ref===l.ref)if(Ln=!1,l.pendingProps=g=E,(o.lanes&v)!==0)(o.flags&131072)!==0&&(Ln=!0);else return l.lanes=o.lanes,Qs(o,l,v)}return fg(o,l,h,g,v)}function v2(o,l,h){var g=l.pendingProps,v=g.children,E=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(Cl,tr),tr|=h;else{if((h&1073741824)===0)return o=E!==null?E.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,ut(Cl,tr),tr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=E!==null?E.baseLanes:h,ut(Cl,tr),tr|=g}else E!==null?(g=E.baseLanes|h,l.memoizedState=null):g=h,ut(Cl,tr),tr|=g;return Tn(o,l,v,h),l.child}function w2(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function fg(o,l,h,g,v){var E=On(h)?Wo:dn.current;return E=yl(l,E),kl(l,v),h=rg(o,l,h,g,E,v),g=sg(),o!==null&&!Ln?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~v,Qs(o,l,v)):(mt&&g&&B0(l),l.flags|=1,Tn(o,l,h,v),l.child)}function b2(o,l,h,g,v){if(On(h)){var E=!0;df(l)}else E=!1;if(kl(l,v),l.stateNode===null)Sf(o,l),c2(l,h,g),ug(l,h,g,v),g=!0;else if(o===null){var P=l.stateNode,$=l.memoizedProps;P.props=$;var W=P.context,X=h.contextType;typeof X=="object"&&X!==null?X=hr(X):(X=On(h)?Wo:dn.current,X=yl(l,X));var ue=h.getDerivedStateFromProps,de=typeof ue=="function"||typeof P.getSnapshotBeforeUpdate=="function";de||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==g||W!==X)&&u2(l,P,g,X),Fi=!1;var ce=l.memoizedState;P.state=ce,wf(l,g,P,v),W=l.memoizedState,$!==g||ce!==W||Mn.current||Fi?(typeof ue=="function"&&(cg(l,h,ue,g),W=l.memoizedState),($=Fi||l2(l,h,$,g,ce,W,X))?(de||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=W),P.props=g,P.state=W,P.context=X,g=$):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{P=l.stateNode,Lb(o,l),$=l.memoizedProps,X=l.type===l.elementType?$:$r(l.type,$),P.props=X,de=l.pendingProps,ce=P.context,W=h.contextType,typeof W=="object"&&W!==null?W=hr(W):(W=On(h)?Wo:dn.current,W=yl(l,W));var ve=h.getDerivedStateFromProps;(ue=typeof ve=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||($!==de||ce!==W)&&u2(l,P,g,W),Fi=!1,ce=l.memoizedState,P.state=ce,wf(l,g,P,v);var Te=l.memoizedState;$!==de||ce!==Te||Mn.current||Fi?(typeof ve=="function"&&(cg(l,h,ve,g),Te=l.memoizedState),(X=Fi||l2(l,h,X,g,ce,Te,W)||!1)?(ue||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,Te,W),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,Te,W)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||$===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Te),P.props=g,P.state=Te,P.context=W,g=X):(typeof P.componentDidUpdate!="function"||$===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),g=!1)}return pg(o,l,h,g,E,v)}function pg(o,l,h,g,v,E){w2(o,l);var P=(l.flags&128)!==0;if(!g&&!P)return v&&Ab(l,h,!1),Qs(o,l,E);g=l.stateNode,H5.current=l;var $=P&&typeof h.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,o!==null&&P?(l.child=bl(l,o.child,null,E),l.child=bl(l,null,$,E)):Tn(o,l,$,E),l.memoizedState=g.state,v&&Ab(l,h,!0),l.child}function E2(o){var l=o.stateNode;l.pendingContext?_b(o,l.pendingContext,l.pendingContext!==l.context):l.context&&_b(o,l.context,!1),X0(o,l.containerInfo)}function k2(o,l,h,g,v){return wl(),H0(v),l.flags|=256,Tn(o,l,h,g),l.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function gg(o){return{baseLanes:o,cachePool:null,transitions:null}}function _2(o,l,h){var g=l.pendingProps,v=xt.current,E=!1,P=(l.flags&128)!==0,$;if(($=P)||($=o!==null&&o.memoizedState===null?!1:(v&2)!==0),$?(E=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),ut(xt,v&1),o===null)return z0(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(P=g.children,o=g.fallback,E?(g=l.mode,E=l.child,P={mode:"hidden",children:P},(g&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=P):E=$f(P,g,0,null),o=ta(o,g,h,null),E.return=l,o.return=l,E.sibling=o,l.child=E,l.child.memoizedState=gg(h),l.memoizedState=mg,o):yg(l,P));if(v=o.memoizedState,v!==null&&($=v.dehydrated,$!==null))return W5(o,l,P,g,$,v,h);if(E){E=g.fallback,P=l.mode,v=o.child,$=v.sibling;var W={mode:"hidden",children:g.children};return(P&1)===0&&l.child!==v?(g=l.child,g.childLanes=0,g.pendingProps=W,l.deletions=null):(g=Wi(v,W),g.subtreeFlags=v.subtreeFlags&14680064),$!==null?E=Wi($,E):(E=ta(E,P,h,null),E.flags|=2),E.return=l,g.return=l,g.sibling=E,l.child=g,g=E,E=l.child,P=o.child.memoizedState,P=P===null?gg(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},E.memoizedState=P,E.childLanes=o.childLanes&~h,l.memoizedState=mg,g}return E=o.child,o=E.sibling,g=Wi(E,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=h),g.return=l,g.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=g,l.memoizedState=null,g}function yg(o,l){return l=$f({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function If(o,l,h,g){return g!==null&&H0(g),bl(l,o.child,null,h),o=yg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function W5(o,l,h,g,v,E,P){if(h)return l.flags&256?(l.flags&=-257,g=dg(Error(n(422))),If(o,l,P,g)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(E=g.fallback,v=l.mode,g=$f({mode:"visible",children:g.children},v,0,null),E=ta(E,v,P,null),E.flags|=2,g.return=l,E.return=l,g.sibling=E,l.child=g,(l.mode&1)!==0&&bl(l,o.child,null,P),l.child.memoizedState=gg(P),l.memoizedState=mg,E);if((l.mode&1)===0)return If(o,l,P,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var $=g.dgst;return g=$,E=Error(n(419)),g=dg(E,g,void 0),If(o,l,P,g)}if($=(P&o.childLanes)!==0,Ln||$){if(g=Zt,g!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|P))!==0?0:v,v!==0&&v!==E.retryLane&&(E.retryLane=v,Ks(o,v),Hr(g,o,v,-1))}return jg(),g=dg(Error(n(421))),If(o,l,P,g)}return v.data==="$?"?(l.flags|=128,l.child=o.child,l=sR.bind(null,o),v._reactRetry=l,null):(o=E.treeContext,er=Di(v.nextSibling),Jn=l,mt=!0,Br=null,o!==null&&(ur[dr++]=qs,ur[dr++]=Gs,ur[dr++]=qo,qs=o.id,Gs=o.overflow,qo=l),l=yg(l,g.children),l.flags|=4096,l)}function T2(o,l,h){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),K0(o.return,l,h)}function xg(o,l,h,g,v){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:v}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=h,E.tailMode=v)}function A2(o,l,h){var g=l.pendingProps,v=g.revealOrder,E=g.tail;if(Tn(o,l,g.children,h),g=xt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&T2(o,h,l);else if(o.tag===19)T2(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(ut(xt,g),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)o=h.alternate,o!==null&&bf(o)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),xg(l,!1,v,h,E);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(o=v.alternate,o!==null&&bf(o)===null){l.child=v;break}o=v.sibling,v.sibling=h,h=v,v=o}xg(l,!0,h,null,E);break;case"together":xg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Sf(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Qs(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Xo|=l.lanes,(h&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=Wi(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Wi(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function q5(o,l,h){switch(l.tag){case 3:E2(l),wl();break;case 5:Bb(l);break;case 1:On(l.type)&&df(l);break;case 4:X0(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,v=l.memoizedProps.value;ut(yf,g._currentValue),g._currentValue=v;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(ut(xt,xt.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?_2(o,l,h):(ut(xt,xt.current&1),o=Qs(o,l,h),o!==null?o.sibling:null);ut(xt,xt.current&1);break;case 19:if(g=(h&l.childLanes)!==0,(o.flags&128)!==0){if(g)return A2(o,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ut(xt,xt.current),g)break;return null;case 22:case 23:return l.lanes=0,v2(o,l,h)}return Qs(o,l,h)}var C2,vg,I2,S2;C2=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},vg=function(){},I2=function(o,l,h,g){var v=o.memoizedProps;if(v!==g){o=l.stateNode,Yo(gs.current);var E=null;switch(h){case"input":v=Io(o,v),g=Io(o,g),E=[];break;case"select":v=ne({},v,{value:void 0}),g=ne({},g,{value:void 0}),E=[];break;case"textarea":v=Vc(o,v),g=Vc(o,g),E=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=lf)}Wc(h,g);var P;h=null;for(X in v)if(!g.hasOwnProperty(X)&&v.hasOwnProperty(X)&&v[X]!=null)if(X==="style"){var $=v[X];for(P in $)$.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?E||(E=[]):(E=E||[]).push(X,null));for(X in g){var W=g[X];if($=v!=null?v[X]:void 0,g.hasOwnProperty(X)&&W!==$&&(W!=null||$!=null))if(X==="style")if($){for(P in $)!$.hasOwnProperty(P)||W&&W.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in W)W.hasOwnProperty(P)&&$[P]!==W[P]&&(h||(h={}),h[P]=W[P])}else h||(E||(E=[]),E.push(X,h)),h=W;else X==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,$=$?$.__html:void 0,W!=null&&$!==W&&(E=E||[]).push(X,W)):X==="children"?typeof W!="string"&&typeof W!="number"||(E=E||[]).push(X,""+W):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(W!=null&&X==="onScroll"&&dt("scroll",o),E||$===W||(E=[])):(E=E||[]).push(X,W))}h&&(E=E||[]).push("style",h);var X=E;(l.updateQueue=X)&&(l.flags|=4)}},S2=function(o,l,h,g){h!==g&&(l.flags|=4)};function Tu(o,l){if(!mt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function fn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(l)for(var v=o.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=g,o.childLanes=h,l}function G5(o,l,h){var g=l.pendingProps;switch($0(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(l),null;case 1:return On(l.type)&&uf(),fn(l),null;case 3:return g=l.stateNode,_l(),ht(Mn),ht(dn),eg(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(mf(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Br!==null&&(Ng(Br),Br=null))),vg(o,l),fn(l),null;case 5:Z0(l);var v=Yo(wu.current);if(h=l.type,o!==null&&l.stateNode!=null)I2(o,l,h,g,v),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return fn(l),null}if(o=Yo(gs.current),mf(l)){g=l.stateNode,h=l.type;var E=l.memoizedProps;switch(g[ms]=l,g[mu]=E,o=(l.mode&1)!==0,h){case"dialog":dt("cancel",g),dt("close",g);break;case"iframe":case"object":case"embed":dt("load",g);break;case"video":case"audio":for(v=0;v<hu.length;v++)dt(hu[v],g);break;case"source":dt("error",g);break;case"img":case"image":case"link":dt("error",g),dt("load",g);break;case"details":dt("toggle",g);break;case"input":Va(g,E),dt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!E.multiple},dt("invalid",g);break;case"textarea":$a(g,E),dt("invalid",g)}Wc(h,E),v=null;for(var P in E)if(E.hasOwnProperty(P)){var $=E[P];P==="children"?typeof $=="string"?g.textContent!==$&&(E.suppressHydrationWarning!==!0&&af(g.textContent,$,o),v=["children",$]):typeof $=="number"&&g.textContent!==""+$&&(E.suppressHydrationWarning!==!0&&af(g.textContent,$,o),v=["children",""+$]):s.hasOwnProperty(P)&&$!=null&&P==="onScroll"&&dt("scroll",g)}switch(h){case"input":tt(g),Rh(g,E,!0);break;case"textarea":tt(g),Bc(g);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(g.onclick=lf)}g=v,l.updateQueue=g,g!==null&&(l.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Vt(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=P.createElement(h,{is:g.is}):(o=P.createElement(h),h==="select"&&(P=o,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):o=P.createElementNS(o,h),o[ms]=l,o[mu]=g,C2(o,l,!1,!1),l.stateNode=o;e:{switch(P=qc(h,g),h){case"dialog":dt("cancel",o),dt("close",o),v=g;break;case"iframe":case"object":case"embed":dt("load",o),v=g;break;case"video":case"audio":for(v=0;v<hu.length;v++)dt(hu[v],o);v=g;break;case"source":dt("error",o),v=g;break;case"img":case"image":case"link":dt("error",o),dt("load",o),v=g;break;case"details":dt("toggle",o),v=g;break;case"input":Va(o,g),v=Io(o,g),dt("invalid",o);break;case"option":v=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},v=ne({},g,{value:void 0}),dt("invalid",o);break;case"textarea":$a(o,g),v=Vc(o,g),dt("invalid",o);break;default:v=g}Wc(h,v),$=v;for(E in $)if($.hasOwnProperty(E)){var W=$[E];E==="style"?zc(o,W):E==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&$c(o,W)):E==="children"?typeof W=="string"?(h!=="textarea"||W!=="")&&ki(o,W):typeof W=="number"&&ki(o,""+W):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(s.hasOwnProperty(E)?W!=null&&E==="onScroll"&&dt("scroll",o):W!=null&&M(o,E,W,P))}switch(h){case"input":tt(o),Rh(o,g,!1);break;case"textarea":tt(o),Bc(o);break;case"option":g.value!=null&&o.setAttribute("value",""+je(g.value));break;case"select":o.multiple=!!g.multiple,E=g.value,E!=null?Os(o,!!g.multiple,E,!1):g.defaultValue!=null&&Os(o,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=lf)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return fn(l),null;case 6:if(o&&l.stateNode!=null)S2(o,l,o.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(h=Yo(wu.current),Yo(gs.current),mf(l)){if(g=l.stateNode,h=l.memoizedProps,g[ms]=l,(E=g.nodeValue!==h)&&(o=Jn,o!==null))switch(o.tag){case 3:af(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&af(g.nodeValue,h,(o.mode&1)!==0)}E&&(l.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[ms]=l,l.stateNode=g}return fn(l),null;case 13:if(ht(xt),g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(mt&&er!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Rb(),wl(),l.flags|=98560,E=!1;else if(E=mf(l),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(n(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ms]=l}else wl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;fn(l),E=!1}else Br!==null&&(Ng(Br),Br=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(xt.current&1)!==0?zt===0&&(zt=3):jg())),l.updateQueue!==null&&(l.flags|=4),fn(l),null);case 4:return _l(),vg(o,l),o===null&&fu(l.stateNode.containerInfo),fn(l),null;case 10:return G0(l.type._context),fn(l),null;case 17:return On(l.type)&&uf(),fn(l),null;case 19:if(ht(xt),E=l.memoizedState,E===null)return fn(l),null;if(g=(l.flags&128)!==0,P=E.rendering,P===null)if(g)Tu(E,!1);else{if(zt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(P=bf(o),P!==null){for(l.flags|=128,Tu(E,!1),g=P.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=h,h=l.child;h!==null;)E=h,o=g,E.flags&=14680066,P=E.alternate,P===null?(E.childLanes=0,E.lanes=o,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=P.childLanes,E.lanes=P.lanes,E.child=P.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=P.memoizedProps,E.memoizedState=P.memoizedState,E.updateQueue=P.updateQueue,E.type=P.type,o=P.dependencies,E.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return ut(xt,xt.current&1|2),l.child}o=o.sibling}E.tail!==null&&ct()>Il&&(l.flags|=128,g=!0,Tu(E,!1),l.lanes=4194304)}else{if(!g)if(o=bf(P),o!==null){if(l.flags|=128,g=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Tu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!mt)return fn(l),null}else 2*ct()-E.renderingStartTime>Il&&h!==1073741824&&(l.flags|=128,g=!0,Tu(E,!1),l.lanes=4194304);E.isBackwards?(P.sibling=l.child,l.child=P):(h=E.last,h!==null?h.sibling=P:l.child=P,E.last=P)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=ct(),l.sibling=null,h=xt.current,ut(xt,g?h&1|2:h&1),l):(fn(l),null);case 22:case 23:return Rg(),g=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(tr&1073741824)!==0&&(fn(l),l.subtreeFlags&6&&(l.flags|=8192)):fn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function K5(o,l){switch($0(l),l.tag){case 1:return On(l.type)&&uf(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return _l(),ht(Mn),ht(dn),eg(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Z0(l),null;case 13:if(ht(xt),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));wl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ht(xt),null;case 4:return _l(),null;case 10:return G0(l.type._context),null;case 22:case 23:return Rg(),null;case 24:return null;default:return null}}var Nf=!1,pn=!1,Y5=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Al(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){_t(o,l,g)}else h.current=null}function wg(o,l,h){try{h()}catch(g){_t(o,l,g)}}var N2=!1;function Q5(o,l){if(R0=Pi,o=lb(),_0(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var v=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var P=0,$=-1,W=-1,X=0,ue=0,de=o,ce=null;t:for(;;){for(var ve;de!==h||v!==0&&de.nodeType!==3||($=P+v),de!==E||g!==0&&de.nodeType!==3||(W=P+g),de.nodeType===3&&(P+=de.nodeValue.length),(ve=de.firstChild)!==null;)ce=de,de=ve;for(;;){if(de===o)break t;if(ce===h&&++X===v&&($=P),ce===E&&++ue===g&&(W=P),(ve=de.nextSibling)!==null)break;de=ce,ce=de.parentNode}de=ve}h=$===-1||W===-1?null:{start:$,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(j0={focusedElem:o,selectionRange:h},Pi=!1,Ee=l;Ee!==null;)if(l=Ee,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ee=o;else for(;Ee!==null;){l=Ee;try{var Te=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ae=Te.memoizedProps,Ct=Te.memoizedState,Y=l.stateNode,G=Y.getSnapshotBeforeUpdate(l.elementType===l.type?Ae:$r(l.type,Ae),Ct);Y.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Q=l.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(pe){_t(l,l.return,pe)}if(o=l.sibling,o!==null){o.return=l.return,Ee=o;break}Ee=l.return}return Te=N2,N2=!1,Te}function Au(o,l,h){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&o)===o){var E=v.destroy;v.destroy=void 0,E!==void 0&&wg(l,h,E)}v=v.next}while(v!==g)}}function Pf(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==l)}}function bg(o){var l=o.ref;if(l!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof l=="function"?l(o):l.current=o}}function P2(o){var l=o.alternate;l!==null&&(o.alternate=null,P2(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[ms],delete l[mu],delete l[L0],delete l[R5],delete l[j5])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function R2(o){return o.tag===5||o.tag===3||o.tag===4}function j2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||R2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Eg(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=lf));else if(g!==4&&(o=o.child,o!==null))for(Eg(o,l,h),o=o.sibling;o!==null;)Eg(o,l,h),o=o.sibling}function kg(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(kg(o,l,h),o=o.sibling;o!==null;)kg(o,l,h),o=o.sibling}var sn=null,Ur=!1;function Bi(o,l,h){for(h=h.child;h!==null;)D2(o,l,h),h=h.sibling}function D2(o,l,h){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Lo,h)}catch{}switch(h.tag){case 5:pn||Al(h,l);case 6:var g=sn,v=Ur;sn=null,Bi(o,l,h),sn=g,Ur=v,sn!==null&&(Ur?(o=sn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):sn.removeChild(h.stateNode));break;case 18:sn!==null&&(Ur?(o=sn,h=h.stateNode,o.nodeType===8?O0(o.parentNode,h):o.nodeType===1&&O0(o,h),Lr(o)):O0(sn,h.stateNode));break;case 4:g=sn,v=Ur,sn=h.stateNode.containerInfo,Ur=!0,Bi(o,l,h),sn=g,Ur=v;break;case 0:case 11:case 14:case 15:if(!pn&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var E=v,P=E.destroy;E=E.tag,P!==void 0&&((E&2)!==0||(E&4)!==0)&&wg(h,l,P),v=v.next}while(v!==g)}Bi(o,l,h);break;case 1:if(!pn&&(Al(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch($){_t(h,l,$)}Bi(o,l,h);break;case 21:Bi(o,l,h);break;case 22:h.mode&1?(pn=(g=pn)||h.memoizedState!==null,Bi(o,l,h),pn=g):Bi(o,l,h);break;default:Bi(o,l,h)}}function M2(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new Y5),l.forEach(function(g){var v=iR.bind(null,o,g);h.has(g)||(h.add(g),g.then(v,v))})}}function zr(o,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var v=h[g];try{var E=o,P=l,$=P;e:for(;$!==null;){switch($.tag){case 5:sn=$.stateNode,Ur=!1;break e;case 3:sn=$.stateNode.containerInfo,Ur=!0;break e;case 4:sn=$.stateNode.containerInfo,Ur=!0;break e}$=$.return}if(sn===null)throw Error(n(160));D2(E,P,v),sn=null,Ur=!1;var W=v.alternate;W!==null&&(W.return=null),v.return=null}catch(X){_t(v,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)O2(l,o),l=l.sibling}function O2(o,l){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(zr(l,o),xs(o),g&4){try{Au(3,o,o.return),Pf(3,o)}catch(Ae){_t(o,o.return,Ae)}try{Au(5,o,o.return)}catch(Ae){_t(o,o.return,Ae)}}break;case 1:zr(l,o),xs(o),g&512&&h!==null&&Al(h,h.return);break;case 5:if(zr(l,o),xs(o),g&512&&h!==null&&Al(h,h.return),o.flags&32){var v=o.stateNode;try{ki(v,"")}catch(Ae){_t(o,o.return,Ae)}}if(g&4&&(v=o.stateNode,v!=null)){var E=o.memoizedProps,P=h!==null?h.memoizedProps:E,$=o.type,W=o.updateQueue;if(o.updateQueue=null,W!==null)try{$==="input"&&E.type==="radio"&&E.name!=null&&Lc(v,E),qc($,P);var X=qc($,E);for(P=0;P<W.length;P+=2){var ue=W[P],de=W[P+1];ue==="style"?zc(v,de):ue==="dangerouslySetInnerHTML"?$c(v,de):ue==="children"?ki(v,de):M(v,ue,de,X)}switch($){case"input":Fc(v,E);break;case"textarea":Ua(v,E);break;case"select":var ce=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!E.multiple;var ve=E.value;ve!=null?Os(v,!!E.multiple,ve,!1):ce!==!!E.multiple&&(E.defaultValue!=null?Os(v,!!E.multiple,E.defaultValue,!0):Os(v,!!E.multiple,E.multiple?[]:"",!1))}v[mu]=E}catch(Ae){_t(o,o.return,Ae)}}break;case 6:if(zr(l,o),xs(o),g&4){if(o.stateNode===null)throw Error(n(162));v=o.stateNode,E=o.memoizedProps;try{v.nodeValue=E}catch(Ae){_t(o,o.return,Ae)}}break;case 3:if(zr(l,o),xs(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Lr(l.containerInfo)}catch(Ae){_t(o,o.return,Ae)}break;case 4:zr(l,o),xs(o);break;case 13:zr(l,o),xs(o),v=o.child,v.flags&8192&&(E=v.memoizedState!==null,v.stateNode.isHidden=E,!E||v.alternate!==null&&v.alternate.memoizedState!==null||(Ag=ct())),g&4&&M2(o);break;case 22:if(ue=h!==null&&h.memoizedState!==null,o.mode&1?(pn=(X=pn)||ue,zr(l,o),pn=X):zr(l,o),xs(o),g&8192){if(X=o.memoizedState!==null,(o.stateNode.isHidden=X)&&!ue&&(o.mode&1)!==0)for(Ee=o,ue=o.child;ue!==null;){for(de=Ee=ue;Ee!==null;){switch(ce=Ee,ve=ce.child,ce.tag){case 0:case 11:case 14:case 15:Au(4,ce,ce.return);break;case 1:Al(ce,ce.return);var Te=ce.stateNode;if(typeof Te.componentWillUnmount=="function"){g=ce,h=ce.return;try{l=g,Te.props=l.memoizedProps,Te.state=l.memoizedState,Te.componentWillUnmount()}catch(Ae){_t(g,h,Ae)}}break;case 5:Al(ce,ce.return);break;case 22:if(ce.memoizedState!==null){V2(de);continue}}ve!==null?(ve.return=ce,Ee=ve):V2(de)}ue=ue.sibling}e:for(ue=null,de=o;;){if(de.tag===5){if(ue===null){ue=de;try{v=de.stateNode,X?(E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):($=de.stateNode,W=de.memoizedProps.style,P=W!=null&&W.hasOwnProperty("display")?W.display:null,$.style.display=Uc("display",P))}catch(Ae){_t(o,o.return,Ae)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=X?"":de.memoizedProps}catch(Ae){_t(o,o.return,Ae)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===o)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===o)break e;for(;de.sibling===null;){if(de.return===null||de.return===o)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:zr(l,o),xs(o),g&4&&M2(o);break;case 21:break;default:zr(l,o),xs(o)}}function xs(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(R2(h)){var g=h;break e}h=h.return}throw Error(n(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(ki(v,""),g.flags&=-33);var E=j2(o);kg(o,E,v);break;case 3:case 4:var P=g.stateNode.containerInfo,$=j2(o);Eg(o,$,P);break;default:throw Error(n(161))}}catch(W){_t(o,o.return,W)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function X5(o,l,h){Ee=o,L2(o)}function L2(o,l,h){for(var g=(o.mode&1)!==0;Ee!==null;){var v=Ee,E=v.child;if(v.tag===22&&g){var P=v.memoizedState!==null||Nf;if(!P){var $=v.alternate,W=$!==null&&$.memoizedState!==null||pn;$=Nf;var X=pn;if(Nf=P,(pn=W)&&!X)for(Ee=v;Ee!==null;)P=Ee,W=P.child,P.tag===22&&P.memoizedState!==null?B2(v):W!==null?(W.return=P,Ee=W):B2(v);for(;E!==null;)Ee=E,L2(E),E=E.sibling;Ee=v,Nf=$,pn=X}F2(o)}else(v.subtreeFlags&8772)!==0&&E!==null?(E.return=v,Ee=E):F2(o)}}function F2(o){for(;Ee!==null;){var l=Ee;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:pn||Pf(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!pn)if(h===null)g.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:$r(l.type,h.memoizedProps);g.componentDidUpdate(v,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&Vb(l,E,g);break;case 3:var P=l.updateQueue;if(P!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Vb(l,P,h)}break;case 5:var $=l.stateNode;if(h===null&&l.flags&4){h=$;var W=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&h.focus();break;case"img":W.src&&(h.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var ue=X.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&Lr(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}pn||l.flags&512&&bg(l)}catch(ce){_t(l,l.return,ce)}}if(l===o){Ee=null;break}if(h=l.sibling,h!==null){h.return=l.return,Ee=h;break}Ee=l.return}}function V2(o){for(;Ee!==null;){var l=Ee;if(l===o){Ee=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Ee=h;break}Ee=l.return}}function B2(o){for(;Ee!==null;){var l=Ee;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Pf(4,l)}catch(W){_t(l,h,W)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var v=l.return;try{g.componentDidMount()}catch(W){_t(l,v,W)}}var E=l.return;try{bg(l)}catch(W){_t(l,E,W)}break;case 5:var P=l.return;try{bg(l)}catch(W){_t(l,P,W)}}}catch(W){_t(l,l.return,W)}if(l===o){Ee=null;break}var $=l.sibling;if($!==null){$.return=l.return,Ee=$;break}Ee=l.return}}var Z5=Math.ceil,Rf=U.ReactCurrentDispatcher,_g=U.ReactCurrentOwner,pr=U.ReactCurrentBatchConfig,Ze=0,Zt=null,Rt=null,on=0,tr=0,Cl=Mi(0),zt=0,Cu=null,Xo=0,jf=0,Tg=0,Iu=null,Fn=null,Ag=0,Il=1/0,Xs=null,Df=!1,Cg=null,$i=null,Mf=!1,Ui=null,Of=0,Su=0,Ig=null,Lf=-1,Ff=0;function An(){return(Ze&6)!==0?ct():Lf!==-1?Lf:Lf=ct()}function zi(o){return(o.mode&1)===0?1:(Ze&2)!==0&&on!==0?on&-on:M5.transition!==null?(Ff===0&&(Ff=Vo()),Ff):(o=Ge,o!==0||(o=window.event,o=o===void 0?16:ru(o.type)),o)}function Hr(o,l,h,g){if(50<Su)throw Su=0,Ig=null,Error(n(185));Ci(o,h,g),((Ze&2)===0||o!==Zt)&&(o===Zt&&((Ze&2)===0&&(jf|=h),zt===4&&Hi(o,on)),Vn(o,g),h===1&&Ze===0&&(l.mode&1)===0&&(Il=ct()+500,hf&&Li()))}function Vn(o,l){var h=o.callbackNode;Vs(o,l);var g=Fo(o,o===Zt?on:0);if(g===0)h!==null&&Zc(h),o.callbackNode=null,o.callbackPriority=0;else if(l=g&-g,o.callbackPriority!==l){if(h!=null&&Zc(h),l===1)o.tag===0?D5(U2.bind(null,o)):Cb(U2.bind(null,o)),N5(function(){(Ze&6)===0&&Li()}),h=null;else{switch(Si(g)){case 1:h=Oo;break;case 4:h=_i;break;case 16:h=ar;break;case 536870912:h=Lh;break;default:h=ar}h=Q2(h,$2.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function $2(o,l){if(Lf=-1,Ff=0,(Ze&6)!==0)throw Error(n(327));var h=o.callbackNode;if(Sl()&&o.callbackNode!==h)return null;var g=Fo(o,o===Zt?on:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||l)l=Vf(o,g);else{l=g;var v=Ze;Ze|=2;var E=H2();(Zt!==o||on!==l)&&(Xs=null,Il=ct()+500,Jo(o,l));do try{tR();break}catch($){z2(o,$)}while(!0);q0(),Rf.current=E,Ze=v,Rt!==null?l=0:(Zt=null,on=0,l=zt)}if(l!==0){if(l===2&&(v=Qn(o),v!==0&&(g=v,l=Sg(o,v))),l===1)throw h=Cu,Jo(o,0),Hi(o,g),Vn(o,ct()),h;if(l===6)Hi(o,g);else{if(v=o.current.alternate,(g&30)===0&&!J5(v)&&(l=Vf(o,g),l===2&&(E=Qn(o),E!==0&&(g=E,l=Sg(o,E))),l===1))throw h=Cu,Jo(o,0),Hi(o,g),Vn(o,ct()),h;switch(o.finishedWork=v,o.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:ea(o,Fn,Xs);break;case 3:if(Hi(o,g),(g&130023424)===g&&(l=Ag+500-ct(),10<l)){if(Fo(o,0)!==0)break;if(v=o.suspendedLanes,(v&g)!==g){An(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=M0(ea.bind(null,o,Fn,Xs),l);break}ea(o,Fn,Xs);break;case 4:if(Hi(o,g),(g&4194240)===g)break;for(l=o.eventTimes,v=-1;0<g;){var P=31-kn(g);E=1<<P,P=l[P],P>v&&(v=P),g&=~E}if(g=v,g=ct()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Z5(g/1960))-g,10<g){o.timeoutHandle=M0(ea.bind(null,o,Fn,Xs),g);break}ea(o,Fn,Xs);break;case 5:ea(o,Fn,Xs);break;default:throw Error(n(329))}}}return Vn(o,ct()),o.callbackNode===h?$2.bind(null,o):null}function Sg(o,l){var h=Iu;return o.current.memoizedState.isDehydrated&&(Jo(o,l).flags|=256),o=Vf(o,l),o!==2&&(l=Fn,Fn=h,l!==null&&Ng(l)),o}function Ng(o){Fn===null?Fn=o:Fn.push.apply(Fn,o)}function J5(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var v=h[g],E=v.getSnapshot;v=v.value;try{if(!Vr(E(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Hi(o,l){for(l&=~Tg,l&=~jf,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-kn(l),g=1<<h;o[h]=-1,l&=~g}}function U2(o){if((Ze&6)!==0)throw Error(n(327));Sl();var l=Fo(o,0);if((l&1)===0)return Vn(o,ct()),null;var h=Vf(o,l);if(o.tag!==0&&h===2){var g=Qn(o);g!==0&&(l=g,h=Sg(o,g))}if(h===1)throw h=Cu,Jo(o,0),Hi(o,l),Vn(o,ct()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,ea(o,Fn,Xs),Vn(o,ct()),null}function Pg(o,l){var h=Ze;Ze|=1;try{return o(l)}finally{Ze=h,Ze===0&&(Il=ct()+500,hf&&Li())}}function Zo(o){Ui!==null&&Ui.tag===0&&(Ze&6)===0&&Sl();var l=Ze;Ze|=1;var h=pr.transition,g=Ge;try{if(pr.transition=null,Ge=1,o)return o()}finally{Ge=g,pr.transition=h,Ze=l,(Ze&6)===0&&Li()}}function Rg(){tr=Cl.current,ht(Cl)}function Jo(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,S5(h)),Rt!==null)for(h=Rt.return;h!==null;){var g=h;switch($0(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&uf();break;case 3:_l(),ht(Mn),ht(dn),eg();break;case 5:Z0(g);break;case 4:_l();break;case 13:ht(xt);break;case 19:ht(xt);break;case 10:G0(g.type._context);break;case 22:case 23:Rg()}h=h.return}if(Zt=o,Rt=o=Wi(o.current,null),on=tr=l,zt=0,Cu=null,Tg=jf=Xo=0,Fn=Iu=null,Ko!==null){for(l=0;l<Ko.length;l++)if(h=Ko[l],g=h.interleaved,g!==null){h.interleaved=null;var v=g.next,E=h.pending;if(E!==null){var P=E.next;E.next=v,g.next=P}h.pending=g}Ko=null}return o}function z2(o,l){do{var h=Rt;try{if(q0(),Ef.current=Af,kf){for(var g=vt.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}kf=!1}if(Qo=0,Xt=Ut=vt=null,bu=!1,Eu=0,_g.current=null,h===null||h.return===null){zt=1,Cu=l,Rt=null;break}e:{var E=o,P=h.return,$=h,W=l;if(l=on,$.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var X=W,ue=$,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var ce=ue.alternate;ce?(ue.updateQueue=ce.updateQueue,ue.memoizedState=ce.memoizedState,ue.lanes=ce.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ve=p2(P);if(ve!==null){ve.flags&=-257,m2(ve,P,$,E,l),ve.mode&1&&f2(E,X,l),l=ve,W=X;var Te=l.updateQueue;if(Te===null){var Ae=new Set;Ae.add(W),l.updateQueue=Ae}else Te.add(W);break e}else{if((l&1)===0){f2(E,X,l),jg();break e}W=Error(n(426))}}else if(mt&&$.mode&1){var Ct=p2(P);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),m2(Ct,P,$,E,l),H0(Tl(W,$));break e}}E=W=Tl(W,$),zt!==4&&(zt=2),Iu===null?Iu=[E]:Iu.push(E),E=P;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var Y=d2(E,W,l);Fb(E,Y);break e;case 1:$=W;var G=E.type,Q=E.stateNode;if((E.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&($i===null||!$i.has(Q)))){E.flags|=65536,l&=-l,E.lanes|=l;var pe=h2(E,$,l);Fb(E,pe);break e}}E=E.return}while(E!==null)}q2(h)}catch(Ie){l=Ie,Rt===h&&h!==null&&(Rt=h=h.return);continue}break}while(!0)}function H2(){var o=Rf.current;return Rf.current=Af,o===null?Af:o}function jg(){(zt===0||zt===3||zt===2)&&(zt=4),Zt===null||(Xo&268435455)===0&&(jf&268435455)===0||Hi(Zt,on)}function Vf(o,l){var h=Ze;Ze|=2;var g=H2();(Zt!==o||on!==l)&&(Xs=null,Jo(o,l));do try{eR();break}catch(v){z2(o,v)}while(!0);if(q0(),Ze=h,Rf.current=g,Rt!==null)throw Error(n(261));return Zt=null,on=0,zt}function eR(){for(;Rt!==null;)W2(Rt)}function tR(){for(;Rt!==null&&!Mh();)W2(Rt)}function W2(o){var l=Y2(o.alternate,o,tr);o.memoizedProps=o.pendingProps,l===null?q2(o):Rt=l,_g.current=null}function q2(o){var l=o;do{var h=l.alternate;if(o=l.return,(l.flags&32768)===0){if(h=G5(h,l,tr),h!==null){Rt=h;return}}else{if(h=K5(h,l),h!==null){h.flags&=32767,Rt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{zt=6,Rt=null;return}}if(l=l.sibling,l!==null){Rt=l;return}Rt=l=o}while(l!==null);zt===0&&(zt=5)}function ea(o,l,h){var g=Ge,v=pr.transition;try{pr.transition=null,Ge=1,nR(o,l,h,g)}finally{pr.transition=v,Ge=g}return null}function nR(o,l,h,g){do Sl();while(Ui!==null);if((Ze&6)!==0)throw Error(n(327));h=o.finishedWork;var v=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var E=h.lanes|h.childLanes;if(at(o,E),o===Zt&&(Rt=Zt=null,on=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Mf||(Mf=!0,Q2(ar,function(){return Sl(),null})),E=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||E){E=pr.transition,pr.transition=null;var P=Ge;Ge=1;var $=Ze;Ze|=4,_g.current=null,Q5(o,h),O2(h,o),E5(j0),Pi=!!R0,j0=R0=null,o.current=h,X5(h),g0(),Ze=$,Ge=P,pr.transition=E}else o.current=h;if(Mf&&(Mf=!1,Ui=o,Of=v),E=o.pendingLanes,E===0&&($i=null),Fh(h.stateNode),Vn(o,ct()),l!==null)for(g=o.onRecoverableError,h=0;h<l.length;h++)v=l[h],g(v.value,{componentStack:v.stack,digest:v.digest});if(Df)throw Df=!1,o=Cg,Cg=null,o;return(Of&1)!==0&&o.tag!==0&&Sl(),E=o.pendingLanes,(E&1)!==0?o===Ig?Su++:(Su=0,Ig=o):Su=0,Li(),null}function Sl(){if(Ui!==null){var o=Si(Of),l=pr.transition,h=Ge;try{if(pr.transition=null,Ge=16>o?16:o,Ui===null)var g=!1;else{if(o=Ui,Ui=null,Of=0,(Ze&6)!==0)throw Error(n(331));var v=Ze;for(Ze|=4,Ee=o.current;Ee!==null;){var E=Ee,P=E.child;if((Ee.flags&16)!==0){var $=E.deletions;if($!==null){for(var W=0;W<$.length;W++){var X=$[W];for(Ee=X;Ee!==null;){var ue=Ee;switch(ue.tag){case 0:case 11:case 15:Au(8,ue,E)}var de=ue.child;if(de!==null)de.return=ue,Ee=de;else for(;Ee!==null;){ue=Ee;var ce=ue.sibling,ve=ue.return;if(P2(ue),ue===X){Ee=null;break}if(ce!==null){ce.return=ve,Ee=ce;break}Ee=ve}}}var Te=E.alternate;if(Te!==null){var Ae=Te.child;if(Ae!==null){Te.child=null;do{var Ct=Ae.sibling;Ae.sibling=null,Ae=Ct}while(Ae!==null)}}Ee=E}}if((E.subtreeFlags&2064)!==0&&P!==null)P.return=E,Ee=P;else e:for(;Ee!==null;){if(E=Ee,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Au(9,E,E.return)}var Y=E.sibling;if(Y!==null){Y.return=E.return,Ee=Y;break e}Ee=E.return}}var G=o.current;for(Ee=G;Ee!==null;){P=Ee;var Q=P.child;if((P.subtreeFlags&2064)!==0&&Q!==null)Q.return=P,Ee=Q;else e:for(P=G;Ee!==null;){if($=Ee,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:Pf(9,$)}}catch(Ie){_t($,$.return,Ie)}if($===P){Ee=null;break e}var pe=$.sibling;if(pe!==null){pe.return=$.return,Ee=pe;break e}Ee=$.return}}if(Ze=v,Li(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Lo,o)}catch{}g=!0}return g}finally{Ge=h,pr.transition=l}}return!1}function G2(o,l,h){l=Tl(h,l),l=d2(o,l,1),o=Vi(o,l,1),l=An(),o!==null&&(Ci(o,1,l),Vn(o,l))}function _t(o,l,h){if(o.tag===3)G2(o,o,h);else for(;l!==null;){if(l.tag===3){G2(l,o,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($i===null||!$i.has(g))){o=Tl(h,o),o=h2(l,o,1),l=Vi(l,o,1),o=An(),l!==null&&(Ci(l,1,o),Vn(l,o));break}}l=l.return}}function rR(o,l,h){var g=o.pingCache;g!==null&&g.delete(l),l=An(),o.pingedLanes|=o.suspendedLanes&h,Zt===o&&(on&h)===h&&(zt===4||zt===3&&(on&130023424)===on&&500>ct()-Ag?Jo(o,0):Tg|=h),Vn(o,l)}function K2(o,l){l===0&&((o.mode&1)===0?l=1:(l=Za,Za<<=1,(Za&130023424)===0&&(Za=4194304)));var h=An();o=Ks(o,l),o!==null&&(Ci(o,l,h),Vn(o,h))}function sR(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),K2(o,h)}function iR(o,l){var h=0;switch(o.tag){case 13:var g=o.stateNode,v=o.memoizedState;v!==null&&(h=v.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),K2(o,h)}var Y2;Y2=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||Mn.current)Ln=!0;else{if((o.lanes&h)===0&&(l.flags&128)===0)return Ln=!1,q5(o,l,h);Ln=(o.flags&131072)!==0}else Ln=!1,mt&&(l.flags&1048576)!==0&&Ib(l,pf,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Sf(o,l),o=l.pendingProps;var v=yl(l,dn.current);kl(l,h),v=rg(null,l,g,o,v,h);var E=sg();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,On(g)?(E=!0,df(l)):E=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Q0(l),v.updater=Cf,l.stateNode=v,v._reactInternals=l,ug(l,g,o,h),l=pg(null,l,g,!0,E,h)):(l.tag=0,mt&&E&&B0(l),Tn(null,l,v,h),l=l.child),l;case 16:g=l.elementType;e:{switch(Sf(o,l),o=l.pendingProps,v=g._init,g=v(g._payload),l.type=g,v=l.tag=aR(g),o=$r(g,o),v){case 0:l=fg(null,l,g,o,h);break e;case 1:l=b2(null,l,g,o,h);break e;case 11:l=g2(null,l,g,o,h);break e;case 14:l=y2(null,l,g,$r(g.type,o),h);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:$r(g,v),fg(o,l,g,v,h);case 1:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:$r(g,v),b2(o,l,g,v,h);case 3:e:{if(E2(l),o===null)throw Error(n(387));g=l.pendingProps,E=l.memoizedState,v=E.element,Lb(o,l),wf(l,g,null,h);var P=l.memoizedState;if(g=P.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){v=Tl(Error(n(423)),l),l=k2(o,l,g,h,v);break e}else if(g!==v){v=Tl(Error(n(424)),l),l=k2(o,l,g,h,v);break e}else for(er=Di(l.stateNode.containerInfo.firstChild),Jn=l,mt=!0,Br=null,h=Mb(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(wl(),g===v){l=Qs(o,l,h);break e}Tn(o,l,g,h)}l=l.child}return l;case 5:return Bb(l),o===null&&z0(l),g=l.type,v=l.pendingProps,E=o!==null?o.memoizedProps:null,P=v.children,D0(g,v)?P=null:E!==null&&D0(g,E)&&(l.flags|=32),w2(o,l),Tn(o,l,P,h),l.child;case 6:return o===null&&z0(l),null;case 13:return _2(o,l,h);case 4:return X0(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=bl(l,null,g,h):Tn(o,l,g,h),l.child;case 11:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:$r(g,v),g2(o,l,g,v,h);case 7:return Tn(o,l,l.pendingProps,h),l.child;case 8:return Tn(o,l,l.pendingProps.children,h),l.child;case 12:return Tn(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(g=l.type._context,v=l.pendingProps,E=l.memoizedProps,P=v.value,ut(yf,g._currentValue),g._currentValue=P,E!==null)if(Vr(E.value,P)){if(E.children===v.children&&!Mn.current){l=Qs(o,l,h);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var $=E.dependencies;if($!==null){P=E.child;for(var W=$.firstContext;W!==null;){if(W.context===g){if(E.tag===1){W=Ys(-1,h&-h),W.tag=2;var X=E.updateQueue;if(X!==null){X=X.shared;var ue=X.pending;ue===null?W.next=W:(W.next=ue.next,ue.next=W),X.pending=W}}E.lanes|=h,W=E.alternate,W!==null&&(W.lanes|=h),K0(E.return,h,l),$.lanes|=h;break}W=W.next}}else if(E.tag===10)P=E.type===l.type?null:E.child;else if(E.tag===18){if(P=E.return,P===null)throw Error(n(341));P.lanes|=h,$=P.alternate,$!==null&&($.lanes|=h),K0(P,h,l),P=E.sibling}else P=E.child;if(P!==null)P.return=E;else for(P=E;P!==null;){if(P===l){P=null;break}if(E=P.sibling,E!==null){E.return=P.return,P=E;break}P=P.return}E=P}Tn(o,l,v.children,h),l=l.child}return l;case 9:return v=l.type,g=l.pendingProps.children,kl(l,h),v=hr(v),g=g(v),l.flags|=1,Tn(o,l,g,h),l.child;case 14:return g=l.type,v=$r(g,l.pendingProps),v=$r(g.type,v),y2(o,l,g,v,h);case 15:return x2(o,l,l.type,l.pendingProps,h);case 17:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:$r(g,v),Sf(o,l),l.tag=1,On(g)?(o=!0,df(l)):o=!1,kl(l,h),c2(l,g,v),ug(l,g,v,h),pg(null,l,g,!0,o,h);case 19:return A2(o,l,h);case 22:return v2(o,l,h)}throw Error(n(156,l.tag))};function Q2(o,l){return Qa(o,l)}function oR(o,l,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(o,l,h,g){return new oR(o,l,h,g)}function Dg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function aR(o){if(typeof o=="function")return Dg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===L)return 11;if(o===re)return 14}return 2}function Wi(o,l){var h=o.alternate;return h===null?(h=mr(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Bf(o,l,h,g,v,E){var P=2;if(g=o,typeof o=="function")Dg(o)&&(P=1);else if(typeof o=="string")P=5;else e:switch(o){case j:return ta(h.children,v,E,l);case T:P=8,v|=8;break;case k:return o=mr(12,h,l,v|2),o.elementType=k,o.lanes=E,o;case O:return o=mr(13,h,l,v),o.elementType=O,o.lanes=E,o;case Z:return o=mr(19,h,l,v),o.elementType=Z,o.lanes=E,o;case te:return $f(h,v,E,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:P=10;break e;case R:P=9;break e;case L:P=11;break e;case re:P=14;break e;case le:P=16,g=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return l=mr(P,h,l,v),l.elementType=o,l.type=g,l.lanes=E,l}function ta(o,l,h,g){return o=mr(7,o,g,l),o.lanes=h,o}function $f(o,l,h,g){return o=mr(22,o,g,l),o.elementType=te,o.lanes=h,o.stateNode={isHidden:!1},o}function Mg(o,l,h){return o=mr(6,o,null,l),o.lanes=h,o}function Og(o,l,h){return l=mr(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function lR(o,l,h,g,v){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Lg(o,l,h,g,v,E,P,$,W){return o=new lR(o,l,h,$,W),l===1?(l=1,E===!0&&(l|=8)):l=0,E=mr(3,null,null,l),o.current=E,E.stateNode=o,E.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q0(E),o}function cR(o,l,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:g==null?null:""+g,children:o,containerInfo:l,implementation:h}}function X2(o){if(!o)return Oi;o=o._reactInternals;e:{if(Rr(o)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(On(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(On(h))return Tb(o,h,l)}return l}function Z2(o,l,h,g,v,E,P,$,W){return o=Lg(h,g,!0,o,v,E,P,$,W),o.context=X2(null),h=o.current,g=An(),v=zi(h),E=Ys(g,v),E.callback=l??null,Vi(h,E,v),o.current.lanes=v,Ci(o,v,g),Vn(o,g),o}function Uf(o,l,h,g){var v=l.current,E=An(),P=zi(v);return h=X2(h),l.context===null?l.context=h:l.pendingContext=h,l=Ys(E,P),l.payload={element:o},g=g===void 0?null:g,g!==null&&(l.callback=g),o=Vi(v,l,P),o!==null&&(Hr(o,v,P,E),vf(o,v,P)),P}function zf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function J2(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function Fg(o,l){J2(o,l),(o=o.alternate)&&J2(o,l)}function uR(){return null}var eE=typeof reportError=="function"?reportError:function(o){console.error(o)};function Vg(o){this._internalRoot=o}Hf.prototype.render=Vg.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));Uf(o,l,null,null)},Hf.prototype.unmount=Vg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Zo(function(){Uf(null,o,null,null)}),l[Hs]=null}};function Hf(o){this._internalRoot=o}Hf.prototype.unstable_scheduleHydration=function(o){if(o){var l=zh();o={blockedOn:null,target:o,priority:l};for(var h=0;h<ds.length&&l!==0&&l<ds[h].priority;h++);ds.splice(h,0,o),h===0&&qh(o)}};function Bg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Wf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function tE(){}function dR(o,l,h,g,v){if(v){if(typeof g=="function"){var E=g;g=function(){var X=zf(P);E.call(X)}}var P=Z2(l,g,o,0,null,!1,!1,"",tE);return o._reactRootContainer=P,o[Hs]=P.current,fu(o.nodeType===8?o.parentNode:o),Zo(),P}for(;v=o.lastChild;)o.removeChild(v);if(typeof g=="function"){var $=g;g=function(){var X=zf(W);$.call(X)}}var W=Lg(o,0,!1,null,null,!1,!1,"",tE);return o._reactRootContainer=W,o[Hs]=W.current,fu(o.nodeType===8?o.parentNode:o),Zo(function(){Uf(l,W,h,g)}),W}function qf(o,l,h,g,v){var E=h._reactRootContainer;if(E){var P=E;if(typeof v=="function"){var $=v;v=function(){var W=zf(P);$.call(W)}}Uf(l,P,o,v)}else P=dR(h,l,o,v,g);return zf(P)}$h=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=Ti(l.pendingLanes);h!==0&&(Ii(l,h|1),Vn(l,ct()),(Ze&6)===0&&(Il=ct()+500,Li()))}break;case 13:Zo(function(){var g=Ks(o,1);if(g!==null){var v=An();Hr(g,o,1,v)}}),Fg(o,1)}},Ja=function(o){if(o.tag===13){var l=Ks(o,134217728);if(l!==null){var h=An();Hr(l,o,134217728,h)}Fg(o,134217728)}},Uh=function(o){if(o.tag===13){var l=zi(o),h=Ks(o,l);if(h!==null){var g=An();Hr(h,o,l,g)}Fg(o,l)}},zh=function(){return Ge},Hh=function(o,l){var h=Ge;try{return Ge=o,l()}finally{Ge=h}},Ha=function(o,l,h){switch(l){case"input":if(Fc(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==o&&g.form===o.form){var v=cf(g);if(!v)throw Error(n(90));Ft(g),Fc(g,v)}}}break;case"textarea":Ua(o,h);break;case"select":l=h.value,l!=null&&Os(o,!!h.multiple,l,!1)}},Ro=Pg,Kc=Zo;var hR={usingClientEntryPoint:!1,Events:[gu,ml,cf,cs,Gc,Pg]},Nu={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fR={bundleType:Nu.bundleType,version:Nu.version,rendererPackageName:Nu.rendererPackageName,rendererConfig:Nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Xc(o),o===null?null:o.stateNode},findFiberByHostInstance:Nu.findFiberByHostInstance||uR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Lo=Gf.inject(fR),Yn=Gf}catch{}}return Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR,Bn.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bg(l))throw Error(n(200));return cR(o,l,null,h)},Bn.createRoot=function(o,l){if(!Bg(o))throw Error(n(299));var h=!1,g="",v=eE;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=Lg(o,1,!1,null,null,h,!1,g,v),o[Hs]=l.current,fu(o.nodeType===8?o.parentNode:o),new Vg(l)},Bn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=Xc(l),o=o===null?null:o.stateNode,o},Bn.flushSync=function(o){return Zo(o)},Bn.hydrate=function(o,l,h){if(!Wf(l))throw Error(n(200));return qf(null,o,l,!0,h)},Bn.hydrateRoot=function(o,l,h){if(!Bg(o))throw Error(n(405));var g=h!=null&&h.hydratedSources||null,v=!1,E="",P=eE;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),l=Z2(l,null,o,1,h??null,v,!1,E,P),o[Hs]=l.current,fu(o),g)for(o=0;o<g.length;o++)h=g[o],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new Hf(l)},Bn.render=function(o,l,h){if(!Wf(l))throw Error(n(200));return qf(null,o,l,!1,h)},Bn.unmountComponentAtNode=function(o){if(!Wf(o))throw Error(n(40));return o._reactRootContainer?(Zo(function(){qf(null,null,o,!1,function(){o._reactRootContainer=null,o[Hs]=null})}),!0):!1},Bn.unstable_batchedUpdates=Pg,Bn.unstable_renderSubtreeIntoContainer=function(o,l,h,g){if(!Wf(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return qf(o,l,h,!1,g)},Bn.version="18.3.1-next-f1338f8080-20240426",Bn}var cE;function _R(){if(cE)return zg.exports;cE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zg.exports=kR(),zg.exports}var uE;function TR(){if(uE)return Kf;uE=1;var t=_R();return Kf.createRoot=t.createRoot,Kf.hydrateRoot=t.hydrateRoot,Kf}var AR=TR();const CR=kA(AR);var Ru={},dE;function IR(){if(dE)return Ru;dE=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.parse=a,Ru.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function a(x,w){const _=new i,C=x.length;if(C<2)return _;const N=(w==null?void 0:w.decode)||p;let I=0;do{const S=x.indexOf("=",I);if(S===-1)break;const M=x.indexOf(";",I),U=M===-1?C:M;if(S>U){I=x.lastIndexOf(";",S-1)+1;continue}const H=c(x,I,S),B=d(x,S,H),j=x.slice(H,B);if(_[j]===void 0){let T=c(x,S+1,U),k=d(x,U,T);const D=N(x.slice(T,k));_[j]=D}I=U+1}while(I<C);return _}function c(x,w,_){do{const C=x.charCodeAt(w);if(C!==32&&C!==9)return w}while(++w<_);return _}function d(x,w,_){for(;w>_;){const C=x.charCodeAt(--w);if(C!==32&&C!==9)return w+1}return _}function f(x,w,_){const C=(_==null?void 0:_.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const N=C(w);if(!e.test(N))throw new TypeError(`argument val is invalid: ${w}`);let I=x+"="+N;if(!_)return I;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);I+="; Max-Age="+_.maxAge}if(_.domain){if(!n.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);I+="; Domain="+_.domain}if(_.path){if(!r.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);I+="; Path="+_.path}if(_.expires){if(!y(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);I+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(I+="; HttpOnly"),_.secure&&(I+="; Secure"),_.partitioned&&(I+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return I}function p(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function y(x){return s.call(x)==="[object Date]"}return Ru}IR();var hE="popstate";function SR(t={}){function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Uy("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hd(s)}return PR(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NR(){return Math.random().toString(36).substring(2,10)}function fE(t,e){return{usr:t.state,key:t.key,idx:e}}function Uy(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?gc(e):e,state:n,key:e&&e.key||r||NR()}}function hd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function gc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function PR(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c="POP",d=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function y(){c="POP";let N=p(),I=N==null?null:N-f;f=N,d&&d({action:c,location:C.location,delta:I})}function x(N,I){c="PUSH";let S=Uy(C.location,N,I);f=p()+1;let M=fE(S,f),U=C.createHref(S);try{a.pushState(M,"",U)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(U)}i&&d&&d({action:c,location:C.location,delta:1})}function w(N,I){c="REPLACE";let S=Uy(C.location,N,I);f=p();let M=fE(S,f),U=C.createHref(S);a.replaceState(M,"",U),i&&d&&d({action:c,location:C.location,delta:0})}function _(N){return RR(N)}let C={get action(){return c},get location(){return t(s,a)},listen(N){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(hE,y),d=N,()=>{s.removeEventListener(hE,y),d=null}},createHref(N){return e(s,N)},createURL:_,encodeLocation(N){let I=_(N);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:x,replace:w,go(N){return a.go(N)}};return C}function RR(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:hd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function _A(t,e,n="/"){return jR(t,e,n,!1)}function jR(t,e,n,r){let s=typeof e=="string"?gc(e):e,i=ui(s.pathname||"/",n);if(i==null)return null;let a=TA(t);DR(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let f=WR(i);c=zR(a[d],f,r)}return c}function TA(t,e=[],n=[],r=""){let s=(i,a,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};d.relativePath.startsWith("/")&&(gt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=oi([r,d.relativePath]),p=n.concat(d);i.children&&i.children.length>0&&(gt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),TA(i.children,e,p,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:$R(f,i.index),routesMeta:p})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let d of AA(i.path))s(i,a,d)}),e}function AA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=AA(r.join("/")),c=[];return c.push(...a.map(d=>d===""?i:[i,d].join("/"))),s&&c.push(...a),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function DR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var MR=/^:[\w-]+$/,OR=3,LR=2,FR=1,VR=10,BR=-2,pE=t=>t==="*";function $R(t,e){let n=t.split("/"),r=n.length;return n.some(pE)&&(r+=BR),e&&(r+=LR),n.filter(s=>!pE(s)).reduce((s,i)=>s+(MR.test(i)?OR:i===""?FR:VR),r)}function UR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zR(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",y=jp({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),x=d.route;if(!y&&f&&n&&!r[r.length-1].route.index&&(y=jp({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),a.push({params:s,pathname:oi([i,y.pathname]),pathnameBase:YR(oi([i,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(i=oi([i,y.pathnameBase]))}return a}function jp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=HR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:y},x)=>{if(p==="*"){let _=c[x]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const w=c[x];return y&&!w?f[p]=void 0:f[p]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:a,pattern:t}}function HR(t,e=!1,n=!0){Zr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function WR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?gc(t):t;return{pathname:n?n.startsWith("/")?n:GR(n,e):e,search:QR(r),hash:XR(s)}}function GR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ev(t){let e=KR(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function kv(t,e,n,r=!1){let s;typeof t=="string"?s=gc(t):(s={...t},gt(!s.pathname||!s.pathname.includes("?"),qg("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),qg("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),qg("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let y=e.length-1;if(!r&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}c=y>=0?e[y]:"/"}let d=qR(s,c),f=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var oi=t=>t.join("/").replace(/\/\/+/g,"/"),YR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var CA=["POST","PUT","PATCH","DELETE"];new Set(CA);var JR=["GET",...CA];new Set(JR);var yc=V.createContext(null);yc.displayName="DataRouter";var dm=V.createContext(null);dm.displayName="DataRouterState";var IA=V.createContext({isTransitioning:!1});IA.displayName="ViewTransition";var e3=V.createContext(new Map);e3.displayName="Fetchers";var t3=V.createContext(null);t3.displayName="Await";var is=V.createContext(null);is.displayName="Navigation";var eh=V.createContext(null);eh.displayName="Location";var Ir=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var _v=V.createContext(null);_v.displayName="RouteError";function n3(t,{relative:e}={}){gt(xc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=V.useContext(is),{hash:s,pathname:i,search:a}=th(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:oi([n,i])),r.createHref({pathname:c,search:a,hash:s})}function xc(){return V.useContext(eh)!=null}function js(){return gt(xc(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(eh).location}var SA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NA(t){V.useContext(is).static||V.useLayoutEffect(t)}function bo(){let{isDataRoute:t}=V.useContext(Ir);return t?y3():r3()}function r3(){gt(xc(),"useNavigate() may be used only in the context of a <Router> component.");let t=V.useContext(yc),{basename:e,navigator:n}=V.useContext(is),{matches:r}=V.useContext(Ir),{pathname:s}=js(),i=JSON.stringify(Ev(r)),a=V.useRef(!1);return NA(()=>{a.current=!0}),V.useCallback((d,f={})=>{if(Zr(a.current,SA),!a.current)return;if(typeof d=="number"){n.go(d);return}let p=kv(d,JSON.parse(i),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:oi([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,i,s,t])}var s3=V.createContext(null);function i3(t){let e=V.useContext(Ir).outlet;return e&&V.createElement(s3.Provider,{value:t},e)}function hm(){let{matches:t}=V.useContext(Ir),e=t[t.length-1];return e?e.params:{}}function th(t,{relative:e}={}){let{matches:n}=V.useContext(Ir),{pathname:r}=js(),s=JSON.stringify(Ev(n));return V.useMemo(()=>kv(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function o3(t,e){return PA(t,e)}function PA(t,e,n,r){var I;gt(xc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=V.useContext(is),{matches:i}=V.useContext(Ir),a=i[i.length-1],c=a?a.params:{},d=a?a.pathname:"/",f=a?a.pathnameBase:"/",p=a&&a.route;{let S=p&&p.path||"";RA(d,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let y=js(),x;if(e){let S=typeof e=="string"?gc(e):e;gt(f==="/"||((I=S.pathname)==null?void 0:I.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=y;let w=x.pathname||"/",_=w;if(f!=="/"){let S=f.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(S.length).join("/")}let C=_A(t,{pathname:_});Zr(p||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Zr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=d3(C&&C.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:oi([f,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:oi([f,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&N?V.createElement(eh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function a3(){let t=g3(),e=ZR(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:i},"ErrorBoundary")," or"," ",V.createElement("code",{style:i},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,a)}var l3=V.createElement(a3,null),c3=class extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?V.createElement(Ir.Provider,{value:this.props.routeContext},V.createElement(_v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function u3({routeContext:t,match:e,children:n}){let r=V.useContext(yc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ir.Provider,{value:t},n)}function d3(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let d=s.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);gt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let a=!1,c=-1;if(n)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:y}=n,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let y,x=!1,w=null,_=null;n&&(y=i&&f.route.id?i[f.route.id]:void 0,w=f.route.errorElement||l3,a&&(c<0&&p===0?(RA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):c===p&&(x=!0,_=f.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,p+1)),N=()=>{let I;return y?I=w:x?I=_:f.route.Component?I=V.createElement(f.route.Component,null):f.route.element?I=f.route.element:I=d,V.createElement(u3,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:I})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?V.createElement(c3,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}function Tv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h3(t){let e=V.useContext(yc);return gt(e,Tv(t)),e}function f3(t){let e=V.useContext(dm);return gt(e,Tv(t)),e}function p3(t){let e=V.useContext(Ir);return gt(e,Tv(t)),e}function Av(t){let e=p3(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function m3(){return Av("useRouteId")}function g3(){var r;let t=V.useContext(_v),e=f3("useRouteError"),n=Av("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function y3(){let{router:t}=h3("useNavigate"),e=Av("useNavigate"),n=V.useRef(!1);return NA(()=>{n.current=!0}),V.useCallback(async(s,i={})=>{Zr(n.current,SA),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var mE={};function RA(t,e,n){!e&&!mE[t]&&(mE[t]=!0,Zr(!1,n))}V.memo(x3);function x3({routes:t,future:e,state:n}){return PA(t,void 0,n,e)}function jA({to:t,replace:e,state:n,relative:r}){gt(xc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=V.useContext(is);Zr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=V.useContext(Ir),{pathname:a}=js(),c=bo(),d=kv(t,Ev(i),a,r==="path"),f=JSON.stringify(d);return V.useEffect(()=>{c(JSON.parse(f),{replace:e,state:n,relative:r})},[c,f,r,e,n]),null}function v3(t){return i3(t.context)}function $n(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w3({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){gt(!xc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=gc(n));let{pathname:d="/",search:f="",hash:p="",state:y=null,key:x="default"}=n,w=V.useMemo(()=>{let _=ui(d,a);return _==null?null:{location:{pathname:_,search:f,hash:p,state:y,key:x},navigationType:r}},[a,d,f,p,y,x,r]);return Zr(w!=null,`<Router basename="${a}"> is not able to match the URL "${d}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:V.createElement(is.Provider,{value:c},V.createElement(eh.Provider,{children:e,value:w}))}function b3({children:t,location:e}){return o3(zy(t),e)}function zy(t,e=[]){let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,zy(r.props.children,i));return}gt(r.type===$n,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=zy(r.props.children,i)),n.push(a)}),n}var mp="get",gp="application/x-www-form-urlencoded";function fm(t){return t!=null&&typeof t.tagName=="string"}function E3(t){return fm(t)&&t.tagName.toLowerCase()==="button"}function k3(t){return fm(t)&&t.tagName.toLowerCase()==="form"}function _3(t){return fm(t)&&t.tagName.toLowerCase()==="input"}function T3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A3(t,e){return t.button===0&&(!e||e==="_self")&&!T3(t)}var Yf=null;function C3(){if(Yf===null)try{new FormData(document.createElement("form"),0),Yf=!1}catch{Yf=!0}return Yf}var I3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gg(t){return t!=null&&!I3.has(t)?(Zr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gp}"`),null):t}function S3(t,e){let n,r,s,i,a;if(k3(t)){let c=t.getAttribute("action");r=c?ui(c,e):null,n=t.getAttribute("method")||mp,s=Gg(t.getAttribute("enctype"))||gp,i=new FormData(t)}else if(E3(t)||_3(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?ui(d,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||mp,s=Gg(t.getAttribute("formenctype"))||Gg(c.getAttribute("enctype"))||gp,i=new FormData(c,t),!C3()){let{name:f,type:p,value:y}=t;if(p==="image"){let x=f?`${f}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else f&&i.append(f,y)}}else{if(fm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mp,r=null,s=gp,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function Cv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function N3(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function R3(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await N3(i,n);return a.links?a.links():[]}return[]}));return O3(r.flat(1).filter(P3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function gE(t,e,n,r,s,i){let a=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,c=(d,f)=>{var p;return n[f].pathname!==d.pathname||((p=n[f].route.path)==null?void 0:p.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return i==="assets"?e.filter((d,f)=>a(d,f)||c(d,f)):i==="data"?e.filter((d,f)=>{var y;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(a(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function j3(t,e,{includeHydrateFallback:n}={}){return D3(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function D3(t){return[...new Set(t)]}function M3(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function O3(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(M3(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var L3=new Set([100,101,204,205]);function F3(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ui(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function DA(){let t=V.useContext(yc);return Cv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function V3(){let t=V.useContext(dm);return Cv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Iv=V.createContext(void 0);Iv.displayName="FrameworkContext";function MA(){let t=V.useContext(Iv);return Cv(t,"You must render this element inside a <HydratedRouter> element"),t}function B3(t,e){let n=V.useContext(Iv),[r,s]=V.useState(!1),[i,a]=V.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:y}=e,x=V.useRef(null);V.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let C=I=>{I.forEach(S=>{a(S.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return x.current&&N.observe(x.current),()=>{N.disconnect()}}},[t]),V.useEffect(()=>{if(r){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[r]);let w=()=>{s(!0)},_=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,x,{}]:[i,x,{onFocus:ju(c,w),onBlur:ju(d,_),onMouseEnter:ju(f,w),onMouseLeave:ju(p,_),onTouchStart:ju(y,w)}]:[!1,x,{}]}function ju(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $3({page:t,...e}){let{router:n}=DA(),r=V.useMemo(()=>_A(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?V.createElement(z3,{page:t,matches:r,...e}):null}function U3(t){let{manifest:e,routeModules:n}=MA(),[r,s]=V.useState([]);return V.useEffect(()=>{let i=!1;return R3(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function z3({page:t,matches:e,...n}){let r=js(),{manifest:s,routeModules:i}=MA(),{basename:a}=DA(),{loaderData:c,matches:d}=V3(),f=V.useMemo(()=>gE(t,e,d,s,r,"data"),[t,e,d,s,r]),p=V.useMemo(()=>gE(t,e,d,s,r,"assets"),[t,e,d,s,r]),y=V.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,C=!1;if(e.forEach(I=>{var M;let S=s.routes[I.route.id];!S||!S.hasLoader||(!f.some(U=>U.route.id===I.route.id)&&I.route.id in c&&((M=i[I.route.id])!=null&&M.shouldRevalidate)||S.hasClientLoader?C=!0:_.add(I.route.id))}),_.size===0)return[];let N=F3(t,a);return C&&_.size>0&&N.searchParams.set("_routes",e.filter(I=>_.has(I.route.id)).map(I=>I.route.id).join(",")),[N.pathname+N.search]},[a,c,r,s,f,e,t,i]),x=V.useMemo(()=>j3(p,s),[p,s]),w=U3(p);return V.createElement(V.Fragment,null,y.map(_=>V.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),x.map(_=>V.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),w.map(({key:_,link:C})=>V.createElement("link",{key:_,...C})))}function H3(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var OA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OA&&(window.__reactRouterVersion="7.6.2")}catch{}function W3({basename:t,children:e,window:n}){let r=V.useRef();r.current==null&&(r.current=SR({window:n,v5Compat:!0}));let s=r.current,[i,a]=V.useState({action:s.action,location:s.location}),c=V.useCallback(d=>{V.startTransition(()=>a(d))},[a]);return V.useLayoutEffect(()=>s.listen(c),[s,c]),V.createElement(w3,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var LA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=V.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:c,target:d,to:f,preventScrollReset:p,viewTransition:y,...x},w){let{basename:_}=V.useContext(is),C=typeof f=="string"&&LA.test(f),N,I=!1;if(typeof f=="string"&&C&&(N=f,OA))try{let k=new URL(window.location.href),D=f.startsWith("//")?new URL(k.protocol+f):new URL(f),R=ui(D.pathname,_);D.origin===k.origin&&R!=null?f=R+D.search+D.hash:I=!0}catch{Zr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=n3(f,{relative:s}),[M,U,H]=B3(r,x),B=Y3(f,{replace:a,state:c,target:d,preventScrollReset:p,relative:s,viewTransition:y});function j(k){e&&e(k),k.defaultPrevented||B(k)}let T=V.createElement("a",{...x,...H,href:N||S,onClick:I||i?e:j,ref:H3(w,U),target:d,"data-discover":!C&&n==="render"?"true":void 0});return M&&!C?V.createElement(V.Fragment,null,T,V.createElement($3,{page:S})):T});Ce.displayName="Link";var q3=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:c,children:d,...f},p){let y=th(a,{relative:f.relative}),x=js(),w=V.useContext(dm),{navigator:_,basename:C}=V.useContext(is),N=w!=null&&e8(y)&&c===!0,I=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,S=x.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(S=S.toLowerCase(),M=M?M.toLowerCase():null,I=I.toLowerCase()),M&&C&&(M=ui(M,C)||M);const U=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let H=S===I||!s&&S.startsWith(I)&&S.charAt(U)==="/",B=M!=null&&(M===I||!s&&M.startsWith(I)&&M.charAt(I.length)==="/"),j={isActive:H,isPending:B,isTransitioning:N},T=H?e:void 0,k;typeof r=="function"?k=r(j):k=[r,H?"active":null,B?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(j):i;return V.createElement(Ce,{...f,"aria-current":T,className:k,ref:p,style:D,to:a,viewTransition:c},typeof d=="function"?d(j):d)});q3.displayName="NavLink";var G3=V.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=mp,action:c,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:y,...x},w)=>{let _=Z3(),C=J3(c,{relative:f}),N=a.toLowerCase()==="get"?"get":"post",I=typeof c=="string"&&LA.test(c),S=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let U=M.nativeEvent.submitter,H=(U==null?void 0:U.getAttribute("formmethod"))||a;_(U||M.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:s,state:i,relative:f,preventScrollReset:p,viewTransition:y})};return V.createElement("form",{ref:w,method:N,action:C,onSubmit:r?d:S,...x,"data-discover":!I&&t==="render"?"true":void 0})});G3.displayName="Form";function K3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FA(t){let e=V.useContext(yc);return gt(e,K3(t)),e}function Y3(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let c=bo(),d=js(),f=th(t,{relative:i});return V.useCallback(p=>{if(A3(p,e)){p.preventDefault();let y=n!==void 0?n:hd(d)===hd(f);c(t,{replace:y,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[d,c,f,n,r,e,t,s,i,a])}var Q3=0,X3=()=>`__${String(++Q3)}__`;function Z3(){let{router:t}=FA("useSubmit"),{basename:e}=V.useContext(is),n=m3();return V.useCallback(async(r,s={})=>{let{action:i,method:a,encType:c,formData:d,body:f}=S3(r,e);if(s.navigate===!1){let p=s.fetcherKey||X3();await t.fetch(p,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||a,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||a,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function J3(t,{relative:e}={}){let{basename:n}=V.useContext(is),r=V.useContext(Ir);gt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...th(t||".",{relative:e})},a=js();if(t==null){i.search=a.search;let c=new URLSearchParams(i.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(y=>y).forEach(y=>c.append("index",y));let p=c.toString();i.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:oi([n,i.pathname])),hd(i)}function e8(t,e={}){let n=V.useContext(IA);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=FA("useViewTransitionState"),s=th(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ui(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=ui(n.nextLocation.pathname,r)||n.nextLocation.pathname;return jp(s.pathname,a)!=null||jp(s.pathname,i)!=null}[...L3];/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=()=>{};var yE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},n8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],d=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},BA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,p=i>>2,y=(i&3)<<4|c>>4;let x=(c&15)<<2|f>>6,w=f&63;d||(w=64,a||(x=64)),r.push(n[p],n[y],n[x],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||f==null||y==null)throw new r8;const x=i<<2|c>>4;if(r.push(x),f!==64){const w=c<<4&240|f>>2;if(r.push(w),y!==64){const _=f<<6&192|y;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s8=function(t){const e=VA(t);return BA.encodeByteArray(e,!0)},Dp=function(t){return s8(t).replace(/\./g,"")},$A=function(t){try{return BA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=()=>i8().__FIREBASE_DEFAULTS__,a8=()=>{if(typeof process>"u"||typeof yE>"u")return;const t=yE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$A(t[1]);return e&&JSON.parse(e)},pm=()=>{try{return t8()||o8()||a8()||l8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UA=t=>{var e,n;return(n=(e=pm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},c8=t=>{const e=UA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zA=()=>{var t;return(t=pm())===null||t===void 0?void 0:t.config},HA=t=>{var e;return(e=pm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t){return t.endsWith(".cloudworkstations.dev")}async function WA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dp(JSON.stringify(n)),Dp(JSON.stringify(a)),""].join(".")}const Xu={};function h8(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xu))Xu[e]?t.emulator.push(e):t.prod.push(e);return t}function f8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xE=!1;function qA(t,e){if(typeof window>"u"||typeof document>"u"||!nh(window.location.host)||Xu[t]===e||Xu[t]||xE)return;Xu[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",i=h8().prod.length>0;function a(){const x=document.getElementById(r);x&&x.remove()}function c(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{xE=!0,a()},x}function p(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=f8(r),w=n("text"),_=document.getElementById(w)||document.createElement("span"),C=n("learnmore"),N=document.getElementById(C)||document.createElement("a"),I=n("preprendIcon"),S=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const M=x.element;c(M),p(N,C);const U=f();d(S,I),M.append(S,_,N,U),document.body.appendChild(M)}i?(_.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function m8(){var t;const e=(t=pm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function x8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v8(){const t=En();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w8(){return!m8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b8(){try{return typeof indexedDB=="object"}catch{return!1}}function E8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8="FirebaseError";class Ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=k8,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rh.prototype.create)}}class rh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?_8(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Ds(s,c,r)}}function _8(t,e){return t.replace(T8,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const T8=/\{\$([^}]+)}/g;function A8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ya(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(vE(i)&&vE(a)){if(!ya(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function C8(t,e){const n=new I8(t,e);return n.subscribe.bind(n)}class I8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S8(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Kg),s.error===void 0&&(s.error=Kg),s.complete===void 0&&(s.complete=Kg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){return t&&t._delegate?t._delegate:t}class xa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new u8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R8(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:P8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function P8(t){return t===ra?void 0:t}function R8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new N8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const D8={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},M8=We.INFO,O8={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},L8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=O8[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sv{constructor(e){this.name=e,this._logLevel=M8,this._logHandler=L8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const F8=(t,e)=>e.some(n=>t instanceof n);let wE,bE;function V8(){return wE||(wE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B8(){return bE||(bE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GA=new WeakMap,Hy=new WeakMap,KA=new WeakMap,Yg=new WeakMap,Nv=new WeakMap;function $8(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(no(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&GA.set(n,t)}).catch(()=>{}),Nv.set(e,t),e}function U8(t){if(Hy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Hy.set(t,e)}let Wy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return no(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function z8(t){Wy=t(Wy)}function H8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qg(this),e,...n);return KA.set(r,e.sort?e.sort():[e]),no(r)}:B8().includes(t)?function(...e){return t.apply(Qg(this),e),no(GA.get(this))}:function(...e){return no(t.apply(Qg(this),e))}}function W8(t){return typeof t=="function"?H8(t):(t instanceof IDBTransaction&&U8(t),F8(t,V8())?new Proxy(t,Wy):t)}function no(t){if(t instanceof IDBRequest)return $8(t);if(Yg.has(t))return Yg.get(t);const e=W8(t);return e!==t&&(Yg.set(t,e),Nv.set(e,t)),e}const Qg=t=>Nv.get(t);function q8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=no(a);return r&&a.addEventListener("upgradeneeded",d=>{r(no(a.result),d.oldVersion,d.newVersion,no(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const G8=["get","getKey","getAll","getAllKeys","count"],K8=["put","add","delete","clear"],Xg=new Map;function EE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=K8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||G8.includes(n)))return;const i=async function(a,...c){const d=this.transaction(a,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),s&&d.done]))[0]};return Xg.set(e,i),i}z8(t=>({...t,get:(e,n,r)=>EE(e,n)||t.get(e,n,r),has:(e,n)=>!!EE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Q8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qy="@firebase/app",kE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Sv("@firebase/app"),X8="@firebase/app-compat",Z8="@firebase/analytics-compat",J8="@firebase/analytics",ej="@firebase/app-check-compat",tj="@firebase/app-check",nj="@firebase/auth",rj="@firebase/auth-compat",sj="@firebase/database",ij="@firebase/data-connect",oj="@firebase/database-compat",aj="@firebase/functions",lj="@firebase/functions-compat",cj="@firebase/installations",uj="@firebase/installations-compat",dj="@firebase/messaging",hj="@firebase/messaging-compat",fj="@firebase/performance",pj="@firebase/performance-compat",mj="@firebase/remote-config",gj="@firebase/remote-config-compat",yj="@firebase/storage",xj="@firebase/storage-compat",vj="@firebase/firestore",wj="@firebase/ai",bj="@firebase/firestore-compat",Ej="firebase",kj="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="[DEFAULT]",_j={[qy]:"fire-core",[X8]:"fire-core-compat",[J8]:"fire-analytics",[Z8]:"fire-analytics-compat",[tj]:"fire-app-check",[ej]:"fire-app-check-compat",[nj]:"fire-auth",[rj]:"fire-auth-compat",[sj]:"fire-rtdb",[ij]:"fire-data-connect",[oj]:"fire-rtdb-compat",[aj]:"fire-fn",[lj]:"fire-fn-compat",[cj]:"fire-iid",[uj]:"fire-iid-compat",[dj]:"fire-fcm",[hj]:"fire-fcm-compat",[fj]:"fire-perf",[pj]:"fire-perf-compat",[mj]:"fire-rc",[gj]:"fire-rc-compat",[yj]:"fire-gcs",[xj]:"fire-gcs-compat",[vj]:"fire-fst",[bj]:"fire-fst-compat",[wj]:"fire-vertex","fire-js":"fire-js",[Ej]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Map,Tj=new Map,Ky=new Map;function _E(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ql(t){const e=t.name;if(Ky.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Ky.set(e,t);for(const n of Mp.values())_E(n,t);for(const n of Tj.values())_E(n,t);return!0}function Pv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function br(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ro=new rh("app","Firebase",Aj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=kj;function YA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gy,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ro.create("bad-app-name",{appName:String(s)});if(n||(n=zA()),!n)throw ro.create("no-options");const i=Mp.get(s);if(i){if(ya(n,i.options)&&ya(r,i.config))return i;throw ro.create("duplicate-app",{appName:s})}const a=new j8(s);for(const d of Ky.values())a.addComponent(d);const c=new Cj(n,r,a);return Mp.set(s,c),c}function QA(t=Gy){const e=Mp.get(t);if(!e&&t===Gy&&zA())return YA();if(!e)throw ro.create("no-app",{appName:t});return e}function so(t,e,n){var r;let s=(r=_j[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(c.join(" "));return}Ql(new xa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="firebase-heartbeat-database",Sj=1,fd="firebase-heartbeat-store";let Zg=null;function XA(){return Zg||(Zg=q8(Ij,Sj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fd)}catch(n){console.warn(n)}}}}).catch(t=>{throw ro.create("idb-open",{originalErrorMessage:t.message})})),Zg}async function Nj(t){try{const n=(await XA()).transaction(fd),r=await n.objectStore(fd).get(ZA(t));return await n.done,r}catch(e){if(e instanceof Ds)di.warn(e.message);else{const n=ro.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function TE(t,e){try{const r=(await XA()).transaction(fd,"readwrite");await r.objectStore(fd).put(e,ZA(t)),await r.done}catch(n){if(n instanceof Ds)di.warn(n.message);else{const r=ro.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function ZA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=1024,Rj=30;class jj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=AE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Rj){const a=Oj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=AE(),{heartbeatsToSend:r,unsentEntries:s}=Dj(this._heartbeatsCache.heartbeats),i=Dp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return di.warn(n),""}}}function AE(){return new Date().toISOString().substring(0,10)}function Dj(t,e=Pj){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),CE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),CE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Mj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b8()?E8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Nj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return TE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return TE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function CE(t){return Dp(JSON.stringify({version:2,heartbeats:t})).length}function Oj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){Ql(new xa("platform-logger",e=>new Y8(e),"PRIVATE")),Ql(new xa("heartbeat",e=>new jj(e),"PRIVATE")),so(qy,kE,t),so(qy,kE,"esm2017"),so("fire-js","")}Lj("");var Fj="firebase",Vj="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so(Fj,Vj,"app");function Rv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function JA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bj=JA,eC=new rh("auth","Firebase",JA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new Sv("@firebase/auth");function $j(t,...e){Op.logLevel<=We.WARN&&Op.warn(`Auth (${vc}): ${t}`,...e)}function yp(t,...e){Op.logLevel<=We.ERROR&&Op.error(`Auth (${vc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,...e){throw jv(t,...e)}function Es(t,...e){return jv(t,...e)}function tC(t,e,n){const r=Object.assign(Object.assign({},Bj()),{[e]:n});return new rh("auth","Firebase",r).create(e,{appName:t.name})}function ai(t){return tC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eC.create(t,...e)}function De(t,e,...n){if(!t)throw jv(e,...n)}function si(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yp(e),new Error(e)}function hi(t,e){t||si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Uj(){return IE()==="http:"||IE()==="https:"}function IE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uj()||y8()||"connection"in navigator)?navigator.onLine:!0}function Hj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.shortDelay=e,this.longDelay=n,hi(n>e,"Short delay should be less than long delay!"),this.isMobile=p8()||x8()}get(){return zj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e){hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gj=new ih(3e4,6e4);function Eo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ko(t,e,n,r,s={}){return rC(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=sh(Object.assign({key:t.config.apiKey},a)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},i);return g8()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&nh(t.emulatorConfig.host)&&(f.credentials="include"),nC.fetch()(await sC(t,t.config.apiHost,n,c),f)})}async function rC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wj),e);try{const s=new Yj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Qf(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qf(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Qf(t,"email-already-in-use",a);if(d==="USER_DISABLED")throw Qf(t,"user-disabled",a);const p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw tC(t,p,f);Jr(t,p)}}catch(s){if(s instanceof Ds)throw s;Jr(t,"network-request-failed",{message:String(s)})}}async function oh(t,e,n,r,s={}){const i=await ko(t,e,n,r,s);return"mfaPendingCredential"in i&&Jr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function sC(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Dv(t.config,s):`${t.config.apiScheme}://${s}`;return qj.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Kj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Es(this.auth,"network-request-failed")),Gj.get())})}}function Qf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Es(t,e,r);return s.customData._tokenResponse=n,s}function SE(t){return t!==void 0&&t.enterprise!==void 0}class Qj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Kj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xj(t,e){return ko(t,"GET","/v2/recaptchaConfig",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t,e){return ko(t,"POST","/v1/accounts:delete",e)}async function Lp(t,e){return ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jj(t,e=!1){const n=Kt(t),r=await n.getIdToken(e),s=Mv(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zu(Jg(s.auth_time)),issuedAtTime:Zu(Jg(s.iat)),expirationTime:Zu(Jg(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jg(t){return Number(t)*1e3}function Mv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yp("JWT malformed, contained fewer than 3 sections"),null;try{const s=$A(n);return s?JSON.parse(s):(yp("Failed to decode base64 JWT payload"),null)}catch(s){return yp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function NE(t){const e=Mv(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ds&&e9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function e9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pd(t,Lp(n,{idToken:r}));De(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iC(i.providerUserInfo):[],c=r9(t.providerData,a),d=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?f:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Qy(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function n9(t){const e=Kt(t);await Fp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iC(t){return t.map(e=>{var{providerId:n}=e,r=Rv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(t,e){const n=await rC(t,{},async()=>{const r=sh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await sC(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",nC.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function i9(t,e){return ko(t,"POST","/v2/accounts:revokeToken",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await s9(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Hl;return r&&(De(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(De(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hl,this.toJSON())}_performRefresh(){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Rv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new t9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pd(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jj(this,e)}reload(){return n9(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(br(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await pd(this,Zj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,d,f,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,I=(f=n.createdAt)!==null&&f!==void 0?f:void 0,S=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:M,emailVerified:U,isAnonymous:H,providerData:B,stsTokenManager:j}=n;De(M&&j,e,"internal-error");const T=Hl.fromJSON(this.name,j);De(typeof M=="string",e,"internal-error"),Gi(y,e.name),Gi(x,e.name),De(typeof U=="boolean",e,"internal-error"),De(typeof H=="boolean",e,"internal-error"),Gi(w,e.name),Gi(_,e.name),Gi(C,e.name),Gi(N,e.name),Gi(I,e.name),Gi(S,e.name);const k=new Kr({uid:M,auth:e,email:x,emailVerified:U,displayName:y,isAnonymous:H,photoURL:_,phoneNumber:w,tenantId:C,stsTokenManager:T,createdAt:I,lastLoginAt:S});return B&&Array.isArray(B)&&(k.providerData=B.map(D=>Object.assign({},D))),N&&(k._redirectEventId=N),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Hl;s.updateFromServerResponse(n);const i=new Kr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fp(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iC(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Hl;c.updateFromIdToken(r);const d=new Kr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=new Map;function ii(t){hi(t instanceof Function,"Expected a class definition");let e=PE.get(t);return e?(hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oC.type="NONE";const RE=oC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t,e,n){return`firebase:${t}:${e}:${n}`}class Wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xp(this.userKey,s.apiKey,i),this.fullPersistenceKey=xp("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lp(this.auth,{idToken:e}).catch(()=>{});return n?Kr._fromGetAccountInfoResponse(this.auth,n,e):null}return Kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wl(ii(RE),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let i=s[0]||ii(RE);const a=xp(r,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(a);if(p){let y;if(typeof p=="string"){const x=await Lp(e,{idToken:p}).catch(()=>{});if(!x)break;y=await Kr._fromGetAccountInfoResponse(e,x,p)}else y=Kr._fromJSON(e,p);f!==i&&(c=y),i=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Wl(i,e,r):(i=d[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==i)try{await f._remove(a)}catch{}})),new Wl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hC(e))return"Blackberry";if(fC(e))return"Webos";if(lC(e))return"Safari";if((e.includes("chrome/")||cC(e))&&!e.includes("edge/"))return"Chrome";if(dC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aC(t=En()){return/firefox\//i.test(t)}function lC(t=En()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cC(t=En()){return/crios\//i.test(t)}function uC(t=En()){return/iemobile/i.test(t)}function dC(t=En()){return/android/i.test(t)}function hC(t=En()){return/blackberry/i.test(t)}function fC(t=En()){return/webos/i.test(t)}function Ov(t=En()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function o9(t=En()){var e;return Ov(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a9(){return v8()&&document.documentMode===10}function pC(t=En()){return Ov(t)||dC(t)||fC(t)||hC(t)||/windows phone/i.test(t)||uC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e=[]){let n;switch(t){case"Browser":n=jE(En());break;case"Worker":n=`${jE(En())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const d=e(i);a(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e={}){return ko(t,"GET","/v2/passwordPolicy",Eo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=6;class d9{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:u9,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DE(this),this.idTokenSubscription=new DE(this),this.beforeStateQueue=new l9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lp(this,{idToken:e}),r=await Kr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(br(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&(d!=null&&d.user)&&(s=d.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Hj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(br(this.app))return Promise.reject(ai(this));const n=e?Kt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return br(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return br(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await c9(this),n=new d9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await i9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ii(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{a=!0,d()}}else{const d=e.addObserver(n);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$j(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Na(t){return Kt(t)}class DE{constructor(e){this.auth=e,this.observer=null,this.addObserver=C8(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f9(t){mm=t}function gC(t){return mm.loadJS(t)}function p9(){return mm.recaptchaEnterpriseScript}function m9(){return mm.gapiScript}function g9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class y9{constructor(){this.enterprise=new x9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class x9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const v9="recaptcha-enterprise",yC="NO_RECAPTCHA";class w9{constructor(e){this.type=v9,this.auth=Na(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{Xj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new Qj(d);return i.tenantId==null?i._agentRecaptchaConfig=f:i._tenantRecaptchaConfigs[i.tenantId]=f,a(f.siteKey)}}).catch(d=>{c(d)})})}function s(i,a,c){const d=window.grecaptcha;SE(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(f=>{a(f)}).catch(()=>{a(yC)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new y9().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&SE(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=p9();d.length!==0&&(d+=c),gC(d).then(()=>{s(c,i,a)}).catch(f=>{a(f)})}}).catch(c=>{a(c)})})}}async function ME(t,e,n,r=!1,s=!1){const i=new w9(t);let a;if(s)a=yC;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Xy(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ME(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ME(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(t,e){const n=Pv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ya(i,e??{}))return s;Jr(s,"already-initialized")}return n.initialize({options:e})}function E9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k9(t,e,n){const r=Na(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=xC(e),{host:a,port:c}=_9(e),d=c===null?"":`:${c}`,f={url:`${i}//${a}${d}/`},p=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(ya(f,r.config.emulator)&&ya(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,nh(a)?(WA(`${i}//${a}${d}`),qA("Auth",!0)):T9()}function xC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _9(t){const e=xC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:OE(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:OE(a)}}}function OE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function T9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,n){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}async function A9(t,e){return ko(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(t,e){return oh(t,"POST","/v1/accounts:signInWithPassword",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I9(t,e){return oh(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}async function S9(t,e){return oh(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends Lv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new md(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new md(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(e,n,"signInWithPassword",C9);case"emailLink":return I9(e,{email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xy(e,r,"signUpPassword",A9);case"emailLink":return S9(e,{idToken:n,email:this._email,oobCode:this._password});default:Jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t,e){return oh(t,"POST","/v1/accounts:signInWithIdp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="http://localhost";class va extends Lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Rv(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new va(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ql(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ql(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ql(e,n)}buildRequest(){const e={requestUri:N9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R9(t){const e=Hu(Wu(t)).link,n=e?Hu(Wu(e)).deep_link_id:null,r=Hu(Wu(t)).deep_link_id;return(r?Hu(Wu(r)).link:null)||r||n||e||t}class Fv{constructor(e){var n,r,s,i,a,c;const d=Hu(Wu(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(r=d.oobCode)!==null&&r!==void 0?r:null,y=P9((s=d.mode)!==null&&s!==void 0?s:null);De(f&&p&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=p,this.continueUrl=(i=d.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=d.lang)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=R9(e);try{return new Fv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.providerId=wc.PROVIDER_ID}static credential(e,n){return md._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fv.parseLink(n);return De(r,"argument-error"),md._fromEmailAndCode(e,r.code,r.tenantId)}}wc.PROVIDER_ID="password";wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends vC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends ah{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zi.credential(n,r)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends ah{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends ah{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return eo.credential(n,r)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e){return oh(t,"POST","/v1/accounts:signUp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kr._fromIdTokenResponse(e,r,s),a=LE(r);return new wa({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=LE(r);return new wa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function LE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Ds{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vp(e,n,r,s)}}function wC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vp._fromErrorAndOperation(t,i,e,r):i})}async function D9(t,e,n=!1){const r=await pd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(t,e,n=!1){const{auth:r}=t;if(br(r.app))return Promise.reject(ai(r));const s="reauthenticate";try{const i=await pd(t,wC(r,s,e,t),n);De(i.idToken,r,"internal-error");const a=Mv(i.idToken);De(a,r,"internal-error");const{sub:c}=a;return De(t.uid===c,r,"user-mismatch"),wa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(t,e,n=!1){if(br(t.app))return Promise.reject(ai(t));const r="signIn",s=await wC(t,r,e),i=await wa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function O9(t,e){return bC(Na(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(t){const e=Na(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function L9(t,e,n){if(br(t.app))return Promise.reject(ai(t));const r=Na(t),a=await Xy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",j9).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&EC(t),d}),c=await wa._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function F9(t,e,n){return br(t.app)?Promise.reject(ai(t)):O9(Kt(t),wc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&EC(t),r})}function V9(t,e,n,r){return Kt(t).onIdTokenChanged(e,n,r)}function B9(t,e,n){return Kt(t).beforeAuthStateChanged(e,n)}function $9(t,e,n,r){return Kt(t).onAuthStateChanged(e,n,r)}function U9(t){return Kt(t).signOut()}const Bp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bp,"1"),this.storage.removeItem(Bp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=1e3,H9=10;class _C extends kC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);a9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,H9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},z9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_C.type="LOCAL";const W9=_C;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC extends kC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TC.type="SESSION";const AC=TC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async f=>f(n.origin,i)),d=await q9(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,d)=>{const f=Vv("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function K9(t){ks().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function Y9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function X9(){return CC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebaseLocalStorageDb",Z9=1,$p="firebaseLocalStorage",SC="fbase_key";class lh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ym(t,e){return t.transaction([$p],e?"readwrite":"readonly").objectStore($p)}function J9(){const t=indexedDB.deleteDatabase(IC);return new lh(t).toPromise()}function Zy(){const t=indexedDB.open(IC,Z9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($p,{keyPath:SC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($p)?e(r):(r.close(),await J9(),e(await Zy()))})})}async function FE(t,e,n){const r=ym(t,!0).put({[SC]:e,value:n});return new lh(r).toPromise()}async function e7(t,e){const n=ym(t,!1).get(e),r=await new lh(n).toPromise();return r===void 0?null:r.value}function VE(t,e){const n=ym(t,!0).delete(e);return new lh(n).toPromise()}const t7=800,n7=3;class NC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>n7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(X9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Y9(),!this.activeServiceWorker)return;this.sender=new G9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zy();return await FE(e,Bp,"1"),await VE(e,Bp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>FE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>e7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>VE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ym(s,!1).getAll();return new lh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NC.type="LOCAL";const r7=NC;new ih(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t,e){return e?ii(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends Lv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function i7(t){return bC(t.auth,new Bv(t),t.bypassAuthState)}function o7(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),M9(n,new Bv(t),t.bypassAuthState)}async function a7(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),D9(n,new Bv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i7;case"linkViaPopup":case"linkViaRedirect":return a7;case"reauthViaPopup":case"reauthViaRedirect":return o7;default:Jr(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=new ih(2e3,1e4);class Ol extends PC{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=Vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l7.get())};e()}}Ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7="pendingRedirect",vp=new Map;class u7 extends PC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vp.get(this.auth._key());if(!e){try{const r=await d7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vp.set(this.auth._key(),e)}return this.bypassAuthState||vp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d7(t,e){const n=p7(e),r=f7(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function h7(t,e){vp.set(t._key(),e)}function f7(t){return ii(t._redirectPersistence)}function p7(t){return xp(c7,t.config.apiKey,t.name)}async function m7(t,e,n=!1){if(br(t.app))return Promise.reject(ai(t));const r=Na(t),s=s7(r,e),a=await new u7(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7=10*60*1e3;class y7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g7&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(e))}saveEventToCache(e){this.cachedEventUids.add(BE(e)),this.lastProcessedEventTime=Date.now()}}function BE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(t,e={}){return ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b7=/^https?/;async function E7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await v7(t);for(const n of e)try{if(k7(n))return}catch{}Jr(t,"unauthorized-domain")}function k7(t){const e=Yy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!b7.test(n))return!1;if(w7.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new ih(3e4,6e4);function $E(){const t=ks().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function T7(t){return new Promise((e,n)=>{var r,s,i;function a(){$E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$E(),n(Es(t,"network-request-failed"))},timeout:_7.get()})}if(!((s=(r=ks().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ks().gapi)===null||i===void 0)&&i.load)a();else{const c=g9("iframefcb");return ks()[c]=()=>{gapi.load?a():n(Es(t,"network-request-failed"))},gC(`${m9()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw wp=null,e})}let wp=null;function A7(t){return wp=wp||T7(t),wp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=new ih(5e3,15e3),I7="__/auth/iframe",S7="emulator/auth/iframe",N7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R7(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dv(e,S7):`https://${t.config.authDomain}/${I7}`,r={apiKey:e.apiKey,appName:t.name,v:vc},s=P7.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${sh(r).slice(1)}`}async function j7(t){const e=await A7(t),n=ks().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:R7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N7,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Es(t,"network-request-failed"),c=ks().setTimeout(()=>{i(a)},C7.get());function d(){ks().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M7=500,O7=600,L7="_blank",F7="http://localhost";class UE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V7(t,e,n,r=M7,s=O7){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},D7),{width:r.toString(),height:s.toString(),top:i,left:a}),f=En().toLowerCase();n&&(c=cC(f)?L7:n),aC(f)&&(e=e||F7,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[w,_])=>`${x}${w}=${_},`,"");if(o9(f)&&c!=="_self")return B7(e||"",c),new UE(null);const y=window.open(e||"",c,p);De(y,t,"popup-blocked");try{y.focus()}catch{}return new UE(y)}function B7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="__/auth/handler",U7="emulator/auth/handler",z7=encodeURIComponent("fac");async function zE(t,e,n,r,s,i){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vc,eventId:s};if(e instanceof vC){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",A8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))a[p]=y}if(e instanceof ah){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${z7}=${encodeURIComponent(d)}`:"";return`${H7(t)}?${sh(c).slice(1)}${f}`}function H7({config:t}){return t.emulator?Dv(t,U7):`https://${t.authDomain}/${$7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="webStorageSupport";class W7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AC,this._completeRedirectFn=m7,this._overrideRedirectResult=h7}async _openPopup(e,n,r,s){var i;hi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await zE(e,n,r,Yy(),s);return V7(e,a,Vv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await zE(e,n,r,Yy(),s);return K9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(hi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await j7(e),r=new y7(e);return n.register("authEvent",s=>(De(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ey,{type:ey},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ey];a!==void 0&&n(!!a),Jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=E7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pC()||lC()||Ov()}}const q7=W7;var HE="@firebase/auth",WE="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y7(t){Ql(new xa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;De(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mC(t)},f=new h9(r,s,i,d);return E9(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ql(new xa("auth-internal",e=>{const n=Na(e.getProvider("auth").getImmediate());return(r=>new G7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),so(HE,WE,K7(t)),so(HE,WE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=5*60,X7=HA("authIdTokenMaxAge")||Q7;let qE=null;const Z7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>X7)return;const s=n==null?void 0:n.token;qE!==s&&(qE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function J7(t=QA()){const e=Pv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=b9(t,{popupRedirectResolver:q7,persistence:[r7,W9,AC]}),r=HA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=Z7(i.toString());B9(n,a,()=>a(n.currentUser)),V9(n,c=>a(c))}}const s=UA("auth");return s&&k9(n,`http://${s}`),n}function eD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}f9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Es("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",eD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y7("Browser");var GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,jC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,T){function k(){}k.prototype=T.prototype,j.D=T.prototype,j.prototype=new k,j.prototype.constructor=j,j.C=function(D,R,L){for(var O=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)O[Z-2]=arguments[Z];return T.prototype[R].apply(D,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,T,k){k||(k=0);var D=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)D[R]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(R=0;16>R;++R)D[R]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=j.g[0],k=j.g[1],R=j.g[2];var L=j.g[3],O=T+(L^k&(R^L))+D[0]+3614090360&4294967295;T=k+(O<<7&4294967295|O>>>25),O=L+(R^T&(k^R))+D[1]+3905402710&4294967295,L=T+(O<<12&4294967295|O>>>20),O=R+(k^L&(T^k))+D[2]+606105819&4294967295,R=L+(O<<17&4294967295|O>>>15),O=k+(T^R&(L^T))+D[3]+3250441966&4294967295,k=R+(O<<22&4294967295|O>>>10),O=T+(L^k&(R^L))+D[4]+4118548399&4294967295,T=k+(O<<7&4294967295|O>>>25),O=L+(R^T&(k^R))+D[5]+1200080426&4294967295,L=T+(O<<12&4294967295|O>>>20),O=R+(k^L&(T^k))+D[6]+2821735955&4294967295,R=L+(O<<17&4294967295|O>>>15),O=k+(T^R&(L^T))+D[7]+4249261313&4294967295,k=R+(O<<22&4294967295|O>>>10),O=T+(L^k&(R^L))+D[8]+1770035416&4294967295,T=k+(O<<7&4294967295|O>>>25),O=L+(R^T&(k^R))+D[9]+2336552879&4294967295,L=T+(O<<12&4294967295|O>>>20),O=R+(k^L&(T^k))+D[10]+4294925233&4294967295,R=L+(O<<17&4294967295|O>>>15),O=k+(T^R&(L^T))+D[11]+2304563134&4294967295,k=R+(O<<22&4294967295|O>>>10),O=T+(L^k&(R^L))+D[12]+1804603682&4294967295,T=k+(O<<7&4294967295|O>>>25),O=L+(R^T&(k^R))+D[13]+4254626195&4294967295,L=T+(O<<12&4294967295|O>>>20),O=R+(k^L&(T^k))+D[14]+2792965006&4294967295,R=L+(O<<17&4294967295|O>>>15),O=k+(T^R&(L^T))+D[15]+1236535329&4294967295,k=R+(O<<22&4294967295|O>>>10),O=T+(R^L&(k^R))+D[1]+4129170786&4294967295,T=k+(O<<5&4294967295|O>>>27),O=L+(k^R&(T^k))+D[6]+3225465664&4294967295,L=T+(O<<9&4294967295|O>>>23),O=R+(T^k&(L^T))+D[11]+643717713&4294967295,R=L+(O<<14&4294967295|O>>>18),O=k+(L^T&(R^L))+D[0]+3921069994&4294967295,k=R+(O<<20&4294967295|O>>>12),O=T+(R^L&(k^R))+D[5]+3593408605&4294967295,T=k+(O<<5&4294967295|O>>>27),O=L+(k^R&(T^k))+D[10]+38016083&4294967295,L=T+(O<<9&4294967295|O>>>23),O=R+(T^k&(L^T))+D[15]+3634488961&4294967295,R=L+(O<<14&4294967295|O>>>18),O=k+(L^T&(R^L))+D[4]+3889429448&4294967295,k=R+(O<<20&4294967295|O>>>12),O=T+(R^L&(k^R))+D[9]+568446438&4294967295,T=k+(O<<5&4294967295|O>>>27),O=L+(k^R&(T^k))+D[14]+3275163606&4294967295,L=T+(O<<9&4294967295|O>>>23),O=R+(T^k&(L^T))+D[3]+4107603335&4294967295,R=L+(O<<14&4294967295|O>>>18),O=k+(L^T&(R^L))+D[8]+1163531501&4294967295,k=R+(O<<20&4294967295|O>>>12),O=T+(R^L&(k^R))+D[13]+2850285829&4294967295,T=k+(O<<5&4294967295|O>>>27),O=L+(k^R&(T^k))+D[2]+4243563512&4294967295,L=T+(O<<9&4294967295|O>>>23),O=R+(T^k&(L^T))+D[7]+1735328473&4294967295,R=L+(O<<14&4294967295|O>>>18),O=k+(L^T&(R^L))+D[12]+2368359562&4294967295,k=R+(O<<20&4294967295|O>>>12),O=T+(k^R^L)+D[5]+4294588738&4294967295,T=k+(O<<4&4294967295|O>>>28),O=L+(T^k^R)+D[8]+2272392833&4294967295,L=T+(O<<11&4294967295|O>>>21),O=R+(L^T^k)+D[11]+1839030562&4294967295,R=L+(O<<16&4294967295|O>>>16),O=k+(R^L^T)+D[14]+4259657740&4294967295,k=R+(O<<23&4294967295|O>>>9),O=T+(k^R^L)+D[1]+2763975236&4294967295,T=k+(O<<4&4294967295|O>>>28),O=L+(T^k^R)+D[4]+1272893353&4294967295,L=T+(O<<11&4294967295|O>>>21),O=R+(L^T^k)+D[7]+4139469664&4294967295,R=L+(O<<16&4294967295|O>>>16),O=k+(R^L^T)+D[10]+3200236656&4294967295,k=R+(O<<23&4294967295|O>>>9),O=T+(k^R^L)+D[13]+681279174&4294967295,T=k+(O<<4&4294967295|O>>>28),O=L+(T^k^R)+D[0]+3936430074&4294967295,L=T+(O<<11&4294967295|O>>>21),O=R+(L^T^k)+D[3]+3572445317&4294967295,R=L+(O<<16&4294967295|O>>>16),O=k+(R^L^T)+D[6]+76029189&4294967295,k=R+(O<<23&4294967295|O>>>9),O=T+(k^R^L)+D[9]+3654602809&4294967295,T=k+(O<<4&4294967295|O>>>28),O=L+(T^k^R)+D[12]+3873151461&4294967295,L=T+(O<<11&4294967295|O>>>21),O=R+(L^T^k)+D[15]+530742520&4294967295,R=L+(O<<16&4294967295|O>>>16),O=k+(R^L^T)+D[2]+3299628645&4294967295,k=R+(O<<23&4294967295|O>>>9),O=T+(R^(k|~L))+D[0]+4096336452&4294967295,T=k+(O<<6&4294967295|O>>>26),O=L+(k^(T|~R))+D[7]+1126891415&4294967295,L=T+(O<<10&4294967295|O>>>22),O=R+(T^(L|~k))+D[14]+2878612391&4294967295,R=L+(O<<15&4294967295|O>>>17),O=k+(L^(R|~T))+D[5]+4237533241&4294967295,k=R+(O<<21&4294967295|O>>>11),O=T+(R^(k|~L))+D[12]+1700485571&4294967295,T=k+(O<<6&4294967295|O>>>26),O=L+(k^(T|~R))+D[3]+2399980690&4294967295,L=T+(O<<10&4294967295|O>>>22),O=R+(T^(L|~k))+D[10]+4293915773&4294967295,R=L+(O<<15&4294967295|O>>>17),O=k+(L^(R|~T))+D[1]+2240044497&4294967295,k=R+(O<<21&4294967295|O>>>11),O=T+(R^(k|~L))+D[8]+1873313359&4294967295,T=k+(O<<6&4294967295|O>>>26),O=L+(k^(T|~R))+D[15]+4264355552&4294967295,L=T+(O<<10&4294967295|O>>>22),O=R+(T^(L|~k))+D[6]+2734768916&4294967295,R=L+(O<<15&4294967295|O>>>17),O=k+(L^(R|~T))+D[13]+1309151649&4294967295,k=R+(O<<21&4294967295|O>>>11),O=T+(R^(k|~L))+D[4]+4149444226&4294967295,T=k+(O<<6&4294967295|O>>>26),O=L+(k^(T|~R))+D[11]+3174756917&4294967295,L=T+(O<<10&4294967295|O>>>22),O=R+(T^(L|~k))+D[2]+718787259&4294967295,R=L+(O<<15&4294967295|O>>>17),O=k+(L^(R|~T))+D[9]+3951481745&4294967295,j.g[0]=j.g[0]+T&4294967295,j.g[1]=j.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,j.g[2]=j.g[2]+R&4294967295,j.g[3]=j.g[3]+L&4294967295}r.prototype.u=function(j,T){T===void 0&&(T=j.length);for(var k=T-this.blockSize,D=this.B,R=this.h,L=0;L<T;){if(R==0)for(;L<=k;)s(this,j,L),L+=this.blockSize;if(typeof j=="string"){for(;L<T;)if(D[R++]=j.charCodeAt(L++),R==this.blockSize){s(this,D),R=0;break}}else for(;L<T;)if(D[R++]=j[L++],R==this.blockSize){s(this,D),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var T=1;T<j.length-8;++T)j[T]=0;var k=8*this.o;for(T=j.length-8;T<j.length;++T)j[T]=k&255,k/=256;for(this.u(j),j=Array(16),T=k=0;4>T;++T)for(var D=0;32>D;D+=8)j[k++]=this.g[T]>>>D&255;return j};function i(j,T){var k=c;return Object.prototype.hasOwnProperty.call(k,j)?k[j]:k[j]=T(j)}function a(j,T){this.h=T;for(var k=[],D=!0,R=j.length-1;0<=R;R--){var L=j[R]|0;D&&L==T||(k[R]=L,D=!1)}this.g=k}var c={};function d(j){return-128<=j&&128>j?i(j,function(T){return new a([T|0],0>T?-1:0)}):new a([j|0],0>j?-1:0)}function f(j){if(isNaN(j)||!isFinite(j))return y;if(0>j)return N(f(-j));for(var T=[],k=1,D=0;j>=k;D++)T[D]=j/k|0,k*=4294967296;return new a(T,0)}function p(j,T){if(j.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(j.charAt(0)=="-")return N(p(j.substring(1),T));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(T,8)),D=y,R=0;R<j.length;R+=8){var L=Math.min(8,j.length-R),O=parseInt(j.substring(R,R+L),T);8>L?(L=f(Math.pow(T,L)),D=D.j(L).add(f(O))):(D=D.j(k),D=D.add(f(O)))}return D}var y=d(0),x=d(1),w=d(16777216);t=a.prototype,t.m=function(){if(C(this))return-N(this).m();for(var j=0,T=1,k=0;k<this.g.length;k++){var D=this.i(k);j+=(0<=D?D:4294967296+D)*T,T*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(_(this))return"0";if(C(this))return"-"+N(this).toString(j);for(var T=f(Math.pow(j,6)),k=this,D="";;){var R=U(k,T).g;k=I(k,R.j(T));var L=((0<k.g.length?k.g[0]:k.h)>>>0).toString(j);if(k=R,_(k))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function _(j){if(j.h!=0)return!1;for(var T=0;T<j.g.length;T++)if(j.g[T]!=0)return!1;return!0}function C(j){return j.h==-1}t.l=function(j){return j=I(this,j),C(j)?-1:_(j)?0:1};function N(j){for(var T=j.g.length,k=[],D=0;D<T;D++)k[D]=~j.g[D];return new a(k,~j.h).add(x)}t.abs=function(){return C(this)?N(this):this},t.add=function(j){for(var T=Math.max(this.g.length,j.g.length),k=[],D=0,R=0;R<=T;R++){var L=D+(this.i(R)&65535)+(j.i(R)&65535),O=(L>>>16)+(this.i(R)>>>16)+(j.i(R)>>>16);D=O>>>16,L&=65535,O&=65535,k[R]=O<<16|L}return new a(k,k[k.length-1]&-2147483648?-1:0)};function I(j,T){return j.add(N(T))}t.j=function(j){if(_(this)||_(j))return y;if(C(this))return C(j)?N(this).j(N(j)):N(N(this).j(j));if(C(j))return N(this.j(N(j)));if(0>this.l(w)&&0>j.l(w))return f(this.m()*j.m());for(var T=this.g.length+j.g.length,k=[],D=0;D<2*T;D++)k[D]=0;for(D=0;D<this.g.length;D++)for(var R=0;R<j.g.length;R++){var L=this.i(D)>>>16,O=this.i(D)&65535,Z=j.i(R)>>>16,re=j.i(R)&65535;k[2*D+2*R]+=O*re,S(k,2*D+2*R),k[2*D+2*R+1]+=L*re,S(k,2*D+2*R+1),k[2*D+2*R+1]+=O*Z,S(k,2*D+2*R+1),k[2*D+2*R+2]+=L*Z,S(k,2*D+2*R+2)}for(D=0;D<T;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=T;D<2*T;D++)k[D]=0;return new a(k,0)};function S(j,T){for(;(j[T]&65535)!=j[T];)j[T+1]+=j[T]>>>16,j[T]&=65535,T++}function M(j,T){this.g=j,this.h=T}function U(j,T){if(_(T))throw Error("division by zero");if(_(j))return new M(y,y);if(C(j))return T=U(N(j),T),new M(N(T.g),N(T.h));if(C(T))return T=U(j,N(T)),new M(N(T.g),T.h);if(30<j.g.length){if(C(j)||C(T))throw Error("slowDivide_ only works with positive integers.");for(var k=x,D=T;0>=D.l(j);)k=H(k),D=H(D);var R=B(k,1),L=B(D,1);for(D=B(D,2),k=B(k,2);!_(D);){var O=L.add(D);0>=O.l(j)&&(R=R.add(k),L=O),D=B(D,1),k=B(k,1)}return T=I(j,R.j(T)),new M(R,T)}for(R=y;0<=j.l(T);){for(k=Math.max(1,Math.floor(j.m()/T.m())),D=Math.ceil(Math.log(k)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=f(k),O=L.j(T);C(O)||0<O.l(j);)k-=D,L=f(k),O=L.j(T);_(L)&&(L=x),R=R.add(L),j=I(j,O)}return new M(R,j)}t.A=function(j){return U(this,j).h},t.and=function(j){for(var T=Math.max(this.g.length,j.g.length),k=[],D=0;D<T;D++)k[D]=this.i(D)&j.i(D);return new a(k,this.h&j.h)},t.or=function(j){for(var T=Math.max(this.g.length,j.g.length),k=[],D=0;D<T;D++)k[D]=this.i(D)|j.i(D);return new a(k,this.h|j.h)},t.xor=function(j){for(var T=Math.max(this.g.length,j.g.length),k=[],D=0;D<T;D++)k[D]=this.i(D)^j.i(D);return new a(k,this.h^j.h)};function H(j){for(var T=j.g.length+1,k=[],D=0;D<T;D++)k[D]=j.i(D)<<1|j.i(D-1)>>>31;return new a(k,j.h)}function B(j,T){var k=T>>5;T%=32;for(var D=j.g.length-k,R=[],L=0;L<D;L++)R[L]=0<T?j.i(L+k)>>>T|j.i(L+k+1)<<32-T:j.i(L+k);return new a(R,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jC=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,io=a}).apply(typeof GE<"u"?GE:typeof self<"u"?self:typeof window<"u"?window:{});var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DC,qu,MC,bp,Jy,OC,LC,FC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,b,A){return m==Array.prototype||m==Object.prototype||(m[b]=A.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xf=="object"&&Xf];for(var b=0;b<m.length;++b){var A=m[b];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(m,b){if(b)e:{var A=r;m=m.split(".");for(var F=0;F<m.length-1;F++){var K=m[F];if(!(K in A))break e;A=A[K]}m=m[m.length-1],F=A[m],b=b(F),b!=F&&b!=null&&e(A,m,{configurable:!0,writable:!0,value:b})}}function i(m,b){m instanceof String&&(m+="");var A=0,F=!1,K={next:function(){if(!F&&A<m.length){var ee=A++;return{value:b(ee,m[ee]),done:!1}}return F=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(m){return m||function(){return i(this,function(b,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(m){var b=typeof m;return b=b!="object"?b:m?Array.isArray(m)?"array":b:"null",b=="array"||b=="object"&&typeof m.length=="number"}function f(m){var b=typeof m;return b=="object"&&m!=null||b=="function"}function p(m,b,A){return m.call.apply(m.bind,arguments)}function y(m,b,A){if(!m)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,F),m.apply(b,K)}}return function(){return m.apply(b,arguments)}}function x(m,b,A){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,x.apply(null,arguments)}function w(m,b){var A=Array.prototype.slice.call(arguments,1);return function(){var F=A.slice();return F.push.apply(F,arguments),m.apply(this,F)}}function _(m,b){function A(){}A.prototype=b.prototype,m.aa=b.prototype,m.prototype=new A,m.prototype.constructor=m,m.Qb=function(F,K,ee){for(var ge=Array(arguments.length-2),it=2;it<arguments.length;it++)ge[it-2]=arguments[it];return b.prototype[K].apply(F,ge)}}function C(m){const b=m.length;if(0<b){const A=Array(b);for(let F=0;F<b;F++)A[F]=m[F];return A}return[]}function N(m,b){for(let A=1;A<arguments.length;A++){const F=arguments[A];if(d(F)){const K=m.length||0,ee=F.length||0;m.length=K+ee;for(let ge=0;ge<ee;ge++)m[K+ge]=F[ge]}else m.push(F)}}class I{constructor(b,A){this.i=b,this.j=A,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function S(m){return/^[\s\xa0]*$/.test(m)}function M(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function U(m){return U[" "](m),m}U[" "]=function(){};var H=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function B(m,b,A){for(const F in m)b.call(A,m[F],F,m)}function j(m,b){for(const A in m)b.call(void 0,m[A],A,m)}function T(m){const b={};for(const A in m)b[A]=m[A];return b}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(m,b){let A,F;for(let K=1;K<arguments.length;K++){F=arguments[K];for(A in F)m[A]=F[A];for(let ee=0;ee<k.length;ee++)A=k[ee],Object.prototype.hasOwnProperty.call(F,A)&&(m[A]=F[A])}}function R(m){var b=1;m=m.split(":");const A=[];for(;0<b&&m.length;)A.push(m.shift()),b--;return m.length&&A.push(m.join(":")),A}function L(m){c.setTimeout(()=>{throw m},0)}function O(){var m=ie;let b=null;return m.g&&(b=m.g,m.g=m.g.next,m.g||(m.h=null),b.next=null),b}class Z{constructor(){this.h=this.g=null}add(b,A){const F=re.get();F.set(b,A),this.h?this.h.next=F:this.g=F,this.h=F}}var re=new I(()=>new le,m=>m.reset());class le{constructor(){this.next=this.g=this.h=null}set(b,A){this.h=b,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let te,q=!1,ie=new Z,ne=()=>{const m=c.Promise.resolve(void 0);te=()=>{m.then(z)}};var z=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(A){L(A)}var b=re;b.j(m),100>b.h&&(b.h++,m.next=b.g,b.g=m)}q=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(m,b){this.type=m,this.g=this.target=b,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,b=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};c.addEventListener("test",A,b),c.removeEventListener("test",A,b)}catch{}return m}();function xe(m,b){if(me.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var A=this.type=m.type,F=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=b,b=m.relatedTarget){if(H){e:{try{U(b.nodeName);var K=!0;break e}catch{}K=!1}K||(b=null)}}else A=="mouseover"?b=m.fromElement:A=="mouseout"&&(b=m.toElement);this.relatedTarget=b,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:he[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&xe.aa.h.call(this)}}_(xe,me);var he={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),je=0;function Ve(m,b,A,F,K){this.listener=m,this.proxy=null,this.src=b,this.type=A,this.capture=!!F,this.ha=K,this.key=++je,this.da=this.fa=!1}function Ye(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function tt(m){this.src=m,this.g={},this.h=0}tt.prototype.add=function(m,b,A,F,K){var ee=m.toString();m=this.g[ee],m||(m=this.g[ee]=[],this.h++);var ge=Ei(m,b,F,K);return-1<ge?(b=m[ge],A||(b.fa=!1)):(b=new Ve(b,this.src,ee,!!F,K),b.fa=A,m.push(b)),b};function Ft(m,b){var A=b.type;if(A in m.g){var F=m.g[A],K=Array.prototype.indexOf.call(F,b,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(F,K,1),ee&&(Ye(b),m.g[A].length==0&&(delete m.g[A],m.h--))}}function Ei(m,b,A,F){for(var K=0;K<m.length;++K){var ee=m[K];if(!ee.da&&ee.listener==b&&ee.capture==!!A&&ee.ha==F)return K}return-1}var Io="closure_lm_"+(1e6*Math.random()|0),Va={};function Lc(m,b,A,F,K){if(Array.isArray(b)){for(var ee=0;ee<b.length;ee++)Lc(m,b[ee],A,F,K);return null}return A=Bc(A),m&&m[ye]?m.K(b,A,f(F)?!!F.capture:!1,K):Fc(m,b,A,!1,F,K)}function Fc(m,b,A,F,K,ee){if(!b)throw Error("Invalid event type");var ge=f(K)?!!K.capture:!!K,it=$a(m);if(it||(m[Io]=it=new tt(m)),A=it.add(b,A,F,ge,ee),A.proxy)return A;if(F=Rh(),A.proxy=F,F.src=m,F.listener=A,m.addEventListener)_e||(K=ge),K===void 0&&(K=!1),m.addEventListener(b.toString(),F,K);else if(m.attachEvent)m.attachEvent(Os(b.toString()),F);else if(m.addListener&&m.removeListener)m.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Rh(){function m(A){return b.call(m.src,m.listener,A)}const b=Vc;return m}function Ba(m,b,A,F,K){if(Array.isArray(b))for(var ee=0;ee<b.length;ee++)Ba(m,b[ee],A,F,K);else F=f(F)?!!F.capture:!!F,A=Bc(A),m&&m[ye]?(m=m.i,b=String(b).toString(),b in m.g&&(ee=m.g[b],A=Ei(ee,A,F,K),-1<A&&(Ye(ee[A]),Array.prototype.splice.call(ee,A,1),ee.length==0&&(delete m.g[b],m.h--)))):m&&(m=$a(m))&&(b=m.g[b.toString()],m=-1,b&&(m=Ei(b,A,F,K)),(A=-1<m?b[m]:null)&&Ms(A))}function Ms(m){if(typeof m!="number"&&m&&!m.da){var b=m.src;if(b&&b[ye])Ft(b.i,m);else{var A=m.type,F=m.proxy;b.removeEventListener?b.removeEventListener(A,F,m.capture):b.detachEvent?b.detachEvent(Os(A),F):b.addListener&&b.removeListener&&b.removeListener(F),(A=$a(b))?(Ft(A,m),A.h==0&&(A.src=null,b[Io]=null)):Ye(m)}}}function Os(m){return m in Va?Va[m]:Va[m]="on"+m}function Vc(m,b){if(m.da)m=!0;else{b=new xe(b,this);var A=m.listener,F=m.ha||m.src;m.fa&&Ms(m),m=A.call(F,b)}return m}function $a(m){return m=m[Io],m instanceof tt?m:null}var Ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bc(m){return typeof m=="function"?m:(m[Ua]||(m[Ua]=function(b){return m.handleEvent(b)}),m[Ua])}function Vt(){J.call(this),this.i=new tt(this),this.M=this,this.F=null}_(Vt,J),Vt.prototype[ye]=!0,Vt.prototype.removeEventListener=function(m,b,A,F){Ba(this,m,b,A,F)};function Bt(m,b){var A,F=m.F;if(F)for(A=[];F;F=F.F)A.push(F);if(m=m.M,F=b.type||b,typeof b=="string")b=new me(b,m);else if(b instanceof me)b.target=b.target||m;else{var K=b;b=new me(F,m),D(b,K)}if(K=!0,A)for(var ee=A.length-1;0<=ee;ee--){var ge=b.g=A[ee];K=Ls(ge,F,!0,b)&&K}if(ge=b.g=m,K=Ls(ge,F,!0,b)&&K,K=Ls(ge,F,!1,b)&&K,A)for(ee=0;ee<A.length;ee++)ge=b.g=A[ee],K=Ls(ge,F,!1,b)&&K}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var m=this.i,b;for(b in m.g){for(var A=m.g[b],F=0;F<A.length;F++)Ye(A[F]);delete m.g[b],m.h--}}this.F=null},Vt.prototype.K=function(m,b,A,F){return this.i.add(String(m),b,!1,A,F)},Vt.prototype.L=function(m,b,A,F){return this.i.add(String(m),b,!0,A,F)};function Ls(m,b,A,F){if(b=m.i.g[String(b)],!b)return!0;b=b.concat();for(var K=!0,ee=0;ee<b.length;++ee){var ge=b[ee];if(ge&&!ge.da&&ge.capture==A){var it=ge.listener,$t=ge.ha||ge.src;ge.fa&&Ft(m.i,ge),K=it.call($t,F)!==!1&&K}}return K&&!F.defaultPrevented}function $c(m,b,A){if(typeof m=="function")A&&(m=x(m,A));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:c.setTimeout(m,b||0)}function ki(m){m.g=$c(()=>{m.g=null,m.i&&(m.i=!1,ki(m))},m.l);const b=m.h;m.h=null,m.m.apply(null,b)}class So extends J{constructor(b,A){super(),this.m=b,this.l=A,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(m){J.call(this),this.h=m,this.g={}}_(No,J);var Uc=[];function zc(m){B(m.g,function(b,A){this.g.hasOwnProperty(A)&&Ms(b)},m),m.g={}}No.prototype.N=function(){No.aa.N.call(this),zc(this)},No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hc=c.JSON.stringify,Wc=c.JSON.parse,qc=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Po(){}Po.prototype.h=null;function za(m){return m.h||(m.h=m.i())}function Ha(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){me.call(this,"d")}_(ls,me);function Wa(){me.call(this,"c")}_(Wa,me);var cs={},Gc=null;function Ro(){return Gc=Gc||new Vt}cs.La="serverreachability";function Kc(m){me.call(this,cs.La,m)}_(Kc,me);function Fs(m){const b=Ro();Bt(b,new Kc(b))}cs.STAT_EVENT="statevent";function Yc(m,b){me.call(this,cs.STAT_EVENT,m),this.stat=b}_(Yc,me);function At(m){const b=Ro();Bt(b,new Yc(b,m))}cs.Ma="timingevent";function qa(m,b){me.call(this,cs.Ma,m),this.size=b}_(qa,me);function Nr(m,b){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},b)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function Do(m,b,A,F,K,ee){m.info(function(){if(m.g)if(ee)for(var ge="",it=ee.split("&"),$t=0;$t<it.length;$t++){var Qe=it[$t].split("=");if(1<Qe.length){var Qt=Qe[0];Qe=Qe[1];var Pt=Qt.split("_");ge=2<=Pt.length&&Pt[1]=="type"?ge+(Qt+"="+Qe+"&"):ge+(Qt+"=redacted&")}}else ge=null;else ge=ee;return"XMLHTTP REQ ("+F+") [attempt "+K+"]: "+b+`
`+A+`
`+ge})}function Ga(m,b,A,F,K,ee,ge){m.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+K+"]: "+b+`
`+A+`
`+ee+" "+ge})}function Pr(m,b,A,F){m.info(function(){return"XMLHTTP TEXT ("+b+"): "+m0(m,A)+(F?" "+F:"")})}function Qc(m,b){m.info(function(){return"TIMEOUT: "+b})}jo.prototype.info=function(){};function m0(m,b){if(!m.g)return b;if(!b)return null;try{var A=JSON.parse(b);if(A){for(m=0;m<A.length;m++)if(Array.isArray(A[m])){var F=A[m];if(!(2>F.length)){var K=F[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ge=1;ge<K.length;ge++)K[ge]=""}}}}return Hc(A)}catch{return b}}var Ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function Mo(){}_(Mo,Po),Mo.prototype.g=function(){return new XMLHttpRequest},Mo.prototype.i=function(){return{}},Rr=new Mo;function jr(m,b,A,F){this.j=m,this.i=b,this.l=A,this.R=F||1,this.U=new No(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dh}function Dh(){this.i=null,this.g="",this.h=!1}var Xc={},Ya={};function Qa(m,b,A){m.L=1,m.v=Ii(Qn(b)),m.m=A,m.P=!0,Zc(m,null)}function Zc(m,b){m.F=Date.now(),ct(m),m.A=Qn(m.v);var A=m.A,F=m.R;Array.isArray(F)||(F=[String(F)]),Ni(A.i,"t",F),m.C=0,A=m.j.J,m.h=new Dh,m.g=Zh(m.j,A?b:null,!m.m),0<m.O&&(m.M=new So(x(m.Y,m,m.g),m.O)),b=m.U,A=m.g,F=m.ca;var K="readystatechange";Array.isArray(K)||(K&&(Uc[0]=K.toString()),K=Uc);for(var ee=0;ee<K.length;ee++){var ge=Lc(A,K[ee],F||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=m.H?T(m.H):{},m.m?(m.u||(m.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,b)):(m.u="GET",m.g.ea(m.A,m.u,null,b)),Fs(),Do(m.i,m.u,m.A,m.l,m.R,m.m)}jr.prototype.ca=function(m){m=m.target;const b=this.M;b&&Dn(m)==3?b.j():this.Y(m)},jr.prototype.Y=function(m){try{if(m==this.g)e:{const Pt=Dn(this.g);var b=this.g.Ba();const cr=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||su(this.g)))){this.J||Pt!=4||b==7||(b==8||0>=cr?Fs(3):Fs(2)),Oo(this);var A=this.g.Z();this.X=A;t:if(Mh(this)){var F=su(this.g);m="";var K=F.length,ee=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),_i(this);var ge="";break t}this.h.i=new c.TextDecoder}for(b=0;b<K;b++)this.h.h=!0,m+=this.h.i.decode(F[b],{stream:!(ee&&b==K-1)});F.length=0,this.h.g+=m,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=A==200,Ga(this.i,this.u,this.A,this.l,this.R,Pt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var it,$t=this.g;if((it=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(it)){var Qe=it;break t}}Qe=null}if(A=Qe)Pr(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jc(this,A);else{this.o=!1,this.s=3,At(12),ar(this),_i(this);break e}}if(this.P){A=!0;let Zn;for(;!this.J&&this.C<ge.length;)if(Zn=g0(this,ge),Zn==Ya){Pt==4&&(this.s=4,At(14),A=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==Xc){this.s=4,At(15),Pr(this.i,this.l,ge,"[Invalid Chunk]"),A=!1;break}else Pr(this.i,this.l,Zn,null),Jc(this,Zn);if(Mh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||ge.length!=0||this.h.h||(this.s=1,At(16),A=!1),this.o=this.o&&A,!A)Pr(this.i,this.l,ge,"[Invalid Chunked Response]"),ar(this),_i(this);else if(0<ge.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),ou(Qt),Qt.M=!0,At(11))}}else Pr(this.i,this.l,ge,null),Jc(this,ge);Pt==4&&ar(this),this.o&&!this.J&&(Pt==4?al(this.j,this):(this.o=!1,ct(this)))}else nl(this.g),A==400&&0<ge.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),ar(this),_i(this)}}}catch{}finally{}};function Mh(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function g0(m,b){var A=m.C,F=b.indexOf(`
`,A);return F==-1?Ya:(A=Number(b.substring(A,F)),isNaN(A)?Xc:(F+=1,F+A>b.length?Ya:(b=b.slice(F,F+A),m.C=F+A,b)))}jr.prototype.cancel=function(){this.J=!0,ar(this)};function ct(m){m.S=Date.now()+m.I,Oh(m,m.I)}function Oh(m,b){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Nr(x(m.ba,m),b)}function Oo(m){m.B&&(c.clearTimeout(m.B),m.B=null)}jr.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Qc(this.i,this.A),this.L!=2&&(Fs(),At(17)),ar(this),this.s=2,_i(this)):Oh(this,this.S-m)};function _i(m){m.j.G==0||m.J||al(m.j,m)}function ar(m){Oo(m);var b=m.M;b&&typeof b.ma=="function"&&b.ma(),m.M=null,zc(m.U),m.g&&(b=m.g,m.g=null,b.abort(),b.ma())}function Jc(m,b){try{var A=m.j;if(A.G!=0&&(A.g==m||kn(A.h,m))){if(!m.K&&kn(A.h,m)&&A.G==3){try{var F=A.Da.g.parse(b)}catch{F=null}if(Array.isArray(F)&&F.length==3){var K=F;if(K[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<m.F)ol(A),Fr(A);else break e;il(A),At(18)}}else A.za=K[1],0<A.za-A.T&&37500>K[2]&&A.F&&A.v==0&&!A.C&&(A.C=Nr(x(A.Za,A),6e3));if(1>=Fh(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else zs(A,11)}else if((m.K||A.g==m)&&ol(A),!S(b))for(K=A.Da.g.parse(b),b=0;b<K.length;b++){let Qe=K[b];if(A.T=Qe[0],Qe=Qe[1],A.G==2)if(Qe[0]=="c"){A.K=Qe[1],A.ia=Qe[2];const Qt=Qe[3];Qt!=null&&(A.la=Qt,A.j.info("VER="+A.la));const Pt=Qe[4];Pt!=null&&(A.Aa=Pt,A.j.info("SVER="+A.Aa));const cr=Qe[5];cr!=null&&typeof cr=="number"&&0<cr&&(F=1.5*cr,A.L=F,A.j.info("backChannelRequestTimeoutMs_="+F)),F=A;const Zn=m.g;if(Zn){const zo=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var ee=F.h;ee.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(eu(ee,ee.h),ee.h=null))}if(F.D){const cl=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(F.ya=cl,at(F.I,F.D,cl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-m.F,A.j.info("Handshake RTT: "+A.R+"ms")),F=A;var ge=m;if(F.qa=Xh(F,F.J?F.ia:null,F.W),ge.K){Vh(F.h,ge);var it=ge,$t=F.L;$t&&(it.I=$t),it.B&&(Oo(it),ct(it)),F.g=ge}else Uo(F);0<A.i.length&&fs(A)}else Qe[0]!="stop"&&Qe[0]!="close"||zs(A,7);else A.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?zs(A,7):rn(A):Qe[0]!="noop"&&A.l&&A.l.ta(Qe),A.v=0)}}Fs(4)}catch{}}var Lh=class{constructor(m,b){this.g=m,this.map=b}};function Lo(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yn(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Fh(m){return m.h?1:m.g?m.g.size:0}function kn(m,b){return m.h?m.h==b:m.g?m.g.has(b):!1}function eu(m,b){m.g?m.g.add(b):m.h=b}function Vh(m,b){m.h&&m.h==b?m.h=null:m.g&&m.g.has(b)&&m.g.delete(b)}Lo.prototype.cancel=function(){if(this.i=Bh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Bh(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let b=m.i;for(const A of m.g.values())b=b.concat(A.D);return b}return C(m.i)}function Xa(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var b=[],A=m.length,F=0;F<A;F++)b.push(m[F]);return b}b=[],A=0;for(F in m)b[A++]=m[F];return b}function Za(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var b=[];m=m.length;for(var A=0;A<m;A++)b.push(A);return b}b=[],A=0;for(const F in m)b[A++]=F;return b}}}function Ti(m,b){if(m.forEach&&typeof m.forEach=="function")m.forEach(b,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,b,void 0);else for(var A=Za(m),F=Xa(m),K=F.length,ee=0;ee<K;ee++)b.call(void 0,F[ee],A&&A[ee],m)}var Fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y0(m,b){if(m){m=m.split("&");for(var A=0;A<m.length;A++){var F=m[A].indexOf("="),K=null;if(0<=F){var ee=m[A].substring(0,F);K=m[A].substring(F+1)}else ee=m[A];b(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Vs(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Vs){this.h=m.h,Vo(this,m.j),this.o=m.o,this.g=m.g,Ai(this,m.s),this.l=m.l;var b=m.i,A=new us;A.i=b.i,b.g&&(A.g=new Map(b.g),A.h=b.h),Ci(this,A),this.m=m.m}else m&&(b=String(m).match(Fo))?(this.h=!1,Vo(this,b[1]||"",!0),this.o=Ge(b[2]||""),this.g=Ge(b[3]||"",!0),Ai(this,b[4]),this.l=Ge(b[5]||"",!0),Ci(this,b[6]||"",!0),this.m=Ge(b[7]||"")):(this.h=!1,this.i=new us(null,this.h))}Vs.prototype.toString=function(){var m=[],b=this.j;b&&m.push(Si(b,Ja,!0),":");var A=this.g;return(A||b=="file")&&(m.push("//"),(b=this.o)&&m.push(Si(b,Ja,!0),"@"),m.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&m.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(Si(A,A.charAt(0)=="/"?zh:Uh,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",Si(A,tu)),m.join("")};function Qn(m){return new Vs(m)}function Vo(m,b,A){m.j=A?Ge(b,!0):b,m.j&&(m.j=m.j.replace(/:$/,""))}function Ai(m,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);m.s=b}else m.s=null}function Ci(m,b,A){b instanceof us?(m.i=b,ds(m.i,m.h)):(A||(b=Si(b,Hh)),m.i=new us(b,m.h))}function at(m,b,A){m.i.set(b,A)}function Ii(m){return at(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ge(m,b){return m?b?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Si(m,b,A){return typeof m=="string"?(m=encodeURI(m).replace(b,$h),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function $h(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ja=/[#\/\?@]/g,Uh=/[#\?:]/g,zh=/[#\?]/g,Hh=/[#\?@]/g,tu=/#/g;function us(m,b){this.h=this.g=null,this.i=m||null,this.j=!!b}function nn(m){m.g||(m.g=new Map,m.h=0,m.i&&y0(m.i,function(b,A){m.add(decodeURIComponent(b.replace(/\+/g," ")),A)}))}t=us.prototype,t.add=function(m,b){nn(this),this.i=null,m=lr(this,m);var A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(b),this.h+=1,this};function Dr(m,b){nn(m),b=lr(m,b),m.g.has(b)&&(m.i=null,m.h-=m.g.get(b).length,m.g.delete(b))}function Mr(m,b){return nn(m),b=lr(m,b),m.g.has(b)}t.forEach=function(m,b){nn(this),this.g.forEach(function(A,F){A.forEach(function(K){m.call(b,K,F,this)},this)},this)},t.na=function(){nn(this);const m=Array.from(this.g.values()),b=Array.from(this.g.keys()),A=[];for(let F=0;F<b.length;F++){const K=m[F];for(let ee=0;ee<K.length;ee++)A.push(b[F])}return A},t.V=function(m){nn(this);let b=[];if(typeof m=="string")Mr(this,m)&&(b=b.concat(this.g.get(lr(this,m))));else{m=Array.from(this.g.values());for(let A=0;A<m.length;A++)b=b.concat(m[A])}return b},t.set=function(m,b){return nn(this),this.i=null,m=lr(this,m),Mr(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[b]),this.h+=1,this},t.get=function(m,b){return m?(m=this.V(m),0<m.length?String(m[0]):b):b};function Ni(m,b,A){Dr(m,b),0<A.length&&(m.i=null,m.g.set(lr(m,b),C(A)),m.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],b=Array.from(this.g.keys());for(var A=0;A<b.length;A++){var F=b[A];const ee=encodeURIComponent(String(F)),ge=this.V(F);for(F=0;F<ge.length;F++){var K=ee;ge[F]!==""&&(K+="="+encodeURIComponent(String(ge[F]))),m.push(K)}}return this.i=m.join("&")};function lr(m,b){return b=String(b),m.j&&(b=b.toLowerCase()),b}function ds(m,b){b&&!m.j&&(nn(m),m.i=null,m.g.forEach(function(A,F){var K=F.toLowerCase();F!=K&&(Dr(this,F),Ni(this,K,A))},m)),m.j=b}function x0(m,b){const A=new jo;if(c.Image){const F=new Image;F.onload=w(jn,A,"TestLoadImage: loaded",!0,b,F),F.onerror=w(jn,A,"TestLoadImage: error",!1,b,F),F.onabort=w(jn,A,"TestLoadImage: abort",!1,b,F),F.ontimeout=w(jn,A,"TestLoadImage: timeout",!1,b,F),c.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=m}else b(!1)}function Wh(m,b){const A=new jo,F=new AbortController,K=setTimeout(()=>{F.abort(),jn(A,"TestPingServer: timeout",!1,b)},1e4);fetch(m,{signal:F.signal}).then(ee=>{clearTimeout(K),ee.ok?jn(A,"TestPingServer: ok",!0,b):jn(A,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),jn(A,"TestPingServer: error",!1,b)})}function jn(m,b,A,F,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),F(A)}catch{}}function v0(){this.g=new qc}function qh(m,b,A){const F=A||"";try{Ti(m,function(K,ee){let ge=K;f(K)&&(ge=Hc(K)),b.push(F+ee+"="+encodeURIComponent(ge))})}catch(K){throw b.push(F+"type="+encodeURIComponent("_badmap")),K}}function Bs(m){this.l=m.Ub||null,this.j=m.eb||!1}_(Bs,Po),Bs.prototype.g=function(){return new Bo(this.l,this.j)},Bs.prototype.i=function(m){return function(){return m}}({});function Bo(m,b){Vt.call(this),this.D=m,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Bo,Vt),t=Bo.prototype,t.open=function(m,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=b,this.readyState=1,Lr(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(b.body=m),(this.D||c).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gh(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gh(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var b=m.value?m.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!m.done}))&&(this.response=this.responseText+=b)}m.done?Or(this):Lr(this),this.readyState==3&&Gh(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,Or(this))},t.Qa=function(m){this.g&&(this.response=m,Or(this))},t.ga=function(){this.g&&Or(this)};function Or(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Lr(m)}t.setRequestHeader=function(m,b){this.u.append(m,b)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],b=this.h.entries();for(var A=b.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=b.next();return m.join(`\r
`)};function Lr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function $s(m){let b="";return B(m,function(A,F){b+=F,b+=":",b+=A,b+=`\r
`}),b}function Pi(m,b,A){e:{for(F in A){var F=!1;break e}F=!0}F||(A=$s(A),typeof m=="string"?A!=null&&encodeURIComponent(String(A)):at(m,b,A))}function pt(m){Vt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(pt,Vt);var w0=/^https?$/i,nu=["POST","PUT"];t=pt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,b,A,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);b=b?b.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?za(this.o):za(Rr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(b,String(m),!0),this.B=!1}catch(ee){$o(this,ee);return}if(m=A||"",A=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var K in F)A.set(K,F[K]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ee of F.keys())A.set(ee,F.get(ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(A.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(nu,b,void 0))||F||K||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ge]of A)this.g.setRequestHeader(ee,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tl(this),this.u=!0,this.g.send(m),this.u=!1}catch(ee){$o(this,ee)}};function $o(m,b){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=b,m.m=5,el(m),Xn(m)}function el(m){m.A||(m.A=!0,Bt(m,"complete"),Bt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Bt(this,"complete"),Bt(this,"abort"),Xn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xn(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ru(this):this.bb())},t.bb=function(){ru(this)};function ru(m){if(m.h&&typeof a<"u"&&(!m.v[1]||Dn(m)!=4||m.Z()!=2)){if(m.u&&Dn(m)==4)$c(m.Ea,0,m);else if(Bt(m,"readystatechange"),Dn(m)==4){m.h=!1;try{const ge=m.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var A;if(!(A=b)){var F;if(F=ge===0){var K=String(m.D).match(Fo)[1]||null;!K&&c.self&&c.self.location&&(K=c.self.location.protocol.slice(0,-1)),F=!w0.test(K?K.toLowerCase():"")}A=F}if(A)Bt(m,"complete"),Bt(m,"success");else{m.m=6;try{var ee=2<Dn(m)?m.g.statusText:""}catch{ee=""}m.l=ee+" ["+m.Z()+"]",el(m)}}finally{Xn(m)}}}}function Xn(m,b){if(m.g){tl(m);const A=m.g,F=m.v[0]?()=>{}:null;m.g=null,m.v=null,b||Bt(m,"ready");try{A.onreadystatechange=F}catch{}}}function tl(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Dn(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var b=this.g.responseText;return m&&b.indexOf(m)==0&&(b=b.substring(m.length)),Wc(b)}};function su(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function nl(m){const b={};m=(m.g&&2<=Dn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<m.length;F++){if(S(m[F]))continue;var A=R(m[F]);const K=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ee=b[K]||[];b[K]=ee,ee.push(A)}j(b,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(m,b,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||b}function iu(m){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,m),this.cb=hs("retryDelaySeedMs",1e4,m),this.Wa=hs("forwardChannelMaxRetries",2,m),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Lo(m&&m.concurrentRequestLimit),this.Da=new v0,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=iu.prototype,t.la=8,t.G=1,t.connect=function(m,b,A,F){At(0),this.W=m,this.H=b||{},A&&F!==void 0&&(this.H.OSID=A,this.H.OAID=F),this.F=this.X,this.I=Xh(this,null,this.W),fs(this)};function rn(m){if(rl(m),m.G==3){var b=m.U++,A=Qn(m.I);if(at(A,"SID",m.K),at(A,"RID",b),at(A,"TYPE","terminate"),Us(m,A),b=new jr(m,m.j,b),b.L=2,b.v=Ii(Qn(A)),A=!1,c.navigator&&c.navigator.sendBeacon)try{A=c.navigator.sendBeacon(b.v.toString(),"")}catch{}!A&&c.Image&&(new Image().src=b.v,A=!0),A||(b.g=Zh(b.j,null),b.g.ea(b.v)),b.F=Date.now(),ct(b)}Qh(m)}function Fr(m){m.g&&(ou(m),m.g.cancel(),m.g=null)}function rl(m){Fr(m),m.u&&(c.clearTimeout(m.u),m.u=null),ol(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function fs(m){if(!Yn(m.h)&&!m.s){m.s=!0;var b=m.Ga;te||ne(),q||(te(),q=!0),ie.add(b,m),m.B=0}}function b0(m,b){return Fh(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=b.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Nr(x(m.Ga,m,b),Yh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const K=new jr(this,this.j,m);let ee=this.o;if(this.S&&(ee?(ee=T(ee),D(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var b=0,A=0;A<this.i.length;A++){t:{var F=this.i[A];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(b+=F,4096<b){b=A;break e}if(b===4096||A===this.i.length-1){b=A+1;break e}}b=1e3}else b=1e3;b=Ri(this,K,b),A=Qn(this.I),at(A,"RID",m),at(A,"CVER",22),this.D&&at(A,"X-HTTP-Session-Id",this.D),Us(this,A),ee&&(this.O?b="headers="+encodeURIComponent(String($s(ee)))+"&"+b:this.m&&Pi(A,this.m,ee)),eu(this.h,K),this.Ua&&at(A,"TYPE","init"),this.P?(at(A,"$req",b),at(A,"SID","null"),K.T=!0,Qa(K,A,null)):Qa(K,A,b),this.G=2}}else this.G==3&&(m?sl(this,m):this.i.length==0||Yn(this.h)||sl(this))};function sl(m,b){var A;b?A=b.l:A=m.U++;const F=Qn(m.I);at(F,"SID",m.K),at(F,"RID",A),at(F,"AID",m.T),Us(m,F),m.m&&m.o&&Pi(F,m.m,m.o),A=new jr(m,m.j,A,m.B+1),m.m===null&&(A.H=m.o),b&&(m.i=b.D.concat(m.i)),b=Ri(m,A,1e3),A.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),eu(m.h,A),Qa(A,F,b)}function Us(m,b){m.H&&B(m.H,function(A,F){at(b,F,A)}),m.l&&Ti({},function(A,F){at(b,F,A)})}function Ri(m,b,A){A=Math.min(m.i.length,A);var F=m.l?x(m.l.Na,m.l,m):null;e:{var K=m.i;let ee=-1;for(;;){const ge=["count="+A];ee==-1?0<A?(ee=K[0].g,ge.push("ofs="+ee)):ee=0:ge.push("ofs="+ee);let it=!0;for(let $t=0;$t<A;$t++){let Qe=K[$t].g;const Qt=K[$t].map;if(Qe-=ee,0>Qe)ee=Math.max(0,K[$t].g-100),it=!1;else try{qh(Qt,ge,"req"+Qe+"_")}catch{F&&F(Qt)}}if(it){F=ge.join("&");break e}}}return m=m.i.splice(0,A),b.D=m,F}function Uo(m){if(!m.g&&!m.u){m.Y=1;var b=m.Fa;te||ne(),q||(te(),q=!0),ie.add(b,m),m.v=0}}function il(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Nr(x(m.Fa,m),Yh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Kh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Nr(x(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Fr(this),Kh(this))};function ou(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function Kh(m){m.g=new jr(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var b=Qn(m.qa);at(b,"RID","rpc"),at(b,"SID",m.K),at(b,"AID",m.T),at(b,"CI",m.F?"0":"1"),!m.F&&m.ja&&at(b,"TO",m.ja),at(b,"TYPE","xmlhttp"),Us(m,b),m.m&&m.o&&Pi(b,m.m,m.o),m.L&&(m.g.I=m.L);var A=m.g;m=m.ia,A.L=1,A.v=Ii(Qn(b)),A.m=null,A.P=!0,Zc(A,m)}t.Za=function(){this.C!=null&&(this.C=null,Fr(this),il(this),At(19))};function ol(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function al(m,b){var A=null;if(m.g==b){ol(m),ou(m),m.g=null;var F=2}else if(kn(m.h,b))A=b.D,Vh(m.h,b),F=1;else return;if(m.G!=0){if(b.o)if(F==1){A=b.m?b.m.length:0,b=Date.now()-b.F;var K=m.B;F=Ro(),Bt(F,new qa(F,A)),fs(m)}else Uo(m);else if(K=b.s,K==3||K==0&&0<b.X||!(F==1&&b0(m,b)||F==2&&il(m)))switch(A&&0<A.length&&(b=m.h,b.i=b.i.concat(A)),K){case 1:zs(m,5);break;case 4:zs(m,10);break;case 3:zs(m,6);break;default:zs(m,2)}}}function Yh(m,b){let A=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(A*=2),A*b}function zs(m,b){if(m.j.info("Error code "+b),b==2){var A=x(m.fb,m),F=m.Xa;const K=!F;F=new Vs(F||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Vo(F,"https"),Ii(F),K?x0(F.toString(),A):Wh(F.toString(),A)}else At(2);m.G=0,m.l&&m.l.sa(b),Qh(m),rl(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Qh(m){if(m.G=0,m.ka=[],m.l){const b=Bh(m.h);(b.length!=0||m.i.length!=0)&&(N(m.ka,b),N(m.ka,m.i),m.h.i.length=0,C(m.i),m.i.length=0),m.l.ra()}}function Xh(m,b,A){var F=A instanceof Vs?Qn(A):new Vs(A);if(F.g!="")b&&(F.g=b+"."+F.g),Ai(F,F.s);else{var K=c.location;F=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;var ee=new Vs(null);F&&Vo(ee,F),b&&(ee.g=b),K&&Ai(ee,K),A&&(ee.l=A),F=ee}return A=m.D,b=m.ya,A&&b&&at(F,A,b),at(F,"VER",m.la),Us(m,F),F}function Zh(m,b,A){if(b&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=m.Ca&&!m.pa?new pt(new Bs({eb:A})):new pt(m.pa),b.Ha(m.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}t=au.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ll(){}ll.prototype.g=function(m,b){return new _n(m,b)};function _n(m,b){Vt.call(this),this.g=new iu(b),this.l=m,this.h=b&&b.messageUrlParams||null,m=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(m?m["X-WebChannel-Content-Type"]=b.messageContentType:m={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(m?m["X-WebChannel-Client-Profile"]=b.va:m={"X-WebChannel-Client-Profile":b.va}),this.g.S=m,(m=b&&b.Sb)&&!S(m)&&(this.g.m=m),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!S(b)&&(this.g.D=b,m=this.h,m!==null&&b in m&&(m=this.h,b in m&&delete m[b])),this.j=new ps(this)}_(_n,Vt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){rn(this.g)},_n.prototype.o=function(m){var b=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.u&&(A={},A.__data__=Hc(m),m=A);b.i.push(new Lh(b.Ya++,m)),b.G==3&&fs(b)},_n.prototype.N=function(){this.g.l=null,delete this.j,rn(this.g),delete this.g,_n.aa.N.call(this)};function Jh(m){ls.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var b=m.__sm__;if(b){e:{for(const A in b){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,b=b!==null&&m in b?b[m]:void 0),this.data=b}else this.data=m}_(Jh,ls);function ef(){Wa.call(this),this.status=1}_(ef,Wa);function ps(m){this.g=m}_(ps,au),ps.prototype.ua=function(){Bt(this.g,"a")},ps.prototype.ta=function(m){Bt(this.g,new Jh(m))},ps.prototype.sa=function(m){Bt(this.g,new ef)},ps.prototype.ra=function(){Bt(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,FC=function(){return new ll},LC=function(){return Ro()},OC=cs,Jy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,bp=Ka,jh.COMPLETE="complete",MC=jh,Ha.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,qu=Ha,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,DC=pt}).apply(typeof Xf<"u"?Xf:typeof self<"u"?self:typeof window<"u"?window:{});const KE="@firebase/firestore",YE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new Sv("@firebase/firestore");function Rl(){return ba.logLevel}function be(t,...e){if(ba.logLevel<=We.DEBUG){const n=e.map($v);ba.debug(`Firestore (${bc}): ${t}`,...n)}}function fi(t,...e){if(ba.logLevel<=We.ERROR){const n=e.map($v);ba.error(`Firestore (${bc}): ${t}`,...n)}}function Xl(t,...e){if(ba.logLevel<=We.WARN){const n=e.map($v);ba.warn(`Firestore (${bc}): ${t}`,...n)}}function $v(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,VC(t,r,n)}function VC(t,e,n){let r=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fi(r),new Error(r)}function st(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||VC(e,s,r)}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yn.UNAUTHENTICATED))}shutdown(){}}class nD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rD{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let i=new li;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new li,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=i;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new li)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new BC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class sD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const r=i=>{i.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new QE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new QE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ze(t,e){return t<e?-1:t>e?1:0}function ex(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ze(r,s);{const i=$C(),a=lD(i.encode(XE(t,n)),i.encode(XE(e,n)));return a!==0?a:ze(r,s)}}n+=r>65535?2:1}return ze(t.length,e.length)}function XE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function lD(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ze(t[n],e[n]);return ze(t.length,e.length)}function Zl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=-62135596800,JE=1e6;class Wt{static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*JE);return new Wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ZE)throw new we(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JE}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ZE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Wt(0,0))}static max(){return new Fe(new Wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="__name__";class ws{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ws.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ze(e.length,n.length)}static compareSegments(e,n){const r=ws.isNumericId(e),s=ws.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ws.extractNumericId(e).compare(ws.extractNumericId(n)):ex(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class ft extends ws{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const cD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends ws{construct(e,n,r){return new cn(e,n,r)}static isValidIdentifier(e){return cD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ek}static keyField(){return new cn([ek])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new we(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new we(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new we(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ft.fromString(e))}static fromName(e){return new Se(ft.fromString(e).popFirst(5))}static empty(){return new Se(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=-1;function uD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Fe.fromTimestamp(r===1e9?new Wt(n+1,0):new Wt(n,r));return new co(s,Se.empty(),e)}function dD(t){return new co(t.readTime,t.key,gd)}class co{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new co(Fe.min(),Se.empty(),gd)}static max(){return new co(Fe.max(),Se.empty(),gd)}}function hD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==fD)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},d=>r(d))}),a=!0,i===s&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(s=>s?ae.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ae((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let d=0;d<i;d++){const f=d;n(e[f]).next(p=>{a[f]=p,++c,c===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new ae((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function mD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}xm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=-1;function vm(t){return t==null}function Up(t){return t===0&&1/t==-1/0}function gD(t){return typeof t=="number"&&Number.isInteger(t)&&!Up(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="";function yD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tk(e)),e=xD(t.get(n),e);return tk(e)}function xD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zC:n+="";break;default:n+=i}}return n}function tk(t){return t+zC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zf(this.root,e,this.comparator,!0)}}class Zf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ln.RED,this.left=s??ln.EMPTY,this.right=i??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ln(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ln.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rk(this.data.getIterator())}getIteratorFrom(e){return new rk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class rk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new nr([])}unionWith(e){let n=new qt(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new WC("Invalid base64 string: "+i):i}}(e);return new un(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const vD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=vD.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ho(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="server_timestamp",GC="__type__",KC="__previous_value__",YC="__local_write_time__";function zv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[GC])===null||n===void 0?void 0:n.stringValue)===qC}function wm(t){const e=t.mapValue.fields[KC];return zv(e)?wm(e):e}function yd(t){const e=uo(t.mapValue.fields[YC].timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,r,s,i,a,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const zp="(default)";class xd{constructor(e,n){this.projectId=e,this.database=n||zp}static empty(){return new xd("","")}get isDefaultDatabase(){return this.database===zp}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="__type__",bD="__max__",Jf={mapValue:{}},XC="__vector__",Hp="value";function fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zv(t)?4:kD(t)?9007199254740991:ED(t)?10:11:Me(28295,{value:t})}function Ss(t,e){if(t===e)return!0;const n=fo(t);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yd(t).isEqual(yd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=uo(s.timestampValue),c=uo(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ho(s.bytesValue).isEqual(ho(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return St(s.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return St(s.integerValue)===St(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=St(s.doubleValue),c=St(i.doubleValue);return a===c?Up(a)===Up(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(nk(a)!==nk(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!Ss(a[d],c[d])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function vd(t,e){return(t.values||[]).find(n=>Ss(n,e))!==void 0}function Jl(t,e){if(t===e)return 0;const n=fo(t),r=fo(e);if(n!==r)return ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=St(i.integerValue||i.doubleValue),d=St(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return sk(t.timestampValue,e.timestampValue);case 4:return sk(yd(t),yd(e));case 5:return ex(t.stringValue,e.stringValue);case 6:return function(i,a){const c=ho(i),d=ho(a);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),d=a.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=ze(c[f],d[f]);if(p!==0)return p}return ze(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=ze(St(i.latitude),St(a.latitude));return c!==0?c:ze(St(i.longitude),St(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ik(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,d,f,p;const y=i.fields||{},x=a.fields||{},w=(c=y[Hp])===null||c===void 0?void 0:c.arrayValue,_=(d=x[Hp])===null||d===void 0?void 0:d.arrayValue,C=ze(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((p=_==null?void 0:_.values)===null||p===void 0?void 0:p.length)||0);return C!==0?C:ik(w,_)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Jf.mapValue&&a===Jf.mapValue)return 0;if(i===Jf.mapValue)return 1;if(a===Jf.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),f=a.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const x=ex(d[y],p[y]);if(x!==0)return x;const w=Jl(c[d[y]],f[p[y]]);if(w!==0)return w}return ze(d.length,p.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function sk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=uo(t),r=uo(e),s=ze(n.seconds,r.seconds);return s!==0?s:ze(n.nanos,r.nanos)}function ik(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Jl(n[s],r[s]);if(i)return i}return ze(n.length,r.length)}function ec(t){return tx(t)}function tx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=uo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ho(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=tx(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${tx(n.fields[a])}`;return s+"}"}(t.mapValue):Me(61005,{value:t})}function Ep(t){switch(fo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wm(t);return e?16+Ep(e):16;case 5:return 2*t.stringValue.length;case 6:return ho(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ep(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return _o(r.fields,(i,a)=>{s+=i.length+Ep(a)}),s}(t.mapValue);default:throw Me(13486,{value:t})}}function ok(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nx(t){return!!t&&"integerValue"in t}function Hv(t){return!!t&&"arrayValue"in t}function ak(t){return!!t&&"nullValue"in t}function lk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kp(t){return!!t&&"mapValue"in t}function ED(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[QC])===null||n===void 0?void 0:n.stringValue)===XC}function Ju(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ju(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ju(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(n)}setAll(e){let n=cn.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ju(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());kp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_o(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Hn(Ju(this.value))}}function ZC(t){const e=[];return _o(t.fields,(n,r)=>{const s=new cn([n]);if(kp(r)){const i=ZC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new xn(e,0,Fe.min(),Fe.min(),Fe.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,s){return new xn(e,1,n,Fe.min(),r,s,0)}static newNoDocument(e,n){return new xn(e,2,n,Fe.min(),Fe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Fe.min(),Fe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.position=e,this.inclusive=n}}function ck(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Se.comparator(Se.fromName(a.referenceValue),n.key):r=Jl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function uk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n="asc"){this.field=e,this.dir=n}}function _D(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{}class Mt extends JC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AD(e,n,r):n==="array-contains"?new SD(e,r):n==="in"?new ND(e,r):n==="not-in"?new PD(e,r):n==="array-contains-any"?new RD(e,r):new Mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CD(e,r):new ID(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jl(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(Jl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class es extends JC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new es(e,n)}matches(e){return e4(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function e4(t){return t.op==="and"}function t4(t){return TD(t)&&e4(t)}function TD(t){for(const e of t.filters)if(e instanceof es)return!1;return!0}function rx(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(t4(t))return t.filters.map(e=>rx(e)).join(",");{const e=t.filters.map(n=>rx(n)).join(",");return`${t.op}(${e})`}}function n4(t,e){return t instanceof Mt?function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&Ss(r.value,s.value)}(t,e):t instanceof es?function(r,s){return s instanceof es&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&n4(a,s.filters[c]),!0):!1}(t,e):void Me(19439)}function r4(t){return t instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`}(t):t instanceof es?function(n){return n.op.toString()+" {"+n.getFilters().map(r4).join(" ,")+"}"}(t):"Filter"}class AD extends Mt{constructor(e,n,r){super(e,n,r),this.key=Se.fromName(r.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class CD extends Mt{constructor(e,n){super(e,"in",n),this.keys=s4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ID extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=s4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function s4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Se.fromName(r.referenceValue))}class SD extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hv(n)&&vd(n.arrayValue,this.value)}}class ND extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vd(this.value.arrayValue,n)}}class PD extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vd(this.value.arrayValue,n)}}class RD extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Ie=null}}function dk(t,e=null,n=[],r=[],s=null,i=null,a=null){return new jD(t,e,n,r,s,i,a)}function Wv(t){const e=Be(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ec(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ec(r)).join(",")),e.Ie=n}return e.Ie}function qv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_D(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uk(t.startAt,e.startAt)&&uk(t.endAt,e.endAt)}function sx(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function DD(t,e,n,r,s,i,a,c){return new _c(t,e,n,r,s,i,a,c)}function bm(t){return new _c(t)}function hk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i4(t){return t.collectionGroup!==null}function ed(t){const e=Be(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new qt(cn.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new wd(i,r))}),n.has(cn.keyField().canonicalString())||e.Ee.push(new wd(cn.keyField(),r))}return e.Ee}function _s(t){const e=Be(t);return e.de||(e.de=MD(e,ed(t))),e.de}function MD(t,e){if(t.limitType==="F")return dk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wd(s.field,i)});const n=t.endAt?new Wp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wp(t.startAt.position,t.startAt.inclusive):null;return dk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ix(t,e){const n=t.filters.concat([e]);return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qp(t,e,n){return new _c(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return qv(_s(t),_s(e))&&t.limitType===e.limitType}function o4(t){return`${Wv(_s(t))}|lt:${t.limitType}`}function jl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>r4(s)).join(", ")}]`),vm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ec(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ec(s)).join(",")),`Target(${r})`}(_s(t))}; limitType=${t.limitType})`}function km(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ed(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,d){const f=ck(a,c,d);return a.inclusive?f<=0:f<0}(r.startAt,ed(r),s)||r.endAt&&!function(a,c,d){const f=ck(a,c,d);return a.inclusive?f>=0:f>0}(r.endAt,ed(r),s))}(t,e)}function OD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a4(t){return(e,n)=>{let r=!1;for(const s of ed(t)){const i=LD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function LD(t,e,n){const r=t.field.isKeyField()?Se.comparator(e.key,n.key):function(i,a,c){const d=a.data.field(i),f=c.data.field(i);return d!==null&&f!==null?Jl(d,f):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return HC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new kt(Se.comparator);function pi(){return FD}const l4=new kt(Se.comparator);function Gu(...t){let e=l4;for(const n of t)e=e.insert(n.key,n);return e}function c4(t){let e=l4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ia(){return td()}function u4(){return td()}function td(){return new Pa(t=>t.toString(),(t,e)=>t.isEqual(e))}const VD=new kt(Se.comparator),BD=new qt(Se.comparator);function qe(...t){let e=BD;for(const n of t)e=e.add(n);return e}const $D=new qt(ze);function UD(){return $D}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function d4(t){return{integerValue:""+t}}function zD(t,e){return gD(e)?d4(e):Gv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function HD(t,e,n){return t instanceof bd?function(s,i){const a={fields:{[GC]:{stringValue:qC},[YC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zv(i)&&(i=wm(i)),i&&(a.fields[KC]=i),{mapValue:a}}(n,e):t instanceof Ed?f4(t,e):t instanceof kd?p4(t,e):function(s,i){const a=h4(s,i),c=fk(a)+fk(s.Re);return nx(a)&&nx(s.Re)?d4(c):Gv(s.serializer,c)}(t,e)}function WD(t,e,n){return t instanceof Ed?f4(t,e):t instanceof kd?p4(t,e):n}function h4(t,e){return t instanceof Gp?function(r){return nx(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class bd extends _m{}class Ed extends _m{constructor(e){super(),this.elements=e}}function f4(t,e){const n=m4(e);for(const r of t.elements)n.some(s=>Ss(s,r))||n.push(r);return{arrayValue:{values:n}}}class kd extends _m{constructor(e){super(),this.elements=e}}function p4(t,e){let n=m4(e);for(const r of t.elements)n=n.filter(s=>!Ss(s,r));return{arrayValue:{values:n}}}class Gp extends _m{constructor(e,n){super(),this.serializer=e,this.Re=n}}function fk(t){return St(t.integerValue||t.doubleValue)}function m4(t){return Hv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.field=e,this.transform=n}}function GD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ed&&s instanceof Ed||r instanceof kd&&s instanceof kd?Zl(r.elements,s.elements,Ss):r instanceof Gp&&s instanceof Gp?Ss(r.Re,s.Re):r instanceof bd&&s instanceof bd}(t.transform,e.transform)}class KD{constructor(e,n){this.version=e,this.transformResults=n}}class Yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _p(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tm{}function g4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new x4(t.key,Yr.none()):new ch(t.key,t.data,Yr.none());{const n=t.data,r=Hn.empty();let s=new qt(cn.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new To(t.key,r,new nr(s.toArray()),Yr.none())}}function YD(t,e,n){t instanceof ch?function(s,i,a){const c=s.value.clone(),d=mk(s.fieldTransforms,i,a.transformResults);c.setAll(d),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof To?function(s,i,a){if(!_p(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=mk(s.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(y4(s)),d.setAll(c),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function nd(t,e,n,r){return t instanceof ch?function(i,a,c,d){if(!_p(i.precondition,a))return c;const f=i.value.clone(),p=gk(i.fieldTransforms,d,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof To?function(i,a,c,d){if(!_p(i.precondition,a))return c;const f=gk(i.fieldTransforms,d,a),p=a.data;return p.setAll(y4(i)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,c){return _p(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function QD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=h4(r.transform,s||null);i!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,i))}return n||null}function pk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zl(r,s,(i,a)=>GD(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ch extends Tm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class To extends Tm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function y4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mk(t,e,n){const r=new Map;st(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,WD(a,c,n[s]))}return r}function gk(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,HD(i,a,e))}return r}class x4 extends Tm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XD extends Tm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&YD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const d=g4(a,c);d!==null&&r.set(s.key,d),a.isValidDocument()||a.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(n,r)=>pk(n,r))&&Zl(this.baseMutations,e.baseMutations,(n,r)=>pk(n,r))}}class Kv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){st(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return VD}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Kv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Xe;function tM(t){switch(t){case oe.OK:return Me(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function v4(t){if(t===void 0)return fi("GRPC error has no .code"),oe.UNKNOWN;switch(t){case jt.OK:return oe.OK;case jt.CANCELLED:return oe.CANCELLED;case jt.UNKNOWN:return oe.UNKNOWN;case jt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case jt.INTERNAL:return oe.INTERNAL;case jt.UNAVAILABLE:return oe.UNAVAILABLE;case jt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case jt.NOT_FOUND:return oe.NOT_FOUND;case jt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case jt.ABORTED:return oe.ABORTED;case jt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case jt.DATA_LOSS:return oe.DATA_LOSS;default:return Me(39323,{code:t})}}(Xe=jt||(jt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=new io([4294967295,4294967295],0);function yk(t){const e=$C().encode(t),n=new jC;return n.update(e),new Uint8Array(n.digest())}function xk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new io([n,r],0),new io([s,i],0)]}class Yv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ku(`Invalid padding: ${n}`);if(r<0)throw new Ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ku(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ku(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=io.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(io.fromNumber(r)));return s.compare(nM)===1&&(s=new io([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=yk(e),[r,s]=xk(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Yv(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.pe===0)return;const n=yk(e),[r,s]=xk(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,uh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Am(Fe.min(),s,new kt(ze),pi(),qe())}}class uh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uh(r,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class w4{constructor(e,n){this.targetId=e,this.Ce=n}}class b4{constructor(e,n,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vk{constructor(){this.Fe=0,this.Me=wk(),this.xe=un.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),n=qe(),r=qe();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Me(38017,{changeType:i})}}),new uh(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=wk()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,st(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rM{constructor(e){this.ze=e,this.je=new Map,this.He=pi(),this.Je=ep(),this.Ye=ep(),this.Ze=new kt(ze)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(sx(i))if(r===0){const a=new Se(i.path);this.tt(n,a,xn.newNoDocument(a,Fe.min()))}else st(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const c=this.ct(e),d=c?this.lt(c,e,a):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=ho(r).toUint8Array()}catch(d){if(d instanceof WC)return Xl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Yv(a,s,i)}catch(d){return Xl(d instanceof Ku?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,a)=>{const c=this._t(a);if(c){if(i.current&&sx(c.target)){const d=new Se(c.target.path);this.Et(d).has(a)||this.dt(a,d)||this.tt(a,d,xn.newNoDocument(d,e))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=qe();this.Ye.forEach((i,a)=>{let c=!0;a.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(e));const s=new Am(e,n,this.Ze,this.He,r);return this.He=pi(),this.Je=ep(),this.Ye=ep(),this.Ze=new kt(ze),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new vk,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new qt(ze),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new qt(ze),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new vk),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ep(){return new kt(Se.comparator)}function wk(){return new kt(Se.comparator)}const sM={asc:"ASCENDING",desc:"DESCENDING"},iM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oM={and:"AND",or:"OR"};class aM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ox(t,e){return t.useProto3Json||vm(e)?e:{value:e}}function Kp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lM(t,e){return Kp(t,e.toTimestamp())}function Ts(t){return st(!!t,49232),Fe.fromTimestamp(function(n){const r=uo(n);return new Wt(r.seconds,r.nanos)}(t))}function Qv(t,e){return ax(t,e).canonicalString()}function ax(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function k4(t){const e=ft.fromString(t);return st(I4(e),10190,{key:e.toString()}),e}function lx(t,e){return Qv(t.databaseId,e.path)}function ty(t,e){const n=k4(e);if(n.get(1)!==t.databaseId.projectId)throw new we(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(T4(n))}function _4(t,e){return Qv(t.databaseId,e)}function cM(t){const e=k4(t);return e.length===4?ft.emptyPath():T4(e)}function cx(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T4(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bk(t,e,n){return{name:lx(t,e),fields:n.value.mapValue.fields}}function uM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Me(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(f,p){return f.useProto3Json?(st(p===void 0||typeof p=="string",58123),un.fromBase64String(p||"")):(st(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),un.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){const p=f.code===void 0?oe.UNKNOWN:v4(f.code);return new we(p,f.message||"")}(a);n=new b4(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ty(t,r.document.name),i=Ts(r.document.updateTime),a=r.document.createTime?Ts(r.document.createTime):Fe.min(),c=new Hn({mapValue:{fields:r.document.fields}}),d=xn.newFoundDocument(s,i,a,c),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Tp(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ty(t,r.document),i=r.readTime?Ts(r.readTime):Fe.min(),a=xn.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Tp([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ty(t,r.document),i=r.removedTargetIds||[];n=new Tp([],i,s,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new eM(s,i),c=r.targetId;n=new w4(c,a)}}return n}function dM(t,e){let n;if(e instanceof ch)n={update:bk(t,e.key,e.value)};else if(e instanceof x4)n={delete:lx(t,e.key)};else if(e instanceof To)n={update:bk(t,e.key,e.data),updateMask:wM(e.fieldMask)};else{if(!(e instanceof XD))return Me(16599,{ft:e.type});n={verify:lx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof bd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ed)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof kd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gp)return{fieldPath:a.field.canonicalString(),increment:c.Re};throw Me(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:lM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Me(27497)}(t,e.precondition)),n}function hM(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Ts(s.updateTime):Ts(i);return a.isEqual(Fe.min())&&(a=Ts(i)),new KD(a,s.transformResults||[])}(n,e))):[]}function fM(t,e){return{documents:[_4(t,e.path)]}}function pM(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_4(t,s);const i=function(f){if(f.length!==0)return C4(es.create(f,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(p=>function(x){return{field:Dl(x.field),direction:yM(x.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=ox(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function mM(t){let e=cM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){st(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(y){const x=A4(y);return x instanceof es&&t4(x)?x.getFilters():[x]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(x=>function(_){return new wd(Ml(_.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(x))}(n.orderBy));let c=null;n.limit&&(c=function(y){let x;return x=typeof y=="object"?y.value:y,vm(x)?null:x}(n.limit));let d=null;n.startAt&&(d=function(y){const x=!!y.before,w=y.values||[];return new Wp(w,x)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const x=!y.before,w=y.values||[];return new Wp(w,x)}(n.endAt)),DD(e,s,a,i,c,"F",d,f)}function gM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ml(n.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ml(n.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ml(n.unaryFilter.field);return Mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ml(n.unaryFilter.field);return Mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Mt.create(Ml(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return es.create(n.compositeFilter.filters.map(r=>A4(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function yM(t){return sM[t]}function xM(t){return iM[t]}function vM(t){return oM[t]}function Dl(t){return{fieldPath:t.canonicalString()}}function Ml(t){return cn.fromServerFormat(t.fieldPath)}function C4(t){return t instanceof Mt?function(n){if(n.op==="=="){if(lk(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NAN"}};if(ak(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lk(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NAN"}};if(ak(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(n.field),op:xM(n.op),value:n.value}}}(t):t instanceof es?function(n){const r=n.getFilters().map(s=>C4(s));return r.length===1?r[0]:{compositeFilter:{op:vM(n.op),filters:r}}}(t):Me(54877,{filter:t})}function wM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function I4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,r,s,i=Fe.min(),a=Fe.min(),c=un.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.wt=e}}function EM(t){const e=mM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.Cn=new _M}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(co.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(co.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class _M{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qt(ft.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},S4=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(S4,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new tc(0)}static lr(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="LruGarbageCollector",TM=1048576;function _k([t,e],[n,r]){const s=ze(t,n);return s===0?ze(e,r):s}class AM{constructor(e){this.Er=e,this.buffer=new qt(_k),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_k(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){be(kk,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kc(n)?be(kk,"Ignoring IndexedDB error during garbage collection: ",n):await Ec(n)}await this.mr(3e5)})}}class IM{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(xm.le);const r=new AM(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Ek)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ek):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,a,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,a=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(i=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Rl()<=We.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:y})))}}function SM(t,e){return new IM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.changes=new Pa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nd(r.mutation,s,nr.empty(),Wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=qe()){const s=ia();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Gu();return i.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ia();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,qe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=pi();const a=td(),c=function(){return td()}();return n.forEach((d,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof To)?i=i.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),nd(p.mutation,f,p.mutation.getFieldMask(),Wt.now())):a.set(f.key,nr.empty())}),this.recalculateAndSaveOverlays(e,i).next(d=>(d.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>{var y;return c.set(f,new PM(p,(y=a.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=td();let s=new kt((a,c)=>a-c),i=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let p=r.get(d)||nr.empty();p=c.applyToLocalView(f,p),r.set(d,p);const y=(s.get(c.batchId)||qe()).add(d);s=s.insert(c.batchId,y)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,y=u4();p.forEach(x=>{if(!i.has(x)){const w=g4(n.get(x),r.get(x));w!==null&&y.set(x,w),i=i.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ae.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ae.resolve(ia());let c=gd,d=i;return a.next(f=>ae.forEach(f,(p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),i.get(p)?ae.resolve():this.remoteDocumentCache.getEntry(e,p).next(x=>{d=d.insert(p,x)}))).next(()=>this.populateOverlays(e,f,i)).next(()=>this.computeViews(e,d,f,qe())).next(p=>({batchId:c,changes:c4(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(r=>{let s=Gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Gu();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,d=>{const f=function(y,x){return new _c(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((y,x)=>{a=a.insert(y,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((d,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,xn.newInvalidDocument(p)))});let c=Gu();return a.forEach((d,f)=>{const p=i.get(d);p!==void 0&&nd(p.mutation,f,nr.empty(),Wt.now()),km(n,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ae.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ts(s.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:EM(s.bundledQuery),readTime:Ts(s.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.overlays=new kt(Se.comparator),this.Qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ia();return ae.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const s=ia(),i=n.length+1,a=new Se(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new kt((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=i.get(f.largestBatchId);p===null&&(p=ia(),i=i.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=ia(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=s)););return ae.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new JD(n,r));let i=this.Qr.get(n);i===void 0&&(i=qe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.$r=new qt(en.Ur),this.Kr=new qt(en.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new en(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new en(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Se(new ft([])),r=new en(n,e),s=new en(n,e+1),i=[];return this.Kr.forEachInRange([r,s],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Se(new ft([])),r=new en(n,e),s=new en(n,e+1);let i=qe();return this.Kr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new en(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Se.comparator(e.key,n.key)||ze(e.Zr,n.Zr)}static Wr(e,n){return ze(e.Zr,n.Zr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new qt(en.Ur)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ZD(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Xr=this.Xr.add(new en(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(a)}lookupMutationBatch(e,n){return ae.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Uv:this.nr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new en(n,0),s=new en(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],a=>{const c=this.ei(a.Zr);i.push(c)}),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(ze);return n.forEach(s=>{const i=new en(s,0),a=new en(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],c=>{r=r.add(c.Zr)})}),ae.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Se.isDocumentKey(i)||(i=i.child(""));const a=new en(new Se(i),0);let c=new qt(ze);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.Zr)),!0)},a),ae.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){st(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ae.forEach(n.mutations,s=>{const i=new en(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new en(n,0),s=this.Xr.firstAfterOrEqual(r);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.ii=e,this.docs=function(){return new kt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=pi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xn.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=pi();const a=n.path,c=new Se(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||hD(dD(p),r)<=0||(s.has(p.key)||km(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Me(9500)}si(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FM(this)}getSize(e){return ae.resolve(this.size)}}class FM extends NM{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.persistence=e,this.oi=new Pa(n=>Wv(n),qv),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this._i=0,this.ai=new Xv,this.targetCount=0,this.ui=tc.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ae.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new tc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Tr(n),ae.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),ae.waitFor(i).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n){this.ci={},this.overlays={},this.li=new xm(0),this.hi=!1,this.hi=!0,this.Pi=new MM,this.referenceDelegate=e(this),this.Ti=new VM(this),this.indexManager=new kM,this.remoteDocumentCache=function(s){return new LM(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new bM(n),this.Ei=new jM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new OM(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const s=new BM(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return ae.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class BM extends pD{constructor(e){super(),this.currentSequenceNumber=e}}class Zv{constructor(e){this.persistence=e,this.Vi=new Xv,this.mi=null}static fi(e){return new Zv(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.gi,r=>{const s=Se.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,Fe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ae.or([()=>ae.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Yp{constructor(e,n){this.persistence=e,this.yi=new Pa(r=>yD(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=SM(this,n)}static fi(e,n){return new Yp(e,n)}di(){}Ai(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ae.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?ae.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,a=>this.Dr(e,a,n).next(c=>{c||(r++,i.removeEntry(a,Fe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ae.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ep(e.data.value)),n}Dr(e,n,r){return ae.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return ae.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=qe(),s=qe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Jv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return w8()?8:mD(En())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new $M;return this.Ss(e,n,a).next(c=>{if(i.result=c,this.fs)return this.Ds(e,n,a,c.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Rl()<=We.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ae.resolve()):(Rl()<=We.DEBUG&&be("QueryEngine","Query:",jl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Rl()<=We.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(n))):ae.resolve())}ws(e,n){if(hk(n))return ae.resolve(null);let r=_s(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qp(n,null,"F"),r=_s(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=qe(...i);return this.ys.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,c);return this.Cs(n,f,a,d.readTime)?this.ws(e,qp(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return hk(n)||s.isEqual(Fe.min())?ae.resolve(null):this.ys.getDocuments(e,r).next(i=>{const a=this.vs(n,i);return this.Cs(n,a,r,s)?ae.resolve(null):(Rl()<=We.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jl(n)),this.Fs(e,a,n,uD(s,gd)).next(c=>c))})}vs(e,n){let r=new qt(a4(e));return n.forEach((s,i)=>{km(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Rl()<=We.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",jl(n)),this.ys.getDocumentsMatchingQuery(e,n,co.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="LocalStore",zM=3e8;class HM{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new kt(ze),this.Os=new Pa(i=>Wv(i),qv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RM(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function WM(t,e,n,r){return new HM(t,e,n,r)}async function P4(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let d=qe();for(const f of s){a.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of i){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:a,addedBatchIds:c}))})})}function qM(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,p){const y=f.batch,x=y.keys();let w=ae.resolve();return x.forEach(_=>{w=w.next(()=>p.getEntry(d,_)).next(C=>{const N=f.docVersions.get(_);st(N!==null,48541),C.version.compareTo(N)<0&&(y.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),p.addEntry(C)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=qe();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function R4(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function GM(t,e){const n=Be(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((p,y)=>{const x=s.get(y);if(!x)return;c.push(n.Ti.removeMatchingKeys(i,p.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(i,p.addedDocuments,y)));let w=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(un.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),s=s.insert(y,w),function(C,N,I){return C.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=zM?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(x,w,p)&&c.push(n.Ti.updateTargetData(i,w))});let d=pi(),f=qe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(KM(i,a,e.documentUpdates).next(p=>{d=p.qs,f=p.Qs})),!r.isEqual(Fe.min())){const p=n.Ti.getLastRemoteSnapshotVersion(i).next(y=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return ae.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,d,f)).next(()=>d)}).then(i=>(n.xs=s,i))}function KM(t,e,n){let r=qe(),s=qe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=pi();return n.forEach((c,d)=>{const f=i.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Fe.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):be(e1,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{qs:a,Qs:s}})}function YM(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Uv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QM(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,ae.resolve(s)):n.Ti.allocateTargetId(r).next(a=>(s=new to(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function ux(t,e,n){const r=Be(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!kc(a))throw a;be(e1,`Failed to update sequence numbers for target ${e}: ${a}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function Tk(t,e,n){const r=Be(t);let s=Fe.min(),i=qe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,f,p){const y=Be(d),x=y.Os.get(p);return x!==void 0?ae.resolve(y.xs.get(x)):y.Ti.getTargetData(f,p)}(r,a,_s(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,c.targetId).next(d=>{i=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,e,n?s:Fe.min(),n?i:qe())).next(c=>(XM(r,OD(e),c),{documents:c,$s:i})))}function XM(t,e,n){let r=t.Ns.get(e)||Fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class Ak{constructor(){this.activeTargetIds=UD()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZM{constructor(){this.xo=new Ak,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ak,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="ConnectivityMonitor";class Ik{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){be(Ck,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){be(Ck,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp=null;function dx(){return tp===null?tp=function(){return 268435456+Math.round(2147483648*Math.random())}():tp++,"0x"+tp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="RestConnection",eO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===zp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const a=dx(),c=this.jo(e,n.toUriEncodedString());be(ny,`Sending RPC '${e}' ${a}:`,c,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,i);const{host:f}=new URL(c),p=nh(f);return this.Jo(e,c,d,r,p).then(y=>(be(ny,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Xl(ny,`RPC '${e}' ${a} failed with error: `,y,"url: ",c,"request:",r),y})}Yo(e,n,r,s,i,a){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=eO[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class rO extends tO{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=dx();return new Promise((c,d)=>{const f=new DC;f.setWithCredentials(!0),f.listenOnce(MC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bp.NO_ERROR:const y=f.getResponseJson();be(gn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),c(y);break;case bp.TIMEOUT:be(gn,`RPC '${e}' ${a} timed out`),d(new we(oe.DEADLINE_EXCEEDED,"Request time out"));break;case bp.HTTP_ERROR:const x=f.getStatus();if(be(gn,`RPC '${e}' ${a} failed with status:`,x,"response text:",f.getResponseText()),x>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const _=w==null?void 0:w.error;if(_&&_.status&&_.message){const C=function(I){const S=I.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(S)>=0?S:oe.UNKNOWN}(_.status);d(new we(C,_.message))}else d(new we(oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new we(oe.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:a,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{be(gn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);be(gn,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",p,r,15)})}I_(e,n,r){const s=dx(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FC(),c=LC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const p=i.join("");be(gn,`Creating RPC '${e}' stream ${s}: ${p}`,d);const y=a.createWebChannel(p,d);this.E_(y);let x=!1,w=!1;const _=new nO({Zo:N=>{w?be(gn,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(x||(be(gn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),x=!0),be(gn,`RPC '${e}' stream ${s} sending:`,N),y.send(N))},Xo:()=>y.close()}),C=(N,I,S)=>{N.listen(I,M=>{try{S(M)}catch(U){setTimeout(()=>{throw U},0)}})};return C(y,qu.EventType.OPEN,()=>{w||(be(gn,`RPC '${e}' stream ${s} transport opened.`),_.__())}),C(y,qu.EventType.CLOSE,()=>{w||(w=!0,be(gn,`RPC '${e}' stream ${s} transport closed`),_.u_(),this.d_(y))}),C(y,qu.EventType.ERROR,N=>{w||(w=!0,Xl(gn,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),_.u_(new we(oe.UNAVAILABLE,"The operation could not be completed")))}),C(y,qu.EventType.MESSAGE,N=>{var I;if(!w){const S=N.data[0];st(!!S,16349);const M=S,U=(M==null?void 0:M.error)||((I=M[0])===null||I===void 0?void 0:I.error);if(U){be(gn,`RPC '${e}' stream ${s} received error:`,U);const H=U.status;let B=function(k){const D=jt[k];if(D!==void 0)return v4(D)}(H),j=U.message;B===void 0&&(B=oe.INTERNAL,j="Unknown error status: "+H+" with message "+U.message),w=!0,_.u_(new we(B,j)),y.close()}else be(gn,`RPC '${e}' stream ${s} received:`,S),_.c_(S)}}),C(c,OC.STAT_EVENT,N=>{N.stat===Jy.PROXY?be(gn,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Jy.NOPROXY&&be(gn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.a_()},0),_}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function ry(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){return new aM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="PersistentStream";class D4{constructor(e,n,r,s,i,a,c,d){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new j4(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new we(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return be(Sk,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(be(Sk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sO extends D4{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=uM(this.serializer,e),r=function(i){if(!("targetChange"in i))return Fe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Fe.min():a.readTime?Ts(a.readTime):Fe.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=cx(this.serializer),n.addTarget=function(i,a){let c;const d=a.target;if(c=sx(d)?{documents:fM(i,d)}:{query:pM(i,d).gt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=E4(i,a.resumeToken);const f=ox(i,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(Fe.min())>0){c.readTime=Kp(i,a.snapshotVersion.toTimestamp());const f=ox(i,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=gM(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=cx(this.serializer),n.removeTarget=e,this.Q_(n)}}class iO extends D4{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=hM(e.writeResults,e.commitTime),r=Ts(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=cx(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dM(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{}class aO extends oO{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new we(oe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(e,ax(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new we(oe.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Yo(e,ax(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new we(oe.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class lO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(fi(n),this.ua=!1):be("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class cO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(a=>{r.enqueueAndForget(async()=>{Ra(this)&&(be(Ea,"Restarting streams for network reachability change."),await async function(d){const f=Be(d);f.da.add(4),await dh(f),f.Va.set("Unknown"),f.da.delete(4),await Im(f)}(this))})}),this.Va=new lO(r,s)}}async function Im(t){if(Ra(t))for(const e of t.Aa)await e(!0)}async function dh(t){for(const e of t.Aa)await e(!1)}function M4(t,e){const n=Be(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),s1(n)?r1(n):Tc(n).N_()&&n1(n,e))}function t1(t,e){const n=Be(t),r=Tc(n);n.Ea.delete(e),r.N_()&&O4(n,e),n.Ea.size===0&&(r.N_()?r.k_():Ra(n)&&n.Va.set("Unknown"))}function n1(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Tc(t).Z_(e)}function O4(t,e){t.ma.Ke(e),Tc(t).X_(e)}function r1(t){t.ma=new rM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Tc(t).start(),t.Va.ca()}function s1(t){return Ra(t)&&!Tc(t).O_()&&t.Ea.size>0}function Ra(t){return Be(t).da.size===0}function L4(t){t.ma=void 0}async function uO(t){t.Va.set("Online")}async function dO(t){t.Ea.forEach((e,n)=>{n1(t,e)})}async function hO(t,e){L4(t),s1(t)?(t.Va.Pa(e),r1(t)):t.Va.set("Unknown")}async function fO(t,e,n){if(t.Va.set("Online"),e instanceof b4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){be(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qp(t,r)}else if(e instanceof Tp?t.ma.Xe(e):e instanceof w4?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Fe.min()))try{const r=await R4(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.ma.It(a);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.Ea.get(f);p&&i.Ea.set(f,p.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,f)=>{const p=i.Ea.get(d);if(!p)return;i.Ea.set(d,p.withResumeToken(un.EMPTY_BYTE_STRING,p.snapshotVersion)),O4(i,d);const y=new to(p.target,d,f,p.sequenceNumber);n1(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){be(Ea,"Failed to raise snapshot:",r),await Qp(t,r)}}async function Qp(t,e,n){if(!kc(e))throw e;t.da.add(1),await dh(t),t.Va.set("Offline"),n||(n=()=>R4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{be(Ea,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Im(t)})}function F4(t,e){return e().catch(n=>Qp(t,n,e))}async function Sm(t){const e=Be(t),n=po(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Uv;for(;pO(e);)try{const s=await YM(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,mO(e,s)}catch(s){await Qp(e,s)}V4(e)&&B4(e)}function pO(t){return Ra(t)&&t.Ia.length<10}function mO(t,e){t.Ia.push(e);const n=po(t);n.N_()&&n.ea&&n.ta(e.mutations)}function V4(t){return Ra(t)&&!po(t).O_()&&t.Ia.length>0}function B4(t){po(t).start()}async function gO(t){po(t).ia()}async function yO(t){const e=po(t);for(const n of t.Ia)e.ta(n.mutations)}async function xO(t,e,n){const r=t.Ia.shift(),s=Kv.from(r,e,n);await F4(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Sm(t)}async function vO(t,e){e&&po(t).ea&&await async function(r,s){if(function(a){return tM(a)&&a!==oe.ABORTED}(s.code)){const i=r.Ia.shift();po(r).L_(),await F4(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Sm(r)}}(t,e),V4(t)&&B4(t)}async function Nk(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),be(Ea,"RemoteStore received new credentials");const r=Ra(n);n.da.add(3),await dh(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Im(n)}async function wO(t,e){const n=Be(t);e?(n.da.delete(2),await Im(n)):e||(n.da.add(2),await dh(n),n.Va.set("Unknown"))}function Tc(t){return t.fa||(t.fa=function(n,r,s){const i=Be(n);return i.oa(),new sO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:uO.bind(null,t),n_:dO.bind(null,t),i_:hO.bind(null,t),Y_:fO.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),s1(t)?r1(t):t.Va.set("Unknown")):(await t.fa.stop(),L4(t))})),t.fa}function po(t){return t.ga||(t.ga=function(n,r,s){const i=Be(n);return i.oa(),new iO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:gO.bind(null,t),i_:vO.bind(null,t),na:yO.bind(null,t),ra:xO.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Sm(t)):(await t.ga.stop(),t.Ia.length>0&&(be(Ea,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new i1(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o1(t,e){if(fi("AsyncQueue",`${e}: ${t}`),kc(t))return new we(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{static emptySet(e){return new Gl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Se.comparator(n.key,r.key):(n,r)=>Se.comparator(n.key,r.key),this.keyedMap=Gu(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.pa=new kt(Se.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class nc{constructor(e,n,r,s,i,a,c,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new nc(e,n,Gl.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class EO{constructor(){this.queries=Rk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Be(n),i=s.queries;s.queries=Rk(),i.forEach((a,c)=>{for(const d of c.Sa)d.onError(r)})})(this,new we(oe.ABORTED,"Firestore shutting down"))}}function Rk(){return new Pa(t=>o4(t),Em)}async function a1(t,e){const n=Be(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new bO,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=o1(a,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&c1(n)}async function l1(t,e){const n=Be(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kO(t,e){const n=Be(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.Sa)c.Ma(s)&&(r=!0);a.ba=s}}r&&c1(n)}function _O(t,e,n){const r=Be(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function c1(t){t.Ca.forEach(e=>{e.next()})}var hx,jk;(jk=hx||(hx={})).xa="default",jk.Cache="cache";class u1{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==hx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.key=e}}class U4{constructor(e){this.key=e}}class TO{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.Za=a4(e),this.Xa=new Gl(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new Pk,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const x=s.get(p),w=km(this.query,y)?y:null,_=!!x&&this.mutatedKeys.has(x.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;x&&w?x.data.isEqual(w.data)?_!==C&&(r.track({type:3,doc:w}),N=!0):this.ru(x,w)||(r.track({type:2,doc:w}),N=!0,(d&&this.Za(w,d)>0||f&&this.Za(w,f)<0)&&(c=!0)):!x&&w?(r.track({type:0,doc:w}),N=!0):x&&!w&&(r.track({type:1,doc:x}),N=!0,(d||f)&&(c=!0)),N&&(w?(a=a.add(w),i=C?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Xa:a,nu:r,Cs:c,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const a=e.nu.wa();a.sort((p,y)=>function(w,_){const C=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:N})}};return C(w)-C(_)}(p.type,y.type)||this.Za(p.doc,y.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,a.length!==0||f?{snapshot:new nc(this.query,e.Xa,i,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Pk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new U4(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new $4(r))}),n}au(e){this.Ha=e.$s,this.Ya=qe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return nc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const d1="SyncEngine";class AO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CO{constructor(e){this.key=e,this.cu=!1}}class IO{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new Pa(c=>o4(c),Em),this.Pu=new Map,this.Tu=new Set,this.Iu=new kt(Se.comparator),this.Eu=new Map,this.du=new Xv,this.Au={},this.Ru=new Map,this.Vu=tc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function SO(t,e,n=!0){const r=K4(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await z4(r,e,n,!0),s}async function NO(t,e){const n=K4(t);await z4(n,e,!0,!1)}async function z4(t,e,n,r){const s=await QM(t.localStore,_s(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await PO(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&M4(t.remoteStore,s),c}async function PO(t,e,n,r,s){t.fu=(y,x,w)=>async function(C,N,I,S){let M=N.view.tu(I);M.Cs&&(M=await Tk(C.localStore,N.query,!1).then(({documents:j})=>N.view.tu(j,M)));const U=S&&S.targetChanges.get(N.targetId),H=S&&S.targetMismatches.get(N.targetId)!=null,B=N.view.applyChanges(M,C.isPrimaryClient,U,H);return Mk(C,N.targetId,B.ou),B.snapshot}(t,y,x,w);const i=await Tk(t.localStore,e,!0),a=new TO(e,i.$s),c=a.tu(i.documents),d=uh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=a.applyChanges(c,t.isPrimaryClient,d);Mk(t,n,f.ou);const p=new AO(e,n,a);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function RO(t,e,n){const r=Be(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(a=>!Em(a,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ux(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&t1(r.remoteStore,s.targetId),fx(r,s.targetId)}).catch(Ec)):(fx(r,s.targetId),await ux(r.localStore,s.targetId,!0))}async function jO(t,e){const n=Be(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),t1(n.remoteStore,r.targetId))}async function DO(t,e,n){const r=$O(t);try{const s=await function(a,c){const d=Be(a),f=Wt.now(),p=c.reduce((w,_)=>w.add(_.key),qe());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let _=pi(),C=qe();return d.Bs.getEntries(w,p).next(N=>{_=N,_.forEach((I,S)=>{S.isValidDocument()||(C=C.add(I))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,_)).next(N=>{y=N;const I=[];for(const S of c){const M=QD(S,y.get(S.key).overlayedDocument);M!=null&&I.push(new To(S.key,M,ZC(M.value.mapValue),Yr.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,I,c)}).next(N=>{x=N;const I=N.applyToLocalDocumentSet(y,C);return d.documentOverlayCache.saveOverlays(w,N.batchId,I)})}).then(()=>({batchId:x.batchId,changes:c4(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,d){let f=a.Au[a.currentUser.toKey()];f||(f=new kt(ze)),f=f.insert(c,d),a.Au[a.currentUser.toKey()]=f}(r,s.batchId,n),await hh(r,s.changes),await Sm(r.remoteStore)}catch(s){const i=o1(s,"Failed to persist write");n.reject(i)}}async function H4(t,e){const n=Be(t);try{const r=await GM(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Eu.get(i);a&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.cu=!0:s.modifiedDocuments.size>0?st(a.cu,14607):s.removedDocuments.size>0&&(st(a.cu,42227),a.cu=!1))}),await hh(n,r,e)}catch(r){await Ec(r)}}function Dk(t,e,n){const r=Be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,a)=>{const c=a.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const d=Be(a);d.onlineState=c;let f=!1;d.queries.forEach((p,y)=>{for(const x of y.Sa)x.Fa(c)&&(f=!0)}),f&&c1(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MO(t,e,n){const r=Be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let a=new kt(Se.comparator);a=a.insert(i,xn.newNoDocument(i,Fe.min()));const c=qe().add(i),d=new Am(Fe.min(),new Map,new kt(ze),a,c);await H4(r,d),r.Iu=r.Iu.remove(i),r.Eu.delete(e),h1(r)}else await ux(r.localStore,e,!1).then(()=>fx(r,e,n)).catch(Ec)}async function OO(t,e){const n=Be(t),r=e.batch.batchId;try{const s=await qM(n.localStore,e);q4(n,r,null),W4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hh(n,s)}catch(s){await Ec(s)}}async function LO(t,e,n){const r=Be(t);try{const s=await function(a,c){const d=Be(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(st(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(r.localStore,e);q4(r,e,n),W4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hh(r,s)}catch(s){await Ec(s)}}function W4(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function q4(t,e,n){const r=Be(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function fx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||G4(t,r)})}function G4(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(t1(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),h1(t))}function Mk(t,e,n){for(const r of n)r instanceof $4?(t.du.addReference(r.key,e),FO(t,r)):r instanceof U4?(be(d1,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||G4(t,r.key)):Me(19791,{pu:r})}function FO(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(be(d1,"New document in limbo: "+n),t.Tu.add(r),h1(t))}function h1(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Se(ft.fromString(e)),r=t.Vu.next();t.Eu.set(r,new CO(n)),t.Iu=t.Iu.insert(n,r),M4(t.remoteStore,new to(_s(bm(n.path)),r,"TargetPurposeLimboResolution",xm.le))}}async function hh(t,e,n){const r=Be(t),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach((c,d)=>{a.push(r.fu(d,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Jv.Rs(d.targetId,f);i.push(y)}}))}),await Promise.all(a),r.lu.Y_(s),await async function(d,f){const p=Be(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ae.forEach(f,x=>ae.forEach(x.ds,w=>p.persistence.referenceDelegate.addReference(y,x.targetId,w)).next(()=>ae.forEach(x.As,w=>p.persistence.referenceDelegate.removeReference(y,x.targetId,w)))))}catch(y){if(!kc(y))throw y;be(e1,"Failed to update sequence numbers: "+y)}for(const y of f){const x=y.targetId;if(!y.fromCache){const w=p.xs.get(x),_=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(_);p.xs=p.xs.insert(x,C)}}}(r.localStore,i))}async function VO(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){be(d1,"User change. New user:",e.toKey());const r=await P4(n.localStore,e);n.currentUser=e,function(i,a){i.Ru.forEach(c=>{c.forEach(d=>{d.reject(new we(oe.CANCELLED,a))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hh(n,r.ks)}}function BO(t,e){const n=Be(t),r=n.Eu.get(e);if(r&&r.cu)return qe().add(r.key);{let s=qe();const i=n.Pu.get(e);if(!i)return s;for(const a of i){const c=n.hu.get(a);s=s.unionWith(c.view.eu)}return s}}function K4(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MO.bind(null,e),e.lu.Y_=kO.bind(null,e.eventManager),e.lu.gu=_O.bind(null,e.eventManager),e}function $O(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class Xp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return WM(this.persistence,new UM,e.initialUser,this.serializer)}Su(e){return new N4(Zv.fi,this.serializer)}bu(e){return new ZM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xp.provider={build:()=>new Xp};class UO extends Xp{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){st(this.persistence.referenceDelegate instanceof Yp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CM(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new N4(r=>Yp.fi(r,n),this.serializer)}}class px{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VO.bind(null,this.syncEngine),await wO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EO}()}createDatastore(e){const n=Cm(e.databaseInfo.databaseId),r=function(i){return new rO(i)}(e.databaseInfo);return function(i,a,c,d){return new aO(i,a,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new cO(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Dk(this.syncEngine,n,0),function(){return Ik.C()?new Ik:new JM}())}createSyncEngine(e,n){return function(s,i,a,c,d,f,p){const y=new IO(s,i,a,c,d,f);return p&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Be(s);be(Ea,"RemoteStore shutting down."),i.da.add(5),await dh(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}px.provider={build:()=>new px};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class zO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=UC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{be(mo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(be(mo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=o1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sy(t,e){t.asyncQueue.verifyOperationInProgress(),be(mo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await P4(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ok(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HO(t);be(mo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Nk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Nk(e.remoteStore,s)),t._onlineComponents=e}async function HO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(mo,"Using user provided OfflineComponentProvider");try{await sy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xl("Error using user provided cache. Falling back to memory cache: "+n),await sy(t,new Xp)}}else be(mo,"Using default OfflineComponentProvider"),await sy(t,new UO(void 0));return t._offlineComponents}async function Y4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(mo,"Using user provided OnlineComponentProvider"),await Ok(t,t._uninitializedComponentsProvider._online)):(be(mo,"Using default OnlineComponentProvider"),await Ok(t,new px))),t._onlineComponents}function WO(t){return Y4(t).then(e=>e.syncEngine)}async function Zp(t){const e=await Y4(t),n=e.eventManager;return n.onListen=SO.bind(null,e.syncEngine),n.onUnlisten=RO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jO.bind(null,e.syncEngine),n}function qO(t,e,n={}){const r=new li;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,d,f){const p=new f1({next:x=>{p.xu(),a.enqueueAndForget(()=>l1(i,y));const w=x.docs.has(c);!w&&x.fromCache?f.reject(new we(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&d&&d.source==="server"?f.reject(new we(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new u1(bm(c.path),p,{includeMetadataChanges:!0,Qa:!0});return a1(i,y)}(await Zp(t),t.asyncQueue,e,n,r)),r.promise}function GO(t,e,n={}){const r=new li;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,d,f){const p=new f1({next:x=>{p.xu(),a.enqueueAndForget(()=>l1(i,y)),x.fromCache&&d.source==="server"?f.reject(new we(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),y=new u1(c,p,{includeMetadataChanges:!0,Qa:!0});return a1(i,y)}(await Zp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t,e,n){if(!n)throw new we(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KO(t,e,n,r){if(e===!0&&r===!0)throw new we(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fk(t){if(!Se.isDocumentKey(t))throw new we(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vk(t){if(Se.isDocumentKey(t))throw new we(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nm(t);throw new we(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YO(t,e){if(e<=0)throw new we(oe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="firestore.googleapis.com",Bk=!0;class $k{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Z4,this.ssl=Bk}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Bk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=S4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TM)throw new we(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $k({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $k(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tD;switch(r.type){case"firstParty":return new iD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lk.get(n);r&&(be("ComponentProvider","Removing Datastore"),Lk.delete(n),r.terminate())}(this),Promise.resolve()}}function QO(t,e,n,r={}){var s;t=rr(t,Pm);const i=nh(e),a=t._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;i&&(WA(`https://${d}`),qA("Firestore",!0)),a.host!==Z4&&a.host!==d&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:d,ssl:i,emulatorOptions:r});if(!ya(f,c)&&(t._setSettings(f),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=yn.MOCK_USER;else{p=d8(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new we(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new yn(x)}t._authCredentials=new nD(new BC(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class oo extends wi{constructor(e,n,r){super(e,n,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Se(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function lt(t,e,...n){if(t=Kt(t),X4("collection","path",e),t instanceof Pm){const r=ft.fromString(e,...n);return Vk(r),new oo(t,null,r)}{if(!(t instanceof wn||t instanceof oo))throw new we(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return Vk(r),new oo(t.firestore,null,r)}}function Ue(t,e,...n){if(t=Kt(t),arguments.length===1&&(e=UC.newId()),X4("doc","path",e),t instanceof Pm){const r=ft.fromString(e,...n);return Fk(r),new wn(t,null,new Se(r))}{if(!(t instanceof wn||t instanceof oo))throw new we(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return Fk(r),new wn(t.firestore,t instanceof oo?t.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="AsyncQueue";class zk{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new j4(this,"async_queue_retry"),this.rc=()=>{const r=ry();r&&be(Uk,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=ry();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=ry();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new li;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!kc(e))throw e;be(Uk,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,fi("INTERNAL UNHANDLED ERROR: ",Hk(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=i1.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&Me(47125,{cc:Hk(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Hk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class go extends Pm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new zk,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zk(e),this._firestoreClient=void 0,await e}}}function XO(t,e){const n=typeof t=="object"?t:QA(),r=typeof t=="string"?t:zp,s=Pv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=c8("firestore");i&&QO(s,...i)}return s}function Rm(t){if(t._terminated)throw new we(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZO(t),t._firestoreClient}function ZO(t){var e,n,r;const s=t._freezeSettings(),i=function(c,d,f,p){return new wD(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Q4(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new zO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(un.fromBase64String(e))}catch(n){throw new we(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rc(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^__.*__$/;class eL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new ch(e,this.data,n,this.fieldTransforms)}}class J4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new To(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class g1{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new g1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Jp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(eI(this.Ic)&&JO.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class tL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cm(e)}bc(e,n,r,s=!1){return new g1({Ic:e,methodName:n,wc:r,path:cn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mm(t){const e=t._freezeSettings(),n=Cm(t._databaseId);return new tL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tI(t,e,n,r,s,i={}){const a=t.bc(i.merge||i.mergeFields?2:0,e,n,s);x1("Data must be an object, but it was:",a,r);const c=nI(r,a);let d,f;if(i.merge)d=new nr(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const y of i.mergeFields){const x=mx(e,y,n);if(!a.contains(x))throw new we(oe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);sI(p,x)||p.push(x)}d=new nr(p),f=a.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=a.fieldTransforms;return new eL(new Hn(c),d,f)}class Om extends Dm{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}class y1 extends Dm{_toFieldTransform(e){return new qD(e.path,new bd)}isEqual(e){return e instanceof y1}}function nL(t,e,n,r){const s=t.bc(1,e,n);x1("Data must be an object, but it was:",s,r);const i=[],a=Hn.empty();_o(r,(d,f)=>{const p=v1(e,d,n);f=Kt(f);const y=s.mc(p);if(f instanceof Om)i.push(p);else{const x=fh(f,y);x!=null&&(i.push(p),a.set(p,x))}});const c=new nr(i);return new J4(a,c,s.fieldTransforms)}function rL(t,e,n,r,s,i){const a=t.bc(1,e,n),c=[mx(e,r,n)],d=[s];if(i.length%2!=0)throw new we(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(mx(e,i[x])),d.push(i[x+1]);const f=[],p=Hn.empty();for(let x=c.length-1;x>=0;--x)if(!sI(f,c[x])){const w=c[x];let _=d[x];_=Kt(_);const C=a.mc(w);if(_ instanceof Om)f.push(w);else{const N=fh(_,C);N!=null&&(f.push(w),p.set(w,N))}}const y=new nr(f);return new J4(p,y,a.fieldTransforms)}function sL(t,e,n,r=!1){return fh(n,t.bc(r?4:3,e))}function fh(t,e){if(rI(t=Kt(t)))return x1("Unsupported field value:",e,t),nI(t,e);if(t instanceof Dm)return function(r,s){if(!eI(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let d=fh(c,s.fc(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Wt.fromDate(r);return{timestampValue:Kp(s.serializer,i)}}if(r instanceof Wt){const i=new Wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kp(s.serializer,i)}}if(r instanceof p1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rc)return{bytesValue:E4(s.serializer,r._byteString)};if(r instanceof wn){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof m1)return function(a,c){return{mapValue:{fields:{[QC]:{stringValue:XC},[Hp]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw c.gc("VectorValues must only contain numeric values.");return Gv(c.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Nm(r)}`)}(t,e)}function nI(t,e){const n={};return HC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,(r,s)=>{const i=fh(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wt||t instanceof p1||t instanceof rc||t instanceof wn||t instanceof Dm||t instanceof m1)}function x1(t,e,n){if(!rI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function mx(t,e,n){if((e=Kt(e))instanceof jm)return e._internalPath;if(typeof e=="string")return v1(t,e);throw Jp("Field path arguments must be of type string or ",t,!1,void 0,n)}const iL=new RegExp("[~\\*/\\[\\]]");function v1(t,e,n){if(e.search(iL)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jm(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jp(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||a)&&(d+=" (found",i&&(d+=` in field ${r}`),a&&(d+=` in document ${s}`),d+=")"),new we(oe.INVALID_ARGUMENT,c+t+d)}function sI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oL extends iI{data(){return super.data()}}function Lm(t,e){return typeof e=="string"?v1(t,e):e instanceof jm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class w1{}class b1 extends w1{}function Ot(t,e,...n){let r=[];e instanceof w1&&r.push(e),r=r.concat(n),function(i){const a=i.filter(d=>d instanceof E1).length,c=i.filter(d=>d instanceof Fm).length;if(a>1||a>0&&c>0)throw new we(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fm extends b1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fm(e,n,r)}_apply(e){const n=this._parse(e);return aI(e._query,n),new wi(e.firestore,e.converter,ix(e._query,n))}_parse(e){const n=Mm(e.firestore);return function(i,a,c,d,f,p,y){let x;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new we(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Gk(y,p);const _=[];for(const C of y)_.push(qk(d,i,C));x={arrayValue:{values:_}}}else x=qk(d,i,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Gk(y,p),x=sL(c,a,y,p==="in"||p==="not-in");return Mt.create(f,p,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function et(t,e,n){const r=e,s=Lm("where",t);return Fm._create(s,r,n)}class E1 extends w1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new E1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:es.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const d of c)aI(a,d),a=ix(a,d)}(e._query,n),new wi(e.firestore,e.converter,ix(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k1 extends b1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new k1(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new we(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wd(i,a)}(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new _c(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ph(t,e="asc"){const n=e,r=Lm("orderBy",t);return k1._create(r,n)}class _1 extends b1{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _1(e,n,r)}_apply(e){return new wi(e.firestore,e.converter,qp(e._query,this._limit,this._limitType))}}function Vm(t){return YO("limit",t),_1._create("limit",t,"F")}function qk(t,e,n){if(typeof(n=Kt(n))=="string"){if(n==="")throw new we(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i4(e)&&n.indexOf("/")!==-1)throw new we(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!Se.isDocumentKey(r))throw new we(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ok(t,new Se(r))}if(n instanceof wn)return ok(t,n._key);throw new we(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(n)}.`)}function Gk(t,e){if(!Array.isArray(t)||t.length===0)throw new we(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aI(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aL{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _o(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Hp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>St(a.doubleValue));return new m1(i)}convertGeoPoint(e){return new p1(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const n=uo(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);st(I4(r),9688,{name:e});const s=new xd(r.get(1),r.get(3)),i=new Se(r.popFirst(5));return s.isEqual(n)||fi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cI extends iI{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ap(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ap extends cI{data(e={}){return super.data(e)}}class uI{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ap(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const d=new Ap(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Yu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const d=new Ap(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Yu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:lL(c.type),doc:d,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function lL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){t=rr(t,wn);const e=rr(t.firestore,go);return qO(Rm(e),t._key).then(n=>dI(e,t,n))}class T1 extends aL{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function Er(t){t=rr(t,wi);const e=rr(t.firestore,go),n=Rm(e),r=new T1(e);return oI(t._query),GO(n,t._query).then(s=>new uI(e,r,t,s))}function Qr(t,e,n){t=rr(t,wn);const r=rr(t.firestore,go),s=lI(t.converter,e,n);return A1(r,[tI(Mm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yr.none())])}function ts(t,e,n,...r){t=rr(t,wn);const s=rr(t.firestore,go),i=Mm(s);let a;return a=typeof(e=Kt(e))=="string"||e instanceof jm?rL(i,"updateDoc",t._key,e,n,r):nL(i,"updateDoc",t._key,e),A1(s,[a.toMutation(t._key,Yr.exists(!0))])}function Ac(t,e){const n=rr(t.firestore,go),r=Ue(t),s=lI(t.converter,e);return A1(n,[tI(Mm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yr.exists(!1))]).then(()=>r)}function Xr(t,...e){var n,r,s;t=Kt(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Wk(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Wk(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let d,f,p;if(t instanceof wn)f=rr(t.firestore,go),p=bm(t._key.path),d={next:y=>{e[a]&&e[a](dI(f,t,y))},error:e[a+1],complete:e[a+2]};else{const y=rr(t,wi);f=rr(y.firestore,go),p=y._query;const x=new T1(f);d={next:w=>{e[a]&&e[a](new uI(f,x,y,w))},error:e[a+1],complete:e[a+2]},oI(t._query)}return function(x,w,_,C){const N=new f1(C),I=new u1(w,N,_);return x.asyncQueue.enqueueAndForget(async()=>a1(await Zp(x),I)),()=>{N.xu(),x.asyncQueue.enqueueAndForget(async()=>l1(await Zp(x),I))}}(Rm(f),p,c,d)}function A1(t,e){return function(r,s){const i=new li;return r.asyncQueue.enqueueAndForget(async()=>DO(await WO(r),s,i)),i.promise}(Rm(t),e)}function dI(t,e,n){const r=n.docs.get(e._key),s=new T1(t);return new cI(t,s,e._key,r,new Yu(n.hasPendingWrites,n.fromCache),e.converter)}function rt(){return new y1("serverTimestamp")}(function(e,n=!0){(function(s){bc=s})(vc),Ql(new xa("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new go(new rD(r.getProvider("auth-internal")),new oD(a,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new we(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(f.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),so(KE,YE,e),so(KE,YE,"esm2017")})();const cL={apiKey:"AIzaSyAQbXY5Z2khTxanGXybUxlEzI8zB60Ih-E",authDomain:"dev-plotmint.firebaseapp.com",projectId:"dev-plotmint",storageBucket:"dev-plotmint.firebasestorage.app",messagingSenderId:"298831072664",appId:"1:298831072664:web:9ebfd9f876b3ac01d1afed"},hI=YA(cL),oa=J7(hI),ke=XO(hI),uL=async(t,e)=>{var n;try{const r=Ue(ke,"userProfiles",t.uid),s=await nt(r),i=((n=t.email)==null?void 0:n.split("@")[0])||"user",a={id:t.uid,username:i,displayName:t.displayName||i,avatar:t.photoURL||`https://i.pravatar.cc/150?u=${t.uid}`,bio:"",joined:s.exists()?s.data().joined:rt(),isCreator:!1,...s.exists()?s.data():{},...e,updatedAt:rt()};await Qr(r,a,{merge:!0})}catch(r){throw console.error("Error updating user profile:",r),r}},dL="1.0.8";let sr=class gx extends Error{constructor(e,n={}){var a;const r=n.cause instanceof gx?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details,s=n.cause instanceof gx&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${dL}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function bi(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const fI=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,pI=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,mI=/^\(.+?\).*?$/,Kk=/^tuple(?<array>(\[(\d*)\])*)$/;function yx(t){let e=t.type;if(Kk.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=yx(i),s<n-1&&(e+=", ")}const r=bi(Kk,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,yx({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Du(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=yx(s),r!==n-1&&(e+=", ")}return e}function em(t){var e;return t.type==="function"?`function ${t.name}(${Du(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Du(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Du(t.inputs)})`:t.type==="error"?`error ${t.name}(${Du(t.inputs)})`:t.type==="constructor"?`constructor(${Du(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const gI=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function hL(t){return gI.test(t)}function fL(t){return bi(gI,t)}const yI=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function pL(t){return yI.test(t)}function mL(t){return bi(yI,t)}const xI=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function gL(t){return xI.test(t)}function yL(t){return bi(xI,t)}const vI=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function C1(t){return vI.test(t)}function xL(t){return bi(vI,t)}const wI=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function vL(t){return wI.test(t)}function wL(t){return bi(wI,t)}const bI=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function bL(t){return bI.test(t)}function EL(t){return bi(bI,t)}const kL=/^receive\(\) external payable$/;function _L(t){return kL.test(t)}const TL=new Set(["indexed"]),xx=new Set(["calldata","memory","storage"]);class AL extends sr{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class CL extends sr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class IL extends sr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class SL extends sr{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class NL extends sr{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class PL extends sr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class RL extends sr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class jL extends sr{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Cc extends sr{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class DL extends sr{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class ML extends sr{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class OL extends sr{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class LL extends sr{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function FL(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const a of s[1])i+=`[${a.type}${a.name?`:${a.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const iy=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function vx(t,e={}){if(gL(t))return VL(t,e);if(pL(t))return BL(t,e);if(hL(t))return $L(t,e);if(vL(t))return UL(t,e);if(bL(t))return zL(t);if(_L(t))return{type:"receive",stateMutability:"payable"};throw new DL({signature:t})}function VL(t,e={}){const n=yL(t);if(!n)throw new Cc({signature:t,type:"function"});const r=Gr(n.parameters),s=[],i=r.length;for(let c=0;c<i;c++)s.push(ka(r[c],{modifiers:xx,structs:e,type:"function"}));const a=[];if(n.returns){const c=Gr(n.returns),d=c.length;for(let f=0;f<d;f++)a.push(ka(c[f],{modifiers:xx,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}function BL(t,e={}){const n=mL(t);if(!n)throw new Cc({signature:t,type:"event"});const r=Gr(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ka(r[a],{modifiers:TL,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function $L(t,e={}){const n=fL(t);if(!n)throw new Cc({signature:t,type:"error"});const r=Gr(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ka(r[a],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function UL(t,e={}){const n=wL(t);if(!n)throw new Cc({signature:t,type:"constructor"});const r=Gr(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ka(r[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function zL(t){const e=EL(t);if(!e)throw new Cc({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const HL=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,WL=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,qL=/^u?int$/;function ka(t,e){var y,x;const n=FL(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(iy.has(n))return iy.get(n);const r=mI.test(t),s=bi(r?WL:HL,t);if(!s)throw new SL({param:t});if(s.name&&KL(s.name))throw new NL({param:t,name:s.name});const i=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},c=(e==null?void 0:e.structs)??{};let d,f={};if(r){d="tuple";const w=Gr(s.type),_=[],C=w.length;for(let N=0;N<C;N++)_.push(ka(w[N],{structs:c}));f={components:_}}else if(s.type in c)d="tuple",f={components:c[s.type]};else if(qL.test(s.type))d=`${s.type}256`;else if(d=s.type,(e==null?void 0:e.type)!=="struct"&&!EI(d))throw new IL({type:d});if(s.modifier){if(!((x=(y=e==null?void 0:e.modifiers)==null?void 0:y.has)!=null&&x.call(y,s.modifier)))throw new PL({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(xx.has(s.modifier)&&!YL(d,!!s.array))throw new RL({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const p={type:`${d}${s.array??""}`,...i,...a,...f};return iy.set(n,p),p}function Gr(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const a=t[i],c=t.slice(i+1);switch(a){case",":return r===0?Gr(c,[...e,n.trim()]):Gr(c,e,`${n}${a}`,r);case"(":return Gr(c,e,`${n}${a}`,r+1);case")":return Gr(c,e,`${n}${a}`,r-1);default:return Gr(c,e,`${n}${a}`,r)}}if(n==="")return e;if(r!==0)throw new LL({current:n,depth:r});return e.push(n.trim()),e}function EI(t){return t==="address"||t==="bool"||t==="function"||t==="string"||fI.test(t)||pI.test(t)}const GL=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function KL(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||fI.test(t)||pI.test(t)||GL.test(t)}function YL(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function kI(t){const e={},n=t.length;for(let a=0;a<n;a++){const c=t[a];if(!C1(c))continue;const d=xL(c);if(!d)throw new Cc({signature:c,type:"struct"});const f=d.properties.split(";"),p=[],y=f.length;for(let x=0;x<y;x++){const _=f[x].trim();if(!_)continue;const C=ka(_,{type:"struct"});p.push(C)}if(!p.length)throw new ML({signature:c});e[d.name]=p}const r={},s=Object.entries(e),i=s.length;for(let a=0;a<i;a++){const[c,d]=s[a];r[c]=_I(d,e)}return r}const QL=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function _I(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const a=t[i];if(mI.test(a.type))r.push(a);else{const d=bi(QL,a.type);if(!(d!=null&&d.type))throw new jL({abiParameter:a});const{array:f,type:p}=d;if(p in e){if(n.has(p))throw new OL({type:p});r.push({...a,type:`tuple${f??""}`,components:_I(e[p]??[],e,new Set([...n,p]))})}else if(EI(p))r.push(a);else throw new CL({type:p})}}return r}function TI(t){const e=kI(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];C1(i)||n.push(vx(i,e))}return n}function Yk(t){let e;if(typeof t=="string")e=vx(t);else{const n=kI(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!C1(i)){e=vx(i,n);break}}}if(!e)throw new AL({signature:t});return e}function Ne(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function ns(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new cF(t.type);return`${t.name}(${Bm(t.inputs,{includeName:e})})`}function Bm(t,{includeName:e=!1}={}){return t?t.map(n=>XL(n,{includeName:e})).join(e?", ":","):""}function XL(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Bm(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Ns(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function bt(t){return Ns(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const AI="2.31.2";let Mu={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${AI}`},se=class wx extends Error{constructor(e,n={}){var c;const r=(()=>{var d;return n.cause instanceof wx?n.cause.details:(d=n.cause)!=null&&d.message?n.cause.message:n.details})(),s=n.cause instanceof wx&&n.cause.docsPath||n.docsPath,i=(c=Mu.getDocsUrl)==null?void 0:c.call(Mu,{...n,docsPath:s}),a=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Mu.version?[`Version: ${Mu.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=AI}walk(e){return CI(this,e)}};function CI(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?CI(t.cause,e):e?null:t}class ZL extends se{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class Qk extends se{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class II extends se{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Bm(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class mh extends se{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}let JL=class extends se{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},eF=class extends se{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${bt(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},tF=class extends se{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}};class nF extends se{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Xk extends se{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class SI extends se{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class rF extends se{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class NI extends se{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Zk extends se{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class sc extends se{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class PI extends se{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class sF extends se{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}let iF=class extends se{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ns(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ns(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},oF=class extends se{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class _d extends se{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Bm(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class $m extends se{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ns(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}let aF=class extends se{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}};class lF extends se{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let RI=class extends se{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},cF=class extends se{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}};class uF extends se{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let jI=class extends se{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},DI=class extends se{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Jk extends se{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ic(t,{dir:e,size:n=32}={}){return typeof t=="string"?ao(t,{dir:e,size:n}):dF(t,{dir:e,size:n})}function ao(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new DI({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function dF(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new DI({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let MI=class extends se{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class hF extends se{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class fF extends se{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let pF=class extends se{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function kr(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function os(t,{size:e}){if(bt(t)>e)throw new pF({givenSize:bt(t),maxSize:e})}function tn(t,e={}){const{signed:n}=e;e.size&&os(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function mF(t,e={}){let n=t;if(e.size&&(os(n,{size:e.size}),n=kr(n)),kr(n)==="0x00")return!1;if(kr(n)==="0x01")return!0;throw new fF(n)}function Tr(t,e={}){return Number(tn(t,e))}const gF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bn(t,e={}){return typeof t=="number"||typeof t=="bigint"?fe(t,e):typeof t=="string"?ic(t,e):typeof t=="boolean"?OI(t,e):Lt(t,e)}function OI(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(os(n,{size:e.size}),Ic(n,{size:e.size})):n}function Lt(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=gF[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(os(r,{size:e.size}),Ic(r,{dir:"right",size:e.size})):r}function fe(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const d=typeof t=="bigint"?"n":"";throw new MI({max:i?`${i}${d}`:void 0,min:`${a}${d}`,signed:n,size:r,value:`${t}${d}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ic(c,{size:r}):c}const yF=new TextEncoder;function ic(t,e={}){const n=yF.encode(t);return Lt(n,e)}const xF=new TextEncoder;function ja(t,e={}){return typeof t=="number"||typeof t=="bigint"?wF(t,e):typeof t=="boolean"?vF(t,e):Ns(t)?rs(t,e):pa(t,e)}function vF(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(os(n,{size:e.size}),Ic(n,{size:e.size})):n}const Zs={zero:48,nine:57,A:65,F:70,a:97,f:102};function e_(t){if(t>=Zs.zero&&t<=Zs.nine)return t-Zs.zero;if(t>=Zs.A&&t<=Zs.F)return t-(Zs.A-10);if(t>=Zs.a&&t<=Zs.f)return t-(Zs.a-10)}function rs(t,e={}){let n=t;e.size&&(os(n,{size:e.size}),n=Ic(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const d=e_(r.charCodeAt(c++)),f=e_(r.charCodeAt(c++));if(d===void 0||f===void 0)throw new se(`Invalid byte sequence ("${r[c-2]}${r[c-1]}" in "${r}").`);i[a]=d*16+f}return i}function wF(t,e){const n=fe(t,e);return rs(n)}function pa(t,e={}){const n=xF.encode(t);return typeof e.size=="number"?(os(n,{size:e.size}),Ic(n,{dir:"right",size:e.size})):n}const np=BigInt(2**32-1),t_=BigInt(32);function bF(t,e=!1){return e?{h:Number(t&np),l:Number(t>>t_&np)}:{h:Number(t>>t_&np)|0,l:Number(t&np)|0}}function EF(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:c}=bF(t[i],e);[r[i],s[i]]=[a,c]}return[r,s]}const kF=(t,e,n)=>t<<n|e>>>32-n,_F=(t,e,n)=>e<<n|t>>>32-n,TF=(t,e,n)=>e<<n-32|t>>>64-n,AF=(t,e,n)=>t<<n-32|e>>>64-n,Nl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function I1(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Td(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ss(t,...e){if(!I1(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CF(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Td(t.outputLen),Td(t.blockLen)}function oc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function LI(t,e){ss(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function IF(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ac(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function oy(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vs(t,e){return t<<32-e|t>>>e}const SF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function NF(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function PF(t){for(let e=0;e<t.length;e++)t[e]=NF(t[e]);return t}const n_=SF?t=>t:PF,FI=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",RF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ad(t){if(ss(t),FI)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=RF[t[n]];return e}const Js={_0:48,_9:57,A:65,F:70,a:97,f:102};function r_(t){if(t>=Js._0&&t<=Js._9)return t-Js._0;if(t>=Js.A&&t<=Js.F)return t-(Js.A-10);if(t>=Js.a&&t<=Js.f)return t-(Js.a-10)}function S1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(FI)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=r_(t.charCodeAt(i)),c=r_(t.charCodeAt(i+1));if(a===void 0||c===void 0){const d=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=a*16+c}return r}function jF(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Um(t){return typeof t=="string"&&(t=jF(t)),ss(t),t}function aa(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ss(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let N1=class{};function VI(t){const e=r=>t().update(Um(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function DF(t=32){if(Nl&&typeof Nl.getRandomValues=="function")return Nl.getRandomValues(new Uint8Array(t));if(Nl&&typeof Nl.randomBytes=="function")return Uint8Array.from(Nl.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const MF=BigInt(0),Ou=BigInt(1),OF=BigInt(2),LF=BigInt(7),FF=BigInt(256),VF=BigInt(113),BI=[],$I=[],UI=[];for(let t=0,e=Ou,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],BI.push(2*(5*r+n)),$I.push((t+1)*(t+2)/2%64);let s=MF;for(let i=0;i<7;i++)e=(e<<Ou^(e>>LF)*VF)%FF,e&OF&&(s^=Ou<<(Ou<<BigInt(i))-Ou);UI.push(s)}const zI=EF(UI,!0),BF=zI[0],$F=zI[1],s_=(t,e,n)=>n>32?TF(t,e,n):kF(t,e,n),i_=(t,e,n)=>n>32?AF(t,e,n):_F(t,e,n);function UF(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const c=(a+8)%10,d=(a+2)%10,f=n[d],p=n[d+1],y=s_(f,p,1)^n[c],x=i_(f,p,1)^n[c+1];for(let w=0;w<50;w+=10)t[a+w]^=y,t[a+w+1]^=x}let s=t[2],i=t[3];for(let a=0;a<24;a++){const c=$I[a],d=s_(s,i,c),f=i_(s,i,c),p=BI[a];s=t[p],i=t[p+1],t[p]=d,t[p+1]=f}for(let a=0;a<50;a+=10){for(let c=0;c<10;c++)n[c]=t[a+c];for(let c=0;c<10;c++)t[a+c]^=~n[(c+2)%10]&n[(c+4)%10]}t[0]^=BF[r],t[1]^=$F[r]}ac(n)}let zF=class HI extends N1{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Td(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=IF(this.state)}clone(){return this._cloneInto()}keccak(){n_(this.state32),UF(this.state32,this.rounds),n_(this.state32),this.posOut=0,this.pos=0}update(e){oc(this),e=Um(e),ss(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let c=0;c<a;c++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){oc(this,!1),ss(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Td(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(LI(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ac(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new HI(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const HF=(t,e,n)=>VI(()=>new zF(e,t,n)),WI=HF(1,136,256/8);function Ht(t,e){const n=e||"hex",r=WI(Ns(t,{strict:!1})?ja(t):t);return n==="bytes"?r:bn(r)}const WF=t=>Ht(ja(t));function qF(t){return WF(t)}function GF(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const c=t[a];if(["(",")",","].includes(c)&&(e=!0),c==="("&&r++,c===")"&&r--,!!e){if(r===0){if(c===" "&&["event","function",""].includes(s))s="";else if(s+=c,c===")"){i=!0;break}continue}if(c===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=c,n+=c}}if(!i)throw new se("Unable to normalize signature.");return s}const KF=t=>{const e=typeof t=="string"?t:em(t);return GF(e)};function qI(t){return qF(KF(t))}const zm=qI;let Nn=class extends se{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Hm=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const ay=new Hm(8192);function gh(t,e){if(ay.has(`${t}.${e}`))return ay.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Ht(pa(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return ay.set(`${t}.${e}`,i),i}function GI(t,e){if(!Yt(t,{strict:!1}))throw new Nn({address:t});return gh(t,e)}const YF=/^0x[a-fA-F0-9]{40}$/,ly=new Hm(8192);function Yt(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(ly.has(r))return ly.get(r);const s=YF.test(t)?t.toLowerCase()===t?!0:n?gh(t)===t:!0:!1;return ly.set(r,s),s}function Ps(t){return typeof t[0]=="string"?as(t):QF(t)}function QF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function as(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function yo(t,e,n,{strict:r}={}){return Ns(t,{strict:!1})?tm(t,e,n,{strict:r}):QI(t,e,n,{strict:r})}function KI(t,e){if(typeof e=="number"&&e>0&&e>bt(t)-1)throw new jI({offset:e,position:"start",size:bt(t)})}function YI(t,e,n){if(typeof e=="number"&&typeof n=="number"&&bt(t)!==n-e)throw new jI({offset:n,position:"end",size:bt(t)})}function QI(t,e,n,{strict:r}={}){KI(t,e);const s=t.slice(e,n);return r&&YI(s,e,n),s}function tm(t,e,n,{strict:r}={}){KI(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&YI(s,e,n),s}const XF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,XI=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ao(t,e){if(t.length!==e.length)throw new tF({expectedLength:t.length,givenLength:e.length});const n=ZF({params:t,values:e}),r=R1(n);return r.length===0?"0x":r}function ZF({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(P1({param:t[r],value:e[r]}));return n}function P1({param:t,value:e}){const n=j1(t.type);if(n){const[r,s]=n;return eV(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return iV(e,{param:t});if(t.type==="address")return JF(e);if(t.type==="bool")return nV(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=XI.exec(t.type)??[];return rV(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return tV(e,{param:t});if(t.type==="string")return sV(e);throw new aF(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function R1(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:c}=t[i];a?e+=32:e+=bt(c)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:c}=t[i];a?(n.push(fe(e+s,{size:32})),r.push(c),s+=bt(c)):n.push(c)}return Ps([...n,...r])}function JF(t){if(!Yt(t))throw new Nn({address:t});return{dynamic:!1,encoded:ao(t.toLowerCase())}}function eV(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new RI(t);if(!r&&t.length!==e)throw new JL({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let a=0;a<t.length;a++){const c=P1({param:n,value:t[a]});c.dynamic&&(s=!0),i.push(c)}if(r||s){const a=R1(i);if(r){const c=fe(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ps([c,a]):c}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Ps(i.map(({encoded:a})=>a))}}function tV(t,{param:e}){const[,n]=e.type.split("bytes"),r=bt(t);if(!n){let s=t;return r%32!==0&&(s=ao(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ps([ao(fe(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new eF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:ao(t,{dir:"right"})}}function nV(t){if(typeof t!="boolean")throw new se(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ao(OI(t))}}function rV(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new MI({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:fe(t,{size:32,signed:e})}}function sV(t){const e=ic(t),n=Math.ceil(bt(e)/32),r=[];for(let s=0;s<n;s++)r.push(ao(yo(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ps([ao(fe(bt(e),{size:32})),...r])}}function iV(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],a=Array.isArray(t)?s:i.name,c=P1({param:i,value:t[a]});r.push(c),c.dynamic&&(n=!0)}return{dynamic:n,encoded:n?R1(r):Ps(r.map(({encoded:s})=>s))}}function j1(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const yh=t=>yo(qI(t),0,4);function Da(t){const{abi:e,args:n=[],name:r}=t,s=Ns(r,{strict:!1}),i=e.filter(c=>s?c.type==="function"?yh(c)===r:c.type==="event"?zm(c)===r:!1:"name"in c&&c.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const c of i){if(!("inputs"in c))continue;if(!n||n.length===0){if(!c.inputs||c.inputs.length===0)return c;continue}if(!c.inputs||c.inputs.length===0||c.inputs.length!==n.length)continue;if(n.every((f,p)=>{const y="inputs"in c&&c.inputs[p];return y?bx(f,y):!1})){if(a&&"inputs"in a&&a.inputs){const f=ZI(c.inputs,a.inputs,n);if(f)throw new iF({abiItem:c,type:f[0]},{abiItem:a,type:f[1]})}a=c}}return a||i[0]}function bx(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Yt(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>bx(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>bx(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ZI(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return ZI(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Yt(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?Yt(n[r],{strict:!1}):!1)return a}}const o_="/docs/contract/encodeEventTopics";function xh(t){var d;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const f=Da({abi:e,name:n});if(!f)throw new Zk(n,{docsPath:o_});s=f}if(s.type!=="event")throw new Zk(void 0,{docsPath:o_});const i=ns(s),a=zm(i);let c=[];if(r&&"inputs"in s){const f=(d=s.inputs)==null?void 0:d.filter(y=>"indexed"in y&&y.indexed),p=Array.isArray(r)?r:Object.values(r).length>0?(f==null?void 0:f.map(y=>r[y.name]))??[]:[];p.length>0&&(c=(f==null?void 0:f.map((y,x)=>Array.isArray(p[x])?p[x].map((w,_)=>a_({param:y,value:p[x][_]})):typeof p[x]<"u"&&p[x]!==null?a_({param:y,value:p[x]}):null))??[])}return[a,...c]}function a_({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ht(ja(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new uF(t.type);return Ao([t],[e])}function Wm(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:a,status:c,transport:d})=>{c==="success"&&e===i&&(n[a]=d.request)})),i=>n[i]||t.request}async function JI(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:a,strict:c,toBlock:d}=e,f=Wm(t,{method:"eth_newFilter"}),p=i?xh({abi:r,args:s,eventName:i}):void 0,y=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof a=="bigint"?fe(a):a,toBlock:typeof d=="bigint"?fe(d):d,topics:p}]});return{abi:r,args:s,eventName:i,id:y,request:f(y),strict:!!c,type:"event"}}function Nt(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const l_="/docs/contract/encodeFunctionData";function oV(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Da({abi:e,args:n,name:r});if(!i)throw new sc(r,{docsPath:l_});s=i}if(s.type!=="function")throw new sc(void 0,{docsPath:l_});return{abi:[s],functionName:yh(ns(s))}}function Sr(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var c;return t.abi.length===1&&((c=t.functionName)!=null&&c.startsWith("0x"))?t:oV(t)})(),s=n[0],i=r,a="inputs"in s&&s.inputs?Ao(s.inputs,e??[]):void 0;return as([i,a??"0x"])}const eS={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},tS={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},aV={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class c_ extends se{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class nS extends se{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class lV extends se{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const cV={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new lV({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new nS({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new c_({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new c_({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function D1(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(cV);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function uV(t,e={}){typeof e.size<"u"&&os(t,{size:e.size});const n=Lt(t,e);return tn(n,e)}function dV(t,e={}){let n=t;if(typeof e.size<"u"&&(os(n,{size:e.size}),n=kr(n)),n.length>1||n[0]>1)throw new hF(n);return!!n[0]}function ci(t,e={}){typeof e.size<"u"&&os(t,{size:e.size});const n=Lt(t,e);return Tr(n,e)}function hV(t,e={}){let n=t;return typeof e.size<"u"&&(os(n,{size:e.size}),n=kr(n,{dir:"right"})),new TextDecoder().decode(n)}function vh(t,e){const n=typeof e=="string"?rs(e):e,r=D1(n);if(bt(n)===0&&t.length>0)throw new mh;if(bt(e)&&bt(e)<32)throw new II({data:typeof e=="string"?e:Lt(e),params:t,size:bt(e)});let s=0;const i=[];for(let a=0;a<t.length;++a){const c=t[a];r.setPosition(s);const[d,f]=Kl(r,c,{staticPosition:0});s+=f,i.push(d)}return i}function Kl(t,e,{staticPosition:n}){const r=j1(e.type);if(r){const[s,i]=r;return pV(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return xV(t,e,{staticPosition:n});if(e.type==="address")return fV(t);if(e.type==="bool")return mV(t);if(e.type.startsWith("bytes"))return gV(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return yV(t,e);if(e.type==="string")return vV(t,{staticPosition:n});throw new lF(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const u_=32,Ex=32;function fV(t){const e=t.readBytes(32);return[gh(Lt(QI(e,-20))),32]}function pV(t,e,{length:n,staticPosition:r}){if(!n){const a=ci(t.readBytes(Ex)),c=r+a,d=c+u_;t.setPosition(c);const f=ci(t.readBytes(u_)),p=Cd(e);let y=0;const x=[];for(let w=0;w<f;++w){t.setPosition(d+(p?w*32:y));const[_,C]=Kl(t,e,{staticPosition:d});y+=C,x.push(_)}return t.setPosition(r+32),[x,32]}if(Cd(e)){const a=ci(t.readBytes(Ex)),c=r+a,d=[];for(let f=0;f<n;++f){t.setPosition(c+f*32);const[p]=Kl(t,e,{staticPosition:c});d.push(p)}return t.setPosition(r+32),[d,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[c,d]=Kl(t,e,{staticPosition:r+s});s+=d,i.push(c)}return[i,s]}function mV(t){return[dV(t.readBytes(32),{size:32}),32]}function gV(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const a=ci(t.readBytes(32));t.setPosition(n+a);const c=ci(t.readBytes(32));if(c===0)return t.setPosition(n+32),["0x",32];const d=t.readBytes(c);return t.setPosition(n+32),[Lt(d),32]}return[Lt(t.readBytes(Number.parseInt(s),32)),32]}function yV(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?uV(s,{signed:n}):ci(s,{signed:n}),32]}function xV(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(Cd(e)){const a=ci(t.readBytes(Ex)),c=n+a;for(let d=0;d<e.components.length;++d){const f=e.components[d];t.setPosition(c+i);const[p,y]=Kl(t,f,{staticPosition:c});i+=y,s[r?d:f==null?void 0:f.name]=p}return t.setPosition(n+32),[s,32]}for(let a=0;a<e.components.length;++a){const c=e.components[a],[d,f]=Kl(t,c,{staticPosition:n});s[r?a:c==null?void 0:c.name]=d,i+=f}return[s,i]}function vV(t,{staticPosition:e}){const n=ci(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ci(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),a=hV(kr(i));return t.setPosition(e+32),[a,32]}function Cd(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Cd);const n=j1(t.type);return!!(n&&Cd({...t,type:n[1]}))}function wV(t){const{abi:e,data:n}=t,r=yo(n,0,4);if(r==="0x")throw new mh;const i=[...e||[],tS,aV].find(a=>a.type==="error"&&r===yh(ns(a)));if(!i)throw new SI(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?vh(i.inputs,yo(n,4)):void 0,errorName:i.name}}const Gt=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function rS({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Gt(e[i]):e[i]}`).join(", ")})`}const sS={gwei:9,wei:18},bV={ether:-9,wei:9};function iS(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function M1(t,e="wei"){return iS(t,sS[e])}function Gn(t,e="wei"){return iS(t,bV[e])}class EV extends se{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class kV extends se{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function d_(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function _V(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=d_(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=d_(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function wh(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class TV extends se{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class AV extends se{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class CV extends se{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",wh(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class IV extends se{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class SV extends se{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:c,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p,to:y,value:x}){var _;const w=wh({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:y,value:typeof x<"u"&&`${M1(x)} ${((_=s==null?void 0:s.nativeCurrency)==null?void 0:_.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof c<"u"&&`${Gn(c)} gwei`,maxFeePerGas:typeof d<"u"&&`${Gn(d)} gwei`,maxPriorityFeePerGas:typeof f<"u"&&`${Gn(f)} gwei`,nonce:p});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",w].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class oS extends se{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let a="Transaction";r&&i!==void 0&&(a=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(a=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(a=`Transaction at block number "${n}" at index "${i}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class aS extends se{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class NV extends se{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const PV=t=>t,O1=t=>t;class lS extends se{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:c,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p,to:y,value:x,stateOverride:w}){var N;const _=n?Nt(n):void 0;let C=wh({from:_==null?void 0:_.address,to:y,value:typeof x<"u"&&`${M1(x)} ${((N=s==null?void 0:s.nativeCurrency)==null?void 0:N.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof c<"u"&&`${Gn(c)} gwei`,maxFeePerGas:typeof d<"u"&&`${Gn(d)} gwei`,maxPriorityFeePerGas:typeof f<"u"&&`${Gn(f)} gwei`,nonce:p});w&&(C+=`
${_V(w)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",C].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class RV extends se{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:a,sender:c}){const d=Da({abi:n,args:r,name:a}),f=d?rS({abiItem:d,args:r,includeFunctionName:!1,includeName:!1}):void 0,p=d?ns(d,{includeName:!0}):void 0,y=wh({address:s&&PV(s),function:p,args:f&&f!=="()"&&`${[...Array((a==null?void 0:a.length)??0).keys()].map(()=>" ").join("")}${f}`,sender:c});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],y&&"Contract Call:",y].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=a,this.sender=c}}class kx extends se{constructor({abi:e,data:n,functionName:r,message:s}){let i,a,c,d;if(n&&n!=="0x")try{a=wV({abi:e,data:n});const{abiItem:p,errorName:y,args:x}=a;if(y==="Error")d=x[0];else if(y==="Panic"){const[w]=x;d=eS[w]}else{const w=p?ns(p,{includeName:!0}):void 0,_=p&&x?rS({abiItem:p,args:x,includeFunctionName:!1,includeName:!1}):void 0;c=[w?`Error: ${w}`:"",_&&_!=="()"?`       ${[...Array((y==null?void 0:y.length)??0).keys()].map(()=>" ").join("")}${_}`:""]}}catch(p){i=p}else s&&(d=s);let f;i instanceof SI&&(f=i.signature,c=[`Unable to decode signature "${f}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${f}.`]),super(d&&d!=="execution reverted"||f?[`The contract function "${r}" reverted with the following ${f?"signature":"reason"}:`,d||f].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:c,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=n,this.reason=d,this.signature=f}}class jV extends se{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class DV extends se{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class qm extends se{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class rd extends se{constructor({body:e,cause:n,details:r,headers:s,status:i,url:a}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${O1(a)}`,e&&`Request body: ${Gt(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=a}}class L1 extends se{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${O1(r)}`,`Request body: ${Gt(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class h_ extends se{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${O1(n)}`,`Request body: ${Gt(e)}`],name:"TimeoutError"})}}const MV=-1;class Kn extends se{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:a}){super(a,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof L1?e.code:n??MV}}class ir extends Kn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Id extends Kn{constructor(e){super(e,{code:Id.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Id,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Sd extends Kn{constructor(e){super(e,{code:Sd.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Nd extends Kn{constructor(e,{method:n}={}){super(e,{code:Nd.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Nd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Pd extends Kn{constructor(e){super(e,{code:Pd.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Pd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class _a extends Kn{constructor(e){super(e,{code:_a.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(_a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ta extends Kn{constructor(e){super(e,{code:Ta.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ta,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Rd extends Kn{constructor(e){super(e,{code:Rd.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Rd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class jd extends Kn{constructor(e){super(e,{code:jd.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(jd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Dd extends Kn{constructor(e){super(e,{code:Dd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Dd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class la extends Kn{constructor(e,{method:n}={}){super(e,{code:la.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(la,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class lc extends Kn{constructor(e){super(e,{code:lc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(lc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Md extends Kn{constructor(e){super(e,{code:Md.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Md,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Yl extends ir{constructor(e){super(e,{code:Yl.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Od extends ir{constructor(e){super(e,{code:Od.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Od,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ld extends ir{constructor(e,{method:n}={}){super(e,{code:Ld.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Ld,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Fd extends ir{constructor(e){super(e,{code:Fd.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Fd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Vd extends ir{constructor(e){super(e,{code:Vd.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Bd extends ir{constructor(e){super(e,{code:Bd.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class cc extends ir{constructor(e){super(e,{code:cc.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class $d extends ir{constructor(e){super(e,{code:$d.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty($d,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Ud extends ir{constructor(e){super(e,{code:Ud.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Ud,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class zd extends ir{constructor(e){super(e,{code:zd.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(zd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Hd extends ir{constructor(e){super(e,{code:Hd.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Hd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Wd extends ir{constructor(e){super(e,{code:Wd.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class uc extends ir{constructor(e){super(e,{code:uc.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(uc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class OV extends Kn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const LV=3;function Aa(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:a}){const c=t instanceof qm?t:t instanceof se?t.walk(_=>"data"in _)||t.walk():{},{code:d,data:f,details:p,message:y,shortMessage:x}=c,w=t instanceof mh?new jV({functionName:i}):[LV,_a.code].includes(d)&&(f||p||y||x)?new kx({abi:e,data:typeof f=="object"?f.data:f,functionName:i,message:c instanceof L1?p:x??y}):t;return new RV(w,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:a})}function FV(t){const e=Ht(`0x${t.substring(4)}`).substring(26);return gh(`0x${e}`)}const VV="modulepreload",BV=function(t){return"/"+t},f_={},cS=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=a(n.map(f=>{if(f=BV(f),f in f_)return;f_[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":VV,p||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),p)return new Promise((w,_)=>{x.addEventListener("load",w),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};async function $V({hash:t,signature:e}){const n=Ns(t)?t:bn(t),{secp256k1:r}=await cS(async()=>{const{secp256k1:a}=await Promise.resolve().then(()=>Lz);return{secp256k1:a}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:f,s:p,v:y,yParity:x}=e,w=Number(x??y),_=p_(w);return new r.Signature(tn(f),tn(p)).addRecoveryBit(_)}const a=Ns(e)?e:bn(e);if(bt(a)!==65)throw new Error("invalid signature length");const c=Tr(`0x${a.slice(130)}`),d=p_(c);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(d)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function p_(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function uS({hash:t,signature:e}){return FV(await $V({hash:t,signature:e}))}function xo(t,e="hex"){const n=dS(t),r=D1(new Uint8Array(n.length));return n.encode(r),e==="hex"?Lt(r.bytes):r.bytes}function dS(t){return Array.isArray(t)?UV(t.map(e=>dS(e))):zV(t)}function UV(t){const e=t.reduce((s,i)=>s+i.length,0),n=hS(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function zV(t){const e=typeof t=="string"?rs(t):t,n=hS(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function hS(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new se("Length is too large.")}function HV(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ht(as(["0x05",xo([e?fe(e):"0x",s,n?fe(n):"0x"])]));return r==="bytes"?rs(i):i}async function fS(t){const{authorization:e,signature:n}=t;return uS({hash:HV(e),signature:n??e})}class WV extends se{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:c,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p,to:y,value:x}){var _;const w=wh({from:n==null?void 0:n.address,to:y,value:typeof x<"u"&&`${M1(x)} ${((_=s==null?void 0:s.nativeCurrency)==null?void 0:_.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof c<"u"&&`${Gn(c)} gwei`,maxFeePerGas:typeof d<"u"&&`${Gn(d)} gwei`,maxPriorityFeePerGas:typeof f<"u"&&`${Gn(f)} gwei`,nonce:p});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",w].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Ll extends se{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ll,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ca extends se{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Gn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ca,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class _x extends se{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Gn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(_x,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Tx extends se{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Tx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Ax extends se{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Ax,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Cx extends se{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Cx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Ix extends se{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Ix,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Sx extends se{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Sx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Nx extends se{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Nx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Px extends se{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Px,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class qd extends se{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Gn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Gn(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(qd,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class bh extends se{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Gm(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof se?t.walk(s=>(s==null?void 0:s.code)===Ll.code):t;return r instanceof se?new Ll({cause:t,message:r.details}):Ll.nodeMessage.test(n)?new Ll({cause:t,message:t.details}):Ca.nodeMessage.test(n)?new Ca({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):_x.nodeMessage.test(n)?new _x({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Tx.nodeMessage.test(n)?new Tx({cause:t,nonce:e==null?void 0:e.nonce}):Ax.nodeMessage.test(n)?new Ax({cause:t,nonce:e==null?void 0:e.nonce}):Cx.nodeMessage.test(n)?new Cx({cause:t,nonce:e==null?void 0:e.nonce}):Ix.nodeMessage.test(n)?new Ix({cause:t}):Sx.nodeMessage.test(n)?new Sx({cause:t,gas:e==null?void 0:e.gas}):Nx.nodeMessage.test(n)?new Nx({cause:t,gas:e==null?void 0:e.gas}):Px.nodeMessage.test(n)?new Px({cause:t}):qd.nodeMessage.test(n)?new qd({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new bh({cause:t})}function qV(t,{docsPath:e,...n}){const r=(()=>{const s=Gm(t,n);return s instanceof bh?t:s})();return new WV(r,{docsPath:e,...n})}function Km(t,{format:e}){if(!e)return{};const n={};function r(i){const a=Object.keys(i);for(const c of a)c in t&&(n[c]=t[c]),i[c]&&typeof i[c]=="object"&&!Array.isArray(i[c])&&r(i[c])}const s=e(t||{});return r(s),n}function F1(t,e){return({exclude:n,format:r})=>({exclude:n,format:s=>{const i=e(s);if(n)for(const a of n)delete i[a];return{...i,...r(s)}},type:t})}const GV={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Sc(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=KV(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Lt(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=fe(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=fe(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=fe(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=fe(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=fe(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=fe(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=GV[t.type]),typeof t.value<"u"&&(e.value=fe(t.value)),e}function KV(t){return t.map(e=>({address:e.address,r:e.r?fe(BigInt(e.r)):e.r,s:e.s?fe(BigInt(e.s)):e.s,chainId:fe(e.chainId),nonce:fe(e.nonce),...typeof e.yParity<"u"?{yParity:fe(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:fe(e.v)}:{}}))}function m_(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new Jk({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Jk({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function YV(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,a={};if(i!==void 0&&(a.code=i),e!==void 0&&(a.balance=fe(e)),n!==void 0&&(a.nonce=fe(n)),r!==void 0&&(a.state=m_(r)),s!==void 0){if(a.state)throw new kV;a.stateDiff=m_(s)}return a}function V1(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Yt(n,{strict:!1}))throw new Nn({address:n});if(e[n])throw new EV({address:n});e[n]=YV(r)}return e}const Ym=2n**256n-1n;function Ma(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,a=e?Nt(e):void 0;if(a&&!Yt(a.address))throw new Nn({address:a.address});if(i&&!Yt(i))throw new Nn({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new TV;if(r&&r>Ym)throw new Ca({maxFeePerGas:r});if(s&&r&&s>r)throw new qd({maxFeePerGas:r,maxPriorityFeePerGas:s})}class QV extends se{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class B1 extends se{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class XV extends se{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Gn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class pS extends se{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const mS={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Qm(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Tr(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Tr(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?mS[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=JV(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const ZV=F1("transaction",Qm);function JV(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function $1(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Qm(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const eB=F1("block",$1);async function bs(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var p,y,x;const i=r??"latest",a=s??!1,c=n!==void 0?fe(n):void 0;let d=null;if(e?d=await t.request({method:"eth_getBlockByHash",params:[e,a]},{dedupe:!0}):d=await t.request({method:"eth_getBlockByNumber",params:[c||i,a]},{dedupe:!!c}),!d)throw new pS({blockHash:e,blockNumber:n});return(((x=(y=(p=t.chain)==null?void 0:p.formatters)==null?void 0:y.block)==null?void 0:x.format)||$1)(d)}async function U1(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function tB(t,e){return gS(t,e)}async function gS(t,e){var i,a;const{block:n,chain:r=t.chain,request:s}=e||{};try{const c=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((a=r==null?void 0:r.fees)==null?void 0:a.defaultPriorityFee);if(typeof c=="function"){const f=n||await Ne(t,bs,"getBlock")({}),p=await c({block:f,client:t,request:s});if(p===null)throw new Error;return p}if(typeof c<"u")return c;const d=await t.request({method:"eth_maxPriorityFeePerGas"});return tn(d)}catch{const[c,d]=await Promise.all([n?Promise.resolve(n):Ne(t,bs,"getBlock")({}),Ne(t,U1,"getGasPrice")({})]);if(typeof c.baseFeePerGas!="bigint")throw new B1;const f=d-c.baseFeePerGas;return f<0n?0n:f}}async function nB(t,e){return Rx(t,e)}async function Rx(t,e){var x,w;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},a=await(async()=>{var _,C;return typeof((_=r==null?void 0:r.fees)==null?void 0:_.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((C=r==null?void 0:r.fees)==null?void 0:C.baseFeeMultiplier)??1.2})();if(a<1)throw new QV;const d=10**(((x=a.toString().split(".")[1])==null?void 0:x.length)??0),f=_=>_*BigInt(Math.ceil(a*d))/BigInt(d),p=n||await Ne(t,bs,"getBlock")({});if(typeof((w=r==null?void 0:r.fees)==null?void 0:w.estimateFeesPerGas)=="function"){const _=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:f,request:s,type:i});if(_!==null)return _}if(i==="eip1559"){if(typeof p.baseFeePerGas!="bigint")throw new B1;const _=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await gS(t,{block:p,chain:r,request:s}),C=f(p.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??C+_,maxPriorityFeePerGas:_}}return{gasPrice:(s==null?void 0:s.gasPrice)??f(await Ne(t,U1,"getGasPrice")({}))}}async function z1(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?fe(r):n]},{dedupe:!!r});return Tr(s)}function H1(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>rs(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Lt(i))}function W1(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(a=>rs(a)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(a=>rs(a)):t.commitments,i=[];for(let a=0;a<r.length;a++){const c=r[a],d=s[a];i.push(Uint8Array.from(e.computeBlobKzgProof(c,d)))}return n==="bytes"?i:i.map(a=>Lt(a))}function rB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),c=Number(n&i),d=r?4:0,f=r?0:4;t.setUint32(e+d,a,r),t.setUint32(e+f,c,r)}function sB(t,e,n){return t&e^~t&n}function iB(t,e,n){return t&e^t&n^e&n}class oB extends N1{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=oy(this.buffer)}update(e){oc(this),e=Um(e),ss(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const c=Math.min(s-this.pos,i-a);if(c===s){const d=oy(e);for(;s<=i-a;a+=s)this.process(d,a);continue}r.set(e.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){oc(this),LI(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,ac(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let y=a;y<s;y++)n[y]=0;rB(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=oy(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=d/4,p=this.get();if(f>p.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<f;y++)c.setUint32(4*y,p[y],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:c}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=c,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Ki=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),aB=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yi=new Uint32Array(64);class lB extends oB{constructor(e=32){super(64,e,8,!1),this.A=Ki[0]|0,this.B=Ki[1]|0,this.C=Ki[2]|0,this.D=Ki[3]|0,this.E=Ki[4]|0,this.F=Ki[5]|0,this.G=Ki[6]|0,this.H=Ki[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:c,H:d}=this;return[e,n,r,s,i,a,c,d]}set(e,n,r,s,i,a,c,d){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=c|0,this.H=d|0}process(e,n){for(let y=0;y<16;y++,n+=4)Yi[y]=e.getUint32(n,!1);for(let y=16;y<64;y++){const x=Yi[y-15],w=Yi[y-2],_=vs(x,7)^vs(x,18)^x>>>3,C=vs(w,17)^vs(w,19)^w>>>10;Yi[y]=C+Yi[y-7]+_+Yi[y-16]|0}let{A:r,B:s,C:i,D:a,E:c,F:d,G:f,H:p}=this;for(let y=0;y<64;y++){const x=vs(c,6)^vs(c,11)^vs(c,25),w=p+x+sB(c,d,f)+aB[y]+Yi[y]|0,C=(vs(r,2)^vs(r,13)^vs(r,22))+iB(r,s,i)|0;p=f,f=d,d=c,c=a+w|0,a=i,i=s,s=r,r=w+C|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,c=c+this.E|0,d=d+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(r,s,i,a,c,d,f,p)}roundClean(){ac(Yi)}destroy(){this.set(0,0,0,0,0,0,0,0),ac(this.buffer)}}const yS=VI(()=>new lB),cB=yS;function uB(t,e){return cB(Ns(t,{strict:!1})?ja(t):t)}function dB(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=uB(e);return s.set([n],0),r==="bytes"?s:Lt(s)}function xS(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(dB({commitment:i,to:r,version:n}));return s}const g_=6,vS=32,q1=4096,wS=vS*q1,y_=wS*g_-1-1*q1*g_,bS=1;class hB extends se{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class ES extends se{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class fB extends se{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class pB extends se{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${bS}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function mB(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?rs(t.data):t.data,r=bt(n);if(!r)throw new ES;if(r>y_)throw new hB({maxSize:y_,size:r});const s=[];let i=!0,a=0;for(;i;){const c=D1(new Uint8Array(wS));let d=0;for(;d<q1;){const f=n.slice(a,a+(vS-1));if(c.pushByte(0),c.pushBytes(f),f.length<31){c.pushByte(128),i=!1;break}d++,a+=31}s.push(c)}return e==="bytes"?s.map(c=>c.bytes):s.map(c=>Lt(c.bytes))}function kS(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??mB({data:e,to:r}),i=t.commitments??H1({blobs:s,kzg:n,to:r}),a=t.proofs??W1({blobs:s,commitments:i,kzg:n,to:r}),c=[];for(let d=0;d<s.length;d++)c.push({blob:s[d],commitment:i[d],proof:a[d]});return c}function _S(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new CV({transaction:t})}async function Nc(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Tr(e)}const TS=["blobVersionedHashes","chainId","fees","gas","nonce","type"],x_=new Map;async function Xm(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:a,nonce:c,nonceManager:d,parameters:f=TS,type:p}=e,y=n&&Nt(n),x={...e,...y?{from:y==null?void 0:y.address}:{}};let w;async function _(){return w||(w=await Ne(t,bs,"getBlock")({blockTag:"latest"}),w)}let C;async function N(){return C||(s?s.id:typeof e.chainId<"u"?e.chainId:(C=await Ne(t,Nc,"getChainId")({}),C))}if(f.includes("nonce")&&typeof c>"u"&&y)if(d){const I=await N();x.nonce=await d.consume({address:y.address,chainId:I,client:t})}else x.nonce=await Ne(t,z1,"getTransactionCount")({address:y.address,blockTag:"pending"});if((f.includes("blobVersionedHashes")||f.includes("sidecars"))&&r&&a){const I=H1({blobs:r,kzg:a});if(f.includes("blobVersionedHashes")){const S=xS({commitments:I,to:"hex"});x.blobVersionedHashes=S}if(f.includes("sidecars")){const S=W1({blobs:r,commitments:I,kzg:a}),M=kS({blobs:r,commitments:I,proofs:S,to:"hex"});x.sidecars=M}}if(f.includes("chainId")&&(x.chainId=await N()),(f.includes("fees")||f.includes("type"))&&typeof p>"u")try{x.type=_S(x)}catch{let I=x_.get(t.uid);if(typeof I>"u"){const S=await _();I=typeof(S==null?void 0:S.baseFeePerGas)=="bigint",x_.set(t.uid,I)}x.type=I?"eip1559":"legacy"}if(f.includes("fees"))if(x.type!=="legacy"&&x.type!=="eip2930"){if(typeof x.maxFeePerGas>"u"||typeof x.maxPriorityFeePerGas>"u"){const I=await _(),{maxFeePerGas:S,maxPriorityFeePerGas:M}=await Rx(t,{block:I,chain:s,request:x});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<M)throw new XV({maxPriorityFeePerGas:M});x.maxPriorityFeePerGas=M,x.maxFeePerGas=S}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new B1;if(typeof e.gasPrice>"u"){const I=await _(),{gasPrice:S}=await Rx(t,{block:I,chain:s,request:x,type:"legacy"});x.gasPrice=S}}return f.includes("gas")&&typeof i>"u"&&(x.gas=await Ne(t,G1,"estimateGas")({...x,account:y&&{address:y.address,type:"json-rpc"}})),Ma(x),delete x.parameters,x}async function AS(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?fe(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function G1(t,e){var s,i,a;const{account:n=t.account}=e,r=n?Nt(n):void 0;try{let Z=function(le){const{block:te,request:q,rpcStateOverride:ie}=le;return t.request({method:"eth_estimateGas",params:ie?[q,te??"latest",ie]:te?[q,te]:[q]})};const{accessList:c,authorizationList:d,blobs:f,blobVersionedHashes:p,blockNumber:y,blockTag:x,data:w,gas:_,gasPrice:C,maxFeePerBlobGas:N,maxFeePerGas:I,maxPriorityFeePerGas:S,nonce:M,value:U,stateOverride:H,...B}=await Xm(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof y=="bigint"?fe(y):void 0)||x,k=V1(H),D=await(async()=>{if(B.to)return B.to;if(d&&d.length>0)return await fS({authorization:d[0]}).catch(()=>{throw new se("`to` is required. Could not infer from `authorizationList`")})})();Ma(e);const R=(a=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:a.format,O=(R||Sc)({...Km(B,{format:R}),from:r==null?void 0:r.address,accessList:c,authorizationList:d,blobs:f,blobVersionedHashes:p,data:w,gas:_,gasPrice:C,maxFeePerBlobGas:N,maxFeePerGas:I,maxPriorityFeePerGas:S,nonce:M,to:D,value:U});let re=BigInt(await Z({block:T,request:O,rpcStateOverride:k}));if(d){const le=await AS(t,{address:O.from}),te=await Promise.all(d.map(async q=>{const{address:ie}=q,ne=await Z({block:T,request:{authorizationList:void 0,data:w,from:r==null?void 0:r.address,to:ie,value:fe(le)},rpcStateOverride:k}).catch(()=>100000n);return 2n*BigInt(ne)}));re+=te.reduce((q,ie)=>q+ie,0n)}return re}catch(c){throw qV(c,{...e,account:r,chain:t.chain})}}async function gB(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:a,...c}=e,d=Sr({abi:n,args:s,functionName:i});try{return await Ne(t,G1,"estimateGas")({data:`${d}${a?a.replace("0x",""):""}`,to:r,...c})}catch(f){const p=c.account?Nt(c.account):void 0;throw Aa(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:p==null?void 0:p.address})}}function Zm(t,e){if(!Yt(t,{strict:!1}))throw new Nn({address:t});if(!Yt(e,{strict:!1}))throw new Nn({address:e});return t.toLowerCase()===e.toLowerCase()}const v_="/docs/contract/decodeEventLog";function K1(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[a,...c]=s;if(!a)throw new rF({docsPath:v_});const d=e.find(C=>C.type==="event"&&a===zm(ns(C)));if(!(d&&"name"in d)||d.type!=="event")throw new NI(a,{docsPath:v_});const{name:f,inputs:p}=d,y=p==null?void 0:p.some(C=>!("name"in C&&C.name)),x=y?[]:{},w=p.map((C,N)=>[C,N]).filter(([C])=>"indexed"in C&&C.indexed);for(let C=0;C<w.length;C++){const[N,I]=w[C],S=c[C];if(!S)throw new $m({abiItem:d,param:N});x[y?I:N.name||I]=yB({param:N,value:S})}const _=p.filter(C=>!("indexed"in C&&C.indexed));if(_.length>0){if(n&&n!=="0x")try{const C=vh(_,n);if(C)if(y)for(let N=0;N<p.length;N++)x[N]=x[N]??C.shift();else for(let N=0;N<_.length;N++)x[_[N].name]=C[N]}catch(C){if(i)throw C instanceof II||C instanceof nS?new _d({abiItem:d,data:n,params:_,size:bt(n)}):C}else if(i)throw new _d({abiItem:d,data:"0x",params:_,size:0})}return{eventName:f,args:Object.values(x).length>0?x:void 0}}function yB({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(vh([t],e)||[])[0]}function Eh(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(a=>{var c;try{const d=e.find(p=>p.type==="event"&&a.topics[0]===zm(p));if(!d)return null;const f=K1({...a,abi:[d],strict:s});return i&&!i.includes(f.eventName)||!xB({args:f.args,inputs:d.inputs,matchArgs:n})?null:{...f,...a}}catch(d){let f,p;if(d instanceof NI)return null;if(d instanceof _d||d instanceof $m){if(s)return null;f=d.abiItem.name,p=(c=d.abiItem.inputs)==null?void 0:c.some(y=>!("name"in y&&y.name))}return{...a,args:p?[]:{},eventName:f}}}).filter(Boolean)}function xB(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,a,c){try{return i.type==="address"?Zm(a,c):i.type==="string"||i.type==="bytes"?Ht(ja(a))===c:a===c}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,a)=>{if(i==null)return!0;const c=n[a];return c?(Array.isArray(i)?i:[i]).some(f=>s(c,f,e[a])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,a])=>{if(a==null)return!0;const c=n.find(f=>f.name===i);return c?(Array.isArray(a)?a:[a]).some(f=>s(c,f,e[i])):!1}):!1}function mi(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Y1(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:a,args:c,strict:d}={}){const f=d??!1,p=a??(i?[i]:void 0);let y=[];p&&(y=[p.flatMap(C=>xh({abi:[C],eventName:C.name,args:a?void 0:c}))],i&&(y=y[0]));let x;n?x=await t.request({method:"eth_getLogs",params:[{address:e,topics:y,blockHash:n}]}):x=await t.request({method:"eth_getLogs",params:[{address:e,topics:y,fromBlock:typeof r=="bigint"?fe(r):r,toBlock:typeof s=="bigint"?fe(s):s}]});const w=x.map(_=>mi(_));return p?Eh({abi:p,args:c,logs:w,strict:f}):w}async function CS(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:a,fromBlock:c,toBlock:d,strict:f}=e,p=a?Da({abi:n,name:a}):void 0,y=p?void 0:n.filter(x=>x.type==="event");return Ne(t,Y1,"getLogs")({address:r,args:s,blockHash:i,event:p,events:y,fromBlock:c,toBlock:d,strict:f})}const cy="/docs/contract/decodeFunctionResult";function Oa(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const c=Da({abi:e,args:n,name:r});if(!c)throw new sc(r,{docsPath:cy});i=c}if(i.type!=="function")throw new sc(void 0,{docsPath:cy});if(!i.outputs)throw new PI(i.name,{docsPath:cy});const a=vh(i.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q1=BigInt(0),jx=BigInt(1);function nm(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function rp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function IS(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Q1:BigInt("0x"+t)}function Jm(t){return IS(Ad(t))}function SS(t){return ss(t),IS(Ad(Uint8Array.from(t).reverse()))}function X1(t,e){return S1(t.toString(16).padStart(e*2,"0"))}function NS(t,e){return X1(t,e).reverse()}function vr(t,e,n){let r;if(typeof e=="string")try{r=S1(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(I1(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const uy=t=>typeof t=="bigint"&&Q1<=t;function vB(t,e,n){return uy(t)&&uy(e)&&uy(n)&&e<=t&&t<n}function wB(t,e,n,r){if(!vB(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function bB(t){let e;for(e=0;t>Q1;t>>=jx,e+=1);return e}const e0=t=>(jx<<BigInt(t))-jx;function EB(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=w=>new Uint8Array(w),s=w=>Uint8Array.of(w);let i=r(t),a=r(t),c=0;const d=()=>{i.fill(1),a.fill(0),c=0},f=(...w)=>n(a,i,...w),p=(w=r(0))=>{a=f(s(0),w),i=f(),w.length!==0&&(a=f(s(1),w),i=f())},y=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const _=[];for(;w<e;){i=f();const C=i.slice();_.push(C),w+=i.length}return aa(..._)};return(w,_)=>{d(),p(w);let C;for(;!(C=_(y()));)p();return d(),C}}function Z1(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,a){const c=t[s];if(a&&c===void 0)return;const d=typeof c;if(d!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${d}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function w_(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const kB="0.1.1";function _B(){return kB}class yt extends Error{constructor(e,n={}){const r=(()=>{var d;if(n.cause instanceof yt){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(d=n.cause)!=null&&d.message?n.cause.message:n.details})(),s=n.cause instanceof yt&&n.cause.docsPath||n.docsPath,a=`https://oxlib.sh${s??""}`,c=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0]:[]].filter(d=>typeof d=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${_B()}`}),this.cause=n.cause,this.details=r,this.docs=a,this.docsPath=s,this.shortMessage=e}walk(e){return PS(this,e)}}function PS(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?PS(t.cause,e):e?null:t}const TB="#__bigint";function AB(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+TB:s,n)}function CB(t,e){if(E_(t)>e)throw new LB({givenSize:E_(t),maxSize:e})}const ei={zero:48,nine:57,A:65,F:70,a:97,f:102};function b_(t){if(t>=ei.zero&&t<=ei.nine)return t-ei.zero;if(t>=ei.A&&t<=ei.F)return t-(ei.A-10);if(t>=ei.a&&t<=ei.f)return t-(ei.a-10)}function IB(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new FB({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const a=n==="right";s[a?i:r-i-1]=t[a?i:t.length-i-1]}return s}function J1(t,e){if(Ar(t)>e)throw new zB({givenSize:Ar(t),maxSize:e})}function SB(t,e){if(typeof e=="number"&&e>0&&e>Ar(t)-1)throw new OS({offset:e,position:"start",size:Ar(t)})}function NB(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ar(t)!==n-e)throw new OS({offset:n,position:"end",size:Ar(t)})}function RS(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new HB({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const PB=new TextEncoder;function RB(t){return t instanceof Uint8Array?t:typeof t=="string"?DB(t):jB(t)}function jB(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function DB(t,e={}){const{size:n}=e;let r=t;n&&(J1(t,n),r=Sa(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,a=new Uint8Array(i);for(let c=0,d=0;c<i;c++){const f=b_(s.charCodeAt(d++)),p=b_(s.charCodeAt(d++));if(f===void 0||p===void 0)throw new yt(`Invalid byte sequence ("${s[d-2]}${s[d-1]}" in "${s}").`);a[c]=f*16+p}return a}function MB(t,e={}){const{size:n}=e,r=PB.encode(t);return typeof n=="number"?(CB(r,n),OB(r,n)):r}function OB(t,e){return IB(t,{dir:"right",size:e})}function E_(t){return t.length}let LB=class extends yt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},FB=class extends yt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const VB=new TextEncoder,BB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $B(t,e={}){const{strict:n=!1}=e;if(!t)throw new k_(t);if(typeof t!="string")throw new k_(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new __(t);if(!t.startsWith("0x"))throw new __(t)}function Rs(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function jS(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(J1(n,e.size),Ia(n,e.size)):n}function DS(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=BB[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(J1(r,e.size),Sa(r,e.size)):r}function Cn(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const f=typeof t=="bigint"?"n":"";throw new MS({max:i?`${i}${f}`:void 0,min:`${a}${f}`,signed:n,size:r,value:`${t}${f}`})}const d=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ia(d,r):d}function ew(t,e={}){return DS(VB.encode(t),e)}function Ia(t,e){return RS(t,{dir:"left",size:e})}function Sa(t,e){return RS(t,{dir:"right",size:e})}function tw(t,e,n,r={}){const{strict:s}=r;SB(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&NB(i,e,n),i}function Ar(t){return Math.ceil((t.length-2)/2)}function UB(t,e={}){const{strict:n=!1}=e;try{return $B(t,{strict:n}),!0}catch{return!1}}let MS=class extends yt{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class k_ extends yt{constructor(e){super(`Value \`${typeof e=="object"?AB(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class __ extends yt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let zB=class extends yt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},OS=class extends yt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},HB=class extends yt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function WB(t){return{address:t.address,amount:Cn(t.amount),index:Cn(t.index),validatorIndex:Cn(t.validatorIndex)}}function LS(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Cn(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Cn(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Cn(t.gasLimit)},...typeof t.number=="bigint"&&{number:Cn(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Cn(t.prevRandao)},...typeof t.time=="bigint"&&{time:Cn(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(WB)}}}const Dx=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Mx=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],FS=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],VS=[...FS,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],qB=[...FS,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],T_=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],A_=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],C_=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],GB="0x82ad56cb",BS="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",KB="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",YB="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class Ox extends se{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class QB extends se{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class XB extends se{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class $S extends se{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class t0 extends se{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const dy="/docs/contract/encodeDeployData";function n0(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new ZL({docsPath:dy});if(!("inputs"in s))throw new Qk({docsPath:dy});if(!s.inputs||s.inputs.length===0)throw new Qk({docsPath:dy});const i=Ao(s.inputs,n);return as([r,i])}function Pc({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new Ox({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Ox({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function US(t,{docsPath:e,...n}){const r=(()=>{const s=Gm(t,n);return s instanceof bh?t:s})();return new lS(r,{docsPath:e,...n})}function nw(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const hy=new Map;function zS({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const p=d();a();const y=p.map(({args:x})=>x);y.length!==0&&t(y).then(x=>{s&&Array.isArray(x)&&x.sort(s);for(let w=0;w<p.length;w++){const{resolve:_}=p[w];_==null||_([x[w],x])}}).catch(x=>{for(let w=0;w<p.length;w++){const{reject:_}=p[w];_==null||_(x)}})},a=()=>hy.delete(e),c=()=>d().map(({args:p})=>p),d=()=>hy.get(e)||[],f=p=>hy.set(e,[...d(),p]);return{flush:a,async schedule(p){const{promise:y,resolve:x,reject:w}=nw();return(n==null?void 0:n([...c(),p]))&&i(),d().length>0?(f({args:p,resolve:x,reject:w}),y):(f({args:p,resolve:x,reject:w}),setTimeout(i,r),y)}}}async function r0(t,e){var O,Z,re,le;const{account:n=t.account,authorizationList:r,batch:s=!!((O=t.batch)!=null&&O.multicall),blockNumber:i,blockTag:a="latest",accessList:c,blobs:d,blockOverrides:f,code:p,data:y,factory:x,factoryData:w,gas:_,gasPrice:C,maxFeePerBlobGas:N,maxFeePerGas:I,maxPriorityFeePerGas:S,nonce:M,to:U,value:H,stateOverride:B,...j}=e,T=n?Nt(n):void 0;if(p&&(x||w))throw new se("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(p&&U)throw new se("Cannot provide both `code` & `to` as parameters.");const k=p&&y,D=x&&w&&U&&y,R=k||D,L=k?e$({code:p,data:y}):D?t$({data:y,factory:x,factoryData:w,to:U}):y;try{Ma(e);const q=(typeof i=="bigint"?fe(i):void 0)||a,ie=f?LS(f):void 0,ne=V1(B),z=(le=(re=(Z=t.chain)==null?void 0:Z.formatters)==null?void 0:re.transactionRequest)==null?void 0:le.format,me=(z||Sc)({...Km(j,{format:z}),from:T==null?void 0:T.address,accessList:c,authorizationList:r,blobs:d,data:L,gas:_,gasPrice:C,maxFeePerBlobGas:N,maxFeePerGas:I,maxPriorityFeePerGas:S,nonce:M,to:R?void 0:U,value:H});if(s&&ZB({request:me})&&!ne&&!ie)try{return await JB(t,{...me,blockNumber:i,blockTag:a})}catch(he){if(!(he instanceof $S)&&!(he instanceof Ox))throw he}const _e=(()=>{const he=[me,q];return ne&&ie?[...he,ne,ie]:ne?[...he,ne]:ie?[...he,{},ie]:he})(),xe=await t.request({method:"eth_call",params:_e});return xe==="0x"?{data:void 0}:{data:xe}}catch(te){const q=n$(te),{offchainLookup:ie,offchainLookupSignature:ne}=await cS(async()=>{const{offchainLookup:z,offchainLookupSignature:J}=await import("./ccip-h3qmNV3_.js");return{offchainLookup:z,offchainLookupSignature:J}},[]);if(t.ccipRead!==!1&&(q==null?void 0:q.slice(0,10))===ne&&U)return{data:await ie(t,{data:q,to:U})};throw R&&(q==null?void 0:q.slice(0,10))==="0x101bb98d"?new DV({factory:x}):US(te,{...e,account:T,chain:t.chain})}}function ZB({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(GB)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function JB(t,e){var C;const{batchSize:n=1024,wait:r=0}=typeof((C=t.batch)==null?void 0:C.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:a,multicallAddress:c,to:d}=e;let f=c;if(!f){if(!t.chain)throw new $S;f=Pc({blockNumber:s,chain:t.chain,contract:"multicall3"})}const y=(typeof s=="bigint"?fe(s):void 0)||i,{schedule:x}=zS({id:`${t.uid}.${y}`,wait:r,shouldSplitBatch(N){return N.reduce((S,{data:M})=>S+(M.length-2),0)>n*2},fn:async N=>{const I=N.map(U=>({allowFailure:!0,callData:U.data,target:U.to})),S=Sr({abi:Dx,args:[I],functionName:"aggregate3"}),M=await t.request({method:"eth_call",params:[{data:S,to:f},y]});return Oa({abi:Dx,args:[I],functionName:"aggregate3",data:M||"0x"})}}),[{returnData:w,success:_}]=await x({data:a,to:d});if(!_)throw new qm({data:w});return w==="0x"?{data:void 0}:{data:w}}function e$(t){const{code:e,data:n}=t;return n0({abi:TI(["constructor(bytes, bytes)"]),bytecode:BS,args:[e,n]})}function t$(t){const{data:e,factory:n,factoryData:r,to:s}=t;return n0({abi:TI(["constructor(address, bytes, address, bytes)"]),bytecode:KB,args:[s,e,n,r]})}function n$(t){var n;if(!(t instanceof se))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function gi(t,e){const{abi:n,address:r,args:s,functionName:i,...a}=e,c=Sr({abi:n,args:s,functionName:i});try{const{data:d}=await Ne(t,r0,"call")({...a,data:c,to:r});return Oa({abi:n,args:s,functionName:i,data:d||"0x"})}catch(d){throw Aa(d,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function r$(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:a,...c}=e,d=c.account?Nt(c.account):t.account,f=Sr({abi:n,args:s,functionName:a});try{const{data:p}=await Ne(t,r0,"call")({batch:!1,data:`${f}${i?i.replace("0x",""):""}`,to:r,...c,account:d}),y=Oa({abi:n,args:s,functionName:a,data:p||"0x"}),x=n.filter(w=>"name"in w&&w.name===e.functionName);return{result:y,request:{abi:x,address:r,args:s,dataSuffix:i,functionName:a,...c,account:d}}}catch(p){throw Aa(p,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:d==null?void 0:d.address})}}const fy=new Map,I_=new Map;let s$=0;function yi(t,e,n){const r=++s$,s=()=>fy.get(t)||[],i=()=>{const p=s();fy.set(t,p.filter(y=>y.id!==r))},a=()=>{const p=s();if(!p.some(x=>x.id===r))return;const y=I_.get(t);if(p.length===1&&y){const x=y();x instanceof Promise&&x.catch(()=>{})}i()},c=s();if(fy.set(t,[...c,{id:r,fns:e}]),c&&c.length>0)return a;const d={};for(const p in e)d[p]=(...y)=>{var w,_;const x=s();if(x.length!==0)for(const C of x)(_=(w=C.fns)[p])==null||_.call(w,...y)};const f=n(d);return typeof f=="function"&&I_.set(t,f),a}async function Lx(t){return new Promise(e=>setTimeout(e,t))}function Rc(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let c;e&&(c=await t({unpoll:i}));const d=await(n==null?void 0:n(c))??r;await Lx(d);const f=async()=>{s&&(await t({unpoll:i}),await Lx(r),f())};f()})(),i}const i$=new Map,o$=new Map;function a$(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:a=>i.set(s,a)}),n=e(t,i$),r=e(t,o$);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function l$(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=a$(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const a=await i;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const c$=t=>`blockNumber.${t}`;async function kh(t,{cacheTime:e=t.cacheTime}={}){const n=await l$(()=>t.request({method:"eth_blockNumber"}),{cacheKey:c$(t.uid),cacheTime:e});return BigInt(n)}async function s0(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>mi(i));return!("abi"in e)||!e.abi?s:Eh({abi:e.abi,logs:s,strict:n})}async function i0(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function u$(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:a,fromBlock:c,onError:d,onLogs:f,poll:p,pollingInterval:y=t.pollingInterval,strict:x}=e;return(typeof p<"u"?p:typeof c=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"))?(()=>{const N=x??!1,I=Gt(["watchContractEvent",r,s,i,t.uid,a,y,N,c]);return yi(I,{onLogs:f,onError:d},S=>{let M;c!==void 0&&(M=c-1n);let U,H=!1;const B=Rc(async()=>{var j;if(!H){try{U=await Ne(t,JI,"createContractEventFilter")({abi:n,address:r,args:s,eventName:a,strict:N,fromBlock:c})}catch{}H=!0;return}try{let T;if(U)T=await Ne(t,s0,"getFilterChanges")({filter:U});else{const k=await Ne(t,kh,"getBlockNumber")({});M&&M<k?T=await Ne(t,CS,"getContractEvents")({abi:n,address:r,args:s,eventName:a,fromBlock:M+1n,toBlock:k,strict:N}):T=[],M=k}if(T.length===0)return;if(i)S.onLogs(T);else for(const k of T)S.onLogs([k])}catch(T){U&&T instanceof Ta&&(H=!1),(j=S.onError)==null||j.call(S,T)}},{emitOnBegin:!0,interval:y});return async()=>{U&&await Ne(t,i0,"uninstallFilter")({filter:U}),B()}})})():(()=>{const N=x??!1,I=Gt(["watchContractEvent",r,s,i,t.uid,a,y,N]);let S=!0,M=()=>S=!1;return yi(I,{onLogs:f,onError:d},U=>((async()=>{try{const H=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(k=>k.config.type==="webSocket");return T?T.value:t.transport}return t.transport})(),B=a?xh({abi:n,eventName:a,args:s}):[],{unsubscribe:j}=await H.subscribe({params:["logs",{address:r,topics:B}],onData(T){var D;if(!S)return;const k=T.result;try{const{eventName:R,args:L}=K1({abi:n,data:k.data,topics:k.topics,strict:x}),O=mi(k,{args:L,eventName:R});U.onLogs([O])}catch(R){let L,O;if(R instanceof _d||R instanceof $m){if(x)return;L=R.abiItem.name,O=(D=R.abiItem.inputs)==null?void 0:D.some(re=>!("name"in re&&re.name))}const Z=mi(k,{args:O?[]:{},eventName:L});U.onLogs([Z])}},onError(T){var k;(k=U.onError)==null||k.call(U,T)}});M=j,S||M()}catch(H){d==null||d(H)}})(),()=>M()))})()}class La extends se{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Cp extends se{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function HS({chain:t,currentChainId:e}){if(!t)throw new XB;if(e!==t.id)throw new QB({chain:t,currentChainId:e})}function WS(t,{docsPath:e,...n}){const r=(()=>{const s=Gm(t,n);return s instanceof bh?t:s})();return new SV(r,{docsPath:e,...n})}async function rw(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const py=new Hm(128);async function o0(t,e){var S,M,U,H;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:a,data:c,gas:d,gasPrice:f,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:x,nonce:w,type:_,value:C,...N}=e;if(typeof n>"u")throw new La({docsPath:"/docs/actions/wallet/sendTransaction"});const I=n?Nt(n):null;try{Ma(e);const B=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await fS({authorization:i[0]}).catch(()=>{throw new se("`to` is required. Could not infer from `authorizationList`.")})})();if((I==null?void 0:I.type)==="json-rpc"||I===null){let j;r!==null&&(j=await Ne(t,Nc,"getChainId")({}),HS({currentChainId:j,chain:r}));const T=(U=(M=(S=t.chain)==null?void 0:S.formatters)==null?void 0:M.transactionRequest)==null?void 0:U.format,D=(T||Sc)({...Km(N,{format:T}),accessList:s,authorizationList:i,blobs:a,chainId:j,data:c,from:I==null?void 0:I.address,gas:d,gasPrice:f,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:x,nonce:w,to:B,type:_,value:C}),R=py.get(t.uid),L=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:L,params:[D]},{retryCount:0})}catch(O){if(R===!1)throw O;const Z=O;if(Z.name==="InvalidInputRpcError"||Z.name==="InvalidParamsRpcError"||Z.name==="MethodNotFoundRpcError"||Z.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(re=>(py.set(t.uid,!0),re)).catch(re=>{const le=re;throw le.name==="MethodNotFoundRpcError"||le.name==="MethodNotSupportedRpcError"?(py.set(t.uid,!1),Z):le});throw Z}}if((I==null?void 0:I.type)==="local"){const j=await Ne(t,Xm,"prepareTransactionRequest")({account:I,accessList:s,authorizationList:i,blobs:a,chain:r,data:c,gas:d,gasPrice:f,maxFeePerBlobGas:p,maxFeePerGas:y,maxPriorityFeePerGas:x,nonce:w,nonceManager:I.nonceManager,parameters:[...TS,"sidecars"],type:_,value:C,...N,to:B}),T=(H=r==null?void 0:r.serializers)==null?void 0:H.transaction,k=await I.signTransaction(j,{serializer:T});return await Ne(t,rw,"sendRawTransaction")({serializedTransaction:k})}throw(I==null?void 0:I.type)==="smart"?new Cp({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Cp({docsPath:"/docs/actions/wallet/sendTransaction",type:I==null?void 0:I.type})}catch(B){throw B instanceof Cp?B:WS(B,{...e,account:I,chain:e.chain||void 0})}}async function d$(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:a,functionName:c,...d}=e;if(typeof r>"u")throw new La({docsPath:"/docs/contract/writeContract"});const f=r?Nt(r):null,p=Sr({abi:n,args:i,functionName:c});try{return await Ne(t,o0,"sendTransaction")({data:`${p}${a?a.replace("0x",""):""}`,to:s,account:f,...d})}catch(y){throw Aa(y,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:c,sender:f==null?void 0:f.address})}}const qS={"0x0":"reverted","0x1":"success"};function GS(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>mi(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Tr(t.transactionIndex):null,status:t.status?qS[t.status]:null,type:t.type?mS[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const h$=F1("transactionReceipt",GS),KS="0x5792579257925792579257925792579257925792579257925792579257925792",YS=fe(0,{size:32});async function f$(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:a=32,forceAtomic:c=!1,id:d,version:f="2.0.0"}=e,p=n?Nt(n):null,y=e.calls.map(x=>{const w=x;return{data:w.abi?Sr({abi:w.abi,functionName:w.functionName,args:w.args}):w.data,to:w.to,value:w.value?fe(w.value):void 0}});try{const x=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:c,calls:y,capabilities:r,chainId:fe(s.id),from:p==null?void 0:p.address,id:d,version:f}]},{retryCount:0});return typeof x=="string"?{id:x}:x}catch(x){const w=x;if(i&&(w.name==="MethodNotFoundRpcError"||w.name==="MethodNotSupportedRpcError"||w.name==="UnknownRpcError"||w.details.toLowerCase().includes("does not exist / is not available")||w.details.toLowerCase().includes("missing or invalid. request()")||w.details.toLowerCase().includes("did not match any variant of untagged enum")||w.details.toLowerCase().includes("account upgraded to unsupported contract")||w.details.toLowerCase().includes("eip-7702 not supported")||w.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(S=>!S.optional)){const S="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new cc(new se(S,{details:S}))}if(c&&y.length>1){const I="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new uc(new se(I,{details:I}))}const _=[];for(const I of y){const S=o0(t,{account:p,chain:s,data:I.data,to:I.to,value:I.value?tn(I.value):void 0});_.push(S),a>0&&await new Promise(M=>setTimeout(M,a))}const C=await Promise.allSettled(_);if(C.every(I=>I.status==="rejected"))throw C[0].reason;const N=C.map(I=>I.status==="fulfilled"?I.value:YS);return{id:Ps([...N,fe(s.id,{size:32}),KS])}}throw WS(x,{...e,account:p,chain:e.chain})}}async function QS(t,e){async function n(p){if(p.endsWith(KS.slice(2))){const x=kr(tm(p,-64,-32)),w=tm(p,0,-64).slice(2).match(/.{1,64}/g),_=await Promise.all(w.map(N=>YS.slice(2)!==N?t.request({method:"eth_getTransactionReceipt",params:[`0x${N}`]},{dedupe:!0}):void 0)),C=_.some(N=>N===null)?100:_.every(N=>(N==null?void 0:N.status)==="0x1")?200:_.every(N=>(N==null?void 0:N.status)==="0x0")?500:600;return{atomic:!1,chainId:Tr(x),receipts:_.filter(Boolean),status:C,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[p]})}const{atomic:r=!1,chainId:s,receipts:i,version:a="2.0.0",...c}=await n(e.id),[d,f]=(()=>{const p=c.status;return p>=100&&p<200?["pending",p]:p>=200&&p<300?["success",p]:p>=300&&p<700?["failure",p]:p==="CONFIRMED"?["success",200]:p==="PENDING"?["pending",100]:[void 0,p]})();return{...c,atomic:r,chainId:s?Tr(s):void 0,receipts:(i==null?void 0:i.map(p=>({...p,blockNumber:tn(p.blockNumber),gasUsed:tn(p.gasUsed),status:qS[p.status]})))??[],statusCode:f,status:d,version:a}}async function p$(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:x})=>x>=200,timeout:i=6e4}=e,a=Gt(["waitForCallsStatus",t.uid,n]),{promise:c,resolve:d,reject:f}=nw();let p;const y=yi(a,{resolve:d,reject:f},x=>{const w=Rc(async()=>{const _=C=>{clearTimeout(p),w(),C(),y()};try{const C=await QS(t,{id:n});if(!s(C))return;_(()=>x.resolve(C))}catch(C){_(()=>x.reject(C))}},{interval:r,emitOnBegin:!0});return w});return p=i?setTimeout(()=>{y(),clearTimeout(p),f(new m$({id:n}))},i):void 0,await c}class m$ extends se{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const Fx=256;let sp=Fx,ip;function XS(t=11){if(!ip||sp+t>Fx*2){ip="",sp=0;for(let e=0;e<Fx;e++)ip+=(256+Math.random()*256|0).toString(16).substring(1)}return ip.substring(sp,sp+++t)}function ZS(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:a="base"}=t,c=(n==null?void 0:n.blockTime)??12e3,d=Math.min(Math.max(Math.floor(c/2),500),4e3),f=t.pollingInterval??d,p=t.cacheTime??f,y=t.account?Nt(t.account):void 0,{config:x,request:w,value:_}=t.transport({chain:n,pollingInterval:f}),C={...x,..._},N={account:y,batch:e,cacheTime:p,ccipRead:r,chain:n,key:s,name:i,pollingInterval:f,request:w,transport:C,type:a,uid:XS()};function I(S){return M=>{const U=M(S);for(const B in N)delete U[B];const H={...S,...U};return Object.assign(H,{extend:I(H)})}}return Object.assign(N,{extend:I(N)})}const op=new Hm(8192);function g$(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(op.get(n))return op.get(n);const r=t().finally(()=>op.delete(n));return op.set(n,r),r}function Vx(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const a=async({count:c=0}={})=>{const d=async({error:f})=>{const p=typeof e=="function"?e({count:c,error:f}):e;p&&await Lx(p),a({count:c+1})};try{const f=await t();s(f)}catch(f){if(c<n&&await r({count:c,error:f}))return d({error:f});i(f)}};a()})}function y$(t,e={}){return async(n,r={})=>{var y;const{dedupe:s=!1,methods:i,retryDelay:a=150,retryCount:c=3,uid:d}={...e,...r},{method:f}=n;if((y=i==null?void 0:i.exclude)!=null&&y.includes(f))throw new la(new Error("method not supported"),{method:f});if(i!=null&&i.include&&!i.include.includes(f))throw new la(new Error("method not supported"),{method:f});const p=s?ic(`${d}.${Gt(n)}`):void 0;return g$(()=>Vx(async()=>{try{return await t(n)}catch(x){const w=x;switch(w.code){case Id.code:throw new Id(w);case Sd.code:throw new Sd(w);case Nd.code:throw new Nd(w,{method:n.method});case Pd.code:throw new Pd(w);case _a.code:throw new _a(w);case Ta.code:throw new Ta(w);case Rd.code:throw new Rd(w);case jd.code:throw new jd(w);case Dd.code:throw new Dd(w);case la.code:throw new la(w,{method:n.method});case lc.code:throw new lc(w);case Md.code:throw new Md(w);case Yl.code:throw new Yl(w);case Od.code:throw new Od(w);case Ld.code:throw new Ld(w);case Fd.code:throw new Fd(w);case Vd.code:throw new Vd(w);case Bd.code:throw new Bd(w);case cc.code:throw new cc(w);case $d.code:throw new $d(w);case Ud.code:throw new Ud(w);case zd.code:throw new zd(w);case Hd.code:throw new Hd(w);case Wd.code:throw new Wd(w);case uc.code:throw new uc(w);case 5e3:throw new Yl(w);default:throw x instanceof se?x:new OV(w)}}},{delay:({count:x,error:w})=>{var _;if(w&&w instanceof rd){const C=(_=w==null?void 0:w.headers)==null?void 0:_.get("Retry-After");if(C!=null&&C.match(/\d/))return Number.parseInt(C)*1e3}return~~(1<<x)*a},retryCount:c,shouldRetry:({error:x})=>x$(x)}),{enabled:s,id:p})}}function x$(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===lc.code||t.code===_a.code:t instanceof rd&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function JS({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:a,type:c},d){const f=XS();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:a,type:c},request:y$(r,{methods:e,retryCount:s,retryDelay:i,uid:f}),value:d}}function my(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:a})=>JS({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??a,retryDelay:i,type:"custom"})}class v$ extends se{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function w$(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let a;try{const c=new AbortController;n>0&&(a=setTimeout(()=>{r&&c.abort()},n)),s(await t({signal:(c==null?void 0:c.signal)||null}))}catch(c){(c==null?void 0:c.name)==="AbortError"&&i(e),i(c)}finally{clearTimeout(a)}})()})}function b$(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const S_=b$();function E$(t,e={}){return{async request(n){var y;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:d,method:f,signal:p}=c;try{const x=await w$(async({signal:_})=>{const C={...c,body:Array.isArray(r)?Gt(r.map(M=>({jsonrpc:"2.0",id:M.id??S_.take(),...M}))):Gt({jsonrpc:"2.0",id:r.id??S_.take(),...r}),headers:{"Content-Type":"application/json",...d},method:f||"POST",signal:p||(a>0?_:null)},N=new Request(t,C),I=await(s==null?void 0:s(N,C))??{...C,url:t};return await fetch(I.url??t,I)},{errorInstance:new h_({body:r,url:t}),timeout:a,signal:!0});i&&await i(x);let w;if((y=x.headers.get("Content-Type"))!=null&&y.startsWith("application/json"))w=await x.json();else{w=await x.text();try{w=JSON.parse(w||"{}")}catch(_){if(x.ok)throw _;w={error:w}}}if(!x.ok)throw new rd({body:r,details:Gt(w.error)||x.statusText,headers:x.headers,status:x.status,url:t});return w}catch(x){throw x instanceof rd||x instanceof h_?x:new rd({body:r,cause:x,url:t})}}}}function k$(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:d,retryDelay:f,raw:p}=e;return({chain:y,retryCount:x,timeout:w})=>{const{batchSize:_=1e3,wait:C=0}=typeof n=="object"?n:{},N=e.retryCount??x,I=w??e.timeout??1e4,S=y==null?void 0:y.rpcUrls.default.http[0];if(!S)throw new v$;const M=E$(S,{fetchOptions:r,onRequest:c,onResponse:d,timeout:I});return JS({key:s,methods:i,name:a,async request({method:U,params:H}){const B={method:U,params:H},{schedule:j}=zS({id:S,wait:C,shouldSplitBatch(R){return R.length>_},fn:R=>M.request({body:R}),sort:(R,L)=>R.id-L.id}),T=async R=>n?j(R):[await M.request({body:R})],[{error:k,result:D}]=await T(B);if(p)return{error:k,result:D};if(k)throw new L1({body:B,error:k,url:S});return D},retryCount:N,retryDelay:f,timeout:I,type:"http"},{fetchOptions:r,url:S})}}function sw(t,e){var r,s,i,a,c,d;if(!(t instanceof se))return!1;const n=t.walk(f=>f instanceof kx);return n instanceof kx?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((a=n.data)==null?void 0:a.errorName)==="ResolverError"||((c=n.data)==null?void 0:c.errorName)==="HttpError"||(d=n.reason)!=null&&d.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===eS[50]):!1}function _$(t){const{abi:e,data:n}=t,r=yo(n,0,4),s=e.find(i=>i.type==="function"&&r===yh(ns(i)));if(!s)throw new sF(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?vh(s.inputs,yo(n,4)):void 0}}const gy="/docs/contract/encodeErrorResult";function N_(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const d=Da({abi:e,args:r,name:n});if(!d)throw new Xk(n,{docsPath:gy});s=d}if(s.type!=="error")throw new Xk(void 0,{docsPath:gy});const i=ns(s),a=yh(i);let c="0x";if(r&&r.length>0){if(!s.inputs)throw new nF(s.name,{docsPath:gy});c=Ao(s.inputs,r)}return as([a,c])}const yy="/docs/contract/encodeFunctionResult";function T$(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const a=Da({abi:e,name:n});if(!a)throw new sc(n,{docsPath:yy});s=a}if(s.type!=="function")throw new sc(void 0,{docsPath:yy});if(!s.outputs)throw new PI(s.name,{docsPath:yy});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new RI(r)})();return Ao(s.outputs,i)}const e6="x-batch-gateway:true";async function VZ(t){const{data:e,ccipRequest:n}=t,{args:[r]}=_$({abi:Mx,data:e}),s=[],i=[];return await Promise.all(r.map(async(a,c)=>{try{i[c]=await n(a),s[c]=!1}catch(d){s[c]=!0,i[c]=A$(d)}})),T$({abi:Mx,functionName:"query",result:[s,i]})}function A$(t){return t.name==="HttpRequestError"&&t.status?N_({abi:Mx,errorName:"HttpError",args:[t.status,t.shortMessage]}):N_({abi:[tS],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function t6(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ns(e)?e:null}function Ip(t){let e=new Uint8Array(32).fill(0);if(!t)return Lt(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=t6(n[r]),i=s?ja(s):Ht(pa(n[r]),"bytes");e=Ht(Ps([e,i]),"bytes")}return Lt(e)}function C$(t){return`[${t.slice(2)}]`}function I$(t){const e=new Uint8Array(32).fill(0);return t?t6(t)||Ht(pa(t)):Lt(e)}function a0(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(pa(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let a=pa(s[i]);a.byteLength>255&&(a=pa(C$(I$(s[i])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function S$(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:a,strict:c}=e,{chain:d}=t,f=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!d)throw new Error("client chain not configured. universalResolverAddress is required.");return Pc({blockNumber:n,chain:d,contract:"ensUniversalResolver"})})(),p=d==null?void 0:d.ensTlds;if(p&&!p.some(y=>i.endsWith(y)))return null;try{const y=Sr({abi:A_,functionName:"addr",...s!=null?{args:[Ip(i),BigInt(s)]}:{args:[Ip(i)]}}),x={address:f,abi:VS,functionName:"resolve",args:[bn(a0(i)),y,a??[e6]],blockNumber:n,blockTag:r},_=await Ne(t,gi,"readContract")(x);if(_[0]==="0x")return null;const C=Oa({abi:A_,args:s!=null?[Ip(i),BigInt(s)]:void 0,functionName:"addr",data:_[0]});return C==="0x"||kr(C)==="0x00"?null:C}catch(y){if(c)throw y;if(sw(y,"resolve"))return null;throw y}}class N$ extends se{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Lu extends se{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class iw extends se{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class P$ extends se{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const R$=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,j$=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,D$=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,M$=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function O$(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function P_(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function n6({uri:t,gatewayUrls:e}){const n=D$.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=P_(e==null?void 0:e.ipfs,"https://ipfs.io"),s=P_(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(R$),{protocol:a,subpath:c,target:d,subtarget:f=""}=(i==null?void 0:i.groups)||{},p=a==="ipns:/"||c==="ipns/",y=a==="ipfs:/"||c==="ipfs/"||j$.test(t);if(t.startsWith("http")&&!p&&!y){let w=t;return e!=null&&e.arweave&&(w=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:w,isOnChain:!1,isEncoded:!1}}if((p||y)&&d)return{uri:`${r}/${p?"ipns":"ipfs"}/${d}${f}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&d)return{uri:`${s}/${d}${f||""}`,isOnChain:!1,isEncoded:!1};let x=t.replace(M$,"");if(x.startsWith("<svg")&&(x=`data:image/svg+xml;base64,${btoa(x)}`),x.startsWith("data:")||x.startsWith("{"))return{uri:x,isOnChain:!0,isEncoded:!1};throw new iw({uri:t})}function r6(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new N$({data:t});return t.image||t.image_url||t.image_data}async function L$({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await ow({gatewayUrls:t,uri:r6(n)})}catch{throw new iw({uri:e})}}async function ow({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=n6({uri:e,gatewayUrls:t});if(r||await O$(n))return n;throw new iw({uri:e})}function F$(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,a]=n.split(":"),[c,d]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Lu({reason:"Only EIP-155 supported"});if(!a)throw new Lu({reason:"Chain ID not found"});if(!d)throw new Lu({reason:"Contract address not found"});if(!s)throw new Lu({reason:"Token ID not found"});if(!c)throw new Lu({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:c.toLowerCase(),contractAddress:d,tokenID:s}}async function V$(t,{nft:e}){if(e.namespace==="erc721")return gi(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return gi(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new P$({namespace:e.namespace})}async function B$(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?$$(t,{gatewayUrls:e,record:n}):ow({uri:n,gatewayUrls:e})}async function $$(t,{gatewayUrls:e,record:n}){const r=F$(n),s=await V$(t,{nft:r}),{uri:i,isOnChain:a,isEncoded:c}=n6({uri:s,gatewayUrls:e});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const f=c?atob(i.replace("data:application/json;base64,","")):i,p=JSON.parse(f);return ow({uri:r6(p),gatewayUrls:e})}let d=r.tokenID;return r.namespace==="erc1155"&&(d=d.replace("0x","").padStart(64,"0")),L$({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,d)})}async function s6(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:a,strict:c}=e,{chain:d}=t,f=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!d)throw new Error("client chain not configured. universalResolverAddress is required.");return Pc({blockNumber:n,chain:d,contract:"ensUniversalResolver"})})(),p=d==null?void 0:d.ensTlds;if(p&&!p.some(y=>i.endsWith(y)))return null;try{const y={address:f,abi:VS,functionName:"resolve",args:[bn(a0(i)),Sr({abi:T_,functionName:"text",args:[Ip(i),s]}),a??[e6]],blockNumber:n,blockTag:r},w=await Ne(t,gi,"readContract")(y);if(w[0]==="0x")return null;const _=Oa({abi:T_,functionName:"text",data:w[0]});return _===""?null:_}catch(y){if(c)throw y;if(sw(y,"resolve"))return null;throw y}}async function U$(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:a,universalResolverAddress:c}){const d=await Ne(t,s6,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:c,gatewayUrls:i,strict:a});if(!d)return null;try{return await B$(t,{record:d,gatewayUrls:r})}catch{return null}}async function z$(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=Pc({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const d=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const f={address:c,abi:qB,functionName:"reverse",args:[bn(a0(d))],blockNumber:n,blockTag:r},p=Ne(t,gi,"readContract"),[y,x]=s?await p({...f,args:[...f.args,s]}):await p(f);return e.toLowerCase()!==x.toLowerCase()?null:y}catch(f){if(i)throw f;if(sw(f,"reverse"))return null;throw f}}async function H$(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,a=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Pc({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),c=i==null?void 0:i.ensTlds;if(c&&!c.some(f=>s.endsWith(f)))throw new Error(`${s} is not a valid ENS TLD (${c==null?void 0:c.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[d]=await Ne(t,gi,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[bn(a0(s))],blockNumber:n,blockTag:r});return d}async function i6(t,e){var N,I,S;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:a,gas:c,gasPrice:d,maxFeePerBlobGas:f,maxFeePerGas:p,maxPriorityFeePerGas:y,to:x,value:w,..._}=e,C=n?Nt(n):void 0;try{Ma(e);const U=(typeof r=="bigint"?fe(r):void 0)||s,H=(S=(I=(N=t.chain)==null?void 0:N.formatters)==null?void 0:I.transactionRequest)==null?void 0:S.format,j=(H||Sc)({...Km(_,{format:H}),from:C==null?void 0:C.address,blobs:i,data:a,gas:c,gasPrice:d,maxFeePerBlobGas:f,maxFeePerGas:p,maxPriorityFeePerGas:y,to:x,value:w}),T=await t.request({method:"eth_createAccessList",params:[j,U]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(M){throw US(M,{...e,account:C,chain:t.chain})}}async function W$(t){const e=Wm(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function o6(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:a,toBlock:c}={}){const d=s??(r?[r]:void 0),f=Wm(t,{method:"eth_newFilter"});let p=[];d&&(p=[d.flatMap(w=>xh({abi:[w],eventName:w.name,args:n}))],r&&(p=p[0]));const y=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?fe(i):i,toBlock:typeof c=="bigint"?fe(c):c,...p.length?{topics:p}:{}}]});return{abi:d,args:n,eventName:r?r.name:void 0,fromBlock:i,id:y,request:f(y),strict:!!a,toBlock:c,type:"event"}}async function a6(t){const e=Wm(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function q$(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function G$(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?fe(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Tr(i)}async function R_(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?fe(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class K$ extends se{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Y$(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,a,c,d,f,p,y]=await Ne(t,gi,"readContract")({abi:Q$,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:a,version:c,chainId:Number(d),verifyingContract:f,salt:p},extensions:y,fields:i}}catch(i){const a=i;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new K$({address:n}):a}}const Q$=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function X$(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Z$(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?fe(n):void 0,a=await t.request({method:"eth_feeHistory",params:[fe(e),i||r,s]},{dedupe:!!i});return X$(a)}async function J$(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>mi(i));return e.abi?Eh({abi:e.abi,logs:s,strict:n}):s}function l6(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class eU extends se{constructor({domain:e}){super(`Invalid domain "${Gt(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class tU extends se{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class nU extends se{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function rU(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:p6({domain:e}),...t.types};f6({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(sU({domain:e,types:s})),r!=="EIP712Domain"&&i.push(c6({data:n,primaryType:r,types:s})),Ht(Ps(i))}function sU({domain:t,types:e}){return c6({data:t,primaryType:"EIP712Domain",types:e})}function c6({data:t,primaryType:e,types:n}){const r=u6({data:t,primaryType:e,types:n});return Ht(r)}function u6({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[iU({primaryType:e,types:n})];for(const i of n[e]){const[a,c]=h6({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(a),s.push(c)}return Ao(r,s)}function iU({primaryType:t,types:e}){const n=bn(oU({primaryType:t,types:e}));return Ht(n)}function oU({primaryType:t,types:e}){let n="";const r=d6({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`;return n}function d6({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])d6({primaryType:i.type,types:e},n);return n}function h6({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ht(u6({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ht(r)];if(n==="string")return[{type:"bytes32"},Ht(bn(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(a=>h6({name:e,type:s,types:t,value:a}));return[{type:"bytes32"},Ht(Ao(i.map(([a])=>a),i.map(([,a])=>a)))]}return[{type:n},r]}function aU(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(d,f)=>{const p={...f};for(const y of d){const{name:x,type:w}=y;w==="address"&&(p[x]=p[x].toLowerCase())}return p},a=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},c=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Gt({domain:a,message:c,primaryType:r,types:s})}function f6(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(a,c)=>{for(const d of a){const{name:f,type:p}=d,y=c[f],x=p.match(XI);if(x&&(typeof y=="number"||typeof y=="bigint")){const[C,N,I]=x;fe(y,{signed:N==="int",size:Number.parseInt(I)/8})}if(p==="address"&&typeof y=="string"&&!Yt(y))throw new Nn({address:y});const w=p.match(XF);if(w){const[C,N]=w;if(N&&bt(y)!==Number.parseInt(N))throw new oF({expectedSize:Number.parseInt(N),givenSize:bt(y)})}const _=s[p];_&&(lU(p),i(_,y))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new eU({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new tU({primaryType:r,types:s})}function p6({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function lU(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new nU({type:t})}function cU(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Yt(s))throw new Nn({address:s});if(r<0)throw new t0({chainId:r})}aw(t)}function uU(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new ES;for(const n of e){const r=bt(n),s=Tr(yo(n,0,1));if(r!==32)throw new fB({hash:n,size:r});if(s!==bS)throw new pB({hash:n,version:s})}}aw(t)}function aw(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new t0({chainId:e});if(s&&!Yt(s))throw new Nn({address:s});if(r&&r>Ym)throw new Ca({maxFeePerGas:r});if(n&&r&&n>r)throw new qd({maxFeePerGas:r,maxPriorityFeePerGas:n})}function dU(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new t0({chainId:e});if(i&&!Yt(i))throw new Nn({address:i});if(n||s)throw new se("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Ym)throw new Ca({maxFeePerGas:r})}function hU(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Yt(i))throw new Nn({address:i});if(typeof e<"u"&&e<=0)throw new t0({chainId:e});if(n||s)throw new se("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Ym)throw new Ca({maxFeePerGas:r})}function l0(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new IV({storageKey:s[i]});if(!Yt(r,{strict:!1}))throw new Nn({address:r});e.push([r,s])}return e}function fU(t,e){const n=_S(t);return n==="eip1559"?gU(t,e):n==="eip2930"?yU(t,e):n==="eip4844"?mU(t,e):n==="eip7702"?pU(t,e):xU(t,e)}function pU(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:a,value:c,maxFeePerGas:d,maxPriorityFeePerGas:f,accessList:p,data:y}=t;cU(t);const x=l0(p),w=vU(n);return as(["0x04",xo([fe(r),i?fe(i):"0x",f?fe(f):"0x",d?fe(d):"0x",s?fe(s):"0x",a??"0x",c?fe(c):"0x",y??"0x",x,w,..._h(t,e)])])}function mU(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:a,maxFeePerBlobGas:c,maxFeePerGas:d,maxPriorityFeePerGas:f,accessList:p,data:y}=t;uU(t);let x=t.blobVersionedHashes,w=t.sidecars;if(t.blobs&&(typeof x>"u"||typeof w>"u")){const M=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(B=>Lt(B)),U=t.kzg,H=H1({blobs:M,kzg:U});if(typeof x>"u"&&(x=xS({commitments:H})),typeof w>"u"){const B=W1({blobs:M,commitments:H,kzg:U});w=kS({blobs:M,commitments:H,proofs:B})}}const _=l0(p),C=[fe(n),s?fe(s):"0x",f?fe(f):"0x",d?fe(d):"0x",r?fe(r):"0x",i??"0x",a?fe(a):"0x",y??"0x",_,c?fe(c):"0x",x??[],..._h(t,e)],N=[],I=[],S=[];if(w)for(let M=0;M<w.length;M++){const{blob:U,commitment:H,proof:B}=w[M];N.push(U),I.push(H),S.push(B)}return as(["0x03",xo(w?[C,N,I,S]:C)])}function gU(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:d,accessList:f,data:p}=t;aw(t);const y=l0(f),x=[fe(n),s?fe(s):"0x",d?fe(d):"0x",c?fe(c):"0x",r?fe(r):"0x",i??"0x",a?fe(a):"0x",p??"0x",y,..._h(t,e)];return as(["0x02",xo(x)])}function yU(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:a,value:c,accessList:d,gasPrice:f}=t;dU(t);const p=l0(d),y=[fe(n),i?fe(i):"0x",f?fe(f):"0x",r?fe(r):"0x",a??"0x",c?fe(c):"0x",s??"0x",p,..._h(t,e)];return as(["0x01",xo(y)])}function xU(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:a,value:c,gasPrice:d}=t;hU(t);let f=[i?fe(i):"0x",d?fe(d):"0x",r?fe(r):"0x",a??"0x",c?fe(c):"0x",s??"0x"];if(e){const p=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const w=27n+(e.v===27n?0n:1n);if(e.v!==w)throw new AV({v:e.v});return w})(),y=kr(e.r),x=kr(e.s);f=[...f,fe(p),y==="0x00"?"0x":y,x==="0x00"?"0x":x]}else n>0&&(f=[...f,fe(n),"0x","0x"]);return xo(f)}function _h(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=kr(n.r),a=kr(n.s);return[typeof s=="number"?s?fe(1):"0x":r===0n?"0x":r===1n?fe(1):r===27n?"0x":fe(1),i==="0x00"?"0x":i,a==="0x00"?"0x":a]}function vU(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,a=n.address;e.push([r?bn(r):"0x",a,s?bn(s):"0x",..._h({},i)])}return e}const wU=`Ethereum Signed Message:
`;function bU(t){const e=typeof t=="string"?ic(t):typeof t.raw=="string"?t.raw:Lt(t.raw),n=ic(`${wU}${bt(e)}`);return Ps([n,e])}function m6(t,e){return Ht(bU(t),e)}const g6="0x6492649264926492649264926492649264926492649264926492649264926492";function EU(t){return tm(t,-32)===g6}function kU(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=as([Ao([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),g6]);return s==="hex"?i:rs(i)}class _U extends se{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function lw(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new _U({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,a,c]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],d=Math.round(+`${a}.${c}`);d>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${d}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function TU(t,e="wei"){return lw(t,sS[e])}function AU(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function CU(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Tr(t.nonce):void 0,storageProof:t.storageProof?AU(t.storageProof):void 0}}async function IU(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",a=n!==void 0?fe(n):void 0,c=await t.request({method:"eth_getProof",params:[e,s,a||i]});return CU(c)}async function SU(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?fe(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function cw(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var p,y,x;const a=r||"latest",c=n!==void 0?fe(n):void 0;let d=null;if(s?d=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?d=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,fe(i)]},{dedupe:!0}):d=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[c||a,fe(i)]},{dedupe:!!c}),!d)throw new oS({blockHash:e,blockNumber:n,blockTag:a,hash:s,index:i});return(((x=(y=(p=t.chain)==null?void 0:p.formatters)==null?void 0:y.transaction)==null?void 0:x.format)||Qm)(d)}async function NU(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([Ne(t,kh,"getBlockNumber")({}),e?Ne(t,cw,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function Bx(t,{hash:e}){var s,i,a;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new aS({hash:e});return(((a=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:a.format)||GS)(n)}async function PU(t,e){var I;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:a,multicallAddress:c,stateOverride:d}=e,f=e.contracts,p=s??(typeof((I=t.batch)==null?void 0:I.multicall)=="object"&&t.batch.multicall.batchSize||1024);let y=c;if(!y){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");y=Pc({blockNumber:i,chain:t.chain,contract:"multicall3"})}const x=[[]];let w=0,_=0;for(let S=0;S<f.length;S++){const{abi:M,address:U,args:H,functionName:B}=f[S];try{const j=Sr({abi:M,args:H,functionName:B});_+=(j.length-2)/2,p>0&&_>p&&x[w].length>0&&(w++,_=(j.length-2)/2,x[w]=[]),x[w]=[...x[w],{allowFailure:!0,callData:j,target:U}]}catch(j){const T=Aa(j,{abi:M,address:U,args:H,docsPath:"/docs/contract/multicall",functionName:B,sender:n});if(!r)throw T;x[w]=[...x[w],{allowFailure:!0,callData:"0x",target:U}]}}const C=await Promise.allSettled(x.map(S=>Ne(t,gi,"readContract")({abi:Dx,account:n,address:y,args:[S],blockNumber:i,blockTag:a,functionName:"aggregate3",stateOverride:d}))),N=[];for(let S=0;S<C.length;S++){const M=C[S];if(M.status==="rejected"){if(!r)throw M.reason;for(let H=0;H<x[S].length;H++)N.push({status:"failure",error:M.reason,result:void 0});continue}const U=M.value;for(let H=0;H<U.length;H++){const{returnData:B,success:j}=U[H],{callData:T}=x[S][H],{abi:k,address:D,functionName:R,args:L}=f[N.length];try{if(T==="0x")throw new mh;if(!j)throw new qm({data:B});const O=Oa({abi:k,args:L,data:B,functionName:R});N.push(r?{result:O,status:"success"}:O)}catch(O){const Z=Aa(O,{abi:k,address:D,args:L,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw Z;N.push({error:Z,result:void 0,status:"failure"})}}}if(N.length!==f.length)throw new se("multicall results mismatch");return N}async function $x(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:a,validation:c}=e;try{const d=[];for(const x of s){const w=x.blockOverrides?LS(x.blockOverrides):void 0,_=x.calls.map(N=>{const I=N,S=I.account?Nt(I.account):void 0,M={...I,data:I.abi?Sr(I):I.data,from:I.from??(S==null?void 0:S.address)};return Ma(M),Sc(M)}),C=x.stateOverrides?V1(x.stateOverrides):void 0;d.push({blockOverrides:w,calls:_,stateOverrides:C})}const p=(typeof n=="bigint"?fe(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:d,returnFullTransactions:i,traceTransfers:a,validation:c},p]})).map((x,w)=>({...$1(x),calls:x.calls.map((_,C)=>{var D,R;const{abi:N,args:I,functionName:S,to:M}=s[w].calls[C],U=((D=_.error)==null?void 0:D.data)??_.returnData,H=BigInt(_.gasUsed),B=(R=_.logs)==null?void 0:R.map(L=>mi(L)),j=_.status==="0x1"?"success":"failure",T=N&&j==="success"&&U!=="0x"?Oa({abi:N,data:U,functionName:S}):null,k=(()=>{var O;if(j==="success")return;let L;if(((O=_.error)==null?void 0:O.data)==="0x"?L=new mh:_.error&&(L=new qm(_.error)),!!L)return Aa(L,{abi:N??[],address:M??"0x",args:I,functionName:S??"<unknown>"})})();return{data:U,gasUsed:H,logs:B,status:j,...j==="success"?{result:T}:{error:k}}})}))}catch(d){const f=d,p=Gm(f,{});throw p instanceof bh?f:p}}function y6(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=WI(RB(t));return n==="Bytes"?r:DS(r)}let RU=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const jU={checksum:new RU(8192)},xy=jU.checksum,DU=/^0x[a-fA-F0-9]{40}$/;function c0(t,e={}){const{strict:n=!0}=e;if(!DU.test(t))throw new j_({address:t,cause:new OU});if(n){if(t.toLowerCase()===t)return;if(MU(t)!==t)throw new j_({address:t,cause:new LU})}}function MU(t){if(xy.has(t))return xy.get(t);c0(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=y6(MB(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return xy.set(t,s),s}function Ux(t,e={}){const{strict:n=!0}=e??{};try{return c0(t,{strict:n}),!0}catch{return!1}}let j_=class extends yt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}};class OU extends yt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class LU extends yt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function zx(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const c=t[a];if(["(",")",","].includes(c)&&(e=!0),c==="("&&r++,c===")"&&r--,!!e){if(r===0){if(c===" "&&["event","function","error",""].includes(s))s="";else if(s+=c,c===")"){i=!0;break}continue}if(c===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=c,n+=c}}if(!i)throw new yt("Unable to normalize signature.");return s}function Hx(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ux(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Hx(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Hx(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function x6(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return x6(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Ux(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?Ux(n[r],{strict:!1}):!1)return a}}function v6(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?Yk(t):t;return{...r,...n?{hash:Fl(r)}:{}}}function FU(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=UB(e,{strict:!1}),a=t.filter(f=>i?f.type==="function"||f.type==="error"?w6(f)===tw(e,0,4):f.type==="event"?Fl(f)===e:!1:"name"in f&&f.name===e);if(a.length===0)throw new Wx({name:e});if(a.length===1)return{...a[0],...s?{hash:Fl(a[0])}:{}};let c;for(const f of a){if(!("inputs"in f))continue;if(!r||r.length===0){if(!f.inputs||f.inputs.length===0)return{...f,...s?{hash:Fl(f)}:{}};continue}if(!f.inputs||f.inputs.length===0||f.inputs.length!==r.length)continue;if(r.every((y,x)=>{const w="inputs"in f&&f.inputs[x];return w?Hx(y,w):!1})){if(c&&"inputs"in c&&c.inputs){const y=x6(f.inputs,c.inputs,r);if(y)throw new BU({abiItem:f,type:y[0]},{abiItem:c,type:y[1]})}c=f}}const d=(()=>{if(c)return c;const[f,...p]=a;return{...f,overloads:p}})();if(!d)throw new Wx({name:e});return{...d,...s?{hash:Fl(d)}:{}}}function w6(t){return tw(Fl(t),0,4)}function VU(t){const e=typeof t=="string"?t:em(t);return zx(e)}function Fl(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:y6(ew(VU(t)))}class BU extends yt{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${zx(em(e.abiItem))}\`, and`,`\`${n.type}\` in \`${zx(em(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Wx extends yt{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const $U=/^(.*)\[([0-9]*)\]$/,UU=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,b6=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function zU({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(uw({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function uw({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=XU(r.type);if(s){const[i,a]=s;return WU(n,{checksumAddress:t,length:i,parameter:{...r,type:a}})}if(r.type==="tuple")return QU(n,{checksumAddress:t,parameter:r});if(r.type==="address")return HU(n,{checksum:t});if(r.type==="bool")return GU(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,a="256"]=b6.exec(r.type)??[];return KU(n,{signed:i,size:Number(a)})}if(r.type.startsWith("bytes"))return qU(n,{type:r.type});if(r.type==="string")return YU(n);throw new T6(r.type)}function dw(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:c}=t[i];a?e+=32:e+=Ar(c)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:c}=t[i];a?(n.push(Cn(e+s,{size:32})),r.push(c),s+=Ar(c)):n.push(c)}return Rs(...n,...r)}function HU(t,e){const{checksum:n=!1}=e;return c0(t,{strict:n}),{dynamic:!1,encoded:Ia(t.toLowerCase())}}function WU(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new JU(t);if(!i&&t.length!==r)throw new ZU({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let a=!1;const c=[];for(let d=0;d<t.length;d++){const f=uw({checksumAddress:n,parameter:s,value:t[d]});f.dynamic&&(a=!0),c.push(f)}if(i||a){const d=dw(c);if(i){const f=Cn(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?Rs(f,d):f}}if(a)return{dynamic:!0,encoded:d}}return{dynamic:!1,encoded:Rs(...c.map(({encoded:d})=>d))}}function qU(t,{type:e}){const[,n]=e.split("bytes"),r=Ar(t);if(!n){let s=t;return r%32!==0&&(s=Sa(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Rs(Ia(Cn(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new k6({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Sa(t)}}function GU(t){if(typeof t!="boolean")throw new yt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ia(jS(t))}}function KU(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new MS({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Cn(t,{size:32,signed:e})}}function YU(t){const e=ew(t),n=Math.ceil(Ar(e)/32),r=[];for(let s=0;s<n;s++)r.push(Sa(tw(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Rs(Sa(Cn(Ar(e),{size:32})),...r)}}function QU(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let a=0;a<r.components.length;a++){const c=r.components[a],d=Array.isArray(t)?a:c.name,f=uw({checksumAddress:n,parameter:c,value:t[d]});i.push(f),f.dynamic&&(s=!0)}return{dynamic:s,encoded:s?dw(i):Rs(...i.map(({encoded:a})=>a))}}function XU(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function E6(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new _6({expectedLength:t.length,givenLength:e.length});const s=zU({checksumAddress:r,parameters:t,values:e}),i=dw(s);return i.length===0?"0x":i}function qx(t,e){if(t.length!==e.length)throw new _6({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(qx.encode(s,i))}return Rs(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const d=r;return c0(d),Ia(d.toLowerCase(),s?32:0)}if(n==="string")return ew(r);if(n==="bytes")return r;if(n==="bool")return Ia(jS(r),s?32:1);const i=n.match(b6);if(i){const[d,f,p="256"]=i,y=Number.parseInt(p)/8;return Cn(r,{size:s?32:y,signed:f==="int"})}const a=n.match(UU);if(a){const[d,f]=a;if(Number.parseInt(f)!==(r.length-2)/2)throw new k6({expectedSize:Number.parseInt(f),value:r});return Sa(r,s?32:0)}const c=n.match($U);if(c&&Array.isArray(r)){const[d,f]=c,p=[];for(let y=0;y<r.length;y++)p.push(e(f,r[y],!0));return p.length===0?"0x":Rs(...p)}throw new T6(n)}t.encode=e})(qx||(qx={}));class ZU extends yt{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class k6 extends yt{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ar(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class _6 extends yt{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}let JU=class extends yt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}};class T6 extends yt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function ez(t,e){var s;const{bytecode:n,args:r}=e;return Rs(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?E6(t.inputs,r):"0x")}function tz(t){return v6(t)}function nz(t,...e){const{overloads:n}=t,r=n?rz([t,...n],t.name,{args:e[0]}):t,s=sz(r),i=e.length>0?E6(r.inputs,e[0]):void 0;return i?Rs(s,i):s}function Pl(t,e={}){return v6(t,e)}function rz(t,e,n){const r=FU(t,e,n);if(r.type!=="function")throw new Wx({name:e,type:"function"});return r}function sz(t){return w6(t)}const iz="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Un="0x0000000000000000000000000000000000000000",oz="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function az(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:a,traceTransfers:c,validation:d}=e,f=e.account?Nt(e.account):void 0;if(a&&!f)throw new se("`account` is required when `traceAssetChanges` is true");const p=f?ez(tz("constructor(bytes, bytes)"),{bytecode:BS,args:[oz,nz(Pl("function getBalance(address)"),[f.address])]}):void 0,y=a?await Promise.all(e.calls.map(async q=>{if(!q.data&&!q.abi)return;const{accessList:ie}=await i6(t,{account:f.address,...q,data:q.abi?Sr(q):q.data});return ie.map(({address:ne,storageKeys:z})=>z.length>0?ne:null)})).then(q=>q.flat().filter(Boolean)):[],x=await $x(t,{blockNumber:n,blockTag:r,blocks:[...a?[{calls:[{data:p}],stateOverrides:i},{calls:y.map((q,ie)=>({abi:[Pl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[f.address],to:q,from:Un,nonce:ie})),stateOverrides:[{address:Un,nonce:0}]}]:[],{calls:[...s,{}].map(q=>({...q,from:f==null?void 0:f.address})),stateOverrides:i},...a?[{calls:[{data:p}]},{calls:y.map((q,ie)=>({abi:[Pl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[f.address],to:q,from:Un,nonce:ie})),stateOverrides:[{address:Un,nonce:0}]},{calls:y.map((q,ie)=>({to:q,abi:[Pl("function decimals() returns (uint256)")],functionName:"decimals",from:Un,nonce:ie})),stateOverrides:[{address:Un,nonce:0}]},{calls:y.map((q,ie)=>({to:q,abi:[Pl("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Un,nonce:ie})),stateOverrides:[{address:Un,nonce:0}]},{calls:y.map((q,ie)=>({to:q,abi:[Pl("function symbol() returns (string)")],functionName:"symbol",from:Un,nonce:ie})),stateOverrides:[{address:Un,nonce:0}]}]:[]],traceTransfers:c,validation:d}),w=a?x[2]:x[0],[_,C,,N,I,S,M,U]=a?x:[],{calls:H,...B}=w,j=H.slice(0,-1)??[],T=(_==null?void 0:_.calls)??[],k=(C==null?void 0:C.calls)??[],D=[...T,...k].map(q=>q.status==="success"?tn(q.data):null),R=(N==null?void 0:N.calls)??[],L=(I==null?void 0:I.calls)??[],O=[...R,...L].map(q=>q.status==="success"?tn(q.data):null),Z=((S==null?void 0:S.calls)??[]).map(q=>q.status==="success"?q.result:null),re=((U==null?void 0:U.calls)??[]).map(q=>q.status==="success"?q.result:null),le=((M==null?void 0:M.calls)??[]).map(q=>q.status==="success"?q.result:null),te=[];for(const[q,ie]of O.entries()){const ne=D[q];if(typeof ie!="bigint"||typeof ne!="bigint")continue;const z=Z[q-1],J=re[q-1],me=le[q-1],_e=q===0?{address:iz,decimals:18,symbol:"ETH"}:{address:y[q-1],decimals:me||z?Number(z??1):void 0,symbol:J??void 0};te.some(xe=>xe.token.address===_e.address)||te.push({token:_e,value:{pre:ne,post:ie,diff:ie-ne}})}return{assetChanges:te,block:B,results:j}}class A6 extends N1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,CF(e);const r=Um(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),ac(i)}update(e){return oc(this),this.iHash.update(e),this}digestInto(e){oc(this),ss(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=c,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const C6=(t,e,n)=>new A6(t,e).update(n).digest();C6.create=(t,e)=>new A6(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wn=BigInt(0),Sn=BigInt(1),ca=BigInt(2),lz=BigInt(3),I6=BigInt(4),S6=BigInt(5),N6=BigInt(8);function wr(t,e){const n=t%e;return n>=Wn?n:e+n}function gr(t,e,n){let r=t;for(;e-- >Wn;)r*=r,r%=n;return r}function D_(t,e){if(t===Wn)throw new Error("invert: expected non-zero number");if(e<=Wn)throw new Error("invert: expected positive modulus, got "+e);let n=wr(t,e),r=e,s=Wn,i=Sn;for(;n!==Wn;){const c=r/n,d=r%n,f=s-i*c;r=n,n=d,s=i,i=f}if(r!==Sn)throw new Error("invert: does not exist");return wr(s,e)}function P6(t,e){const n=(t.ORDER+Sn)/I6,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function cz(t,e){const n=(t.ORDER-S6)/N6,r=t.mul(e,ca),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,ca),s),c=t.mul(i,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),e))throw new Error("Cannot find square root");return c}function uz(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Sn,n=0;for(;e%ca===Wn;)e/=ca,n++;let r=ca;const s=u0(t);for(;M_(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return P6;let i=s.pow(r,e);const a=(e+Sn)/ca;return function(d,f){if(d.is0(f))return f;if(M_(d,f)!==1)throw new Error("Cannot find square root");let p=n,y=d.mul(d.ONE,i),x=d.pow(f,e),w=d.pow(f,a);for(;!d.eql(x,d.ONE);){if(d.is0(x))return d.ZERO;let _=1,C=d.sqr(x);for(;!d.eql(C,d.ONE);)if(_++,C=d.sqr(C),_===p)throw new Error("Cannot find square root");const N=Sn<<BigInt(p-_-1),I=d.pow(y,N);p=_,y=d.sqr(I),x=d.mul(x,y),w=d.mul(w,I)}return w}}function dz(t){return t%I6===lz?P6:t%N6===S6?cz:uz(t)}const hz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=hz.reduce((r,s)=>(r[s]="function",r),e);return Z1(t,n),t}function pz(t,e,n){if(n<Wn)throw new Error("invalid exponent, negatives unsupported");if(n===Wn)return t.ONE;if(n===Sn)return e;let r=t.ONE,s=e;for(;n>Wn;)n&Sn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Sn;return r}function R6(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,c,d)=>t.is0(c)?a:(r[d]=a,t.mul(a,c)),t.ONE),i=t.inv(s);return e.reduceRight((a,c,d)=>t.is0(c)?a:(r[d]=t.mul(a,r[d]),t.mul(a,c)),i),r}function M_(t,e){const n=(t.ORDER-Sn)/ca,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function mz(t,e){e!==void 0&&Td(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function u0(t,e,n=!1,r={}){if(t<=Wn)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const p=e;p.BITS&&(s=p.BITS),p.sqrt&&(i=p.sqrt),typeof p.isLE=="boolean"&&(n=p.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:a,nByteLength:c}=mz(t,s);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const f=Object.freeze({ORDER:t,isLE:n,BITS:a,BYTES:c,MASK:e0(a),ZERO:Wn,ONE:Sn,create:p=>wr(p,t),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return Wn<=p&&p<t},is0:p=>p===Wn,isValidNot0:p=>!f.is0(p)&&f.isValid(p),isOdd:p=>(p&Sn)===Sn,neg:p=>wr(-p,t),eql:(p,y)=>p===y,sqr:p=>wr(p*p,t),add:(p,y)=>wr(p+y,t),sub:(p,y)=>wr(p-y,t),mul:(p,y)=>wr(p*y,t),pow:(p,y)=>pz(f,p,y),div:(p,y)=>wr(p*D_(y,t),t),sqrN:p=>p*p,addN:(p,y)=>p+y,subN:(p,y)=>p-y,mulN:(p,y)=>p*y,inv:p=>D_(p,t),sqrt:i||(p=>(d||(d=dz(t)),d(f,p))),toBytes:p=>n?NS(p,c):X1(p,c),fromBytes:p=>{if(p.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+p.length);return n?SS(p):Jm(p)},invertBatch:p=>R6(f,p),cmov:(p,y,x)=>x?y:p});return Object.freeze(f)}function j6(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function D6(t){const e=j6(t);return e+Math.ceil(e/2)}function gz(t,e,n=!1){const r=t.length,s=j6(e),i=D6(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?SS(t):Jm(t),c=wr(a,e-Sn)+Sn;return n?NS(c,s):X1(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dc=BigInt(0),ua=BigInt(1);function sd(t,e){const n=e.negate();return t?n:e}function yz(t,e,n){const r=a=>a.pz,s=R6(t.Fp,n.map(r));return n.map((a,c)=>a.toAffine(s[c])).map(t.fromAffine)}function M6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function vy(t,e){M6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=e0(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function O_(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let c=Number(t&s),d=t>>a;c>r&&(c-=i,d+=ua);const f=e*r,p=f+Math.abs(c)-1,y=c===0,x=c<0,w=e%2!==0;return{nextN:d,offset:p,isZero:y,isNeg:x,isNegF:w,offsetF:f}}function xz(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function vz(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const wy=new WeakMap,O6=new WeakMap;function by(t){return O6.get(t)||1}function L_(t){if(t!==dc)throw new Error("invalid wNAF")}function wz(t,e){return{constTimeNegate:sd,hasPrecomputes(n){return by(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>dc;)r&ua&&(s=s.add(i)),i=i.double(),r>>=ua;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=vy(r,e),a=[];let c=n,d=c;for(let f=0;f<s;f++){d=c,a.push(d);for(let p=1;p<i;p++)d=d.add(c),a.push(d);c=d.double()}return a},wNAF(n,r,s){let i=t.ZERO,a=t.BASE;const c=vy(n,e);for(let d=0;d<c.windows;d++){const{nextN:f,offset:p,isZero:y,isNeg:x,isNegF:w,offsetF:_}=O_(s,d,c);s=f,y?a=a.add(sd(w,r[_])):i=i.add(sd(x,r[p]))}return L_(s),{p:i,f:a}},wNAFUnsafe(n,r,s,i=t.ZERO){const a=vy(n,e);for(let c=0;c<a.windows&&s!==dc;c++){const{nextN:d,offset:f,isZero:p,isNeg:y}=O_(s,c,a);if(s=d,!p){const x=r[f];i=i.add(y?x.negate():x)}}return L_(s),i},getPrecomputes(n,r,s){let i=wy.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),wy.set(r,i))),i},wNAFCached(n,r,s){const i=by(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=by(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){M6(r,e),O6.set(n,r),wy.delete(n)}}}function bz(t,e,n,r){let s=e,i=t.ZERO,a=t.ZERO;for(;n>dc||r>dc;)n&ua&&(i=i.add(s)),r&ua&&(a=a.add(s)),s=s.double(),n>>=ua,r>>=ua;return{p1:i,p2:a}}function Ez(t,e,n,r){xz(n,t),vz(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,c=bB(BigInt(s));let d=1;c>12?d=c-3:c>4?d=c-2:c>0&&(d=2);const f=e0(d),p=new Array(Number(f)+1).fill(a),y=Math.floor((e.BITS-1)/d)*d;let x=a;for(let w=y;w>=0;w-=d){p.fill(a);for(let C=0;C<i;C++){const N=r[C],I=Number(N>>BigInt(w)&f);p[I]=p[I].add(n[C])}let _=a;for(let C=p.length-1,N=a;C>0;C--)N=N.add(p[C]),_=_.add(N);if(x=x.add(_),w!==0)for(let C=0;C<d;C++)x=x.double()}return x}function F_(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return fz(e),e}else return u0(t)}function kz(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const d=e[c];if(!(typeof d=="bigint"&&d>dc))throw new Error(`CURVE.${c} must be positive bigint`)}const r=F_(e.p,n.Fp),s=F_(e.n,n.Fn),a=["Gx","Gy","a","b"];for(const c of a)if(!r.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V_(t){t.lowS!==void 0&&nm("lowS",t.lowS),t.prehash!==void 0&&nm("prehash",t.prehash)}class _z extends Error{constructor(e=""){super(e)}}const ri={Err:_z,_tlv:{encode:(t,e)=>{const{Err:n}=ri;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=rp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?rp(s.length/2|128):"";return rp(t)+i+s+e},decode(t,e){const{Err:n}=ri;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const d=s&127;if(!d)throw new n("tlv.decode(long): indefinite length not supported");if(d>4)throw new n("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+d);if(f.length!==d)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const p of f)a=a<<8|p;if(r+=d,a<128)throw new n("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+a);if(c.length!==a)throw new n("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=ri;if(t<id)throw new e("integer: negative integers are not allowed");let n=rp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ri;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Jm(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ri,s=vr("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:d}=r.decode(2,i),{v:f,l:p}=r.decode(2,d);if(p.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(t){const{_tlv:e,_int:n}=ri,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},id=BigInt(0),od=BigInt(1),Tz=BigInt(2),ap=BigInt(3),Az=BigInt(4);function Cz(t,e,n){function r(s){const i=t.sqr(s),a=t.mul(i,s);return t.add(t.add(a,t.mul(s,e)),n)}return r}function L6(t,e,n){const{BYTES:r}=t;function s(i){let a;if(typeof i=="bigint")a=i;else{let c=vr("private key",i);if(e){if(!e.includes(c.length*2))throw new Error("invalid private key");const d=new Uint8Array(r);d.set(c,d.length-c.length),c=d}try{a=t.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(a=t.create(a)),!t.isValidNot0(a))throw new Error("invalid private key: out of range [1..N-1]");return a}return s}function Iz(t,e={}){const{Fp:n,Fn:r}=kz("weierstrass",t,e),{h:s,n:i}=t;Z1(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=e;if(a&&(!n.is0(t.a)||typeof a.beta!="bigint"||typeof a.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function c(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(T,k,D){const{x:R,y:L}=k.toAffine(),O=n.toBytes(R);if(nm("isCompressed",D),D){c();const Z=!n.isOdd(L);return aa(F6(Z),O)}else return aa(Uint8Array.of(4),O,n.toBytes(L))}function f(T){ss(T);const k=n.BYTES,D=k+1,R=2*k+1,L=T.length,O=T[0],Z=T.subarray(1);if(L===D&&(O===2||O===3)){const re=n.fromBytes(Z);if(!n.isValid(re))throw new Error("bad point: is not on curve, wrong x");const le=x(re);let te;try{te=n.sqrt(le)}catch(ne){const z=ne instanceof Error?": "+ne.message:"";throw new Error("bad point: is not on curve, sqrt error"+z)}c();const q=n.isOdd(te);return(O&1)===1!==q&&(te=n.neg(te)),{x:re,y:te}}else if(L===R&&O===4){const re=n.fromBytes(Z.subarray(k*0,k*1)),le=n.fromBytes(Z.subarray(k*1,k*2));if(!w(re,le))throw new Error("bad point: is not on curve");return{x:re,y:le}}else throw new Error(`bad point: got length ${L}, expected compressed=${D} or uncompressed=${R}`)}const p=e.toBytes||d,y=e.fromBytes||f,x=Cz(n,t.a,t.b);function w(T,k){const D=n.sqr(k),R=x(T);return n.eql(D,R)}if(!w(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const _=n.mul(n.pow(t.a,ap),Az),C=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(_,C)))throw new Error("bad curve params: a or b");function N(T,k,D=!1){if(!n.isValid(k)||D&&n.is0(k))throw new Error(`bad point coordinate ${T}`);return k}function I(T){if(!(T instanceof H))throw new Error("ProjectivePoint expected")}const S=w_((T,k)=>{const{px:D,py:R,pz:L}=T;if(n.eql(L,n.ONE))return{x:D,y:R};const O=T.is0();k==null&&(k=O?n.ONE:n.inv(L));const Z=n.mul(D,k),re=n.mul(R,k),le=n.mul(L,k);if(O)return{x:n.ZERO,y:n.ZERO};if(!n.eql(le,n.ONE))throw new Error("invZ was invalid");return{x:Z,y:re}}),M=w_(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:k,y:D}=T.toAffine();if(!n.isValid(k)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!w(k,D))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function U(T,k,D,R,L){return D=new H(n.mul(D.px,T),D.py,D.pz),k=sd(R,k),D=sd(L,D),k.add(D)}class H{constructor(k,D,R){this.px=N("x",k),this.py=N("y",D,!0),this.pz=N("z",R),Object.freeze(this)}static fromAffine(k){const{x:D,y:R}=k||{};if(!k||!n.isValid(D)||!n.isValid(R))throw new Error("invalid affine point");if(k instanceof H)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(R)?H.ZERO:new H(D,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){return yz(H,"pz",k)}static fromBytes(k){return ss(k),H.fromHex(k)}static fromHex(k){const D=H.fromAffine(y(vr("pointHex",k)));return D.assertValidity(),D}static fromPrivateKey(k){const D=L6(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return H.BASE.multiply(D(k))}static msm(k,D){return Ez(H,r,k,D)}precompute(k=8,D=!0){return j.setWindowSize(this,k),D||this.multiply(ap),this}_setWindowSize(k){this.precompute(k)}assertValidity(){M(this)}hasEvenY(){const{y:k}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(k)}equals(k){I(k);const{px:D,py:R,pz:L}=this,{px:O,py:Z,pz:re}=k,le=n.eql(n.mul(D,re),n.mul(O,L)),te=n.eql(n.mul(R,re),n.mul(Z,L));return le&&te}negate(){return new H(this.px,n.neg(this.py),this.pz)}double(){const{a:k,b:D}=t,R=n.mul(D,ap),{px:L,py:O,pz:Z}=this;let re=n.ZERO,le=n.ZERO,te=n.ZERO,q=n.mul(L,L),ie=n.mul(O,O),ne=n.mul(Z,Z),z=n.mul(L,O);return z=n.add(z,z),te=n.mul(L,Z),te=n.add(te,te),re=n.mul(k,te),le=n.mul(R,ne),le=n.add(re,le),re=n.sub(ie,le),le=n.add(ie,le),le=n.mul(re,le),re=n.mul(z,re),te=n.mul(R,te),ne=n.mul(k,ne),z=n.sub(q,ne),z=n.mul(k,z),z=n.add(z,te),te=n.add(q,q),q=n.add(te,q),q=n.add(q,ne),q=n.mul(q,z),le=n.add(le,q),ne=n.mul(O,Z),ne=n.add(ne,ne),q=n.mul(ne,z),re=n.sub(re,q),te=n.mul(ne,ie),te=n.add(te,te),te=n.add(te,te),new H(re,le,te)}add(k){I(k);const{px:D,py:R,pz:L}=this,{px:O,py:Z,pz:re}=k;let le=n.ZERO,te=n.ZERO,q=n.ZERO;const ie=t.a,ne=n.mul(t.b,ap);let z=n.mul(D,O),J=n.mul(R,Z),me=n.mul(L,re),_e=n.add(D,R),xe=n.add(O,Z);_e=n.mul(_e,xe),xe=n.add(z,J),_e=n.sub(_e,xe),xe=n.add(D,L);let he=n.add(O,re);return xe=n.mul(xe,he),he=n.add(z,me),xe=n.sub(xe,he),he=n.add(R,L),le=n.add(Z,re),he=n.mul(he,le),le=n.add(J,me),he=n.sub(he,le),q=n.mul(ie,xe),le=n.mul(ne,me),q=n.add(le,q),le=n.sub(J,q),q=n.add(J,q),te=n.mul(le,q),J=n.add(z,z),J=n.add(J,z),me=n.mul(ie,me),xe=n.mul(ne,xe),J=n.add(J,me),me=n.sub(z,me),me=n.mul(ie,me),xe=n.add(xe,me),z=n.mul(J,xe),te=n.add(te,z),z=n.mul(he,xe),le=n.mul(_e,le),le=n.sub(le,z),z=n.mul(_e,J),q=n.mul(he,q),q=n.add(q,z),new H(le,te,q)}subtract(k){return this.add(k.negate())}is0(){return this.equals(H.ZERO)}multiply(k){const{endo:D}=e;if(!r.isValidNot0(k))throw new Error("invalid scalar: out of range");let R,L;const O=Z=>j.wNAFCached(this,Z,H.normalizeZ);if(D){const{k1neg:Z,k1:re,k2neg:le,k2:te}=D.splitScalar(k),{p:q,f:ie}=O(re),{p:ne,f:z}=O(te);L=ie.add(z),R=U(D.beta,q,ne,Z,le)}else{const{p:Z,f:re}=O(k);R=Z,L=re}return H.normalizeZ([R,L])[0]}multiplyUnsafe(k){const{endo:D}=e,R=this;if(!r.isValid(k))throw new Error("invalid scalar: out of range");if(k===id||R.is0())return H.ZERO;if(k===od)return R;if(j.hasPrecomputes(this))return this.multiply(k);if(D){const{k1neg:L,k1:O,k2neg:Z,k2:re}=D.splitScalar(k),{p1:le,p2:te}=bz(H,R,O,re);return U(D.beta,le,te,L,Z)}else return j.wNAFCachedUnsafe(R,k)}multiplyAndAddUnsafe(k,D,R){const L=this.multiplyUnsafe(D).add(k.multiplyUnsafe(R));return L.is0()?void 0:L}toAffine(k){return S(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return s===od?!0:k?k(H,this):j.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:k}=e;return s===od?this:k?k(H,this):this.multiplyUnsafe(s)}toBytes(k=!0){return nm("isCompressed",k),this.assertValidity(),p(H,this,k)}toRawBytes(k=!0){return this.toBytes(k)}toHex(k=!0){return Ad(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}H.BASE=new H(t.Gx,t.Gy,n.ONE),H.ZERO=new H(n.ZERO,n.ONE,n.ZERO),H.Fp=n,H.Fn=r;const B=r.BITS,j=wz(H,e.endo?Math.ceil(B/2):B);return H}function F6(t){return Uint8Array.of(t?2:3)}function Sz(t,e,n={}){Z1(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||DF,s=e.hmac||((R,...L)=>C6(e.hash,R,aa(...L))),{Fp:i,Fn:a}=t,{ORDER:c,BITS:d}=a;function f(R){const L=c>>od;return R>L}function p(R){return f(R)?a.neg(R):R}function y(R,L){if(!a.isValidNot0(L))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class x{constructor(L,O,Z){y("r",L),y("s",O),this.r=L,this.s=O,Z!=null&&(this.recovery=Z),Object.freeze(this)}static fromCompact(L){const O=a.BYTES,Z=vr("compactSignature",L,O*2);return new x(a.fromBytes(Z.subarray(0,O)),a.fromBytes(Z.subarray(O,O*2)))}static fromDER(L){const{r:O,s:Z}=ri.toSig(vr("DER",L));return new x(O,Z)}assertValidity(){}addRecoveryBit(L){return new x(this.r,this.s,L)}recoverPublicKey(L){const O=i.ORDER,{r:Z,s:re,recovery:le}=this;if(le==null||![0,1,2,3].includes(le))throw new Error("recovery id invalid");if(c*Tz<O&&le>1)throw new Error("recovery id is ambiguous for h>1 curve");const q=le===2||le===3?Z+c:Z;if(!i.isValid(q))throw new Error("recovery id 2 or 3 invalid");const ie=i.toBytes(q),ne=t.fromHex(aa(F6((le&1)===0),ie)),z=a.inv(q),J=M(vr("msgHash",L)),me=a.create(-J*z),_e=a.create(re*z),xe=t.BASE.multiplyUnsafe(me).add(ne.multiplyUnsafe(_e));if(xe.is0())throw new Error("point at infinify");return xe.assertValidity(),xe}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a.neg(this.s),this.recovery):this}toBytes(L){if(L==="compact")return aa(a.toBytes(this.r),a.toBytes(this.s));if(L==="der")return S1(ri.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ad(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ad(this.toBytes("compact"))}}const w=L6(a,n.allowedPrivateKeyLengths,n.wrapPrivateKey),_={isValidPrivateKey(R){try{return w(R),!0}catch{return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const R=c;return gz(r(D6(R)),R)},precompute(R=8,L=t.BASE){return L.precompute(R,!1)}};function C(R,L=!0){return t.fromPrivateKey(R).toBytes(L)}function N(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const O=vr("key",R).length,Z=i.BYTES,re=Z+1,le=2*Z+1;if(!(n.allowedPrivateKeyLengths||a.BYTES===re))return O===re||O===le}function I(R,L,O=!0){if(N(R)===!0)throw new Error("first arg must be private key");if(N(L)===!1)throw new Error("second arg must be public key");return t.fromHex(L).multiply(w(R)).toBytes(O)}const S=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const L=Jm(R),O=R.length*8-d;return O>0?L>>BigInt(O):L},M=e.bits2int_modN||function(R){return a.create(S(R))},U=e0(d);function H(R){return wB("num < 2^"+d,R,id,U),a.toBytes(R)}function B(R,L,O=j){if(["recovered","canonical"].some(_e=>_e in O))throw new Error("sign() legacy options not supported");const{hash:Z}=e;let{lowS:re,prehash:le,extraEntropy:te}=O;re==null&&(re=!0),R=vr("msgHash",R),V_(O),le&&(R=vr("prehashed msgHash",Z(R)));const q=M(R),ie=w(L),ne=[H(ie),H(q)];if(te!=null&&te!==!1){const _e=te===!0?r(i.BYTES):te;ne.push(vr("extraEntropy",_e))}const z=aa(...ne),J=q;function me(_e){const xe=S(_e);if(!a.isValidNot0(xe))return;const he=a.inv(xe),ye=t.BASE.multiply(xe).toAffine(),je=a.create(ye.x);if(je===id)return;const Ve=a.create(he*a.create(J+je*ie));if(Ve===id)return;let Ye=(ye.x===je?0:2)|Number(ye.y&od),tt=Ve;return re&&f(Ve)&&(tt=p(Ve),Ye^=1),new x(je,tt,Ye)}return{seed:z,k2sig:me}}const j={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function k(R,L,O=j){const{seed:Z,k2sig:re}=B(R,L,O);return EB(e.hash.outputLen,a.BYTES,s)(Z,re)}t.BASE.precompute(8);function D(R,L,O,Z=T){const re=R;L=vr("msgHash",L),O=vr("publicKey",O),V_(Z);const{lowS:le,prehash:te,format:q}=Z;if("strict"in Z)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&!["compact","der","js"].includes(q))throw new Error('format must be "compact", "der" or "js"');const ie=typeof re=="string"||I1(re),ne=!ie&&!q&&typeof re=="object"&&re!==null&&typeof re.r=="bigint"&&typeof re.s=="bigint";if(!ie&&!ne)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,J;try{if(ne)if(q===void 0||q==="js")z=new x(re.r,re.s);else throw new Error("invalid format");if(ie){try{q!=="compact"&&(z=x.fromDER(re))}catch(tt){if(!(tt instanceof ri.Err))throw tt}!z&&q!=="der"&&(z=x.fromCompact(re))}J=t.fromHex(O)}catch{return!1}if(!z||le&&z.hasHighS())return!1;te&&(L=e.hash(L));const{r:me,s:_e}=z,xe=M(L),he=a.inv(_e),ye=a.create(xe*he),je=a.create(me*he),Ve=t.BASE.multiplyUnsafe(ye).add(J.multiplyUnsafe(je));return Ve.is0()?!1:a.create(Ve.x)===me}return Object.freeze({getPublicKey:C,getSharedSecret:I,sign:k,verify:D,utils:_,Point:t,Signature:x})}function Nz(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=u0(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Pz(t){const{CURVE:e,curveOpts:n}=Nz(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Rz(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function jz(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Pz(t),s=Iz(e,n),i=Sz(s,r,n);return Rz(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dz(t,e){const n=r=>jz({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rm={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Mz=BigInt(1),Gx=BigInt(2),B_=(t,e)=>(t+e/Gx)/e;function Oz(t){const e=rm.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),c=BigInt(44),d=BigInt(88),f=t*t*t%e,p=f*f*t%e,y=gr(p,n,e)*p%e,x=gr(y,n,e)*p%e,w=gr(x,Gx,e)*f%e,_=gr(w,s,e)*w%e,C=gr(_,i,e)*_%e,N=gr(C,c,e)*C%e,I=gr(N,d,e)*N%e,S=gr(I,c,e)*C%e,M=gr(S,n,e)*p%e,U=gr(M,a,e)*_%e,H=gr(U,r,e)*f%e,B=gr(H,Gx,e);if(!Kx.eql(Kx.sqr(B),t))throw new Error("Cannot find square root");return B}const Kx=u0(rm.p,void 0,void 0,{sqrt:Oz}),V6=Dz({...rm,Fp:Kx,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=rm.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Mz*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),c=B_(i*t,e),d=B_(-r*t,e);let f=wr(t-c*n-d*s,e),p=wr(-c*r-d*i,e);const y=f>a,x=p>a;if(y&&(f=e-f),x&&(p=e-p),f>a||p>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:y,k1:f,k2neg:x,k2:p}}}},yS),Lz=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:V6},Symbol.toStringTag,{value:"Module"}));function Fz({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new V6.Signature(tn(t),tn(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?a:rs(a)}async function hw(t,e){var y,x,w;const{address:n,factory:r,factoryData:s,hash:i,signature:a,universalSignatureVerifierAddress:c=(w=(x=(y=t.chain)==null?void 0:y.contracts)==null?void 0:x.universalSignatureVerifier)==null?void 0:w.address,...d}=e,f=Ns(a)?a:typeof a=="object"&&"r"in a&&"s"in a?Fz(a):Lt(a),p=await(async()=>!r&&!s||EU(f)?f:kU({address:r,data:s,signature:f}))();try{const _=c?{to:c,data:Sr({abi:C_,functionName:"isValidSig",args:[n,i,p]}),...d}:{data:n0({abi:C_,args:[n,i,p],bytecode:YB}),...d},{data:C}=await Ne(t,r0,"call")(_);return mF(C??"0x0")}catch(_){try{if(Zm(GI(n),await uS({hash:i,signature:a})))return!0}catch{}if(_ instanceof lS)return!1;throw _}}async function Vz(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...a}){const c=m6(n);return hw(t,{address:e,factory:r,factoryData:s,hash:c,signature:i,...a})}async function Bz(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:a,primaryType:c,types:d,domain:f,...p}=e,y=rU({message:a,primaryType:c,types:d,domain:f});return hw(t,{address:n,factory:r,factoryData:s,hash:y,signature:i,...p})}function B6(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:a=t.pollingInterval}){const c=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let d;return c?(()=>{const y=Gt(["watchBlockNumber",t.uid,e,n,a]);return yi(y,{onBlockNumber:r,onError:s},x=>Rc(async()=>{var w;try{const _=await Ne(t,kh,"getBlockNumber")({cacheTime:0});if(d){if(_===d)return;if(_-d>1&&n)for(let C=d+1n;C<_;C++)x.onBlockNumber(C,d),d=C}(!d||_>d)&&(x.onBlockNumber(_,d),d=_)}catch(_){(w=x.onError)==null||w.call(x,_)}},{emitOnBegin:e,interval:a}))})():(()=>{const y=Gt(["watchBlockNumber",t.uid,e,n]);return yi(y,{onBlockNumber:r,onError:s},x=>{let w=!0,_=()=>w=!1;return(async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(S=>S.config.type==="webSocket");return I?I.value:t.transport}return t.transport})(),{unsubscribe:N}=await C.subscribe({params:["newHeads"],onData(I){var M;if(!w)return;const S=tn((M=I.result)==null?void 0:M.number);x.onBlockNumber(S,d),d=S},onError(I){var S;(S=x.onError)==null||S.call(x,I)}});_=N,w||_()}catch(C){s==null||s(C)}})(),()=>_()})})()}async function $z(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:a=({count:d})=>~~(1<<d)*200,timeout:c=18e4}){const d=Gt(["waitForTransactionReceipt",t.uid,n]);let f,p,y,x=!1,w,_;const{promise:C,resolve:N,reject:I}=nw(),S=c?setTimeout(()=>{_(),w(),I(new NV({hash:n}))},c):void 0;return w=yi(d,{onReplaced:r,resolve:N,reject:I},M=>{_=Ne(t,B6,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(U){const H=j=>{clearTimeout(S),_(),j(),w()};let B=U;if(!x)try{if(y){if(e>1&&(!y.blockNumber||B-y.blockNumber+1n<e))return;H(()=>M.resolve(y));return}if(f||(x=!0,await Vx(async()=>{f=await Ne(t,cw,"getTransaction")({hash:n}),f.blockNumber&&(B=f.blockNumber)},{delay:a,retryCount:i}),x=!1),y=await Ne(t,Bx,"getTransactionReceipt")({hash:n}),e>1&&(!y.blockNumber||B-y.blockNumber+1n<e))return;H(()=>M.resolve(y))}catch(j){if(j instanceof oS||j instanceof aS){if(!f){x=!1;return}try{p=f,x=!0;const T=await Vx(()=>Ne(t,bs,"getBlock")({blockNumber:B,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:R})=>R instanceof pS});x=!1;const k=T.transactions.find(({from:R,nonce:L})=>R===p.from&&L===p.nonce);if(!k||(y=await Ne(t,Bx,"getTransactionReceipt")({hash:k.hash}),e>1&&(!y.blockNumber||B-y.blockNumber+1n<e)))return;let D="replaced";k.to===p.to&&k.value===p.value&&k.input===p.input?D="repriced":k.from===k.to&&k.value===0n&&(D="cancelled"),H(()=>{var R;(R=M.onReplaced)==null||R.call(M,{reason:D,replacedTransaction:p,transaction:k,transactionReceipt:y}),M.resolve(y)})}catch(T){H(()=>M.reject(T))}}else H(()=>M.reject(j))}}})}),C}function Uz(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:a,poll:c,pollingInterval:d=t.pollingInterval}){const f=typeof c<"u"?c:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"),p=a??!1;let y;return f?(()=>{const _=Gt(["watchBlocks",t.uid,e,n,r,p,d]);return yi(_,{onBlock:s,onError:i},C=>Rc(async()=>{var N;try{const I=await Ne(t,bs,"getBlock")({blockTag:e,includeTransactions:p});if(I.number!==null&&(y==null?void 0:y.number)!=null){if(I.number===y.number)return;if(I.number-y.number>1&&n)for(let S=(y==null?void 0:y.number)+1n;S<I.number;S++){const M=await Ne(t,bs,"getBlock")({blockNumber:S,includeTransactions:p});C.onBlock(M,y),y=M}}((y==null?void 0:y.number)==null||e==="pending"&&(I==null?void 0:I.number)==null||I.number!==null&&I.number>y.number)&&(C.onBlock(I,y),y=I)}catch(I){(N=C.onError)==null||N.call(C,I)}},{emitOnBegin:r,interval:d}))})():(()=>{let _=!0,C=!0,N=()=>_=!1;return(async()=>{try{r&&Ne(t,bs,"getBlock")({blockTag:e,includeTransactions:p}).then(M=>{_&&C&&(s(M,void 0),C=!1)}).catch(i);const I=(()=>{if(t.transport.type==="fallback"){const M=t.transport.transports.find(U=>U.config.type==="webSocket");return M?M.value:t.transport}return t.transport})(),{unsubscribe:S}=await I.subscribe({params:["newHeads"],async onData(M){var H;if(!_)return;const U=await Ne(t,bs,"getBlock")({blockNumber:(H=M.result)==null?void 0:H.number,includeTransactions:p}).catch(()=>{});_&&(s(U,y),C=!1,y=U)},onError(M){i==null||i(M)}});N=S,_||N()}catch(I){i==null||i(I)}})(),()=>N()})()}function zz(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:a,onError:c,onLogs:d,poll:f,pollingInterval:p=t.pollingInterval,strict:y}){const x=typeof f<"u"?f:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"),w=y??!1;return x?(()=>{const N=Gt(["watchEvent",e,n,r,t.uid,s,p,a]);return yi(N,{onLogs:d,onError:c},I=>{let S;a!==void 0&&(S=a-1n);let M,U=!1;const H=Rc(async()=>{var B;if(!U){try{M=await Ne(t,o6,"createEventFilter")({address:e,args:n,event:s,events:i,strict:w,fromBlock:a})}catch{}U=!0;return}try{let j;if(M)j=await Ne(t,s0,"getFilterChanges")({filter:M});else{const T=await Ne(t,kh,"getBlockNumber")({});S&&S!==T?j=await Ne(t,Y1,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:S+1n,toBlock:T}):j=[],S=T}if(j.length===0)return;if(r)I.onLogs(j);else for(const T of j)I.onLogs([T])}catch(j){M&&j instanceof Ta&&(U=!1),(B=I.onError)==null||B.call(I,j)}},{emitOnBegin:!0,interval:p});return async()=>{M&&await Ne(t,i0,"uninstallFilter")({filter:M}),H()}})})():(()=>{let N=!0,I=()=>N=!1;return(async()=>{try{const S=(()=>{if(t.transport.type==="fallback"){const B=t.transport.transports.find(j=>j.config.type==="webSocket");return B?B.value:t.transport}return t.transport})(),M=i??(s?[s]:void 0);let U=[];M&&(U=[M.flatMap(j=>xh({abi:[j],eventName:j.name,args:n}))],s&&(U=U[0]));const{unsubscribe:H}=await S.subscribe({params:["logs",{address:e,topics:U}],onData(B){var T;if(!N)return;const j=B.result;try{const{eventName:k,args:D}=K1({abi:M??[],data:j.data,topics:j.topics,strict:w}),R=mi(j,{args:D,eventName:k});d([R])}catch(k){let D,R;if(k instanceof _d||k instanceof $m){if(y)return;D=k.abiItem.name,R=(T=k.abiItem.inputs)==null?void 0:T.some(O=>!("name"in O&&O.name))}const L=mi(j,{args:R?[]:{},eventName:D});d([L])}},onError(B){c==null||c(B)}});I=H,N||I()}catch(S){c==null||c(S)}})(),()=>I()})()}function Hz(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket")?(()=>{const f=Gt(["watchPendingTransactions",t.uid,e,i]);return yi(f,{onTransactions:r,onError:n},p=>{let y;const x=Rc(async()=>{var w;try{if(!y)try{y=await Ne(t,a6,"createPendingTransactionFilter")({});return}catch(C){throw x(),C}const _=await Ne(t,s0,"getFilterChanges")({filter:y});if(_.length===0)return;if(e)p.onTransactions(_);else for(const C of _)p.onTransactions([C])}catch(_){(w=p.onError)==null||w.call(p,_)}},{emitOnBegin:!0,interval:i});return async()=>{y&&await Ne(t,i0,"uninstallFilter")({filter:y}),x()}})})():(()=>{let f=!0,p=()=>f=!1;return(async()=>{try{const{unsubscribe:y}=await t.transport.subscribe({params:["newPendingTransactions"],onData(x){if(!f)return;const w=x.result;r([w])},onError(x){n==null||n(x)}});p=y,f||p()}catch(y){n==null||n(y)}})(),()=>p()})()}function Wz(t){var y,x,w;const{scheme:e,statement:n,...r}=((y=t.match(qz))==null?void 0:y.groups)??{},{chainId:s,expirationTime:i,issuedAt:a,notBefore:c,requestId:d,...f}=((x=t.match(Gz))==null?void 0:x.groups)??{},p=(w=t.split("Resources:")[1])==null?void 0:w.split(`
- `).slice(1);return{...r,...f,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...a?{issuedAt:new Date(a)}:{},...c?{notBefore:new Date(c)}:{},...d?{requestId:d}:{},...p?{resources:p}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const qz=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Gz=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Kz(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:a=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&a>=r.expirationTime||r.notBefore&&a<r.notBefore)return!1;try{if(!r.address||!Yt(r.address,{strict:!1})||e&&!Zm(r.address,e))return!1}catch{return!1}return!0}async function Yz(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:a,signature:c,time:d=new Date,...f}=e,p=Wz(s);if(!p.address||!Kz({address:n,domain:r,message:p,nonce:i,scheme:a,time:d}))return!1;const x=m6(s);return hw(t,{address:p.address,hash:x,signature:c,...f})}function Qz(t){return{call:e=>r0(t,e),createAccessList:e=>i6(t,e),createBlockFilter:()=>W$(t),createContractEventFilter:e=>JI(t,e),createEventFilter:e=>o6(t,e),createPendingTransactionFilter:()=>a6(t),estimateContractGas:e=>gB(t,e),estimateGas:e=>G1(t,e),getBalance:e=>AS(t,e),getBlobBaseFee:()=>q$(t),getBlock:e=>bs(t,e),getBlockNumber:e=>kh(t,e),getBlockTransactionCount:e=>G$(t,e),getBytecode:e=>R_(t,e),getChainId:()=>Nc(t),getCode:e=>R_(t,e),getContractEvents:e=>CS(t,e),getEip712Domain:e=>Y$(t,e),getEnsAddress:e=>S$(t,e),getEnsAvatar:e=>U$(t,e),getEnsName:e=>z$(t,e),getEnsResolver:e=>H$(t,e),getEnsText:e=>s6(t,e),getFeeHistory:e=>Z$(t,e),estimateFeesPerGas:e=>nB(t,e),getFilterChanges:e=>s0(t,e),getFilterLogs:e=>J$(t,e),getGasPrice:()=>U1(t),getLogs:e=>Y1(t,e),getProof:e=>IU(t,e),estimateMaxPriorityFeePerGas:e=>tB(t,e),getStorageAt:e=>SU(t,e),getTransaction:e=>cw(t,e),getTransactionConfirmations:e=>NU(t,e),getTransactionCount:e=>z1(t,e),getTransactionReceipt:e=>Bx(t,e),multicall:e=>PU(t,e),prepareTransactionRequest:e=>Xm(t,e),readContract:e=>gi(t,e),sendRawTransaction:e=>rw(t,e),simulate:e=>$x(t,e),simulateBlocks:e=>$x(t,e),simulateCalls:e=>az(t,e),simulateContract:e=>r$(t,e),verifyMessage:e=>Vz(t,e),verifySiweMessage:e=>Yz(t,e),verifyTypedData:e=>Bz(t,e),uninstallFilter:e=>i0(t,e),waitForTransactionReceipt:e=>$z(t,e),watchBlocks:e=>Uz(t,e),watchBlockNumber:e=>B6(t,e),watchContractEvent:e=>u$(t,e),watchEvent:e=>zz(t,e),watchPendingTransactions:e=>Hz(t,e)}}function Xz(t){const{key:e="public",name:n="Public Client"}=t;return ZS({...t,key:e,name:n,type:"publicClient"}).extend(Qz)}async function Zz(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:a}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:fe(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:a?Object.values(a).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function Jz(t,e){const{abi:n,args:r,bytecode:s,...i}=e,a=n0({abi:n,args:r,bytecode:s});return o0(t,{...i,...i.authorizationList?{to:null}:{},data:a})}async function eH(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>gh(r))}async function tH(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Nt(n):void 0,i=r?[s==null?void 0:s.address,[fe(r)]]:[s==null?void 0:s.address],a=await t.request({method:"wallet_getCapabilities",params:i}),c={};for(const[d,f]of Object.entries(a)){c[Number(d)]={};for(let[p,y]of Object.entries(f))p==="addSubAccount"&&(p="unstable_addSubAccount"),c[Number(d)][p]=y}return typeof r=="number"?c[r]:c}async function nH(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function $6(t,e){var d;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new La({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Nt(n),a=(()=>{if(e.executor)return e.executor==="self"?e.executor:Nt(e.executor)})(),c={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof c.chainId>"u"&&(c.chainId=((d=t.chain)==null?void 0:d.id)??await Ne(t,Nc,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await Ne(t,z1,"getTransactionCount")({address:i.address,blockTag:"pending"}),(a==="self"||a!=null&&a.address&&Zm(a.address,i.address))&&(c.nonce+=1)),c}async function rH(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>GI(n))}async function sH(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function iH(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function oH(t,e){const{account:n=t.account}=e;if(!n)throw new La({docsPath:"/docs/eip7702/signAuthorization"});const r=Nt(n);if(!r.signAuthorization)throw new Cp({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await $6(t,e);return r.signAuthorization(s)}async function aH(t,{account:e=t.account,message:n}){if(!e)throw new La({docsPath:"/docs/actions/wallet/signMessage"});const r=Nt(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?ic(n):n.raw instanceof Uint8Array?bn(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function lH(t,e){var f,p,y,x;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new La({docsPath:"/docs/actions/wallet/signTransaction"});const i=Nt(n);Ma({account:i,...e});const a=await Ne(t,Nc,"getChainId")({});r!==null&&HS({currentChainId:a,chain:r});const c=(r==null?void 0:r.formatters)||((f=t.chain)==null?void 0:f.formatters),d=((p=c==null?void 0:c.transactionRequest)==null?void 0:p.format)||Sc;return i.signTransaction?i.signTransaction({...s,chainId:a},{serializer:(x=(y=t.chain)==null?void 0:y.serializers)==null?void 0:x.transaction}):await t.request({method:"eth_signTransaction",params:[{...d(s),chainId:fe(a),from:i.address}]},{retryCount:0})}async function cH(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new La({docsPath:"/docs/actions/wallet/signTypedData"});const a=Nt(n),c={EIP712Domain:p6({domain:r}),...e.types};if(f6({domain:r,message:s,primaryType:i,types:c}),a.signTypedData)return a.signTypedData({domain:r,message:s,primaryType:i,types:c});const d=aU({domain:r,message:s,primaryType:i,types:c});return t.request({method:"eth_signTypedData_v4",params:[a.address,d]},{retryCount:0})}async function uH(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:fe(e)}]},{retryCount:0})}async function dH(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function hH(t){return{addChain:e=>Zz(t,e),deployContract:e=>Jz(t,e),getAddresses:()=>eH(t),getCallsStatus:e=>QS(t,e),getCapabilities:e=>tH(t,e),getChainId:()=>Nc(t),getPermissions:()=>nH(t),prepareAuthorization:e=>$6(t,e),prepareTransactionRequest:e=>Xm(t,e),requestAddresses:()=>rH(t),requestPermissions:e=>sH(t,e),sendCalls:e=>f$(t,e),sendRawTransaction:e=>rw(t,e),sendTransaction:e=>o0(t,e),showCallsStatus:e=>iH(t,e),signAuthorization:e=>oH(t,e),signMessage:e=>aH(t,e),signTransaction:e=>lH(t,e),signTypedData:e=>cH(t,e),switchChain:e=>uH(t,e),waitForCallsStatus:e=>p$(t,e),watchAsset:e=>dH(t,e),writeContract:e=>d$(t,e)}}function Ey(t){const{key:e="wallet",name:n="Wallet Client",transport:r}=t;return ZS({...t,key:e,name:n,transport:r,type:"walletClient"}).extend(hH)}const fH={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},pH={block:eB({format(t){var n;return{transactions:(n=t.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=Qm(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?tn(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:ZV({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?tn(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:h$({format(t){return{l1GasPrice:t.l1GasPrice?tn(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?tn(t.l1GasUsed):null,l1Fee:t.l1Fee?tn(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function mH(t,e){return xH(t)?yH(t):fU(t,e)}const gH={transaction:mH};function yH(t){vH(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:a,to:c,value:d}=t,f=[e,r,c??"0x",a?bn(a):"0x",d?bn(d):"0x",s?bn(s):"0x",i?"0x1":"0x",n??"0x"];return as(["0x7e",xo(f)])}function xH(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function vH(t){const{from:e,to:n}=t;if(e&&!Yt(e))throw new Nn({address:e});if(n&&!Yt(n))throw new Nn({address:n})}const sm={blockTime:2e3,contracts:fH,formatters:pH,serializers:gH},Fu=1,hc=l6({...sm,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...sm.contracts,disputeGameFactory:{[Fu]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Fu]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Fu]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Fu]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Fu}),Vu=11155111,da=l6({...sm,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...sm.contracts,disputeGameFactory:{[Vu]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[Vu]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[Vu]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[Vu]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:Vu});class wH{constructor(){mn(this,"walletClient",null);mn(this,"publicClient",null);mn(this,"listeners",[]);mn(this,"state",{isConnected:!1,address:null,chainId:null,isConnecting:!1});mn(this,"handleAccountsChanged",e=>{e.length===0?this.disconnect():(window.ethereum&&(this.walletClient=Ey({chain:da,transport:my(window.ethereum),account:e[0]})),this.updateState({address:e[0],isConnected:!0}))});mn(this,"handleChainChanged",e=>{this.updateState({chainId:parseInt(e,16)})});mn(this,"handleDisconnect",()=>{this.disconnect()});this.publicClient=Xz({chain:da,transport:k$()}),typeof window<"u"&&window.ethereum&&(window.ethereum.on("accountsChanged",this.handleAccountsChanged.bind(this)),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this)),window.ethereum.on("disconnect",this.handleDisconnect.bind(this)))}updateState(e){this.state={...this.state,...e},this.listeners.forEach(n=>n(this.state))}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async connect(){if(!window.ethereum)throw new Error("MetaMask is not installed");this.updateState({isConnecting:!0});try{const e=await window.ethereum.request({method:"eth_requestAccounts"});if(e.length===0)throw new Error("No accounts found");this.walletClient=Ey({chain:da,transport:my(window.ethereum),account:e[0]});const n=await window.ethereum.request({method:"eth_chainId"});this.updateState({isConnected:!0,address:e[0],chainId:parseInt(n,16),isConnecting:!1})}catch(e){throw this.updateState({isConnecting:!1}),e}}disconnect(){this.walletClient=null,this.updateState({isConnected:!1,address:null,chainId:null,isConnecting:!1})}async switchToBaseSepolia(){if(window.ethereum)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x14a34"}]})}catch(e){e.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x14a34",chainName:"Base Sepolia",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://sepolia.base.org"],blockExplorerUrls:["https://sepolia-explorer.base.org"]}]})}}getWalletClient(){return this.walletClient}getPublicClient(){return this.publicClient}getState(){return this.state}async checkConnection(){if(window.ethereum)try{const e=await window.ethereum.request({method:"eth_accounts"});if(e.length>0){this.walletClient=Ey({chain:da,transport:my(window.ethereum),account:e[0]});const n=await window.ethereum.request({method:"eth_chainId"});this.updateState({isConnected:!0,address:e[0],chainId:parseInt(n,16)})}}catch(e){console.error("Error checking wallet connection:",e)}}}const Wr=new wH,U6=V.createContext(null),Pn=()=>{const t=V.useContext(U6);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},bH=({children:t})=>{const[e,n]=V.useState(null),[r,s]=V.useState(!0),[i]=V.useState(null),[a,c]=V.useState(!1),[d,f]=V.useState("Web3 functionality is disabled"),p=V.useCallback(async S=>{if(S)try{await uL(S,{}),console.log("User profile initialized or updated")}catch(M){console.error("Error initializing user profile:",M)}},[]);V.useEffect(()=>$9(oa,M=>{const U=e;if(n(M),M)p(M);else if(U)try{Wr.disconnect(),console.log("Wallet automatically disconnected on auth state change")}catch(H){console.error("Error auto-disconnecting wallet:",H)}s(!1)}),[p]);const I={currentUser:e,loading:r,walletAddress:i,isWalletConnected:a,signUp:async(S,M)=>{const{user:U}=await L9(oa,S,M);return await p(U),U},signIn:async(S,M)=>{const{user:U}=await F9(oa,S,M);return await p(U),U},logOut:async()=>{try{Wr.disconnect(),console.log("Wallet disconnected on logout")}catch(S){console.error("Error disconnecting wallet:",S)}await U9(oa)},linkWalletToUser:async S=>(console.log("Web3 functionality is disabled - wallet linking skipped"),Promise.resolve()),unlinkWallet:async()=>(console.log("Web3 functionality is disabled - wallet unlinking skipped"),Promise.resolve()),walletDebug:d,forceWalletDetection:async()=>(console.log("Web3 functionality is disabled - wallet detection skipped"),Promise.resolve(!1))};return u.jsx(U6.Provider,{value:I,children:t})},z6=t=>{switch(t){case"primary":return"bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400 border-transparent";case"secondary":return"bg-secondary-600 hover:bg-secondary-700 text-white dark:bg-secondary-500 dark:hover:bg-secondary-400 border-transparent";case"outline":return"bg-transparent hover:bg-ink-50 dark:hover:bg-dark-800 text-ink-900 dark:text-white border-ink-300 dark:border-dark-700";case"ghost":return"bg-transparent hover:bg-ink-50 dark:hover:bg-dark-800 text-ink-700 dark:text-ink-200 border-transparent";case"cta-primary":return"bg-white hover:bg-gray-100 text-primary-700 border-transparent shadow-lg hover:shadow-xl";case"cta-secondary":return"bg-transparent hover:bg-white/20 text-white border-2 border-white hover:shadow-lg";default:return"bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400 border-transparent"}},H6=t=>{switch(t){case"sm":return"text-sm px-3 py-1.5 rounded";case"md":return"text-base px-4 py-2 rounded-md";case"lg":return"text-lg px-6 py-3 rounded-md";default:return"text-base px-4 py-2 rounded-md"}},ot=({children:t,variant:e="primary",size:n="md",className:r="",fullWidth:s=!1,...i})=>{const a=z6(e),c=H6(n);return u.jsx("button",{className:`inline-flex items-center justify-center font-medium border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-600 disabled:opacity-50 ${a} ${c} ${s?"w-full":""} ${r}`,...i,children:t})},W6=({children:t,variant:e="primary",size:n="md",className:r="",fullWidth:s=!1,to:i,...a})=>{const c=z6(e),d=H6(n);return u.jsx(Ce,{to:i,className:`inline-flex items-center justify-center font-medium border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-600 disabled:opacity-50 ${c} ${d} ${s?"w-full":""} ${r}`,...a,children:t})},q6=V.createContext({});function EH(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const fw=typeof window<"u",kH=fw?V.useLayoutEffect:V.useEffect,pw=V.createContext(null);function mw(t,e){t.indexOf(e)===-1&&t.push(e)}function gw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const xi=(t,e,n)=>n>e?e:n<t?t:n;let yw=()=>{};const vi={},G6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function K6(t){return typeof t=="object"&&t!==null}const Y6=t=>/^0[^.\s]+$/u.test(t);function xw(t){let e;return()=>(e===void 0&&(e=t()),e)}const _r=t=>t,_H=(t,e)=>n=>e(t(n)),Th=(...t)=>t.reduce(_H),Gd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class vw{constructor(){this.subscriptions=[]}add(e){return mw(this.subscriptions,e),()=>gw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const As=t=>t*1e3,Cs=t=>t/1e3;function Q6(t,e){return e?t*(1e3/e):0}const X6=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,TH=1e-7,AH=12;function CH(t,e,n,r,s){let i,a,c=0;do a=e+(n-e)/2,i=X6(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>TH&&++c<AH);return a}function Ah(t,e,n,r){if(t===e&&n===r)return _r;const s=i=>CH(i,0,1,t,n);return i=>i===0||i===1?i:X6(s(i),e,r)}const Z6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,J6=t=>e=>1-t(1-e),eN=Ah(.33,1.53,.69,.99),ww=J6(eN),tN=Z6(ww),nN=t=>(t*=2)<1?.5*ww(t):.5*(2-Math.pow(2,-10*(t-1))),bw=t=>1-Math.sin(Math.acos(t)),rN=J6(bw),sN=Z6(bw),IH=Ah(.42,0,1,1),SH=Ah(0,0,.58,1),iN=Ah(.42,0,.58,1),NH=t=>Array.isArray(t)&&typeof t[0]!="number",oN=t=>Array.isArray(t)&&typeof t[0]=="number",PH={linear:_r,easeIn:IH,easeInOut:iN,easeOut:SH,circIn:bw,circInOut:sN,circOut:rN,backIn:ww,backInOut:tN,backOut:eN,anticipate:nN},RH=t=>typeof t=="string",$_=t=>{if(oN(t)){yw(t.length===4);const[e,n,r,s]=t;return Ah(e,n,r,s)}else if(RH(t))return PH[t];return t},lp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],U_={value:null};function jH(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function f(y){a.has(y)&&(p.schedule(y),t()),d++,y(c)}const p={schedule:(y,x=!1,w=!1)=>{const C=w&&s?n:r;return x&&a.add(y),C.has(y)||C.add(y),y},cancel:y=>{r.delete(y),a.delete(y)},process:y=>{if(c=y,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(f),e&&U_.value&&U_.value.frameloop[e].push(d),d=0,n.clear(),s=!1,i&&(i=!1,p.process(y))}};return p}const DH=40;function aN(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=lp.reduce((M,U)=>(M[U]=jH(i,e?U:void 0),M),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:p,update:y,preRender:x,render:w,postRender:_}=a,C=()=>{const M=vi.useManualTiming?s.timestamp:performance.now();n=!1,vi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(M-s.timestamp,DH),1)),s.timestamp=M,s.isProcessing=!0,c.process(s),d.process(s),f.process(s),p.process(s),y.process(s),x.process(s),w.process(s),_.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(C))},N=()=>{n=!0,r=!0,s.isProcessing||t(C)};return{schedule:lp.reduce((M,U)=>{const H=a[U];return M[U]=(B,j=!1,T=!1)=>(n||N(),H.schedule(B,j,T)),M},{}),cancel:M=>{for(let U=0;U<lp.length;U++)a[lp[U]].cancel(M)},state:s,steps:a}}const{schedule:Et,cancel:vo,state:an,steps:ky}=aN(typeof requestAnimationFrame<"u"?requestAnimationFrame:_r,!0);let Sp;function MH(){Sp=void 0}const qn={now:()=>(Sp===void 0&&qn.set(an.isProcessing||vi.useManualTiming?an.timestamp:performance.now()),Sp),set:t=>{Sp=t,queueMicrotask(MH)}},lN=t=>e=>typeof e=="string"&&e.startsWith(t),Ew=lN("--"),OH=lN("var(--"),kw=t=>OH(t)?LH.test(t.split("/*")[0].trim()):!1,LH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kd={...jc,transform:t=>xi(0,1,t)},cp={...jc,default:1},ad=t=>Math.round(t*1e5)/1e5,_w=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FH(t){return t==null}const VH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tw=(t,e)=>n=>!!(typeof n=="string"&&VH.test(n)&&n.startsWith(t)||e&&!FH(n)&&Object.prototype.hasOwnProperty.call(n,e)),cN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,c]=r.match(_w);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},BH=t=>xi(0,255,t),_y={...jc,transform:t=>Math.round(BH(t))},ha={test:Tw("rgb","red"),parse:cN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+_y.transform(t)+", "+_y.transform(e)+", "+_y.transform(n)+", "+ad(Kd.transform(r))+")"};function $H(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Yx={test:Tw("#"),parse:$H,transform:ha.transform},Ch=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qi=Ch("deg"),Is=Ch("%"),Oe=Ch("px"),UH=Ch("vh"),zH=Ch("vw"),z_={...Is,parse:t=>Is.parse(t)/100,transform:t=>Is.transform(t*100)},Vl={test:Tw("hsl","hue"),parse:cN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Is.transform(ad(e))+", "+Is.transform(ad(n))+", "+ad(Kd.transform(r))+")"},Dt={test:t=>ha.test(t)||Yx.test(t)||Vl.test(t),parse:t=>ha.test(t)?ha.parse(t):Vl.test(t)?Vl.parse(t):Yx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ha.transform(t):Vl.transform(t),getAnimatableNone:t=>{const e=Dt.parse(t);return e.alpha=0,Dt.transform(e)}},HH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WH(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(_w))==null?void 0:e.length)||0)+(((n=t.match(HH))==null?void 0:n.length)||0)>0}const uN="number",dN="color",qH="var",GH="var(",H_="${}",KH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const c=e.replace(KH,d=>(Dt.test(d)?(r.color.push(i),s.push(dN),n.push(Dt.parse(d))):d.startsWith(GH)?(r.var.push(i),s.push(qH),n.push(d)):(r.number.push(i),s.push(uN),n.push(parseFloat(d))),++i,H_)).split(H_);return{values:n,split:c,indexes:r,types:s}}function hN(t){return Yd(t).values}function fN(t){const{split:e,types:n}=Yd(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const c=n[a];c===uN?i+=ad(s[a]):c===dN?i+=Dt.transform(s[a]):i+=s[a]}return i}}const YH=t=>typeof t=="number"?0:Dt.test(t)?Dt.getAnimatableNone(t):t;function QH(t){const e=hN(t);return fN(t)(e.map(YH))}const wo={test:WH,parse:hN,createTransformer:fN,getAnimatableNone:QH};function Ty(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function XH({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;s=Ty(d,c,t+1/3),i=Ty(d,c,t),a=Ty(d,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function im(t,e){return n=>n>0?e:t}const wt=(t,e,n)=>t+(e-t)*n,Ay=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},ZH=[Yx,ha,Vl],JH=t=>ZH.find(e=>e.test(t));function W_(t){const e=JH(t);if(!e)return!1;let n=e.parse(t);return e===Vl&&(n=XH(n)),n}const q_=(t,e)=>{const n=W_(t),r=W_(e);if(!n||!r)return im(t,e);const s={...n};return i=>(s.red=Ay(n.red,r.red,i),s.green=Ay(n.green,r.green,i),s.blue=Ay(n.blue,r.blue,i),s.alpha=wt(n.alpha,r.alpha,i),ha.transform(s))},Qx=new Set(["none","hidden"]);function eW(t,e){return Qx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function tW(t,e){return n=>wt(t,e,n)}function Aw(t){return typeof t=="number"?tW:typeof t=="string"?kw(t)?im:Dt.test(t)?q_:sW:Array.isArray(t)?pN:typeof t=="object"?Dt.test(t)?q_:nW:im}function pN(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>Aw(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function nW(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Aw(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function rW(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][r[i]],c=t.values[a]??0;n[s]=c,r[i]++}return n}const sW=(t,e)=>{const n=wo.createTransformer(e),r=Yd(t),s=Yd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Qx.has(t)&&!s.values.length||Qx.has(e)&&!r.values.length?eW(t,e):Th(pN(rW(r,s),s.values),n):im(t,e)};function mN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wt(t,e,n):Aw(t)(t,e)}const iW=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Et.update(e,n),stop:()=>vo(e),now:()=>an.isProcessing?an.timestamp:qn.now()}},gN=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},om=2e4;function Cw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<om;)e+=n,r=t.next(e);return e>=om?1/0:e}function oW(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Cw(r),om);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Cs(s)}}const aW=5;function yN(t,e,n){const r=Math.max(e-aW,0);return Q6(n-t(r),e-r)}const Tt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cy=.001;function lW({duration:t=Tt.duration,bounce:e=Tt.bounce,velocity:n=Tt.velocity,mass:r=Tt.mass}){let s,i,a=1-e;a=xi(Tt.minDamping,Tt.maxDamping,a),t=xi(Tt.minDuration,Tt.maxDuration,Cs(t)),a<1?(s=f=>{const p=f*a,y=p*t,x=p-n,w=Xx(f,a),_=Math.exp(-y);return Cy-x/w*_},i=f=>{const y=f*a*t,x=y*n+n,w=Math.pow(a,2)*Math.pow(f,2)*t,_=Math.exp(-y),C=Xx(Math.pow(f,2),a);return(-s(f)+Cy>0?-1:1)*((x-w)*_)/C}):(s=f=>{const p=Math.exp(-f*t),y=(f-n)*t+1;return-Cy+p*y},i=f=>{const p=Math.exp(-f*t),y=(n-f)*(t*t);return p*y});const c=5/t,d=uW(s,i,c);if(t=As(t),isNaN(d))return{stiffness:Tt.stiffness,damping:Tt.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:a*2*Math.sqrt(r*f),duration:t}}}const cW=12;function uW(t,e,n){let r=n;for(let s=1;s<cW;s++)r=r-t(r)/e(r);return r}function Xx(t,e){return t*Math.sqrt(1-e*e)}const dW=["duration","bounce"],hW=["stiffness","damping","mass"];function G_(t,e){return e.some(n=>t[n]!==void 0)}function fW(t){let e={velocity:Tt.velocity,stiffness:Tt.stiffness,damping:Tt.damping,mass:Tt.mass,isResolvedFromDuration:!1,...t};if(!G_(t,hW)&&G_(t,dW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*xi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Tt.mass,stiffness:s,damping:i}}else{const n=lW(t);e={...e,...n,mass:Tt.mass},e.isResolvedFromDuration=!0}return e}function am(t=Tt.visualDuration,e=Tt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:f,mass:p,duration:y,velocity:x,isResolvedFromDuration:w}=fW({...n,velocity:-Cs(n.velocity||0)}),_=x||0,C=f/(2*Math.sqrt(d*p)),N=a-i,I=Cs(Math.sqrt(d/p)),S=Math.abs(N)<5;r||(r=S?Tt.restSpeed.granular:Tt.restSpeed.default),s||(s=S?Tt.restDelta.granular:Tt.restDelta.default);let M;if(C<1){const H=Xx(I,C);M=B=>{const j=Math.exp(-C*I*B);return a-j*((_+C*I*N)/H*Math.sin(H*B)+N*Math.cos(H*B))}}else if(C===1)M=H=>a-Math.exp(-I*H)*(N+(_+I*N)*H);else{const H=I*Math.sqrt(C*C-1);M=B=>{const j=Math.exp(-C*I*B),T=Math.min(H*B,300);return a-j*((_+C*I*N)*Math.sinh(T)+H*N*Math.cosh(T))/H}}const U={calculatedDuration:w&&y||null,next:H=>{const B=M(H);if(w)c.done=H>=y;else{let j=H===0?_:0;C<1&&(j=H===0?As(_):yN(M,H,B));const T=Math.abs(j)<=r,k=Math.abs(a-B)<=s;c.done=T&&k}return c.value=c.done?a:B,c},toString:()=>{const H=Math.min(Cw(U),om),B=gN(j=>U.next(H*j).value,H,30);return H+"ms "+B},toTransition:()=>{}};return U}am.applyToOptions=t=>{const e=oW(t,100,am);return t.ease=e.ease,t.duration=As(e.duration),t.type="keyframes",t};function Zx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:c,max:d,restDelta:f=.5,restSpeed:p}){const y=t[0],x={done:!1,value:y},w=T=>c!==void 0&&T<c||d!==void 0&&T>d,_=T=>c===void 0?d:d===void 0||Math.abs(c-T)<Math.abs(d-T)?c:d;let C=n*e;const N=y+C,I=a===void 0?N:a(N);I!==N&&(C=I-y);const S=T=>-C*Math.exp(-T/r),M=T=>I+S(T),U=T=>{const k=S(T),D=M(T);x.done=Math.abs(k)<=f,x.value=x.done?I:D};let H,B;const j=T=>{w(x.value)&&(H=T,B=am({keyframes:[x.value,_(x.value)],velocity:yN(M,T,x.value),damping:s,stiffness:i,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:T=>{let k=!1;return!B&&H===void 0&&(k=!0,U(T),j(T)),H!==void 0&&T>=H?B.next(T-H):(!k&&U(T),x)}}}function pW(t,e,n){const r=[],s=n||vi.mix||mN,i=t.length-1;for(let a=0;a<i;a++){let c=s(t[a],t[a+1]);if(e){const d=Array.isArray(e)?e[a]||_r:e;c=Th(d,c)}r.push(c)}return r}function mW(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(yw(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=pW(e,r,s),d=c.length,f=p=>{if(a&&p<t[0])return e[0];let y=0;if(d>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const x=Gd(t[y],t[y+1],p);return c[y](x)};return n?p=>f(xi(t[0],t[i-1],p)):f}function gW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Gd(0,e,r);t.push(wt(n,1,s))}}function yW(t){const e=[0];return gW(e,t.length-1),e}function xW(t,e){return t.map(n=>n*e)}function vW(t,e){return t.map(()=>e||iN).splice(0,t.length-1)}function ld({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=NH(r)?r.map($_):$_(r),i={done:!1,value:e[0]},a=xW(n&&n.length===e.length?n:yW(e),t),c=mW(a,e,{ease:Array.isArray(s)?s:vW(e,s)});return{calculatedDuration:t,next:d=>(i.value=c(d),i.done=d>=t,i)}}const wW=t=>t!==null;function Iw(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(wW),c=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!c||r===void 0?i[c]:r}const bW={decay:Zx,inertia:Zx,tween:ld,keyframes:ld,spring:am};function xN(t){typeof t.type=="string"&&(t.type=bW[t.type])}class Sw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const EW=t=>t/100;class Nw extends Sw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==qn.now()&&this.tick(qn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xN(e);const{type:n=ld,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:c}=e;const d=n||ld;d!==ld&&typeof c[0]!="number"&&(this.mixKeyframes=Th(EW,mN(c[0],c[1])),c=[0,100]);const f=d({...e,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Cw(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:y,repeatType:x,repeatDelay:w,type:_,onUpdate:C,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const I=this.currentTime-f*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?I<0:I>s;this.currentTime=Math.max(I,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,U=r;if(y){const T=Math.min(this.currentTime,s)/c;let k=Math.floor(T),D=T%1;!D&&T>=1&&(D=1),D===1&&k--,k=Math.min(k,y+1),!!(k%2)&&(x==="reverse"?(D=1-D,w&&(D-=w/c)):x==="mirror"&&(U=a)),M=xi(0,1,D)*c}const H=S?{done:!1,value:p[0]}:U.next(M);i&&(H.value=i(H.value));let{done:B}=H;!S&&d!==null&&(B=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return j&&_!==Zx&&(H.value=Iw(p,this.options,N,this.speed)),C&&C(H.value),j&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return Cs(this.calculatedDuration)}get time(){return Cs(this.currentTime)}set time(e){var n;e=As(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cs(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=iW,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function kW(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fa=t=>t*180/Math.PI,Jx=t=>{const e=fa(Math.atan2(t[1],t[0]));return ev(e)},_W={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Jx,rotateZ:Jx,skewX:t=>fa(Math.atan(t[1])),skewY:t=>fa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ev=t=>(t=t%360,t<0&&(t+=360),t),K_=Jx,Y_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Q_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),TW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Y_,scaleY:Q_,scale:t=>(Y_(t)+Q_(t))/2,rotateX:t=>ev(fa(Math.atan2(t[6],t[5]))),rotateY:t=>ev(fa(Math.atan2(-t[2],t[0]))),rotateZ:K_,rotate:K_,skewX:t=>fa(Math.atan(t[4])),skewY:t=>fa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function tv(t){return t.includes("scale")?1:0}function nv(t,e){if(!t||t==="none")return tv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=TW,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=_W,s=c}if(!s)return tv(e);const i=r[e],a=s[1].split(",").map(CW);return typeof i=="function"?i(a):a[i]}const AW=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return nv(n,e)};function CW(t){return parseFloat(t.trim())}const Dc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mc=new Set(Dc),X_=t=>t===jc||t===Oe,IW=new Set(["x","y","z"]),SW=Dc.filter(t=>!IW.has(t));function NW(t){const e=[];return SW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ma={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>nv(e,"x"),y:(t,{transform:e})=>nv(e,"y")};ma.translateX=ma.x;ma.translateY=ma.y;const ga=new Set;let rv=!1,sv=!1,iv=!1;function vN(){if(sv){const t=Array.from(ga).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=NW(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var c;(c=r.getValue(i))==null||c.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}sv=!1,rv=!1,ga.forEach(t=>t.complete(iv)),ga.clear()}function wN(){ga.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(sv=!0)})}function PW(){iv=!0,wN(),vN(),iv=!1}class Pw{constructor(e,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(ga.add(this),rv||(rv=!0,Et.read(wN),Et.resolveKeyframes(vN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}kW(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ga.delete(this)}cancel(){this.state==="scheduled"&&(ga.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const RW=t=>t.startsWith("--");function jW(t,e,n){RW(e)?t.style.setProperty(e,n):t.style[e]=n}const DW=xw(()=>window.ScrollTimeline!==void 0),MW={};function OW(t,e){const n=xw(t);return()=>MW[e]??n()}const bN=OW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Z_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qu([0,.65,.55,1]),circOut:Qu([.55,0,1,.45]),backIn:Qu([.31,.01,.66,-.59]),backOut:Qu([.33,1.53,.69,.99])};function EN(t,e){if(t)return typeof t=="function"?bN()?gN(t,e):"ease-out":oN(t)?Qu(t):Array.isArray(t)?t.map(n=>EN(n,e)||Z_.easeOut):Z_[t]}function LW(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:c="easeOut",times:d}={},f=void 0){const p={[e]:n};d&&(p.offset=d);const y=EN(c,s);Array.isArray(y)&&(p.easing=y);const x={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return f&&(x.pseudoElement=f),t.animate(p,x)}function kN(t){return typeof t=="function"&&"applyToOptions"in t}function FW({type:t,...e}){return kN(t)&&bN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class VW extends Sw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,yw(typeof e.type!="string");const f=FW(e);this.animation=LW(n,r,s,f,i),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=Iw(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):jW(n,r,p),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Cs(Number(e))}get time(){return Cs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=As(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&DW()?(this.animation.timeline=e,_r):n(this)}}const _N={anticipate:nN,backInOut:tN,circInOut:sN};function BW(t){return t in _N}function $W(t){typeof t.ease=="string"&&BW(t.ease)&&(t.ease=_N[t.ease])}const J_=10;class UW extends VW{constructor(e){$W(e),xN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Nw({...a,autoplay:!1}),d=As(this.finishedTime??this.time);n.setWithVelocity(c.sample(d-J_).value,c.sample(d).value,J_),c.stop()}}const eT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wo.test(t)||t==="0")&&!t.startsWith("url("));function zW(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function HW(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=eT(s,e),c=eT(i,e);return!a||!c?!1:zW(t)||(n==="spring"||kN(n))&&r}function TN(t){return K6(t)&&"offsetHeight"in t}const WW=new Set(["opacity","clipPath","filter","transform"]),qW=xw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GW(t){var f;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=t;if(!TN((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return qW()&&n&&WW.has(n)&&(n!=="transform"||!d)&&!c&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const KW=40;class YW extends Sw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:c,name:d,motionValue:f,element:p,...y}){var _;super(),this.stop=()=>{var C,N;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=qn.now();const x={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:d,motionValue:f,element:p,...y},w=(p==null?void 0:p.KeyframeResolver)||Pw;this.keyframeResolver=new w(c,(C,N,I)=>this.onKeyframesResolved(C,N,x,!I),d,f,p),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:c,delay:d,isHandoff:f,onUpdate:p}=r;this.resolvedAt=qn.now(),HW(e,i,a,c)||((vi.instantAnimations||!d)&&(p==null||p(Iw(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>KW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!f&&GW(x)?new UW({...x,element:x.motionValue.owner.current}):new Nw(x);w.finished.then(()=>this.notifyFinished()).catch(_r),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),PW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const QW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XW(t){const e=QW.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function AN(t,e,n=1){const[r,s]=XW(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return G6(a)?parseFloat(a):a}return kw(s)?AN(s,e,n+1):s}function Rw(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const CN=new Set(["width","height","top","left","right","bottom",...Dc]),ZW={test:t=>t==="auto",parse:t=>t},IN=t=>e=>e.test(t),SN=[jc,Oe,Is,Qi,zH,UH,ZW],tT=t=>SN.find(IN(t));function JW(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Y6(t):!0}const eq=new Set(["brightness","contrast","saturate","opacity"]);function tq(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_w)||[];if(!r)return t;const s=n.replace(r,"");let i=eq.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const nq=/\b([a-z-]*)\(.*?\)/gu,ov={...wo,getAnimatableNone:t=>{const e=t.match(nq);return e?e.map(tq).join(" "):t}},nT={...jc,transform:Math.round},rq={rotate:Qi,rotateX:Qi,rotateY:Qi,rotateZ:Qi,scale:cp,scaleX:cp,scaleY:cp,scaleZ:cp,skew:Qi,skewX:Qi,skewY:Qi,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Kd,originX:z_,originY:z_,originZ:Oe},jw={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...rq,zIndex:nT,fillOpacity:Kd,strokeOpacity:Kd,numOctaves:nT},sq={...jw,color:Dt,backgroundColor:Dt,outlineColor:Dt,fill:Dt,stroke:Dt,borderColor:Dt,borderTopColor:Dt,borderRightColor:Dt,borderBottomColor:Dt,borderLeftColor:Dt,filter:ov,WebkitFilter:ov},NN=t=>sq[t];function PN(t,e){let n=NN(t);return n!==ov&&(n=wo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const iq=new Set(["auto","none","0"]);function oq(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!iq.has(i)&&Yd(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=PN(n,s)}class aq extends Pw{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),kw(f))){const p=AN(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!CN.has(r)||e.length!==2)return;const[s,i]=e,a=tT(s),c=tT(i);if(a!==c)if(X_(a)&&X_(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else ma[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||JW(e[s]))&&r.push(s);r.length&&oq(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ma[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=ma[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function lq(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const RN=(t,e)=>e&&typeof t=="number"?e.transform(t):t,rT=30,cq=t=>!isNaN(parseFloat(t));class uq{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var a,c;const i=qn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();s&&((c=this.events.renderRequest)==null||c.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=qn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cq(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new vw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rT);return Q6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fc(t,e){return new uq(t,e)}const{schedule:Dw}=aN(queueMicrotask,!1),qr={x:!1,y:!1};function jN(){return qr.x||qr.y}function dq(t){return t==="x"||t==="y"?qr[t]?null:(qr[t]=!0,()=>{qr[t]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function DN(t,e){const n=lq(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function sT(t){return!(t.pointerType==="touch"||jN())}function hq(t,e,n={}){const[r,s,i]=DN(t,n),a=c=>{if(!sT(c))return;const{target:d}=c,f=e(d,c);if(typeof f!="function"||!d)return;const p=y=>{sT(y)&&(f(y),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,s)};return r.forEach(c=>{c.addEventListener("pointerenter",a,s)}),i}const MN=(t,e)=>e?t===e?!0:MN(t,e.parentElement):!1,Mw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function pq(t){return fq.has(t.tagName)||t.tabIndex!==-1}const Np=new WeakSet;function iT(t){return e=>{e.key==="Enter"&&t(e)}}function Iy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mq=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=iT(()=>{if(Np.has(n))return;Iy(n,"down");const s=iT(()=>{Iy(n,"up")}),i=()=>Iy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function oT(t){return Mw(t)&&!jN()}function gq(t,e,n={}){const[r,s,i]=DN(t,n),a=c=>{const d=c.currentTarget;if(!oT(c))return;Np.add(d);const f=e(d,c),p=(w,_)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),Np.has(d)&&Np.delete(d),oT(w)&&typeof f=="function"&&f(w,{success:_})},y=w=>{p(w,d===window||d===document||n.useGlobalTarget||MN(d,w.target))},x=w=>{p(w,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",x,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),TN(c)&&(c.addEventListener("focus",f=>mq(f,s)),!pq(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function ON(t){return K6(t)&&"ownerSVGElement"in t}function yq(t){return ON(t)&&t.tagName==="svg"}const vn=t=>!!(t&&t.getVelocity),xq=[...SN,Dt,wo],vq=t=>xq.find(IN(t)),LN=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function wq(t=!0){const e=V.useContext(pw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=V.useId();V.useEffect(()=>{if(t)return s(i)},[t]);const a=V.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const FN=V.createContext({strict:!1}),aT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pc={};for(const t in aT)pc[t]={isEnabled:e=>aT[t].some(n=>!!e[n])};function bq(t){for(const e in t)pc[e]={...pc[e],...t[e]}}const Eq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Eq.has(t)}let VN=t=>!lm(t);function kq(t){typeof t=="function"&&(VN=e=>e.startsWith("on")?!lm(e):t(e))}try{kq(require("@emotion/is-prop-valid").default)}catch{}function _q(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(VN(s)||n===!0&&lm(s)||!e&&!lm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function Tq(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const d0=V.createContext({});function h0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qd(t){return typeof t=="string"||Array.isArray(t)}const Ow=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lw=["initial",...Ow];function f0(t){return h0(t.animate)||Lw.some(e=>Qd(t[e]))}function BN(t){return!!(f0(t)||t.variants)}function Aq(t,e){if(f0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Qd(n)?n:void 0,animate:Qd(r)?r:void 0}}return t.inherit!==!1?e:{}}function Cq(t){const{initial:e,animate:n}=Aq(t,V.useContext(d0));return V.useMemo(()=>({initial:e,animate:n}),[lT(e),lT(n)])}function lT(t){return Array.isArray(t)?t.join(" "):t}const Iq=Symbol.for("motionComponentSymbol");function Bl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Sq(t,e,n){return V.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Bl(n)&&(n.current=r))},[e])}const Fw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Nq="framerAppearId",$N="data-"+Fw(Nq),UN=V.createContext({});function Pq(t,e,n,r,s){var C,N;const{visualElement:i}=V.useContext(d0),a=V.useContext(FN),c=V.useContext(pw),d=V.useContext(LN).reducedMotion,f=V.useRef(null);r=r||a.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,y=V.useContext(UN);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&Rq(f.current,n,s,y);const x=V.useRef(!1);V.useInsertionEffect(()=>{p&&x.current&&p.update(n,c)});const w=n[$N],_=V.useRef(!!w&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,w))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,w)));return kH(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Dw.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),V.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var I;(I=window.MotionHandoffMarkAsComplete)==null||I.call(window,w)}),_.current=!1))}),p}function Rq(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:zN(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||c&&Bl(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:d,layoutRoot:f})}function zN(t){if(t)return t.options.allowProjection!==!1?t.projection:zN(t.parent)}function jq({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&bq(t);function i(c,d){let f;const p={...V.useContext(LN),...c,layoutId:Dq(c)},{isStatic:y}=p,x=Cq(c),w=r(c,y);if(!y&&fw){Mq();const _=Oq(p);f=_.MeasureLayout,x.visualElement=Pq(s,w,p,e,_.ProjectionNode)}return u.jsxs(d0.Provider,{value:x,children:[f&&x.visualElement?u.jsx(f,{visualElement:x.visualElement,...p}):null,n(s,c,Sq(w,x.visualElement,d),w,y,x.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=V.forwardRef(i);return a[Iq]=s,a}function Dq({layoutId:t}){const e=V.useContext(q6).id;return e&&t!==void 0?e+"-"+t:t}function Mq(t,e){V.useContext(FN).strict}function Oq(t){const{drag:e,layout:n}=pc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Xd={};function Lq(t){for(const e in t)Xd[e]=t[e],Ew(e)&&(Xd[e].isCSSVariable=!0)}function HN(t,{layout:e,layoutId:n}){return Mc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xd[t]||t==="opacity")}const Fq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vq=Dc.length;function Bq(t,e,n){let r="",s=!0;for(let i=0;i<Vq;i++){const a=Dc[i],c=t[a];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(a.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=RN(c,jw[a]);if(!d){s=!1;const p=Fq[a]||a;r+=`${p}(${f}) `}n&&(e[a]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Vw(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,c=!1;for(const d in e){const f=e[d];if(Mc.has(d)){a=!0;continue}else if(Ew(d)){s[d]=f;continue}else{const p=RN(f,jw[d]);d.startsWith("origin")?(c=!0,i[d]=p):r[d]=p}}if(e.transform||(a||n?r.transform=Bq(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=i;r.transformOrigin=`${d} ${f} ${p}`}}const Bw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function WN(t,e,n){for(const r in e)!vn(e[r])&&!HN(r,n)&&(t[r]=e[r])}function $q({transformTemplate:t},e){return V.useMemo(()=>{const n=Bw();return Vw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Uq(t,e){const n=t.style||{},r={};return WN(r,n,t),Object.assign(r,$q(t,e)),r}function zq(t,e){const n={},r=Uq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Hq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wq={offset:"strokeDashoffset",array:"strokeDasharray"};function qq(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Hq:Wq;t[i.offset]=Oe.transform(-r);const a=Oe.transform(e),c=Oe.transform(n);t[i.array]=`${a} ${c}`}function qN(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...c},d,f,p){if(Vw(t,c,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:x}=t;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),s!==void 0&&qq(y,s,i,a,!1)}const GN=()=>({...Bw(),attrs:{}}),KN=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gq(t,e,n,r){const s=V.useMemo(()=>{const i=GN();return qN(i,e,KN(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};WN(i,t.style,t),s.style={...i,...s.style}}return s}const Kq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $w(t){return typeof t!="string"||t.includes("-")?!1:!!(Kq.indexOf(t)>-1||/[A-Z]/u.test(t))}function Yq(t=!1){return(n,r,s,{latestValues:i},a)=>{const d=($w(n)?Gq:zq)(r,i,a,n),f=_q(r,typeof n=="string",t),p=n!==V.Fragment?{...f,...d,ref:s}:{},{children:y}=r,x=V.useMemo(()=>vn(y)?y.get():y,[y]);return V.createElement(n,{...p,children:x})}}function cT(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Uw(t,e,n,r){if(typeof e=="function"){const[s,i]=cT(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=cT(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function Pp(t){return vn(t)?t.get():t}function Qq({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:Xq(n,r,s,t),renderState:e()}}const YN=t=>(e,n)=>{const r=V.useContext(d0),s=V.useContext(pw),i=()=>Qq(t,e,r,s);return n?i():EH(i)};function Xq(t,e,n,r){const s={},i=r(t,{});for(const x in i)s[x]=Pp(i[x]);let{initial:a,animate:c}=t;const d=f0(t),f=BN(t);e&&f&&!d&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||a===!1;const y=p?c:a;if(y&&typeof y!="boolean"&&!h0(y)){const x=Array.isArray(y)?y:[y];for(let w=0;w<x.length;w++){const _=Uw(t,x[w]);if(_){const{transitionEnd:C,transition:N,...I}=_;for(const S in I){let M=I[S];if(Array.isArray(M)){const U=p?M.length-1:0;M=M[U]}M!==null&&(s[S]=M)}for(const S in C)s[S]=C[S]}}}return s}function zw(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(vn(r[a])||e.style&&vn(e.style[a])||HN(a,t)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const Zq={useVisualState:YN({scrapeMotionValuesFromProps:zw,createRenderState:Bw})};function QN(t,e,n){const r=zw(t,e,n);for(const s in t)if(vn(t[s])||vn(e[s])){const i=Dc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const Jq={useVisualState:YN({scrapeMotionValuesFromProps:QN,createRenderState:GN})};function eG(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...$w(r)?Jq:Zq,preloadedFeatures:t,useRender:Yq(s),createVisualElement:e,Component:r};return jq(a)}}function Zd(t,e,n){const r=t.getProps();return Uw(r,e,n!==void 0?n:r.custom,t)}const av=t=>Array.isArray(t);function tG(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,fc(n))}function nG(t){return av(t)?t[t.length-1]||0:t}function rG(t,e){const n=Zd(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const c=nG(i[a]);tG(t,a,c)}}function sG(t){return!!(vn(t)&&t.add)}function lv(t,e){const n=t.getValue("willChange");if(sG(n))return n.add(e);if(!n&&vi.WillChange){const r=new vi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function XN(t){return t.props[$N]}const iG=t=>t!==null;function oG(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(iG),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const aG={type:"spring",stiffness:500,damping:25,restSpeed:10},lG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cG={type:"keyframes",duration:.8},uG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dG=(t,{keyframes:e})=>e.length>2?cG:Mc.has(t)?t.startsWith("scale")?lG(e[1]):aG:uG;function hG({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const Hw=(t,e,n,r={},s,i)=>a=>{const c=Rw(r,t)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-As(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:i?void 0:s};hG(c)||Object.assign(p,dG(t,p)),p.duration&&(p.duration=As(p.duration)),p.repeatDelay&&(p.repeatDelay=As(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),(vi.instantAnimations||vi.skipAnimations)&&(y=!0,p.duration=0,p.delay=0),p.allowFlatten=!c.type&&!c.ease,y&&!i&&e.get()!==void 0){const x=oG(p.keyframes,c);if(x!==void 0){Et.update(()=>{p.onUpdate(x),p.onComplete()});return}}return c.isSync?new Nw(p):new YW(p)};function fG({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZN(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(i=r);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const p in c){const y=t.getValue(p,t.latestValues[p]??null),x=c[p];if(x===void 0||f&&fG(f,p))continue;const w={delay:n,...Rw(i||{},p)},_=y.get();if(_!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===_&&!w.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const I=XN(t);if(I){const S=window.MotionHandoffAnimation(I,p,Et);S!==null&&(w.startTime=S,C=!0)}}lv(t,p),y.start(Hw(p,y,x,t.shouldReduceMotion&&CN.has(p)?{type:!1}:w,t,C));const N=y.animation;N&&d.push(N)}return a&&Promise.all(d).then(()=>{Et.update(()=>{a&&rG(t,a)})}),d}function cv(t,e,n={}){var d;const r=Zd(t,e,n.type==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(ZN(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:y,staggerDirection:x}=s;return pG(t,e,p+f,y,x,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[f,p]=c==="beforeChildren"?[i,a]:[a,i];return f().then(()=>p())}else return Promise.all([i(),a(n.delay)])}function pG(t,e,n=0,r=0,s=1,i){const a=[],c=(t.variantChildren.size-1)*r,d=s===1?(f=0)=>f*r:(f=0)=>c-f*r;return Array.from(t.variantChildren).sort(mG).forEach((f,p)=>{f.notify("AnimationStart",e),a.push(cv(f,e,{...i,delay:n+d(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function mG(t,e){return t.sortNodePosition(e)}function gG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>cv(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=cv(t,e,n);else{const s=typeof e=="function"?Zd(t,e,n.custom):e;r=Promise.all(ZN(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function JN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const yG=Lw.length;function eP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?eP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yG;n++){const r=Lw[n],s=t.props[r];(Qd(s)||s===!1)&&(e[r]=s)}return e}const xG=[...Ow].reverse(),vG=Ow.length;function wG(t){return e=>Promise.all(e.map(({animation:n,options:r})=>gG(t,n,r)))}function bG(t){let e=wG(t),n=uT(),r=!0;const s=d=>(f,p)=>{var x;const y=Zd(t,p,d==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:w,transitionEnd:_,...C}=y;f={...f,...C,..._}}return f};function i(d){e=d(t)}function a(d){const{props:f}=t,p=eP(t.parent)||{},y=[],x=new Set;let w={},_=1/0;for(let N=0;N<vG;N++){const I=xG[N],S=n[I],M=f[I]!==void 0?f[I]:p[I],U=Qd(M),H=I===d?S.isActive:null;H===!1&&(_=N);let B=M===p[I]&&M!==f[I]&&U;if(B&&r&&t.manuallyAnimateOnMount&&(B=!1),S.protectedKeys={...w},!S.isActive&&H===null||!M&&!S.prevProp||h0(M)||typeof M=="boolean")continue;const j=EG(S.prevProp,M);let T=j||I===d&&S.isActive&&!B&&U||N>_&&U,k=!1;const D=Array.isArray(M)?M:[M];let R=D.reduce(s(I),{});H===!1&&(R={});const{prevResolvedValues:L={}}=S,O={...L,...R},Z=te=>{T=!0,x.has(te)&&(k=!0,x.delete(te)),S.needsAnimating[te]=!0;const q=t.getValue(te);q&&(q.liveStyle=!1)};for(const te in O){const q=R[te],ie=L[te];if(w.hasOwnProperty(te))continue;let ne=!1;av(q)&&av(ie)?ne=!JN(q,ie):ne=q!==ie,ne?q!=null?Z(te):x.add(te):q!==void 0&&x.has(te)?Z(te):S.protectedKeys[te]=!0}S.prevProp=M,S.prevResolvedValues=R,S.isActive&&(w={...w,...R}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(B&&j)||k)&&y.push(...D.map(te=>({animation:te,options:{type:I}})))}if(x.size){const N={};if(typeof f.initial!="boolean"){const I=Zd(t,Array.isArray(f.initial)?f.initial[0]:f.initial);I&&I.transition&&(N.transition=I.transition)}x.forEach(I=>{const S=t.getBaseTarget(I),M=t.getValue(I);M&&(M.liveStyle=!0),N[I]=S??null}),y.push({animation:N})}let C=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(y):Promise.resolve()}function c(d,f){var y;if(n[d].isActive===f)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(x=>{var w;return(w=x.animationState)==null?void 0:w.setActive(d,f)}),n[d].isActive=f;const p=a(d);for(const x in n)n[x].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=uT(),r=!0}}}function EG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!JN(e,t):!1}function na(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uT(){return{animate:na(!0),whileInView:na(),whileHover:na(),whileTap:na(),whileDrag:na(),whileFocus:na(),exit:na()}}class Co{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kG extends Co{constructor(e){super(e),e.animationState||(e.animationState=bG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();h0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let _G=0;class TG extends Co{constructor(){super(...arguments),this.id=_G++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const AG={animation:{Feature:kG},exit:{Feature:TG}};function Jd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ih(t){return{point:{x:t.pageX,y:t.pageY}}}const CG=t=>e=>Mw(e)&&t(e,Ih(e));function cd(t,e,n,r){return Jd(t,e,CG(n),r)}function tP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function IG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function SG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const nP=1e-4,NG=1-nP,PG=1+nP,rP=.01,RG=0-rP,jG=0+rP;function In(t){return t.max-t.min}function DG(t,e,n){return Math.abs(t-e)<=n}function dT(t,e,n,r=.5){t.origin=r,t.originPoint=wt(e.min,e.max,t.origin),t.scale=In(n)/In(e),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=NG&&t.scale<=PG||isNaN(t.scale))&&(t.scale=1),(t.translate>=RG&&t.translate<=jG||isNaN(t.translate))&&(t.translate=0)}function ud(t,e,n,r){dT(t.x,e.x,n.x,r?r.originX:void 0),dT(t.y,e.y,n.y,r?r.originY:void 0)}function hT(t,e,n){t.min=n.min+e.min,t.max=t.min+In(e)}function MG(t,e,n){hT(t.x,e.x,n.x),hT(t.y,e.y,n.y)}function fT(t,e,n){t.min=e.min-n.min,t.max=t.min+In(e)}function dd(t,e,n){fT(t.x,e.x,n.x),fT(t.y,e.y,n.y)}const pT=()=>({translate:0,scale:1,origin:0,originPoint:0}),$l=()=>({x:pT(),y:pT()}),mT=()=>({min:0,max:0}),It=()=>({x:mT(),y:mT()});function xr(t){return[t("x"),t("y")]}function Sy(t){return t===void 0||t===1}function uv({scale:t,scaleX:e,scaleY:n}){return!Sy(t)||!Sy(e)||!Sy(n)}function sa(t){return uv(t)||sP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function sP(t){return gT(t.x)||gT(t.y)}function gT(t){return t&&t!=="0%"}function cm(t,e,n){const r=t-n,s=e*r;return n+s}function yT(t,e,n,r,s){return s!==void 0&&(t=cm(t,s,r)),cm(t,n,r)+e}function dv(t,e=0,n=1,r,s){t.min=yT(t.min,e,n,r,s),t.max=yT(t.max,e,n,r,s)}function iP(t,{x:e,y:n}){dv(t.x,e.translate,e.scale,e.originPoint),dv(t.y,n.translate,n.scale,n.originPoint)}const xT=.999999999999,vT=1.0000000000001;function OG(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let c=0;c<s;c++){i=n[c],a=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zl(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,iP(t,a)),r&&sa(i.latestValues)&&zl(t,i.latestValues))}e.x<vT&&e.x>xT&&(e.x=1),e.y<vT&&e.y>xT&&(e.y=1)}function Ul(t,e){t.min=t.min+e,t.max=t.max+e}function wT(t,e,n,r,s=.5){const i=wt(t.min,t.max,s);dv(t,e,n,i,r)}function zl(t,e){wT(t.x,e.x,e.scaleX,e.scale,e.originX),wT(t.y,e.y,e.scaleY,e.scale,e.originY)}function oP(t,e){return tP(SG(t.getBoundingClientRect(),e))}function LG(t,e,n){const r=oP(t,n),{scroll:s}=e;return s&&(Ul(r.x,s.offset.x),Ul(r.y,s.offset.y)),r}const aP=({current:t})=>t?t.ownerDocument.defaultView:null,bT=(t,e)=>Math.abs(t-e);function FG(t,e){const n=bT(t.x,e.x),r=bT(t.y,e.y);return Math.sqrt(n**2+r**2)}class lP{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Py(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,w=FG(y.offset,{x:0,y:0})>=3;if(!x&&!w)return;const{point:_}=y,{timestamp:C}=an;this.history.push({..._,timestamp:C});const{onStart:N,onMove:I}=this.handlers;x||(N&&N(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=Ny(x,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Py(y.type==="pointercancel"?this.lastMoveEventInfo:Ny(x,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,N),_&&_(y,N)},!Mw(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=Ih(e),c=Ny(a,this.transformPagePoint),{point:d}=c,{timestamp:f}=an;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Py(c,this.history)),this.removeListeners=Th(cd(this.contextWindow,"pointermove",this.handlePointerMove),cd(this.contextWindow,"pointerup",this.handlePointerUp),cd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vo(this.updatePoint)}}function Ny(t,e){return e?{point:e(t.point)}:t}function ET(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Py({point:t},e){return{point:t,delta:ET(t,cP(e)),offset:ET(t,VG(e)),velocity:BG(e,.1)}}function VG(t){return t[0]}function cP(t){return t[t.length-1]}function BG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=cP(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>As(e)));)n--;if(!r)return{x:0,y:0};const i=Cs(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function $G(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wt(n,t,r.max):Math.min(t,n)),t}function kT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function UG(t,{top:e,left:n,bottom:r,right:s}){return{x:kT(t.x,n,s),y:kT(t.y,e,r)}}function _T(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function zG(t,e){return{x:_T(t.x,e.x),y:_T(t.y,e.y)}}function HG(t,e){let n=.5;const r=In(t),s=In(e);return s>r?n=Gd(e.min,e.max-r,t.min):r>s&&(n=Gd(t.min,t.max-s,e.min)),xi(0,1,n)}function WG(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hv=.35;function qG(t=hv){return t===!1?t=0:t===!0&&(t=hv),{x:TT(t,"left","right"),y:TT(t,"top","bottom")}}function TT(t,e,n){return{min:AT(t,e),max:AT(t,n)}}function AT(t,e){return typeof t=="number"?t:t[e]||0}const GG=new WeakMap;class KG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ih(p).point)},i=(p,y)=>{const{drag:x,dragPropagation:w,onDragStart:_}=this.getProps();if(x&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dq(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xr(N=>{let I=this.getAxisMotionValue(N).get()||0;if(Is.test(I)){const{projection:S}=this.visualElement;if(S&&S.layout){const M=S.layout.layoutBox[N];M&&(I=In(M)*(parseFloat(I)/100))}}this.originPoint[N]=I}),_&&Et.postRender(()=>_(p,y)),lv(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(p,y)=>{const{dragPropagation:x,dragDirectionLock:w,onDirectionLock:_,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=y;if(w&&this.currentDirection===null){this.currentDirection=YG(N),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,N),this.updateAxis("y",y.point,N),this.visualElement.render(),C&&C(p,y)},c=(p,y)=>this.stop(p,y),d=()=>xr(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)==null?void 0:y.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new lP(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:aP(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Et.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!up(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=$G(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Bl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=UG(r.layoutBox,e):this.constraints=!1,this.elastic=qG(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=WG(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Bl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=LG(r,s.root,this.visualElement.getTransformPagePoint());let a=zG(s.layout.layoutBox,i);if(n){const c=n(IG(a));this.hasMutatedConstraints=!!c,c&&(a=tP(c))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=xr(p=>{if(!up(p,n,this.currentDirection))return;let y=d&&d[p]||{};a&&(y={min:0,max:0});const x=s?200:1e6,w=s?40:1e7,_={type:"inertia",velocity:r?e[p]:0,bounceStiffness:x,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...i,...y};return this.startAxisValueAnimation(p,_)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return lv(this.visualElement,e),r.start(Hw(e,r,0,n,this.visualElement,!1))}stopAnimation(){xr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xr(n=>{const{drag:r}=this.getProps();if(!up(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[n];i.set(e[n]-wt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};xr(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const d=c.get();s[a]=HG({min:d,max:d},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xr(a=>{if(!up(a,e,null))return;const c=this.getAxisMotionValue(a),{min:d,max:f}=this.constraints[a];c.set(wt(d,f,s[a]))})}addListeners(){if(!this.visualElement.current)return;GG.set(this.visualElement,this);const e=this.visualElement.current,n=cd(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Bl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(r);const a=Jd(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(xr(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=d[p].translate,y.set(y.get()+d[p].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=hv,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:c}}}function up(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function YG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class QG extends Co{constructor(e){super(e),this.removeGroupControls=_r,this.removeListeners=_r,this.controls=new KG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_r}unmount(){this.removeGroupControls(),this.removeListeners()}}const CT=t=>(e,n)=>{t&&Et.postRender(()=>t(e,n))};class XG extends Co{constructor(){super(...arguments),this.removePointerDownListener=_r}onPointerDown(e){this.session=new lP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:CT(e),onStart:CT(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Et.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=cd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=IT(t,e.target.x),r=IT(t,e.target.y);return`${n}% ${r}%`}},ZG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=wo.parse(t);if(s.length>5)return r;const i=wo.createTransformer(t),a=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;s[0+a]/=c,s[1+a]/=d;const f=wt(c,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=f),typeof s[3+a]=="number"&&(s[3+a]/=f),i(s)}};class JG extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;Lq(eK),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Rp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Et.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Dw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uP(t){const[e,n]=wq(),r=V.useContext(q6);return u.jsx(JG,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(UN),isPresent:e,safeToRemove:n})}const eK={borderRadius:{...Bu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bu,borderTopRightRadius:Bu,borderBottomLeftRadius:Bu,borderBottomRightRadius:Bu,boxShadow:ZG};function tK(t,e,n){const r=vn(t)?t:fc(t);return r.start(Hw("",r,e,n)),r.animation}const nK=(t,e)=>t.depth-e.depth;class rK{constructor(){this.children=[],this.isDirty=!1}add(e){mw(this.children,e),this.isDirty=!0}remove(e){gw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nK),this.isDirty=!1,this.children.forEach(e)}}function sK(t,e){const n=qn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(vo(r),t(i-e))};return Et.setup(r,!0),()=>vo(r)}const dP=["TopLeft","TopRight","BottomLeft","BottomRight"],iK=dP.length,ST=t=>typeof t=="string"?parseFloat(t):t,NT=t=>typeof t=="number"||Oe.test(t);function oK(t,e,n,r,s,i){s?(t.opacity=wt(0,n.opacity??1,aK(r)),t.opacityExit=wt(e.opacity??1,0,lK(r))):i&&(t.opacity=wt(e.opacity??1,n.opacity??1,r));for(let a=0;a<iK;a++){const c=`border${dP[a]}Radius`;let d=PT(e,c),f=PT(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||NT(d)===NT(f)?(t[c]=Math.max(wt(ST(d),ST(f),r),0),(Is.test(f)||Is.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,r))}function PT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const aK=hP(0,.5,rN),lK=hP(.5,.95,_r);function hP(t,e,n){return r=>r<t?0:r>e?1:n(Gd(t,e,r))}function RT(t,e){t.min=e.min,t.max=e.max}function yr(t,e){RT(t.x,e.x),RT(t.y,e.y)}function jT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function DT(t,e,n,r,s){return t-=e,t=cm(t,1/n,r),s!==void 0&&(t=cm(t,1/s,r)),t}function cK(t,e=0,n=1,r=.5,s,i=t,a=t){if(Is.test(e)&&(e=parseFloat(e),e=wt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=wt(i.min,i.max,r);t===i&&(c-=e),t.min=DT(t.min,e,n,c,s),t.max=DT(t.max,e,n,c,s)}function MT(t,e,[n,r,s],i,a){cK(t,e[n],e[r],e[s],e.scale,i,a)}const uK=["x","scaleX","originX"],dK=["y","scaleY","originY"];function OT(t,e,n,r){MT(t.x,e,uK,n?n.x:void 0,r?r.x:void 0),MT(t.y,e,dK,n?n.y:void 0,r?r.y:void 0)}function LT(t){return t.translate===0&&t.scale===1}function fP(t){return LT(t.x)&&LT(t.y)}function FT(t,e){return t.min===e.min&&t.max===e.max}function hK(t,e){return FT(t.x,e.x)&&FT(t.y,e.y)}function VT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pP(t,e){return VT(t.x,e.x)&&VT(t.y,e.y)}function BT(t){return In(t.x)/In(t.y)}function $T(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class fK{constructor(){this.members=[]}add(e){mw(this.members,e),e.scheduleRender()}remove(e){if(gw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pK(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:x,skewX:w,skewY:_}=n;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),y&&(r+=`rotateX(${y}deg) `),x&&(r+=`rotateY(${x}deg) `),w&&(r+=`skewX(${w}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Ry=["","X","Y","Z"],mK={visibility:"hidden"},gK=1e3;let yK=0;function jy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=XN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Et,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mP(r)}function gP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},c=e==null?void 0:e()){this.id=yK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wK),this.nodes.forEach(TK),this.nodes.forEach(AK),this.nodes.forEach(bK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new rK)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new vw),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const d=this.eventHandlers.get(a);d&&d.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=ON(a)&&!yq(a),this.instance=a;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let p;const y=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=sK(y,250),Rp.hasAnimatedSinceResize&&(Rp.hasAnimatedSinceResize=!1,this.nodes.forEach(zT))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||f.getDefaultTransition()||PK,{onLayoutAnimationStart:C,onLayoutAnimationComplete:N}=f.getProps(),I=!this.targetLayout||!pP(this.targetLayout,w),S=!y&&x;if(this.options.layoutRoot||this.resumeFrom||S||y&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Rw(_,"layout"),onPlay:C,onComplete:N};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(p,S)}else y||zT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CK),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UT);return}this.isUpdating||this.nodes.forEach(kK),this.isUpdating=!1,this.nodes.forEach(_K),this.nodes.forEach(xK),this.nodes.forEach(vK),this.clearAllSnapshots();const c=qn.now();an.delta=xi(0,1e3/60,c-an.timestamp),an.timestamp=c,an.isProcessing=!0,ky.update.process(an),ky.preRender.process(an),ky.render.process(an),an.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(EK),this.sharedNodes.forEach(IK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!In(this.snapshot.measuredBox.x)&&!In(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!fP(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(c||sa(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),RK(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return It();const c=a.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(jK))){const{scroll:p}=this.root;p&&(Ul(c.x,p.offset.x),Ul(c.y,p.offset.y))}return c}removeElementScroll(a){var d;const c=It();if(yr(c,a),(d=this.scroll)!=null&&d.wasRoot)return c;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:y,options:x}=p;p!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&yr(c,a),Ul(c.x,y.offset.x),Ul(c.y,y.offset.y))}return c}applyTransform(a,c=!1){const d=It();yr(d,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&zl(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),sa(p.latestValues)&&zl(d,p.latestValues)}return sa(this.latestValues)&&zl(d,this.latestValues),d}removeTransform(a){const c=It();yr(c,a);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!sa(f.latestValues))continue;uv(f.latestValues)&&f.updateSnapshot();const p=It(),y=f.measurePageBox();yr(p,y),OT(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return sa(this.latestValues)&&OT(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==an.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var x;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=an.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),dd(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),iP(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),dd(this.relativeTargetOrigin,this.target,w.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||uv(this.parent.latestValues)||sP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===an.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;yr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;OG(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=It());const{target:w}=a;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jT(this.prevProjectionDelta.x,this.projectionDelta.x),jT(this.prevProjectionDelta.y,this.projectionDelta.y)),ud(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!$T(this.projectionDelta.x,this.prevProjectionDelta.x)||!$T(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$l(),this.projectionDelta=$l(),this.projectionDeltaWithTransform=$l()}setAnimationOrigin(a,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},y=$l();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=It(),w=d?d.source:void 0,_=this.layout?this.layout.source:void 0,C=w!==_,N=this.getStack(),I=!N||N.members.length<=1,S=!!(C&&!I&&this.options.crossfade===!0&&!this.path.some(NK));this.animationProgress=0;let M;this.mixTargetDelta=U=>{const H=U/1e3;HT(y.x,a.x,H),HT(y.y,a.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SK(this.relativeTarget,this.relativeTargetOrigin,x,H),M&&hK(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=It()),yr(M,this.relativeTarget)),C&&(this.animationValues=p,oK(p,f,this.latestValues,H,S,I)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var c,d,f;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{Rp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fc(0)),this.currentAnimation=tK(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),a.onUpdate&&a.onUpdate(p)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=a;if(!(!c||!d||!f)){if(this!==a&&this.layout&&f&&yP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||It();const y=In(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+y;const x=In(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+x}yr(c,d),zl(c,p),ud(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new fK),this.sharedNodes.get(a).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&jy("z",a,f,this.animationValues);for(let p=0;p<Ry.length;p++)jy(`rotate${Ry[p]}`,a,f,this.animationValues),jy(`skew${Ry[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return mK;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Pp(a==null?void 0:a.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Pp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sa(this.latestValues)&&(w.transform=d?d({},""):"none",this.hasProjected=!1),w}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=pK(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:y,y:x}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,f.animationValues?c.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in Xd){if(p[w]===void 0)continue;const{correct:_,applyTo:C,isCSSVariable:N}=Xd[w],I=c.transform==="none"?p[w]:_(p[w],f);if(C){const S=C.length;for(let M=0;M<S;M++)c[C[M]]=I}else N?this.options.visualElement.renderState.vars[w]=I:c[w]=I}return this.options.layoutId&&(c.pointerEvents=f===this?Pp(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(UT),this.root.sharedNodes.clear()}}}function xK(t){t.updateLayout()}function vK(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?xr(y=>{const x=a?e.measuredBox[y]:e.layoutBox[y],w=In(x);x.min=r[y].min,x.max=x.min+w}):yP(i,e.layoutBox,r)&&xr(y=>{const x=a?e.measuredBox[y]:e.layoutBox[y],w=In(r[y]);x.max=x.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+w)});const c=$l();ud(c,r,e.layoutBox);const d=$l();a?ud(d,t.applyTransform(s,!0),e.measuredBox):ud(d,r,e.layoutBox);const f=!fP(c);let p=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:w}=y;if(x&&w){const _=It();dd(_,e.layoutBox,x.layoutBox);const C=It();dd(C,r,w.layoutBox),pP(_,C)||(p=!0),y.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=_,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function wK(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function EK(t){t.clearSnapshot()}function UT(t){t.clearMeasurements()}function kK(t){t.isLayoutDirty=!1}function _K(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TK(t){t.resolveTargetDelta()}function AK(t){t.calcProjection()}function CK(t){t.resetSkewAndRotation()}function IK(t){t.removeLeadSnapshot()}function HT(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function WT(t,e,n,r){t.min=wt(e.min,n.min,r),t.max=wt(e.max,n.max,r)}function SK(t,e,n,r){WT(t.x,e.x,n.x,r),WT(t.y,e.y,n.y,r)}function NK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const PK={duration:.45,ease:[.4,0,.1,1]},qT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),GT=qT("applewebkit/")&&!qT("chrome/")?Math.round:_r;function KT(t){t.min=GT(t.min),t.max=GT(t.max)}function RK(t){KT(t.x),KT(t.y)}function yP(t,e,n){return t==="position"||t==="preserve-aspect"&&!DG(BT(e),BT(n),.2)}function jK(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const DK=gP({attachResizeListener:(t,e)=>Jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dy={current:void 0},xP=gP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dy.current){const t=new DK({});t.mount(window),t.setOptions({layoutScroll:!0}),Dy.current=t}return Dy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MK={pan:{Feature:XG},drag:{Feature:QG,ProjectionNode:xP,MeasureLayout:uP}};function YT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Et.postRender(()=>i(e,Ih(e)))}class OK extends Co{mount(){const{current:e}=this.node;e&&(this.unmount=hq(e,(n,r)=>(YT(this.node,r,"Start"),s=>YT(this.node,s,"End"))))}unmount(){}}class LK extends Co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Th(Jd(this.node.current,"focus",()=>this.onFocus()),Jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function QT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Et.postRender(()=>i(e,Ih(e)))}class FK extends Co{mount(){const{current:e}=this.node;e&&(this.unmount=gq(e,(n,r)=>(QT(this.node,r,"Start"),(s,{success:i})=>QT(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fv=new WeakMap,My=new WeakMap,VK=t=>{const e=fv.get(t.target);e&&e(t)},BK=t=>{t.forEach(VK)};function $K({root:t,...e}){const n=t||document;My.has(n)||My.set(n,{});const r=My.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(BK,{root:t,...e})),r[s]}function UK(t,e,n){const r=$K(e);return fv.set(t,n),r.observe(t),()=>{fv.delete(t),r.unobserve(t)}}const zK={some:0,all:1};class HK extends Co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:zK[s]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,i&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),x=f?p:y;x&&x(d)};return UK(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(WK(e,n))&&this.startObserver()}unmount(){}}function WK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const qK={inView:{Feature:HK},tap:{Feature:FK},focus:{Feature:LK},hover:{Feature:OK}},GK={layout:{ProjectionNode:xP,MeasureLayout:uP}},pv={current:null},vP={current:!1};function KK(){if(vP.current=!0,!!fw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pv.current=t.matches;t.addListener(e),e()}else pv.current=!1}const YK=new WeakMap;function QK(t,e,n){for(const r in e){const s=e[r],i=n[r];if(vn(s))t.addValue(r,s);else if(vn(i))t.addValue(r,fc(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,fc(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const XT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XK{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=qn.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Et.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=f0(n),this.isVariantNode=BN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in y){const w=y[x];d[x]!==void 0&&vn(w)&&w.set(d[x],!1)}}mount(e){this.current=e,YK.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),vP.current||KK(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vo(this.notifyUpdate),vo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Mc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pc){const n=pc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<XT.length;r++){const s=XT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=QK(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=fc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(G6(r)||Y6(r))?r=parseFloat(r):!vq(r)&&wo.test(n)&&(r=PN(e,n)),this.setBaseTarget(e,vn(r)?r.get():r)),vn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Uw(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!vn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new vw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class wP extends XK{constructor(){super(...arguments),this.KeyframeResolver=aq}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function bP(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}function ZK(t){return window.getComputedStyle(t)}class JK extends wP{constructor(){super(...arguments),this.type="html",this.renderInstance=bP}readValueFromInstance(e,n){var r;if(Mc.has(n))return(r=this.projection)!=null&&r.isProjecting?tv(n):AW(e,n);{const s=ZK(e),i=(Ew(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return oP(e,n)}build(e,n,r){Vw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return zw(e,n,r)}}const EP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eY(t,e,n,r){bP(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(EP.has(s)?s:Fw(s),e.attrs[s])}class tY extends wP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Mc.has(n)){const r=NN(n);return r&&r.default||0}return n=EP.has(n)?n:Fw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return QN(e,n,r)}build(e,n,r){qN(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){eY(e,n,r,s)}mount(e){this.isSVGTag=KN(e.tagName),super.mount(e)}}const nY=(t,e)=>$w(t)?new tY(e):new JK(e,{allowProjection:t!==V.Fragment}),rY=eG({...AG,...qK,...MK,...GK},nY),Ke=Tq(rY),sY=t=>{switch(t.code){case"auth/email-already-in-use":return"This email is already registered. Please sign in instead.";case"auth/invalid-credential":return"Please enter a valid email address.";case"auth/weak-password":return"Your password is too weak. Please use at least 6 characters.";case"auth/user-not-found":return"No account found with this email. Please check your email or sign up.";case"auth/wrong-password":return"Incorrect password. Please try again or reset your password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"permission-denied":return"You do not have permission to perform this action.";case"unavailable":return"The service is currently unavailable. Please try again later.";default:return console.error("Firebase error:",t),"An unexpected error occurred. Please try again."}},kP=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=V.useState(""),[i,a]=V.useState(""),[c,d]=V.useState(""),[f,p]=V.useState(!0),[y,x]=V.useState(""),[w,_]=V.useState(!1),{signUp:C,signIn:N}=Pn(),I=async S=>{S.preventDefault(),x(""),_(!0);try{if(f){const M=await C(r,i);M&&M.uid&&await Qr(Ue(ke,"users",M.uid),{email:r,username:c,displayName:c,createdAt:rt(),walletAddress:null,isWalletConnected:!1,profileComplete:!0,lastLogin:rt(),readingHistory:[],votingHistory:[],collections:[]})}else await N(r,i),setTimeout(()=>{oa.currentUser&&oa.currentUser.uid&&Qr(Ue(ke,"users",oa.currentUser.uid),{lastLogin:rt()},{merge:!0}).catch(M=>console.error("Error updating last login:",M))},1e3);e(),n&&n()}catch(M){M instanceof Ds?x(sY(M)):x((M==null?void 0:M.message)||"An unexpected error occurred. Please try again.")}finally{_(!1)}};return t?u.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:u.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[u.jsx("div",{className:"fixed inset-0 bg-dark-950 bg-opacity-30 backdrop-blur-sm",onClick:e}),u.jsxs(Ke.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-dark-900 rounded-xl shadow-lg p-6 sm:p-8 w-full max-w-md z-10 relative",children:[u.jsx("button",{className:"absolute top-4 right-4 text-ink-400 hover:text-ink-600 dark:text-ink-500 dark:hover:text-ink-300",onClick:e,children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsx("h2",{className:"text-2xl font-display font-bold text-ink-900 dark:text-white mb-6",children:f?"Join PlotMint":"Welcome Back"}),y&&u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 p-3 rounded-md mb-4 text-sm",children:y}),u.jsxs("form",{onSubmit:I,children:[f&&u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-ink-700 dark:text-ink-300 mb-1",children:"Username"}),u.jsx("input",{type:"text",value:c,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-parchment-300 dark:border-dark-700 rounded-md bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-ink-700 dark:text-ink-300 mb-1",children:"Email"}),u.jsx("input",{type:"email",value:r,onChange:S=>s(S.target.value),className:"w-full px-3 py-2 border border-parchment-300 dark:border-dark-700 rounded-md bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-sm font-medium text-ink-700 dark:text-ink-300 mb-1",children:"Password"}),u.jsx("input",{type:"password",value:i,onChange:S=>a(S.target.value),className:"w-full px-3 py-2 border border-parchment-300 dark:border-dark-700 rounded-md bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),u.jsx(ot,{variant:"primary",fullWidth:!0,type:"submit",disabled:w,children:w?"Processing...":f?"Create Account":"Sign In"})]}),u.jsx("div",{className:"mt-4 text-center",children:u.jsx("button",{className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",onClick:()=>p(!f),children:f?"Already have an account? Sign in":"Need an account? Join PlotMint"})})]})]})}):null},Sh=()=>{const[t,e]=V.useState(Wr.getState());V.useEffect(()=>(Wr.checkConnection(),Wr.subscribe(e)),[]);const n=async()=>{try{await Wr.connect(),t.chainId!==84532&&await Wr.switchToBaseSepolia()}catch(d){throw console.error("Failed to connect wallet:",d),d}},r=()=>{Wr.disconnect()},s=async()=>{try{await Wr.switchToBaseSepolia()}catch(d){throw console.error("Failed to switch network:",d),d}},i=()=>Wr.getWalletClient(),a=()=>Wr.getPublicClient(),c=t.chainId===84532;return{...t,connect:n,disconnect:r,switchToBaseSepolia:s,getWalletClient:i,getPublicClient:a,isCorrectNetwork:c}},iY=({className:t=""})=>{const{currentUser:e}=Pn(),{isConnected:n,address:r,isConnecting:s,isCorrectNetwork:i,connect:a,disconnect:c,switchToBaseSepolia:d}=Sh(),f=async()=>{try{await a()}catch(y){y.message.includes("MetaMask is not installed")&&window.open("https://metamask.io/download/","_blank")}},p=y=>`${y.slice(0,6)}...${y.slice(-4)}`;return e?n&&r?u.jsxs("div",{className:`flex items-center gap-2 ${t}`,children:[!i&&u.jsx("button",{onClick:d,className:"px-3 py-1 text-sm bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",children:"Switch Network"}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),u.jsx("span",{className:"text-sm font-medium",children:p(r)})]}),u.jsx("button",{onClick:c,className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Disconnect"})]}):u.jsx("button",{onClick:f,disabled:s,className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${t}`,children:s?"Connecting...":"Connect Wallet"}):null},_P=()=>{var x;const[t,e]=V.useState(!1),[n,r]=V.useState(!1),[s,i]=V.useState(!1),a=js(),c=V.useRef(null),{currentUser:d,logOut:f}=Pn();V.useEffect(()=>{const w=_=>{c.current&&!c.current.contains(_.target)&&r(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),V.useEffect(()=>{e(!1),r(!1)},[a]);const p=()=>{e(!t)},y=async()=>{try{await f(),r(!1)}catch(w){console.error("Error signing out:",w)}};return u.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-dark-900 border-b border-parchment-200 dark:border-dark-700",children:[u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs("div",{className:"flex justify-between h-16",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ce,{to:"/",className:"flex-shrink-0 flex items-center",children:u.jsxs("span",{className:"text-xl font-display font-bold text-primary-600 dark:text-primary-400",children:["Plot",u.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Mint"})]})}),u.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-4",children:[u.jsx(Ce,{to:"/stories",className:"px-3 py-2 text-sm font-medium text-ink-600 dark:text-ink-300 hover:text-ink-900 dark:hover:text-white",children:"Explore Stories"}),u.jsx(Ce,{to:"/discover",className:"px-3 py-2 text-sm font-medium text-ink-600 dark:text-ink-300 hover:text-ink-900 dark:hover:text-white",children:"Discover"})]})]}),u.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-4",children:[d?u.jsx(u.Fragment,{children:u.jsxs("div",{className:"relative",ref:c,children:[u.jsxs(ot,{variant:"outline",size:"sm",className:"flex items-center",onClick:()=>r(!n),children:[u.jsx("span",{children:((x=d.email)==null?void 0:x.split("@")[0])||"User"}),u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`ml-2 h-4 w-4 transform transition-transform ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&u.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-dark-800 rounded-md shadow-lg border border-parchment-200 dark:border-dark-700 z-10",children:u.jsxs("div",{className:"py-1",children:[u.jsx(Ce,{to:"/dashboard",className:"block px-4 py-2 text-sm text-ink-700 dark:text-ink-200 hover:bg-parchment-100 dark:hover:bg-dark-700",children:"Reader Dashboard"}),u.jsx(Ce,{to:"/creator",className:"block px-4 py-2 text-sm text-ink-700 dark:text-ink-200 hover:bg-parchment-100 dark:hover:bg-dark-700",children:"Creator Studio"}),u.jsx("hr",{className:"my-1 border-parchment-200 dark:border-dark-700"}),u.jsx("button",{onClick:y,className:"block w-full text-left px-4 py-2 text-sm text-ink-700 dark:text-ink-200 hover:bg-parchment-100 dark:hover:bg-dark-700",children:"Sign Out"})]})})]})}):u.jsx(ot,{variant:"outline",size:"sm",onClick:()=>i(!0),children:"Join PlotMint"}),u.jsx(iY,{className:"ml-2"}),d&&u.jsx(Ce,{to:"/creator/new-story",children:u.jsx(ot,{variant:"primary",size:"sm",children:"Start Writing"})})]}),u.jsx("div",{className:"flex items-center sm:hidden",children:u.jsxs("button",{onClick:p,type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-ink-500 hover:text-ink-700 dark:text-ink-400 dark:hover:text-ink-200 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[u.jsx("span",{className:"sr-only",children:"Open main menu"}),t?u.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):u.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),t&&u.jsxs("div",{className:"sm:hidden",id:"mobile-menu",children:[u.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[u.jsx(Ce,{to:"/stories",className:"block px-3 py-2 rounded-md text-base font-medium text-ink-700 dark:text-ink-200 hover:bg-parchment-100 dark:hover:bg-dark-800",children:"Explore Stories"}),u.jsx(Ce,{to:"/discover",className:"block px-3 py-2 rounded-md text-base font-medium text-ink-700 dark:text-ink-200 hover:bg-parchment-100 dark:hover:bg-dark-800",children:"Discover"})]}),u.jsx("div",{className:"px-4 py-3 border-t border-parchment-200 dark:border-dark-700",children:d?u.jsxs(u.Fragment,{children:[u.jsx(Ce,{to:"/dashboard",children:u.jsx(ot,{variant:"outline",fullWidth:!0,className:"mb-2",children:"Dashboard"})}),u.jsx(Ce,{to:"/creator",children:u.jsx(ot,{variant:"outline",fullWidth:!0,className:"mb-2",children:"Creator Studio"})}),u.jsx(ot,{variant:"primary",fullWidth:!0,onClick:y,children:"Sign Out"})]}):u.jsx(ot,{variant:"primary",fullWidth:!0,onClick:()=>i(!0),children:"Join PlotMint"})})]}),u.jsx(kP,{isOpen:s,onClose:()=>i(!1)})]})},TP=()=>{const t=new Date().getFullYear();return u.jsx("footer",{className:"bg-parchment-100 dark:bg-dark-800 pt-12 pb-8",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 md:gap-12 mb-8 md:mb-12",children:[u.jsxs("div",{className:"md:col-span-1",children:[u.jsx(Ce,{to:"/",className:"inline-block mb-5",children:u.jsxs("span",{className:"text-2xl font-display font-bold text-primary-700 dark:text-primary-400",children:["Plot",u.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Mint"})]})}),u.jsx("p",{className:"text-ink-700 dark:text-ink-200 mb-5 max-w-xs",children:"The decentralized storytelling platform where chapters feature plot options that become purchasable tokens for reader voting."}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300",children:"Built on Base Sepolia"}),u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-secondary-100 dark:bg-secondary-900/30 text-secondary-800 dark:text-secondary-300",children:"Powered by Zora"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-4",children:"Explore"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsx("li",{children:u.jsx(Ce,{to:"/stories",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Browse Stories"})}),u.jsx("li",{children:u.jsx(Ce,{to:"/trending",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Trending Tokens"})}),u.jsx("li",{children:u.jsx(Ce,{to:"/authors",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Featured Authors"})}),u.jsx("li",{children:u.jsx(Ce,{to:"/collections",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Story Collections"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-4",children:"Resources"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsx("li",{children:u.jsx(Ce,{to:"/how-it-works",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"How It Works"})}),u.jsx("li",{children:u.jsx(Ce,{to:"/creators",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"For Creators"})}),u.jsx("li",{children:u.jsx(Ce,{to:"/wallet-guide",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Wallet Guide"})}),u.jsx("li",{children:u.jsx(Ce,{to:"/faq",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition",children:"FAQ"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-4",children:"Connect"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsx("li",{children:u.jsxs("a",{href:"https://twitter.com/plotmint",target:"_blank",rel:"noopener noreferrer",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition flex items-center",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})}),"Twitter"]})}),u.jsx("li",{children:u.jsxs("a",{href:"https://discord.gg/plotmint",target:"_blank",rel:"noopener noreferrer",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition flex items-center",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.0773.0773 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})}),"Discord"]})}),u.jsx("li",{children:u.jsxs("a",{href:"mailto:hello@plotmint.com",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition flex items-center",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email Us"]})}),u.jsx("li",{children:u.jsxs("a",{href:"https://github.com/plotmint",target:"_blank",rel:"noopener noreferrer",className:"text-ink-700 dark:text-ink-200 hover:text-primary-700 dark:hover:text-primary-400 transition flex items-center",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),"GitHub"]})})]})]})]}),u.jsxs("div",{className:"border-t border-parchment-200 dark:border-dark-700 pt-6 md:pt-8 flex flex-col md:flex-row justify-between items-center",children:[u.jsxs("p",{className:"text-sm text-ink-600 dark:text-ink-300 mb-4 md:mb-0",children:["© ",t," PlotMint. All rights reserved. Built with ❤️ by Trextechies."]}),u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-ink-600 dark:text-ink-300",children:[u.jsx(Ce,{to:"/privacy",className:"hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Privacy Policy"}),u.jsx(Ce,{to:"/terms",className:"hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Terms of Service"}),u.jsx(Ce,{to:"/cookies",className:"hover:text-primary-700 dark:hover:text-primary-400 transition",children:"Cookie Policy"})]})]})]})})},oY=()=>(V.useEffect(()=>{document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")},[]),u.jsxs("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 text-ink-900 dark:text-white",children:[u.jsx(_P,{}),u.jsx("div",{className:"content-wrapper",children:u.jsx("main",{children:u.jsx(v3,{})})}),u.jsx(TP,{})]})),ti=({children:t,redirectTo:e="/",showAuthPrompt:n=!0})=>{const{currentUser:r,loading:s}=Pn(),i=bo(),[a,c]=V.useState(!1);return s?u.jsx("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600 mx-auto mb-4"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300",children:"Loading..."})]})}):r?u.jsx(u.Fragment,{children:t}):n?u.jsxs("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 flex items-center justify-center px-4",children:[u.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 p-8 text-center",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-primary-100 dark:bg-primary-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-primary-600 dark:text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),u.jsx("h2",{className:"text-2xl font-bold text-ink-900 dark:text-white mb-2",children:"Authentication Required"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300",children:"You need to create an account or sign in to access PlotMint stories and participate in interactive storytelling."})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx(ot,{variant:"primary",className:"w-full",onClick:()=>c(!0),children:"Join PlotMint"}),u.jsx(ot,{variant:"outline",className:"w-full",onClick:()=>i("/"),children:"Back to Home"})]})]}),a&&u.jsx(kP,{isOpen:a,onClose:()=>c(!1)})]}):u.jsx(jA,{to:e,replace:!0})},aY=()=>{const{currentUser:t}=Pn(),e=bo(),n=()=>{e(t?"/creator/new-story":"/creator")};return u.jsxs("div",{className:"relative bg-gradient-to-b from-parchment-50 to-parchment-100 dark:from-dark-950 dark:to-dark-900 pt-28 pb-20 md:pt-32 md:pb-24 overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 z-0 opacity-10",children:[u.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-primary-300 dark:bg-primary-600 rounded-full filter blur-3xl"}),u.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-80 h-80 bg-secondary-300 dark:bg-secondary-600 rounded-full filter blur-3xl"})]}),u.jsxs("div",{className:"content-wrapper relative z-10",children:[u.jsx("div",{className:"max-w-3xl mx-auto text-center mb-10 md:mb-16",children:u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[u.jsx("span",{className:"inline-block px-4 py-1.5 bg-primary-100 dark:bg-primary-900/60 text-primary-800 dark:text-primary-200 rounded-full text-sm md:text-base font-medium mb-5 md:mb-6",children:"Powered by Zora Protocol"}),u.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-display font-bold text-ink-900 dark:text-white mb-6 md:mb-8 leading-tight",children:["Stories that"," ",u.jsx("span",{className:"text-primary-600 dark:text-primary-400 italic",children:"Evolve"})," ","with",u.jsxs("span",{className:"text-secondary-600 dark:text-secondary-400",children:[" ","Community"]})]}),u.jsx("p",{className:"text-xl sm:text-2xl md:text-2xl text-ink-700 dark:text-ink-200 mb-8 md:mb-10 font-serif leading-relaxed",children:"PlotMint is a decentralized storytelling platform where each chapter features two plot options that become purchasable tokens. Readers buy tokens to vote and directly influence the story's direction."}),u.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5 md:gap-6",children:[u.jsx(W6,{to:"/stories",variant:"primary",size:"lg",className:"text-lg md:text-xl py-4 sm:py-4 shadow-sm hover:shadow-md",children:"Explore Stories"}),u.jsx(ot,{onClick:n,variant:"outline",size:"lg",className:"text-lg md:text-xl py-4 sm:py-4",children:"Start Writing"})]})]})}),u.jsxs(Ke.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},className:"relative mx-auto max-w-4xl px-4 sm:px-6",children:[u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-chapter dark:shadow-dark-chapter overflow-hidden border border-gray-200 dark:border-dark-700",children:[u.jsxs("div",{className:"p-4 sm:p-5 bg-ink-50 dark:bg-dark-800 border-b border-gray-200 dark:border-dark-700 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full mr-2"}),u.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full mr-2"}),u.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full mr-2"}),u.jsx("div",{className:"ml-2 sm:ml-4 text-sm sm:text-base font-medium text-ink-500 dark:text-ink-300",children:"PlotMint Story Viewer"})]}),u.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[u.jsx("span",{className:"text-sm font-medium text-ink-400 dark:text-ink-400",children:"Chapter 3 of Series"}),u.jsx("div",{className:"w-6 h-6 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-xs font-medium text-primary-800 dark:text-primary-200",children:"3"})})]})]}),u.jsxs("div",{className:"p-5 sm:p-6 md:p-8 bg-white dark:bg-dark-900",children:[u.jsxs("div",{className:"text-center mb-5 md:mb-6",children:[u.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-ink-900 dark:text-white font-display mb-1 md:mb-2",children:"The Quantum Nexus"}),u.jsx("p",{className:"text-ink-500 dark:text-ink-400 text-sm sm:text-base",children:"Chapter 3: The Decision"})]}),u.jsxs("div",{className:"prose mx-auto max-w-2xl",children:[u.jsx("p",{className:"text-base sm:text-lg md:text-xl text-ink-700 dark:text-ink-200 font-serif leading-relaxed mb-4",children:`The ship's AI flickered to life, bathing the bridge in a soft blue glow. "Three paths detected," it announced, its voice calm despite the gravity of the situation.`}),u.jsx("p",{className:"text-base sm:text-lg md:text-xl text-ink-700 dark:text-ink-200 font-serif leading-relaxed",children:'Captain Elara gripped the console, her knuckles white. "Show me the options."'})]}),u.jsxs("div",{className:"mt-7 md:mt-8 space-y-3 md:space-y-4",children:[u.jsx("div",{className:"border border-gray-200 dark:border-dark-700 rounded-lg p-4 hover:border-primary-300 dark:hover:border-primary-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition cursor-pointer",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white text-base sm:text-lg",children:"Navigate through the quantum field"}),u.jsxs("div",{className:"bg-primary-100 dark:bg-primary-900/50 text-primary-800 dark:text-primary-200 text-sm px-2 py-1 rounded-full flex items-center",children:[u.jsx("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 4L4 20H20L12 4Z",fill:"currentColor"})}),u.jsx("span",{children:"48 Tokens"})]})]})}),u.jsx("div",{className:"border border-gray-200 dark:border-dark-700 rounded-lg p-4 hover:border-primary-300 dark:hover:border-primary-700 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition cursor-pointer",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white text-base sm:text-lg",children:"Attempt communication with the void entity"}),u.jsxs("div",{className:"bg-primary-100 dark:bg-primary-900/50 text-primary-800 dark:text-primary-200 text-sm px-2 py-1 rounded-full flex items-center",children:[u.jsx("svg",{className:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 4L4 20H20L12 4Z",fill:"currentColor"})}),u.jsx("span",{children:"37 Tokens"})]})]})})]}),u.jsx("div",{className:"mt-8 md:mt-10 text-center",children:u.jsxs(ot,{variant:"primary",size:"lg",className:"shadow-sm hover:shadow py-3 px-6 w-full sm:w-auto",children:[u.jsx("span",{children:"Buy tokens to vote"}),u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})]}),u.jsx("div",{className:"absolute -top-6 -right-6 w-12 h-12 rounded-full bg-parchment-200 dark:bg-dark-700 opacity-70 hidden md:block"}),u.jsx("div",{className:"absolute -bottom-8 -left-8 w-16 h-16 rounded-full bg-parchment-200 dark:bg-dark-700 opacity-70 hidden md:block"})]})]})]})},lY=()=>{const t=[{title:"Token-Based Plot Voting",description:"Every chapter features exactly two plot options that automatically become purchasable tokens. Readers buy tokens to vote, and the most purchased option determines the story's direction.",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{title:"Direct Reader Investment",description:"Readers purchase plot tokens with ETH, creating direct financial investment in story outcomes. This gamifies reading and gives every vote real economic weight.",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{title:"Wallet-Connected Creation",description:"Writers connect their crypto wallets to create chapters with automatic token generation. Every chapter becomes a real economic marketplace for story decisions.",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})})},{title:"Creator Revenue Streams",description:"Writers earn from every token purchase and can sell their allocated tokens when voting concludes. Successful stories generate ongoing revenue from reader participation.",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{title:"Decentralized Story Worlds",description:"Create collaborative universes where multiple writers build interconnected stories. Each plot decision is democratically chosen through token purchases by the community.",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})},{title:"Powered by Zora Protocol",description:"Built on Zora's robust infrastructure on Base Sepolia, ensuring secure, transparent, and efficient token creation and trading for every plot decision.",icon:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}];return u.jsx("section",{className:"py-16 md:py-20 bg-white dark:bg-dark-950 w-full",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-10 md:mb-16",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-display font-bold text-ink-900 dark:text-white mb-4 md:mb-6",children:"What Makes PlotMint Uniquely Powerful"}),u.jsx("p",{className:"text-lg sm:text-xl text-ink-600 dark:text-ink-300 leading-relaxed",children:"PlotMint redefines storytelling with innovative Web3 mechanics that bring readers and writers together."})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 md:gap-6 lg:gap-8",children:t.map((e,n)=>u.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},viewport:{once:!0},className:"bg-parchment-50 dark:bg-dark-900 rounded-xl p-6 md:p-7 border border-parchment-200 dark:border-dark-700 hover:shadow-md hover:border-primary-100 dark:hover:border-primary-800 transition duration-300 h-full",children:[u.jsx("div",{className:"w-14 h-14 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center text-primary-600 dark:text-primary-400 mb-5 md:mb-6 shadow-sm",children:u.jsx("div",{className:"w-7 h-7",children:e.icon})}),u.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-ink-900 dark:text-white mb-3 md:mb-4",children:e.title}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300 text-base leading-relaxed",children:e.description})]},n))})]})})},cY=()=>{const t=[{number:"01",title:"Writer Connects Wallet",description:"Writer connects their crypto wallet to PlotMint, creates a story with title and introduction, then writes the first chapter.",colorClass:"bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300",dotColorClass:"bg-primary-600 dark:bg-primary-500"},{number:"02",title:"Create Two Plot Options",description:"Every chapter must include exactly two plot options that readers can vote on. These options automatically become purchasable tokens on Base Sepolia.",colorClass:"bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300",dotColorClass:"bg-primary-600 dark:bg-primary-500"},{number:"03",title:"Readers Buy Tokens to Vote",description:"Readers purchase plot tokens with ETH to vote for their preferred story direction. Each token purchase directly influences the story outcome.",colorClass:"bg-secondary-100 dark:bg-secondary-900/40 text-secondary-700 dark:text-secondary-300",dotColorClass:"bg-secondary-600 dark:bg-secondary-500"},{number:"04",title:"Most Purchased Option Wins",description:"The plot option with the highest token sales automatically becomes the canonical direction for the next chapter of the story.",colorClass:"bg-secondary-100 dark:bg-secondary-900/40 text-secondary-700 dark:text-secondary-300",dotColorClass:"bg-secondary-600 dark:bg-secondary-500"},{number:"05",title:"Writer Continues Story",description:"The writer creates the next chapter following the winning plot direction, again with exactly two new options that become tokens.",colorClass:"bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300",dotColorClass:"bg-primary-600 dark:bg-primary-500"},{number:"06",title:"Economic Story Tree",description:"The cycle repeats, creating a community-driven story where every plot decision has real economic value and reader investment.",colorClass:"bg-primary-100 dark:bg-primary-900/40 text-primary-700 dark:text-primary-300",dotColorClass:"bg-primary-600 dark:bg-primary-500"}];return u.jsx("section",{className:"py-16 md:py-20 bg-parchment-100 dark:bg-dark-900 w-full",children:u.jsxs("div",{className:"container mx-auto",children:[u.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12 md:mb-16 px-4 sm:px-6",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-display font-bold text-ink-900 dark:text-white mb-4 md:mb-6",children:"How PlotMint Works"}),u.jsx("p",{className:"text-lg sm:text-xl text-ink-600 dark:text-ink-300 leading-relaxed",children:"A simple process that creates endless storytelling possibilities"})]}),u.jsxs("div",{className:"relative px-4 sm:px-6",children:[u.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 top-0 bottom-0 w-1 bg-parchment-200 dark:bg-dark-700 hidden md:block"}),u.jsx("div",{className:"space-y-10 md:space-y-12",children:t.map((e,n)=>u.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:`flex flex-col ${n%2===0?"md:flex-row":"md:flex-row-reverse"} items-center`,children:[u.jsxs("div",{className:`md:w-1/2 ${n%2===0?"md:pr-12 lg:pr-16 md:text-right":"md:pl-12 lg:pl-16"} mb-6 md:mb-0`,children:[u.jsxs("div",{className:`inline-block px-3 py-1.5 rounded-full text-xs font-semibold uppercase mb-3 ${e.colorClass} shadow-sm`,children:["Step ",e.number]}),u.jsx("h3",{className:"text-xl sm:text-2xl md:text-2xl font-bold text-ink-900 dark:text-white mb-3",children:e.title}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300 text-base leading-relaxed",children:e.description})]}),u.jsxs("div",{className:"md:w-1/2 relative flex justify-center mb-4 md:mb-0",children:[u.jsx("div",{className:`z-10 w-16 h-16 md:w-16 md:h-16 rounded-full flex items-center justify-center text-lg md:text-xl font-bold ${e.dotColorClass} text-white shadow-md`,children:e.number}),n<t.length-1&&u.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-1 h-10 bg-parchment-200 dark:bg-dark-700 md:hidden"})]})]},n))})]})]})})},uY=()=>{const t=[{name:"Token-based plot voting",plotmint:!0,mirror:!1,readl:!1,jenkins:!1,plotmintNote:"(ETH-purchasable tokens)"},{name:"Economic story decisions",plotmint:!0,mirror:!1,readl:!1,jenkins:!1,plotmintNote:"(real financial stakes)"},{name:"Mandatory plot options",plotmint:!0,mirror:!1,readl:!1,jenkins:!1,plotmintNote:"(every chapter has 2 tokens)"},{name:"Direct reader investment",plotmint:!0,mirror:!1,readl:!1,jenkins:!1,plotmintNote:"(buy tokens to vote)"},{name:"Creator revenue streams",plotmint:!0,mirror:!1,readl:!0,readlNote:"(limited)",jenkins:!1,plotmintNote:"(token sales + allocated tokens)"},{name:"Wallet-required creation",plotmint:!0,mirror:!1,readl:!1,jenkins:!1,plotmintNote:"(Base Sepolia network)"},{name:"Branching story trees",plotmint:!0,mirror:!1,readl:!1,jenkins:!1,plotmintNote:"(driven by token purchases)"},{name:"Static content publishing",plotmint:!1,mirror:!0,readl:!0,jenkins:!1,plotmintNote:"(all chapters have interactive tokens)"}],e=()=>u.jsx("svg",{className:"h-5 w-5 text-green-500 dark:text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),n=()=>u.jsx("svg",{className:"h-5 w-5 text-red-500 dark:text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),r=()=>u.jsx("div",{className:"md:hidden px-4 space-y-4",children:t.map((s,i)=>u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-lg border border-parchment-200 dark:border-dark-700 overflow-hidden shadow-sm",children:[u.jsx("div",{className:"p-4 border-b border-parchment-200 dark:border-dark-700 bg-parchment-50 dark:bg-dark-800",children:u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white",children:s.name})}),u.jsxs("div",{className:"grid grid-cols-2 divide-x divide-parchment-200 dark:divide-dark-700",children:[u.jsxs("div",{className:"p-4",children:[u.jsx("div",{className:"text-center mb-2",children:u.jsx("span",{className:"text-xs uppercase font-semibold text-primary-700 dark:text-primary-400",children:"PlotMint"})}),u.jsx("div",{className:"flex flex-col items-center",children:s.plotmint?u.jsxs(u.Fragment,{children:[u.jsx(e,{}),s.plotmintNote&&u.jsx("span",{className:"text-xs text-ink-600 dark:text-ink-300 mt-1 text-center",children:s.plotmintNote})]}):u.jsx(n,{})})]}),u.jsxs("div",{className:"p-4",children:[u.jsx("div",{className:"text-center mb-2",children:u.jsx("span",{className:"text-xs uppercase font-semibold text-ink-700 dark:text-ink-200",children:"Others"})}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs mb-1 block",children:"Mirror"}),s.mirror?u.jsx(e,{}):u.jsx(n,{})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs mb-1 block",children:"Readl"}),u.jsx("div",{className:"flex flex-col items-center",children:s.readl?u.jsxs(u.Fragment,{children:[u.jsx(e,{}),s.readlNote&&u.jsx("span",{className:"text-[10px] text-ink-600 dark:text-ink-300",children:s.readlNote})]}):u.jsx(n,{})})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs mb-1 block",children:"Jenkins"}),u.jsx("div",{className:"flex flex-col items-center",children:s.jenkins?u.jsx(u.Fragment,{children:u.jsx(e,{})}):u.jsx(n,{})})]})]})]})]})]},i))});return u.jsx("section",{className:"py-16 md:py-20 bg-parchment-50 dark:bg-dark-950 w-full",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"text-center max-w-3xl mx-auto mb-10 md:mb-16 px-4 sm:px-6",children:[u.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-display font-bold text-ink-900 dark:text-white mb-4 md:mb-6",children:"Why PlotMint Is Unique"}),u.jsx("p",{className:"text-lg sm:text-xl text-ink-700 dark:text-ink-200 leading-relaxed",children:"See how PlotMint's token-powered storytelling compares to other Web3 publishing platforms"})]}),u.jsx(r,{}),u.jsx(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},viewport:{once:!0},className:"px-4 sm:px-6 overflow-x-auto hidden md:block",children:u.jsx("div",{className:"min-w-full inline-block align-middle",children:u.jsx("div",{className:"overflow-hidden border border-parchment-200 dark:border-dark-700 rounded-lg shadow-sm",children:u.jsxs("table",{className:"min-w-full divide-y divide-parchment-200 dark:divide-dark-700",children:[u.jsx("thead",{className:"bg-parchment-50 dark:bg-dark-800",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-left text-xs sm:text-sm font-semibold text-ink-700 dark:text-ink-200 uppercase tracking-wider",children:"Feature"}),u.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-center text-xs sm:text-sm font-semibold text-primary-700 dark:text-primary-400 uppercase tracking-wider bg-primary-50 dark:bg-primary-900/20",children:"PlotMint"}),u.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-center text-xs sm:text-sm font-semibold text-ink-700 dark:text-ink-200 uppercase tracking-wider",children:"Mirror"}),u.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-center text-xs sm:text-sm font-semibold text-ink-700 dark:text-ink-200 uppercase tracking-wider",children:"Readl"}),u.jsx("th",{scope:"col",className:"px-4 sm:px-6 py-3 text-center text-xs sm:text-sm font-semibold text-ink-700 dark:text-ink-200 uppercase tracking-wider",children:"Jenkins"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-dark-900 divide-y divide-parchment-200 dark:divide-dark-700",children:t.map((s,i)=>u.jsxs("tr",{className:i%2===0?"bg-white dark:bg-dark-900":"bg-parchment-50 dark:bg-dark-800",children:[u.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-xs sm:text-sm font-medium text-ink-900 dark:text-white",children:s.name}),u.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-center bg-primary-50 dark:bg-primary-900/20",children:s.plotmint?u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx(e,{}),s.plotmintNote&&u.jsx("span",{className:"text-xs text-ink-600 dark:text-ink-300 mt-1",children:s.plotmintNote})]}):u.jsx(n,{})}),u.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-center",children:s.mirror?u.jsx("div",{className:"flex flex-col items-center",children:u.jsx(e,{})}):u.jsx(n,{})}),u.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-center",children:s.readl?u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx(e,{}),s.readlNote&&u.jsx("span",{className:"text-xs text-ink-600 dark:text-ink-300 mt-1",children:s.readlNote})]}):u.jsx(n,{})}),u.jsx("td",{className:"px-4 sm:px-6 py-3 sm:py-4 text-center",children:s.jenkins?u.jsx("div",{className:"flex flex-col items-center",children:u.jsx(e,{})}):u.jsx(n,{})})]},i))})]})})})})]})})},dY=()=>{const{currentUser:t}=Pn(),e=bo(),n=()=>{e(t?"/creator/new-story":"/creator")};return u.jsx("section",{className:"py-16 md:py-20 w-full",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs(Ke.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary-700 to-primary-900 dark:from-primary-900 dark:to-dark-900",children:[u.jsx("div",{className:"absolute inset-0 bg-pattern opacity-10"}),u.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-primary-500 opacity-20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute -bottom-32 -left-32 w-80 h-80 bg-secondary-500 opacity-20 rounded-full blur-3xl"}),u.jsxs("div",{className:"relative py-12 md:py-16 px-6 md:px-12 text-center md:text-left md:flex md:items-center md:justify-between",children:[u.jsxs("div",{className:"md:max-w-lg mb-8 md:mb-0",children:[u.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl font-display font-bold text-white mb-4",children:"Ready to Create Token-Powered Stories?"}),u.jsx("p",{className:"text-base md:text-lg text-primary-100 dark:text-primary-200 max-w-xl",children:"Join PlotMint today and create stories where every chapter generates real economic value. Connect your wallet, write chapters with plot tokens, and earn from reader participation."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row md:flex-col gap-4",children:[u.jsx(ot,{onClick:n,variant:"cta-primary",size:"lg",className:"md:w-full md:min-w-[180px]",children:"Start Writing"}),u.jsx(W6,{to:"/stories",variant:"cta-secondary",size:"lg",className:"md:w-full md:min-w-[180px]",children:"Explore Stories"})]})]})]})})})},hY=()=>(V.useEffect(()=>{document.title="PlotMint - Decentralized Storytelling Platform",document.documentElement.classList.add("dark")},[]),u.jsxs("div",{className:"min-h-screen flex flex-col",children:[u.jsx(_P,{}),u.jsxs("main",{className:"flex-grow flex flex-col w-full",children:[u.jsx(aY,{}),u.jsx(lY,{}),u.jsx(cY,{}),u.jsx(uY,{}),u.jsx(dY,{})]}),u.jsx(TP,{})]})),fY=({story:t,viewMode:e})=>{const n=(i,a)=>{const c={"The Quantum Nexus":"https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=800&h=600&q=80","Shadows of Eldoria":"https://images.unsplash.com/photo-1518709766631-a6a7f45921c3?w=800&h=600&q=80","Whispers in the Void":"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?w=800&h=600&q=80","Chronicles of New Albion":"https://images.unsplash.com/photo-1501084817091-a4f3d1d19e07?w=800&h=600&q=80","The Last Dreamer":"https://images.unsplash.com/photo-1534447677768-be436bb09401?w=800&h=600&q=80","Neon Streets":"https://images.unsplash.com/photo-1520995051695-8dce7195e159?w=800&h=600&q=80"};if(c[i])return c[i];switch(a.toLowerCase()){case"sci-fi":return"https://images.unsplash.com/photo-1465101162946-4377e57745c3?w=800&h=600&q=80";case"fantasy":return"https://images.unsplash.com/photo-1518709766631-a6a7f45921c3?w=800&h=600&q=80";case"horror":return"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?w=800&h=600&q=80";case"steampunk":return"https://images.unsplash.com/photo-1519608487953-e999c86e7455?w=800&h=600&q=80";case"cyberpunk":return"https://images.unsplash.com/photo-1493514789931-586cb221d7a7?w=800&h=600&q=80";default:return"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&h=600&q=80"}},r=()=>t.coverImage&&t.coverImage.startsWith("http")?t.coverImage:n(t.title,t.genre),s=()=>t.authorAvatar&&t.authorAvatar.startsWith("http")?t.authorAvatar:`https://i.pravatar.cc/150?u=${t.author.replace(/\s+/g,"")}`;return e==="grid"?u.jsxs(Ke.div,{whileHover:{y:-5},className:"bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all border border-parchment-200 dark:border-dark-700 h-full flex flex-col",children:[u.jsxs(Ce,{to:`/stories/${t.id}`,className:"block relative pt-[56.25%] overflow-hidden bg-parchment-200 dark:bg-dark-800",children:[u.jsx("img",{src:r(),alt:t.title,className:"absolute inset-0 w-full h-full object-cover transition-transform hover:scale-105",onError:i=>{const a=i.target;a.src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&h=600&q=80"}}),u.jsxs("div",{className:"absolute top-3 right-3 bg-dark-950/80 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-full",children:[t.chapters," ",t.chapters===1?"Chapter":"Chapters"]})]}),u.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("div",{className:"flex items-center mb-3",children:u.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800 dark:bg-primary-900/40 dark:text-primary-300",children:t.genre})}),u.jsx(Ce,{to:`/stories/${t.id}`,children:u.jsx("h3",{className:"text-xl font-display font-bold text-ink-900 dark:text-white mb-2 hover:text-primary-600 dark:hover:text-primary-400 transition",children:t.title})}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300 text-sm line-clamp-2 mb-3 whitespace-pre-line",children:t.description})]}),u.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-parchment-100 dark:border-dark-800",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("img",{src:s(),alt:t.author,className:"w-8 h-8 rounded-full mr-2 object-cover"}),u.jsx("span",{className:"text-sm font-medium text-ink-700 dark:text-ink-200",children:t.author})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"flex items-center text-ink-500 dark:text-ink-400 text-xs",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),t.votes]}),u.jsxs("div",{className:"flex items-center text-ink-500 dark:text-ink-400 text-xs",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),t.collectors]})]})]}),u.jsx("div",{className:"mt-auto",children:u.jsx(Ce,{to:`/stories/${t.id}`,className:"w-full",children:u.jsx("button",{className:"w-full py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400 rounded-md text-sm font-medium transition-colors",children:"Read Story"})})})]})]}):u.jsx(Ke.div,{whileHover:{y:-2},className:"bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all border border-parchment-200 dark:border-dark-700",children:u.jsxs("div",{className:"flex flex-col sm:flex-row",children:[u.jsxs(Ce,{to:`/stories/${t.id}`,className:"block sm:w-56 h-40 relative overflow-hidden bg-parchment-200 dark:bg-dark-800",children:[u.jsx("img",{src:r(),alt:t.title,className:"absolute inset-0 w-full h-full object-cover transition-transform hover:scale-105",onError:i=>{const a=i.target;a.src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&h=600&q=80"}}),u.jsxs("div",{className:"absolute top-2 right-2 bg-dark-950/80 backdrop-blur-sm text-white text-xs px-2 py-1 rounded-full",children:[t.chapters," ",t.chapters===1?"Chapter":"Chapters"]})]}),u.jsxs("div",{className:"p-5 flex-grow flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full bg-primary-100 text-primary-800 dark:bg-primary-900/40 dark:text-primary-300",children:t.genre}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"flex items-center text-ink-500 dark:text-ink-400 text-xs",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),t.votes]}),u.jsxs("div",{className:"flex items-center text-ink-500 dark:text-ink-400 text-xs",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),t.collectors]})]})]}),u.jsx(Ce,{to:`/stories/${t.id}`,children:u.jsx("h3",{className:"text-xl font-display font-bold text-ink-900 dark:text-white mb-2 hover:text-primary-600 dark:hover:text-primary-400 transition",children:t.title})}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300 text-sm mb-4 line-clamp-2 whitespace-pre-line",children:t.description})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("img",{src:s(),alt:t.author,className:"w-7 h-7 rounded-full mr-2 object-cover"}),u.jsx("span",{className:"text-sm font-medium text-ink-700 dark:text-ink-200",children:t.author})]}),u.jsxs("div",{className:"flex gap-1 flex-wrap",children:[t.tags.slice(0,2).map((i,a)=>u.jsx("span",{className:"text-xs px-2 py-1 bg-parchment-100 dark:bg-dark-800 text-ink-600 dark:text-ink-300 rounded-full",children:i},a)),t.tags.length>2&&u.jsxs("span",{className:"text-xs px-2 py-1 text-ink-500 dark:text-ink-400",children:["+",t.tags.length-2]})]})]}),u.jsx("div",{className:"mt-auto",children:u.jsx(Ce,{to:`/stories/${t.id}`,className:"w-full",children:u.jsx("button",{className:"w-full py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400 rounded-md text-sm font-medium transition-colors",children:"Read Story"})})})]})]})})},pY=({genres:t,activeFilter:e,onFilterChange:n,sortOptions:r,activeSort:s,onSortChange:i,viewMode:a,onViewModeChange:c})=>u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0 pb-2 border-b border-parchment-200 dark:border-dark-700",children:[u.jsx("div",{className:"flex items-center space-x-1 overflow-x-auto pb-2 md:pb-0 hide-scrollbar",children:t.map(d=>u.jsx("button",{onClick:()=>n(d),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${e===d?"bg-primary-600 text-white dark:bg-primary-500":"bg-parchment-100 text-ink-700 hover:bg-parchment-200 dark:bg-dark-800 dark:text-ink-200 dark:hover:bg-dark-700"}`,children:d},d))}),u.jsxs("div",{className:"flex items-center justify-between md:justify-end space-x-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:s,onChange:d=>i(d.target.value),className:"appearance-none bg-white dark:bg-dark-800 border border-parchment-200 dark:border-dark-700 rounded-md pl-4 pr-10 py-2 text-sm font-medium text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:r.map(d=>u.jsx("option",{value:d,children:d},d))}),u.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:u.jsx("svg",{className:"h-4 w-4 text-ink-500 dark:text-ink-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),u.jsxs("div",{className:"flex items-center border border-parchment-200 dark:border-dark-700 rounded-md",children:[u.jsx("button",{onClick:()=>c("grid"),className:`p-2 ${a==="grid"?"bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-400":"bg-white text-ink-500 hover:text-ink-700 dark:bg-dark-800 dark:text-ink-400 dark:hover:text-ink-200"}`,"aria-label":"Grid view",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),u.jsx("button",{onClick:()=>c("list"),className:`p-2 ${a==="list"?"bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-400":"bg-white text-ink-500 hover:text-ink-700 dark:bg-dark-800 dark:text-ink-400 dark:hover:text-ink-200"}`,"aria-label":"List view",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})]});function mY(t,e){const n=t.exec(e);return n==null?void 0:n.groups}var ZT=/^tuple(?<array>(\[(\d*)\])*)$/;function mv(t){let e=t.type;if(ZT.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=mv(i),s<n-1&&(e+=", ")}const r=mY(ZT,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,mv({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function $u(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=mv(s),r!==n-1&&(e+=", ")}return e}function gY(t){var e;return t.type==="function"?`function ${t.name}(${$u(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${$u(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${$u(t.inputs)})`:t.type==="error"?`error ${t.name}(${$u(t.inputs)})`:t.type==="constructor"?`constructor(${$u(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var AP="2.22.12",Uu={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${AP}`},Rn=class gv extends Error{constructor(e,n={}){var c;const r=(()=>{var d;return n.cause instanceof gv?n.cause.details:(d=n.cause)!=null&&d.message?n.cause.message:n.details})(),s=n.cause instanceof gv&&n.cause.docsPath||n.docsPath,i=(c=Uu.getDocsUrl)==null?void 0:c.call(Uu,{...n,docsPath:s}),a=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Uu.version?[`Version: ${Uu.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=AP}walk(e){return CP(this,e)}};function CP(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?CP(t.cause,e):e?null:t}function JT(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new _Y(t.type);return`${t.name}(${IP(t.inputs,{includeName:e})})`}function IP(t,{includeName:e=!1}={}){return t?t.map(n=>yY(n,{includeName:e})).join(e?", ":","):""}function yY(t,{includeName:e}){return t.type.startsWith("tuple")?`(${IP(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Nh(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Cr(t){return Nh(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}var xY=class extends Rn{constructor({expectedLength:t,givenLength:e,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${t}`,`Given length: ${e}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},vY=class extends Rn{constructor({expectedSize:t,value:e}){super(`Size of bytes "${e}" (bytes${Cr(e)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},wY=class extends Rn{constructor({expectedLength:t,givenLength:e}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${e}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},bY=class extends Rn{constructor(t,e){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${JT(t.abiItem)}\`, and`,`\`${e.type}\` in \`${JT(e.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},EY=class extends Rn{constructor(t,{docsPath:e}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:e,name:"InvalidAbiEncodingType"})}},kY=class extends Rn{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},_Y=class extends Rn{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}},SP=class extends Rn{constructor({offset:t,position:e,size:n}){super(`Slice ${e==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}},NP=class extends Rn{constructor({size:t,targetSize:e,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${t}) exceeds padding size (${e}).`,{name:"SizeExceedsPaddingSizeError"})}};function PP(t,e,n,{strict:r}={}){return Nh(t,{strict:!1})?AY(t,e,n,{strict:r}):TY(t,e,n,{strict:r})}function RP(t,e){if(typeof e=="number"&&e>0&&e>Cr(t)-1)throw new SP({offset:e,position:"start",size:Cr(t)})}function jP(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Cr(t)!==n-e)throw new SP({offset:n,position:"end",size:Cr(t)})}function TY(t,e,n,{strict:r}={}){RP(t,e);const s=t.slice(e,n);return r&&jP(s,e,n),s}function AY(t,e,n,{strict:r}={}){RP(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&jP(s,e,n),s}function Oc(t,{dir:e,size:n=32}={}){return typeof t=="string"?lo(t,{dir:e,size:n}):CY(t,{dir:e,size:n})}function lo(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new NP({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function CY(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new NP({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}var DP=class extends Rn{constructor({max:t,min:e,signed:n,size:r,value:s}){super(`Number "${s}" is not in safe ${r?`${r*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${t?`(${e} to ${t})`:`(above ${e})`}`,{name:"IntegerOutOfRangeError"})}},IY=class extends Rn{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed ${e} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function Ph(t,{size:e}){if(Cr(t)>e)throw new IY({givenSize:Cr(t),maxSize:e})}var SY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function NY(t,e={}){return typeof t=="number"||typeof t=="bigint"?Fa(t,e):typeof t=="string"?LP(t,e):typeof t=="boolean"?MP(t,e):OP(t,e)}function MP(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ph(n,{size:e.size}),Oc(n,{size:e.size})):n}function OP(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=SY[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ph(r,{size:e.size}),Oc(r,{dir:"right",size:e.size})):r}function Fa(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const d=typeof t=="bigint"?"n":"";throw new DP({max:i?`${i}${d}`:void 0,min:`${a}${d}`,signed:n,size:r,value:`${t}${d}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Oc(c,{size:r}):c}var PY=new TextEncoder;function LP(t,e={}){const n=PY.encode(t);return OP(n,e)}var RY=new TextEncoder;function FP(t,e={}){return typeof t=="number"||typeof t=="bigint"?DY(t,e):typeof t=="boolean"?jY(t,e):Nh(t)?VP(t,e):BP(t,e)}function jY(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ph(n,{size:e.size}),Oc(n,{size:e.size})):n}var ni={zero:48,nine:57,A:65,F:70,a:97,f:102};function eA(t){if(t>=ni.zero&&t<=ni.nine)return t-ni.zero;if(t>=ni.A&&t<=ni.F)return t-(ni.A-10);if(t>=ni.a&&t<=ni.f)return t-(ni.a-10)}function VP(t,e={}){let n=t;e.size&&(Ph(n,{size:e.size}),n=Oc(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const d=eA(r.charCodeAt(c++)),f=eA(r.charCodeAt(c++));if(d===void 0||f===void 0)throw new Rn(`Invalid byte sequence ("${r[c-2]}${r[c-1]}" in "${r}").`);i[a]=d*16+f}return i}function DY(t,e){const n=Fa(t,e);return VP(n)}function BP(t,e={}){const n=RY.encode(t);return typeof e.size=="number"?(Ph(n,{size:e.size}),Oc(n,{dir:"right",size:e.size})):n}function tA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function MY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ww(t,...e){if(!MY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nA(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function OY(t,e){Ww(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}var dp=BigInt(2**32-1),rA=BigInt(32);function LY(t,e=!1){return e?{h:Number(t&dp),l:Number(t>>rA&dp)}:{h:Number(t>>rA&dp)|0,l:Number(t&dp)|0}}function FY(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=LY(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}var VY=(t,e,n)=>t<<n|e>>>32-n,BY=(t,e,n)=>e<<n|t>>>32-n,$Y=(t,e,n)=>e<<n-32|t>>>64-n,UY=(t,e,n)=>t<<n-32|e>>>64-n,zY=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),sA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,HY=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function iA(t){for(let e=0;e<t.length;e++)t[e]=HY(t[e])}function WY(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function $P(t){return typeof t=="string"&&(t=WY(t)),Ww(t),t}var qY=class{clone(){return this._cloneInto()}};function GY(t){const e=r=>t().update($P(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}var UP=[],zP=[],HP=[],KY=BigInt(0),zu=BigInt(1),YY=BigInt(2),QY=BigInt(7),XY=BigInt(256),ZY=BigInt(113);for(let t=0,e=zu,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],UP.push(2*(5*r+n)),zP.push((t+1)*(t+2)/2%64);let s=KY;for(let i=0;i<7;i++)e=(e<<zu^(e>>QY)*ZY)%XY,e&YY&&(s^=zu<<(zu<<BigInt(i))-zu);HP.push(s)}var[JY,eQ]=FY(HP,!0),oA=(t,e,n)=>n>32?$Y(t,e,n):VY(t,e,n),aA=(t,e,n)=>n>32?UY(t,e,n):BY(t,e,n);function tQ(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const c=(a+8)%10,d=(a+2)%10,f=n[d],p=n[d+1],y=oA(f,p,1)^n[c],x=aA(f,p,1)^n[c+1];for(let w=0;w<50;w+=10)t[a+w]^=y,t[a+w+1]^=x}let s=t[2],i=t[3];for(let a=0;a<24;a++){const c=zP[a],d=oA(s,i,c),f=aA(s,i,c),p=UP[a];s=t[p],i=t[p+1],t[p]=d,t[p+1]=f}for(let a=0;a<50;a+=10){for(let c=0;c<10;c++)n[c]=t[a+c];for(let c=0;c<10;c++)t[a+c]^=~n[(c+2)%10]&n[(c+4)%10]}t[0]^=JY[r],t[1]^=eQ[r]}n.fill(0)}var nQ=class WP extends qY{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,tA(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=zY(this.state)}keccak(){sA||iA(this.state32),tQ(this.state32,this.rounds),sA||iA(this.state32),this.posOut=0,this.pos=0}update(e){nA(this);const{blockLen:n,state:r}=this;e=$P(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let c=0;c<a;c++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){nA(this,!1),Ww(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return tA(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(OY(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new WP(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}},rQ=(t,e,n)=>GY(()=>new nQ(e,t,n)),sQ=rQ(1,136,256/8);function qP(t,e){const n=e||"hex",r=sQ(Nh(t,{strict:!1})?FP(t):t);return n==="bytes"?r:NY(r)}var iQ=t=>qP(FP(t));function oQ(t){return iQ(t)}function aQ(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const c=t[a];if(["(",")",","].includes(c)&&(e=!0),c==="("&&r++,c===")"&&r--,!!e){if(r===0){if(c===" "&&["event","function",""].includes(s))s="";else if(s+=c,c===")"){i=!0;break}continue}if(c===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=c,n+=c}}if(!i)throw new Rn("Unable to normalize signature.");return s}var lQ=t=>{const e=typeof t=="string"?t:gY(t);return aQ(e)};function GP(t){return oQ(lQ(t))}var cQ=t=>PP(GP(t),0,4),uQ=class extends Rn{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},KP=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const e=super.get(t);return super.has(t)&&e!==void 0&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}},dQ=/^0x[a-fA-F0-9]{40}$/,Oy=new KP(8192);function um(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Oy.has(r))return Oy.get(r);const s=dQ.test(t)?t.toLowerCase()===t?!0:n?hQ(t)===t:!0:!1;return Oy.set(r,s),s}var Ly=new KP(8192);function hQ(t,e){if(Ly.has(`${t}.${e}`))return Ly.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=qP(BP(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return Ly.set(`${t}.${e}`,i),i}function mc(t){return typeof t[0]=="string"?pQ(t):fQ(t)}function fQ(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function pQ(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}var mQ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function gQ(t,e){if(t.length!==e.length)throw new wY({expectedLength:t.length,givenLength:e.length});const n=yQ({params:t,values:e}),r=Gw(n);return r.length===0?"0x":r}function yQ({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(qw({param:t[r],value:e[r]}));return n}function qw({param:t,value:e}){const n=TQ(t.type);if(n){const[r,s]=n;return vQ(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return _Q(e,{param:t});if(t.type==="address")return xQ(e);if(t.type==="bool")return bQ(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=mQ.exec(t.type)??[];return EQ(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return wQ(e,{param:t});if(t.type==="string")return kQ(e);throw new EY(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Gw(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:c}=t[i];a?e+=32:e+=Cr(c)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:c}=t[i];a?(n.push(Fa(e+s,{size:32})),r.push(c),s+=Cr(c)):n.push(c)}return mc([...n,...r])}function xQ(t){if(!um(t))throw new uQ({address:t});return{dynamic:!1,encoded:lo(t.toLowerCase())}}function vQ(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new kY(t);if(!r&&t.length!==e)throw new xY({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let a=0;a<t.length;a++){const c=qw({param:n,value:t[a]});c.dynamic&&(s=!0),i.push(c)}if(r||s){const a=Gw(i);if(r){const c=Fa(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?mc([c,a]):c}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:mc(i.map(({encoded:a})=>a))}}function wQ(t,{param:e}){const[,n]=e.type.split("bytes"),r=Cr(t);if(!n){let s=t;return r%32!==0&&(s=lo(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:mc([lo(Fa(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new vY({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:lo(t,{dir:"right"})}}function bQ(t){if(typeof t!="boolean")throw new Rn(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:lo(MP(t))}}function EQ(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new DP({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Fa(t,{size:32,signed:e})}}function kQ(t){const e=LP(t),n=Math.ceil(Cr(e)/32),r=[];for(let s=0;s<n;s++)r.push(lo(PP(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:mc([lo(Fa(Cr(e),{size:32})),...r])}}function _Q(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],a=Array.isArray(t)?s:i.name,c=qw({param:i,value:t[a]});r.push(c),c.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Gw(r):mc(r.map(({encoded:s})=>s))}}function TQ(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var AQ=GP;function CQ(t){const{abi:e,args:n=[],name:r}=t,s=Nh(r,{strict:!1}),i=e.filter(c=>s?c.type==="function"?cQ(c)===r:c.type==="event"?AQ(c)===r:!1:"name"in c&&c.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const c of i){if(!("inputs"in c))continue;if(!n||n.length===0){if(!c.inputs||c.inputs.length===0)return c;continue}if(!c.inputs||c.inputs.length===0||c.inputs.length!==n.length)continue;if(n.every((f,p)=>{const y="inputs"in c&&c.inputs[p];return y?yv(f,y):!1})){if(a&&"inputs"in a&&a.inputs){const f=YP(c.inputs,a.inputs,n);if(f)throw new bY({abiItem:c,type:f[0]},{abiItem:a,type:f[1]})}a=c}}return a||i[0]}function yv(t,e){const n=typeof t,r=e.type;switch(r){case"address":return um(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>yv(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>yv(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function YP(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return YP(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?um(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?um(n[r],{strict:!1}):!1)return a}}/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/var IQ=Object.defineProperty,QP=(t,e)=>{for(var n in e)IQ(t,n,{get:e[n],enumerable:!0})},XP=[{type:"constructor",inputs:[{name:"protocolRewardRecipient_",internalType:"address",type:"address"},{name:"protocolRewards_",internalType:"address",type:"address"},{name:"weth_",internalType:"address",type:"address"},{name:"v3Factory_",internalType:"address",type:"address"},{name:"swapRouter_",internalType:"address",type:"address"},{name:"airlock_",internalType:"address",type:"address"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[],name:"WETH",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"addOwner",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"accounts",internalType:"address[]",type:"address[]"}],name:"addOwners",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"airlock",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"owner",internalType:"address",type:"address"},{name:"spender",internalType:"address",type:"address"}],name:"allowance",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"spender",internalType:"address",type:"address"},{name:"value",internalType:"uint256",type:"uint256"}],name:"approve",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"balanceOf",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"amount",internalType:"uint256",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"recipient",internalType:"address",type:"address"},{name:"orderSize",internalType:"uint256",type:"uint256"},{name:"minAmountOut",internalType:"uint256",type:"uint256"},{name:"sqrtPriceLimitX96",internalType:"uint160",type:"uint160"},{name:"tradeReferrer",internalType:"address",type:"address"}],name:"buy",outputs:[{name:"",internalType:"uint256",type:"uint256"},{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"payable"},{type:"function",inputs:[{name:"pushEthRewards",internalType:"bool",type:"bool"}],name:"claimSecondaryRewards",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"contractURI",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"view"},{type:"function",inputs:[],name:"contractVersion",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"pure"},{type:"function",inputs:[],name:"currency",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"decimals",outputs:[{name:"",internalType:"uint8",type:"uint8"}],stateMutability:"view"},{type:"function",inputs:[],name:"dopplerFeeRecipient",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"eip712Domain",outputs:[{name:"fields",internalType:"bytes1",type:"bytes1"},{name:"name",internalType:"string",type:"string"},{name:"version",internalType:"string",type:"string"},{name:"chainId",internalType:"uint256",type:"uint256"},{name:"verifyingContract",internalType:"address",type:"address"},{name:"salt",internalType:"bytes32",type:"bytes32"},{name:"extensions",internalType:"uint256[]",type:"uint256[]"}],stateMutability:"view"},{type:"function",inputs:[],name:"getPoolConfiguration",outputs:[{name:"",internalType:"struct PoolConfiguration",type:"tuple",components:[{name:"version",internalType:"uint8",type:"uint8"},{name:"numPositions",internalType:"uint16",type:"uint16"},{name:"fee",internalType:"uint24",type:"uint24"},{name:"tickSpacing",internalType:"int24",type:"int24"},{name:"numDiscoveryPositions",internalType:"uint16[]",type:"uint16[]"},{name:"tickLower",internalType:"int24[]",type:"int24[]"},{name:"tickUpper",internalType:"int24[]",type:"int24[]"},{name:"maxDiscoverySupplyShare",internalType:"uint256[]",type:"uint256[]"}]}],stateMutability:"view"},{type:"function",inputs:[{name:"payoutRecipient_",internalType:"address",type:"address"},{name:"owners_",internalType:"address[]",type:"address[]"},{name:"tokenURI_",internalType:"string",type:"string"},{name:"name_",internalType:"string",type:"string"},{name:"symbol_",internalType:"string",type:"string"},{name:"platformReferrer_",internalType:"address",type:"address"},{name:"currency_",internalType:"address",type:"address"},{name:"poolAddress_",internalType:"address",type:"address"},{name:"poolConfiguration_",internalType:"struct PoolConfiguration",type:"tuple",components:[{name:"version",internalType:"uint8",type:"uint8"},{name:"numPositions",internalType:"uint16",type:"uint16"},{name:"fee",internalType:"uint24",type:"uint24"},{name:"tickSpacing",internalType:"int24",type:"int24"},{name:"numDiscoveryPositions",internalType:"uint16[]",type:"uint16[]"},{name:"tickLower",internalType:"int24[]",type:"int24[]"},{name:"tickUpper",internalType:"int24[]",type:"int24[]"},{name:"maxDiscoverySupplyShare",internalType:"uint256[]",type:"uint256[]"}]},{name:"positions_",internalType:"struct LpPosition[]",type:"tuple[]",components:[{name:"tickLower",internalType:"int24",type:"int24"},{name:"tickUpper",internalType:"int24",type:"int24"},{name:"liquidity",internalType:"uint128",type:"uint128"}]}],name:"initialize",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"isOwner",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"view"},{type:"function",inputs:[],name:"market",outputs:[{name:"",internalType:"bytes",type:"bytes"}],stateMutability:"view"},{type:"function",inputs:[],name:"marketVersion",outputs:[{name:"",internalType:"uint8",type:"uint8"}],stateMutability:"view"},{type:"function",inputs:[],name:"name",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"view"},{type:"function",inputs:[{name:"owner",internalType:"address",type:"address"}],name:"nonces",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[],name:"owners",outputs:[{name:"",internalType:"address[]",type:"address[]"}],stateMutability:"view"},{type:"function",inputs:[],name:"payoutRecipient",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"owner",internalType:"address",type:"address"},{name:"spender",internalType:"address",type:"address"},{name:"value",internalType:"uint256",type:"uint256"},{name:"deadline",internalType:"uint256",type:"uint256"},{name:"v",internalType:"uint8",type:"uint8"},{name:"r",internalType:"bytes32",type:"bytes32"},{name:"s",internalType:"bytes32",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"platformReferrer",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"poolAddress",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"poolConfiguration",outputs:[{name:"version",internalType:"uint8",type:"uint8"},{name:"numPositions",internalType:"uint16",type:"uint16"},{name:"fee",internalType:"uint24",type:"uint24"},{name:"tickSpacing",internalType:"int24",type:"int24"}],stateMutability:"view"},{type:"function",inputs:[{name:"",internalType:"uint256",type:"uint256"}],name:"positions",outputs:[{name:"tickLower",internalType:"int24",type:"int24"},{name:"tickUpper",internalType:"int24",type:"int24"},{name:"liquidity",internalType:"uint128",type:"uint128"}],stateMutability:"view"},{type:"function",inputs:[],name:"protocolRewardRecipient",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"protocolRewards",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"removeOwner",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"accounts",internalType:"address[]",type:"address[]"}],name:"removeOwners",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"revokeOwnership",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"recipient",internalType:"address",type:"address"},{name:"orderSize",internalType:"uint256",type:"uint256"},{name:"minAmountOut",internalType:"uint256",type:"uint256"},{name:"sqrtPriceLimitX96",internalType:"uint160",type:"uint160"},{name:"tradeReferrer",internalType:"address",type:"address"}],name:"sell",outputs:[{name:"",internalType:"uint256",type:"uint256"},{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"newURI",internalType:"string",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"newPayoutRecipient",internalType:"address",type:"address"}],name:"setPayoutRecipient",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"interfaceId",internalType:"bytes4",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"pure"},{type:"function",inputs:[],name:"swapRouter",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"symbol",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"view"},{type:"function",inputs:[],name:"tokenURI",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"view"},{type:"function",inputs:[],name:"totalSupply",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"to",internalType:"address",type:"address"},{name:"value",internalType:"uint256",type:"uint256"}],name:"transfer",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"from",internalType:"address",type:"address"},{name:"to",internalType:"address",type:"address"},{name:"value",internalType:"uint256",type:"uint256"}],name:"transferFrom",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"amount0Owed",internalType:"uint256",type:"uint256"},{name:"amount1Owed",internalType:"uint256",type:"uint256"},{name:"",internalType:"bytes",type:"bytes"}],name:"uniswapV3MintCallback",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"v3Factory",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"event",anonymous:!1,inputs:[{name:"owner",internalType:"address",type:"address",indexed:!0},{name:"spender",internalType:"address",type:"address",indexed:!0},{name:"value",internalType:"uint256",type:"uint256",indexed:!1}],name:"Approval"},{type:"event",anonymous:!1,inputs:[{name:"buyer",internalType:"address",type:"address",indexed:!0},{name:"recipient",internalType:"address",type:"address",indexed:!0},{name:"tradeReferrer",internalType:"address",type:"address",indexed:!0},{name:"coinsPurchased",internalType:"uint256",type:"uint256",indexed:!1},{name:"currency",internalType:"address",type:"address",indexed:!1},{name:"amountFee",internalType:"uint256",type:"uint256",indexed:!1},{name:"amountSold",internalType:"uint256",type:"uint256",indexed:!1}],name:"CoinBuy"},{type:"event",anonymous:!1,inputs:[{name:"payoutRecipient",internalType:"address",type:"address",indexed:!0},{name:"platformReferrer",internalType:"address",type:"address",indexed:!0},{name:"protocolRewardRecipient",internalType:"address",type:"address",indexed:!1},{name:"currency",internalType:"address",type:"address",indexed:!1},{name:"marketRewards",internalType:"struct ICoin.MarketRewards",type:"tuple",components:[{name:"totalAmountCurrency",internalType:"uint256",type:"uint256"},{name:"totalAmountCoin",internalType:"uint256",type:"uint256"},{name:"creatorPayoutAmountCurrency",internalType:"uint256",type:"uint256"},{name:"creatorPayoutAmountCoin",internalType:"uint256",type:"uint256"},{name:"platformReferrerAmountCurrency",internalType:"uint256",type:"uint256"},{name:"platformReferrerAmountCoin",internalType:"uint256",type:"uint256"},{name:"protocolAmountCurrency",internalType:"uint256",type:"uint256"},{name:"protocolAmountCoin",internalType:"uint256",type:"uint256"}],indexed:!1}],name:"CoinMarketRewards"},{type:"event",anonymous:!1,inputs:[{name:"caller",internalType:"address",type:"address",indexed:!0},{name:"prevRecipient",internalType:"address",type:"address",indexed:!0},{name:"newRecipient",internalType:"address",type:"address",indexed:!0}],name:"CoinPayoutRecipientUpdated"},{type:"event",anonymous:!1,inputs:[{name:"seller",internalType:"address",type:"address",indexed:!0},{name:"recipient",internalType:"address",type:"address",indexed:!0},{name:"tradeReferrer",internalType:"address",type:"address",indexed:!0},{name:"coinsSold",internalType:"uint256",type:"uint256",indexed:!1},{name:"currency",internalType:"address",type:"address",indexed:!1},{name:"amountFee",internalType:"uint256",type:"uint256",indexed:!1},{name:"amountPurchased",internalType:"uint256",type:"uint256",indexed:!1}],name:"CoinSell"},{type:"event",anonymous:!1,inputs:[{name:"payoutRecipient",internalType:"address",type:"address",indexed:!0},{name:"platformReferrer",internalType:"address",type:"address",indexed:!0},{name:"tradeReferrer",internalType:"address",type:"address",indexed:!0},{name:"protocolRewardRecipient",internalType:"address",type:"address",indexed:!1},{name:"creatorReward",internalType:"uint256",type:"uint256",indexed:!1},{name:"platformReferrerReward",internalType:"uint256",type:"uint256",indexed:!1},{name:"traderReferrerReward",internalType:"uint256",type:"uint256",indexed:!1},{name:"protocolReward",internalType:"uint256",type:"uint256",indexed:!1},{name:"currency",internalType:"address",type:"address",indexed:!1}],name:"CoinTradeRewards"},{type:"event",anonymous:!1,inputs:[{name:"sender",internalType:"address",type:"address",indexed:!0},{name:"recipient",internalType:"address",type:"address",indexed:!0},{name:"amount",internalType:"uint256",type:"uint256",indexed:!1},{name:"senderBalance",internalType:"uint256",type:"uint256",indexed:!1},{name:"recipientBalance",internalType:"uint256",type:"uint256",indexed:!1}],name:"CoinTransfer"},{type:"event",anonymous:!1,inputs:[{name:"caller",internalType:"address",type:"address",indexed:!0},{name:"newURI",internalType:"string",type:"string",indexed:!1},{name:"name",internalType:"string",type:"string",indexed:!1}],name:"ContractMetadataUpdated"},{type:"event",anonymous:!1,inputs:[],name:"ContractURIUpdated"},{type:"event",anonymous:!1,inputs:[],name:"EIP712DomainChanged"},{type:"event",anonymous:!1,inputs:[{name:"version",internalType:"uint64",type:"uint64",indexed:!1}],name:"Initialized"},{type:"event",anonymous:!1,inputs:[{name:"caller",internalType:"address",type:"address",indexed:!0},{name:"prevOwner",internalType:"address",type:"address",indexed:!0},{name:"newOwner",internalType:"address",type:"address",indexed:!0}],name:"OwnerUpdated"},{type:"event",anonymous:!1,inputs:[{name:"from",internalType:"address",type:"address",indexed:!0},{name:"to",internalType:"address",type:"address",indexed:!0},{name:"value",internalType:"uint256",type:"uint256",indexed:!1}],name:"Transfer"},{type:"error",inputs:[{name:"target",internalType:"address",type:"address"}],name:"AddressEmptyCode"},{type:"error",inputs:[{name:"account",internalType:"address",type:"address"}],name:"AddressInsufficientBalance"},{type:"error",inputs:[],name:"AddressZero"},{type:"error",inputs:[],name:"AddressZero"},{type:"error",inputs:[],name:"AlreadyOwner"},{type:"error",inputs:[],name:"CannotMintZeroLiquidity"},{type:"error",inputs:[],name:"DopplerPoolMustHaveMoreThan2DiscoveryPositions"},{type:"error",inputs:[],name:"ECDSAInvalidSignature"},{type:"error",inputs:[{name:"length",internalType:"uint256",type:"uint256"}],name:"ECDSAInvalidSignatureLength"},{type:"error",inputs:[{name:"s",internalType:"bytes32",type:"bytes32"}],name:"ECDSAInvalidSignatureS"},{type:"error",inputs:[{name:"spender",internalType:"address",type:"address"},{name:"allowance",internalType:"uint256",type:"uint256"},{name:"needed",internalType:"uint256",type:"uint256"}],name:"ERC20InsufficientAllowance"},{type:"error",inputs:[{name:"sender",internalType:"address",type:"address"},{name:"balance",internalType:"uint256",type:"uint256"},{name:"needed",internalType:"uint256",type:"uint256"}],name:"ERC20InsufficientBalance"},{type:"error",inputs:[{name:"approver",internalType:"address",type:"address"}],name:"ERC20InvalidApprover"},{type:"error",inputs:[{name:"receiver",internalType:"address",type:"address"}],name:"ERC20InvalidReceiver"},{type:"error",inputs:[{name:"sender",internalType:"address",type:"address"}],name:"ERC20InvalidSender"},{type:"error",inputs:[{name:"spender",internalType:"address",type:"address"}],name:"ERC20InvalidSpender"},{type:"error",inputs:[],name:"ERC20TransferAmountMismatch"},{type:"error",inputs:[{name:"deadline",internalType:"uint256",type:"uint256"}],name:"ERC2612ExpiredSignature"},{type:"error",inputs:[{name:"signer",internalType:"address",type:"address"},{name:"owner",internalType:"address",type:"address"}],name:"ERC2612InvalidSigner"},{type:"error",inputs:[],name:"EthAmountMismatch"},{type:"error",inputs:[],name:"EthAmountTooSmall"},{type:"error",inputs:[],name:"EthTransferFailed"},{type:"error",inputs:[],name:"EthTransferInvalid"},{type:"error",inputs:[],name:"FailedInnerCall"},{type:"error",inputs:[],name:"InitialOrderSizeTooLarge"},{type:"error",inputs:[],name:"InsufficientFunds"},{type:"error",inputs:[],name:"InsufficientLiquidity"},{type:"error",inputs:[{name:"account",internalType:"address",type:"address"},{name:"currentNonce",internalType:"uint256",type:"uint256"}],name:"InvalidAccountNonce"},{type:"error",inputs:[],name:"InvalidCurrencyLowerTick"},{type:"error",inputs:[],name:"InvalidInitialization"},{type:"error",inputs:[],name:"InvalidMarketType"},{type:"error",inputs:[],name:"InvalidPoolVersion"},{type:"error",inputs:[{name:"tickLower",internalType:"int24",type:"int24"},{name:"tickUpper",internalType:"int24",type:"int24"}],name:"InvalidTickRangeMisordered"},{type:"error",inputs:[],name:"InvalidWethLowerTick"},{type:"error",inputs:[],name:"LegacyPoolMustHaveOneDiscoveryPosition"},{type:"error",inputs:[],name:"MarketAlreadyGraduated"},{type:"error",inputs:[],name:"MarketNotGraduated"},{type:"error",inputs:[{name:"value",internalType:"uint256",type:"uint256"},{name:"limit",internalType:"uint256",type:"uint256"}],name:"MaxShareToBeSoldExceeded"},{type:"error",inputs:[],name:"NotInitializing"},{type:"error",inputs:[],name:"NotOwner"},{type:"error",inputs:[],name:"NumDiscoveryPositionsOutOfRange"},{type:"error",inputs:[],name:"OneOwnerRequired"},{type:"error",inputs:[],name:"OnlyOwner"},{type:"error",inputs:[{name:"sender",internalType:"address",type:"address"},{name:"pool",internalType:"address",type:"address"}],name:"OnlyPool"},{type:"error",inputs:[],name:"OnlyWeth"},{type:"error",inputs:[],name:"OwnerCannotBeAddressZero"},{type:"error",inputs:[],name:"ReentrancyGuardReentrantCall"},{type:"error",inputs:[{name:"token",internalType:"address",type:"address"}],name:"SafeERC20FailedOperation"},{type:"error",inputs:[],name:"SlippageBoundsExceeded"},{type:"error",inputs:[],name:"UseRevokeOwnershipToRemoveSelf"}],ZP=[{type:"constructor",inputs:[{name:"_coinImpl",internalType:"address",type:"address"},{name:"_coinV4Impl",internalType:"address",type:"address"}],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"view"},{type:"function",inputs:[{name:"msgSender",internalType:"address",type:"address"},{name:"name",internalType:"string",type:"string"},{name:"symbol",internalType:"string",type:"string"},{name:"poolConfig",internalType:"bytes",type:"bytes"},{name:"platformReferrer",internalType:"address",type:"address"},{name:"coinSalt",internalType:"bytes32",type:"bytes32"}],name:"coinAddress",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"coinImpl",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"coinV4Impl",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"contractName",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"pure"},{type:"function",inputs:[],name:"contractVersion",outputs:[{name:"",internalType:"string",type:"string"}],stateMutability:"pure"},{type:"function",inputs:[{name:"payoutRecipient",internalType:"address",type:"address"},{name:"owners",internalType:"address[]",type:"address[]"},{name:"uri",internalType:"string",type:"string"},{name:"name",internalType:"string",type:"string"},{name:"symbol",internalType:"string",type:"string"},{name:"platformReferrer",internalType:"address",type:"address"},{name:"currency",internalType:"address",type:"address"},{name:"",internalType:"int24",type:"int24"},{name:"orderSize",internalType:"uint256",type:"uint256"}],name:"deploy",outputs:[{name:"",internalType:"address",type:"address"},{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"payable"},{type:"function",inputs:[{name:"payoutRecipient",internalType:"address",type:"address"},{name:"owners",internalType:"address[]",type:"address[]"},{name:"uri",internalType:"string",type:"string"},{name:"name",internalType:"string",type:"string"},{name:"symbol",internalType:"string",type:"string"},{name:"poolConfig",internalType:"bytes",type:"bytes"},{name:"platformReferrer",internalType:"address",type:"address"},{name:"postDeployHook",internalType:"address",type:"address"},{name:"postDeployHookData",internalType:"bytes",type:"bytes"},{name:"coinSalt",internalType:"bytes32",type:"bytes32"}],name:"deploy",outputs:[{name:"coin",internalType:"address",type:"address"},{name:"postDeployHookDataOut",internalType:"bytes",type:"bytes"}],stateMutability:"payable"},{type:"function",inputs:[{name:"payoutRecipient",internalType:"address",type:"address"},{name:"owners",internalType:"address[]",type:"address[]"},{name:"uri",internalType:"string",type:"string"},{name:"name",internalType:"string",type:"string"},{name:"symbol",internalType:"string",type:"string"},{name:"poolConfig",internalType:"bytes",type:"bytes"},{name:"platformReferrer",internalType:"address",type:"address"},{name:"orderSize",internalType:"uint256",type:"uint256"}],name:"deploy",outputs:[{name:"",internalType:"address",type:"address"},{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"payable"},{type:"function",inputs:[{name:"payoutRecipient",internalType:"address",type:"address"},{name:"owners",internalType:"address[]",type:"address[]"},{name:"uri",internalType:"string",type:"string"},{name:"name",internalType:"string",type:"string"},{name:"symbol",internalType:"string",type:"string"},{name:"poolConfig",internalType:"bytes",type:"bytes"},{name:"platformReferrer",internalType:"address",type:"address"},{name:"hook",internalType:"address",type:"address"},{name:"hookData",internalType:"bytes",type:"bytes"}],name:"deployWithHook",outputs:[{name:"coin",internalType:"address",type:"address"},{name:"hookDataOut",internalType:"bytes",type:"bytes"}],stateMutability:"payable"},{type:"function",inputs:[{name:"coin",internalType:"address",type:"address"}],name:"getVersionForDeployedCoin",outputs:[{name:"",internalType:"uint8",type:"uint8"}],stateMutability:"view"},{type:"function",inputs:[],name:"implementation",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"initialOwner",internalType:"address",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"owner",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[],name:"proxiableUUID",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"newOwner",internalType:"address",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"newImplementation",internalType:"address",type:"address"},{name:"data",internalType:"bytes",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable"},{type:"event",anonymous:!1,inputs:[{name:"caller",internalType:"address",type:"address",indexed:!0},{name:"payoutRecipient",internalType:"address",type:"address",indexed:!0},{name:"platformReferrer",internalType:"address",type:"address",indexed:!0},{name:"currency",internalType:"address",type:"address",indexed:!1},{name:"uri",internalType:"string",type:"string",indexed:!1},{name:"name",internalType:"string",type:"string",indexed:!1},{name:"symbol",internalType:"string",type:"string",indexed:!1},{name:"coin",internalType:"address",type:"address",indexed:!1},{name:"pool",internalType:"address",type:"address",indexed:!1},{name:"version",internalType:"string",type:"string",indexed:!1}],name:"CoinCreated"},{type:"event",anonymous:!1,inputs:[{name:"caller",internalType:"address",type:"address",indexed:!0},{name:"payoutRecipient",internalType:"address",type:"address",indexed:!0},{name:"platformReferrer",internalType:"address",type:"address",indexed:!0},{name:"currency",internalType:"address",type:"address",indexed:!1},{name:"uri",internalType:"string",type:"string",indexed:!1},{name:"name",internalType:"string",type:"string",indexed:!1},{name:"symbol",internalType:"string",type:"string",indexed:!1},{name:"coin",internalType:"address",type:"address",indexed:!1},{name:"poolKey",internalType:"struct PoolKey",type:"tuple",components:[{name:"currency0",internalType:"Currency",type:"address"},{name:"currency1",internalType:"Currency",type:"address"},{name:"fee",internalType:"uint24",type:"uint24"},{name:"tickSpacing",internalType:"int24",type:"int24"},{name:"hooks",internalType:"contract IHooks",type:"address"}],indexed:!1},{name:"poolKeyHash",internalType:"bytes32",type:"bytes32",indexed:!1},{name:"version",internalType:"string",type:"string",indexed:!1}],name:"CoinCreatedV4"},{type:"event",anonymous:!1,inputs:[{name:"version",internalType:"uint64",type:"uint64",indexed:!1}],name:"Initialized"},{type:"event",anonymous:!1,inputs:[{name:"previousOwner",internalType:"address",type:"address",indexed:!0},{name:"newOwner",internalType:"address",type:"address",indexed:!0}],name:"OwnershipTransferred"},{type:"event",anonymous:!1,inputs:[{name:"implementation",internalType:"address",type:"address",indexed:!0}],name:"Upgraded"},{type:"error",inputs:[{name:"target",internalType:"address",type:"address"}],name:"AddressEmptyCode"},{type:"error",inputs:[{name:"account",internalType:"address",type:"address"}],name:"AddressInsufficientBalance"},{type:"error",inputs:[],name:"ArrayLengthMismatch"},{type:"error",inputs:[],name:"CannotMintZeroLiquidity"},{type:"error",inputs:[],name:"ConfigTickLowerMustBeLessThanTickUpper"},{type:"error",inputs:[],name:"Deprecated"},{type:"error",inputs:[],name:"ERC1167FailedCreateClone"},{type:"error",inputs:[{name:"implementation",internalType:"address",type:"address"}],name:"ERC1967InvalidImplementation"},{type:"error",inputs:[],name:"ERC1967NonPayable"},{type:"error",inputs:[],name:"ERC20TransferAmountMismatch"},{type:"error",inputs:[],name:"EthTransferInvalid"},{type:"error",inputs:[],name:"FailedInnerCall"},{type:"error",inputs:[],name:"InvalidHook"},{type:"error",inputs:[],name:"InvalidInitialization"},{type:"error",inputs:[],name:"InvalidPoolVersion"},{type:"error",inputs:[{name:"tickLower",internalType:"int24",type:"int24"},{name:"tickUpper",internalType:"int24",type:"int24"}],name:"InvalidTickRangeMisordered"},{type:"error",inputs:[{name:"tickLower",internalType:"int24",type:"int24"},{name:"tickUpper",internalType:"int24",type:"int24"}],name:"InvalidTickRangeMisordered"},{type:"error",inputs:[{name:"value",internalType:"uint256",type:"uint256"},{name:"limit",internalType:"uint256",type:"uint256"}],name:"MaxShareToBeSoldExceeded"},{type:"error",inputs:[],name:"NotInitializing"},{type:"error",inputs:[],name:"NumDiscoveryPositionsOutOfRange"},{type:"error",inputs:[{name:"owner",internalType:"address",type:"address"}],name:"OwnableInvalidOwner"},{type:"error",inputs:[{name:"account",internalType:"address",type:"address"}],name:"OwnableUnauthorizedAccount"},{type:"error",inputs:[],name:"ReentrancyGuardReentrantCall"},{type:"error",inputs:[{name:"token",internalType:"address",type:"address"}],name:"SafeERC20FailedOperation"},{type:"error",inputs:[],name:"UUPSUnauthorizedCallContext"},{type:"error",inputs:[{name:"slot",internalType:"bytes32",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID"},{type:"error",inputs:[{name:"currentName",internalType:"string",type:"string"},{name:"newName",internalType:"string",type:"string"}],name:"UpgradeToMismatchedContractName"},{type:"error",inputs:[],name:"ZeroDiscoveryPositions"},{type:"error",inputs:[],name:"ZeroDiscoverySupplyShare"}],SQ={8453:"0x777777751622c0d3258f214F9DF38E35BF45baF3"},NQ=[{type:"function",inputs:[{name:"version",internalType:"uint8",type:"uint8"},{name:"currency",internalType:"address",type:"address"},{name:"tickLower",internalType:"int24[]",type:"int24[]"},{name:"tickUpper",internalType:"int24[]",type:"int24[]"},{name:"numDiscoveryPositions",internalType:"uint16[]",type:"uint16[]"},{name:"maxDiscoverySupplyShare",internalType:"uint256[]",type:"uint256[]"}],name:"encodeMultiCurvePoolConfig",outputs:[{name:"",internalType:"bytes",type:"bytes"}],stateMutability:"pure"}],PQ=4,xv=({currency:t,tickLower:e,tickUpper:n,numDiscoveryPositions:r,maxDiscoverySupplyShare:s})=>{const i=CQ({abi:NQ,name:"encodeMultiCurvePoolConfig"});return gQ(i.inputs,[PQ,t,e,n,r,s])},RQ={};QP(RQ,{addresses:()=>DQ,chainConfigs:()=>jQ});var jQ={1:{FACTORY_OWNER:"0xDB392f4391462d60B8B4413ef72018Ab595Af9D0",MINT_FEE_RECIPIENT:"0xd1d1D4e36117aB794ec5d4c78cBD3a8904E691D0",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},10:{FACTORY_OWNER:"0x4c7f7b6067fac9a737ecf2ca1a733fc85dd65a2b",MINT_FEE_RECIPIENT:"0x7A810DCd0f8d83B20212326813Db6EF7E9FD030c",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},999:{FACTORY_OWNER:"0xE84DBB2B25F761751231a9D0DAfbdD4dC3aa8252",MINT_FEE_RECIPIENT:"0xE84DBB2B25F761751231a9D0DAfbdD4dC3aa8252",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},8453:{FACTORY_OWNER:"0x004d6611884B4A661749B64b2ADc78505c3e1AB3",MINT_FEE_RECIPIENT:"0x7bf90111Ad7C22bec9E9dFf8A01A44713CC1b1B6",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},42161:{FACTORY_OWNER:"0xF7DafC329C93D84267c0E7B146C0bD68807f6A03",MINT_FEE_RECIPIENT:"0x10Fb02A68C3EA8bD439A6f515dcE07CC049f5c94",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},81457:{FACTORY_OWNER:"0x5b297B1b87f8De28C9fA7AFe183Db9F9e6295523",MINT_FEE_RECIPIENT:"0x72E6394056f9152D3a41e5A25De383c191D16134",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},84532:{FACTORY_OWNER:"0x5F14C23983c9e0840Dc60dA880349622f0785420",MINT_FEE_RECIPIENT:"0x5F14C23983c9e0840Dc60dA880349622f0785420",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},421614:{FACTORY_OWNER:"0x256537b56007b32BabEB44E868EC8AA5cBF03D30",MINT_FEE_RECIPIENT:"0x256537b56007b32BabEB44E868EC8AA5cBF03D30",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},7777777:{FACTORY_OWNER:"0xdEA20c96253dc2d64897D2b8d27A8d935dE74955",MINT_FEE_RECIPIENT:"0xEcfc2ee50409E459c554a2b0376F882Ce916D853",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},11155111:{FACTORY_OWNER:"0xCE9F2e8EaFa11637F8A1CB60AE8AaC601Ae30f2D",MINT_FEE_RECIPIENT:"0xCE9F2e8EaFa11637F8A1CB60AE8AaC601Ae30f2D",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},168587773:{FACTORY_OWNER:"0x8cF22F26d528B09b3cc54b7ff956630Bf741b773",MINT_FEE_RECIPIENT:"0x8cF22F26d528B09b3cc54b7ff956630Bf741b773",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"},999999999:{FACTORY_OWNER:"0xdae22ce69Afcb7f4bc37D32E267645722949DE0E",MINT_FEE_RECIPIENT:"0xdae22ce69Afcb7f4bc37D32E267645722949DE0E",PROTOCOL_REWARDS:"0x7777777F279eba3d3Ad8F4E708545291A6fDBA8B"}},DQ={1:{CONTRACT_1155_IMPL:"0x7FB277e8a6584D76bBbc72980719F36936825e29",CONTRACT_1155_IMPL_VERSION:"2.13.0",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0x0379e37302e9d57fFd657F87e1180273826CE84F",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x04E2516A2c207E84a1839755675dfd8eF6302F0a",MERKLE_MINT_SALE_STRATEGY:"0xf48172CA3B6068B20eE4917Eb27b5472f1f272C7",PREMINTER_IMPL:"0xDfB3D291bA493e7a3c835F0EdBa0B1B52979609A",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x78964965cF77850224513a367f899435C5B69174",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730734767},10:{CONTRACT_1155_IMPL:"0xF77330C8b1c41f2e44470763Cf9E3ACa78Db4381",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0x2008C05685F9fA15BBD75d80e9A44ab0c7230577",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x3678862f04290E565cCA2EF163BAeb92Bb76790C",MERKLE_MINT_SALE_STRATEGY:"0x899ce31dF6C6Af81203AcAaD285bF539234eF4b8",PREMINTER_IMPL:"0xD8f6cf234eE4B689099677Bd94FbA0b1E005181d",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x1B28A04b7eB7b93f920ddF2021aa3fAE065395f2",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1731019615},999:{CONTRACT_1155_IMPL:"0x2022AdEF470DA3543a19fac8c9be80618112704D",CONTRACT_1155_IMPL_VERSION:"2.7.0",FACTORY_IMPL:"0x4b0365Ec68C2D92Af2Fa56f120095F0859142Eff",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x04E2516A2c207E84a1839755675dfd8eF6302F0a",MERKLE_MINT_SALE_STRATEGY:"0xf48172CA3B6068B20eE4917Eb27b5472f1f272C7",PREMINTER_IMPL:"0x795Efc066f89DFB03048dDd0598F2D8521c99Df6",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x78964965cF77850224513a367f899435C5B69174",UPGRADE_GATE:"0x0000000000000000000000000000000000000000",timestamp:1704399834},8453:{CONTRACT_1155_IMPL:"0x5Eb5bABCEFEa846b220C82f222F00Df95934F5f0",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0x97898683c6950a986911fdfFEa12739bad5D2581",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x04E2516A2c207E84a1839755675dfd8eF6302F0a",MERKLE_MINT_SALE_STRATEGY:"0xf48172CA3B6068B20eE4917Eb27b5472f1f272C7",PREMINTER_IMPL:"0xDfB3D291bA493e7a3c835F0EdBa0B1B52979609A",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x78964965cF77850224513a367f899435C5B69174",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730931491},42161:{CONTRACT_1155_IMPL:"0xC04050e04708b33302E30E5A0fB1e8c38F4EBbB0",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0xe2606ac30752009ecec6FEaf5C2B4A6523256E7E",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x1Cd1C1f3b8B779B50Db23155F2Cb244FCcA06B21",MERKLE_MINT_SALE_STRATEGY:"0xe770E6f19aecF8ef3145A50087999b5556aB3610",PREMINTER_IMPL:"0xD8f6cf234eE4B689099677Bd94FbA0b1E005181d",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x69bB4A24EBD8b1B87AF4538E0Ca3075b7E398c3D",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730931657},81457:{CONTRACT_1155_IMPL:"0x16cFE884B49E68Cae854f12Ea419Fb1F6Ad290A8",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0x23150f60E233F519A01C735C29c1591f9E8353dE",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x3EB144aee170BF62FdA1536e38aF51f08e34A5D0",MERKLE_MINT_SALE_STRATEGY:"0xB9C997FcC46a27331CC986cc2416ee99C1d506c3",PREMINTER_IMPL:"0xD8f6cf234eE4B689099677Bd94FbA0b1E005181d",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x7A0dE1B1f5420Df5D946878fBe2cF109011BE614",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730931749},84532:{CONTRACT_1155_IMPL:"0x695C9A141748D308d26Bd4f8E9F9A5df5F0623f8",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0xd92F69d5581BF9536c77550aeA1d74DDaE88B5B7",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0xd34872BE0cdb6b09d45FCa067B07f04a1A9aE1aE",MERKLE_MINT_SALE_STRATEGY:"0x3E8524770adD176bE381a0529E09f1c6c3502A5a",PREMINTER_IMPL:"0xD8f6cf234eE4B689099677Bd94FbA0b1E005181d",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x805E0a08dE70f85C01F7848370d5e3fc08aAd0ea",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730928936},421614:{CONTRACT_1155_IMPL:"0x3Ed969bf88166B85608C13b633242611F6220a14",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0xA75f980Fdf9F02718423FDFDFf1fccc74bdDBa95",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x1Cd1C1f3b8B779B50Db23155F2Cb244FCcA06B21",MERKLE_MINT_SALE_STRATEGY:"0xe770E6f19aecF8ef3145A50087999b5556aB3610",PREMINTER_IMPL:"0xD8f6cf234eE4B689099677Bd94FbA0b1E005181d",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x69bB4A24EBD8b1B87AF4538E0Ca3075b7E398c3D",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730928848},7777777:{CONTRACT_1155_IMPL:"0xDB07C4525E82340A27077Ad258160928f271BB7F",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0x517Ce60C6e66a4DB1ea705C98250770d01f9d0AE",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x04E2516A2c207E84a1839755675dfd8eF6302F0a",MERKLE_MINT_SALE_STRATEGY:"0xf48172CA3B6068B20eE4917Eb27b5472f1f272C7",PREMINTER_IMPL:"0xa79928cCc270b0208e56BfF0e927ff55034e7C35",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x78964965cF77850224513a367f899435C5B69174",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730930939},11155111:{CONTRACT_1155_IMPL:"0x9b24FD165a371042e5CA81e8d066d25CAD11EDE7",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x777777E8850d8D6d98De2B5f64fae401F96eFF31",FACTORY_IMPL:"0x3AE2804De4A54283601Db24a897856D9772eA0D8",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x1Cd1C1f3b8B779B50Db23155F2Cb244FCcA06B21",MERKLE_MINT_SALE_STRATEGY:"0xe770E6f19aecF8ef3145A50087999b5556aB3610",PREMINTER_IMPL:"0xa79928cCc270b0208e56BfF0e927ff55034e7C35",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x69bB4A24EBD8b1B87AF4538E0Ca3075b7E398c3D",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1730928528},168587773:{CONTRACT_1155_IMPL:"0x192D663C3D6813a24a24582A76B8d872c4F6F7f9",CONTRACT_1155_IMPL_VERSION:"2.12.3",ERC20_MINTER:"0x0000000000000000000000000000000000000000",FACTORY_IMPL:"0x46E772210f01647FA573b915bE287Ff9b65AD4B0",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x3EB144aee170BF62FdA1536e38aF51f08e34A5D0",MERKLE_MINT_SALE_STRATEGY:"0xB9C997FcC46a27331CC986cc2416ee99C1d506c3",PREMINTER_IMPL:"0xe3150ab94e3730D4B157ffD31Ad042323E122b4C",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x7A0dE1B1f5420Df5D946878fBe2cF109011BE614",UPGRADE_GATE:"0xbC50029836A59A4E5e1Bb8988272F46ebA0F9900",timestamp:1722525339},999999999:{CONTRACT_1155_IMPL:"0x695C9A141748D308d26Bd4f8E9F9A5df5F0623f8",CONTRACT_1155_IMPL_VERSION:"2.13.2",ERC20_MINTER:"0x8Ec7f068A77fa5FC1925110f82381374BA054Ff2",FACTORY_IMPL:"0xd92F69d5581BF9536c77550aeA1d74DDaE88B5B7",FACTORY_PROXY:"0x777777C338d93e2C7adf08D102d45CA7CC4Ed021",FIXED_PRICE_SALE_STRATEGY:"0x6d28164C3CE04A190D5F9f0f8881fc807EAD975A",MERKLE_MINT_SALE_STRATEGY:"0x5e5fD4b758076BAD940db0284b711A67E8a3B88c",PREMINTER_IMPL:"0xD8f6cf234eE4B689099677Bd94FbA0b1E005181d",PREMINTER_PROXY:"0x7777773606e7e46C8Ba8B98C08f5cD218e31d340",REDEEM_MINTER_FACTORY:"0x25cFb6dd9cDE8425e781d6718a29Ccbca3F038d6",UPGRADE_GATE:"0x0000000000000000000000000000000000000000",timestamp:1730928726}},MQ={};QP(MQ,{addresses:()=>LQ,chainConfigs:()=>OQ});var OQ={1:{NONFUNGIBLE_POSITION_MANAGER:"0xC36442b4a4522E871399CD717aBDD847Ab11FE88",UNISWAP_SWAP_ROUTER:"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45",PROXY_ADMIN:"0xDB392f4391462d60B8B4413ef72018Ab595Af9D0",ZORA_RECIPIENT:"0xd1d1D4e36117aB794ec5d4c78cBD3a8904E691D0",WETH:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"},10:{NONFUNGIBLE_POSITION_MANAGER:"0xC36442b4a4522E871399CD717aBDD847Ab11FE88",UNISWAP_SWAP_ROUTER:"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45",PROXY_ADMIN:"0x4c7f7b6067fac9a737ecf2ca1a733fc85dd65a2b",ZORA_RECIPIENT:"0x7A810DCd0f8d83B20212326813Db6EF7E9FD030c",WETH:"0x4200000000000000000000000000000000000006"},8453:{NONFUNGIBLE_POSITION_MANAGER:"0x03a520b32C04BF3bEEf7BEb72E919cf822Ed34f1",UNISWAP_SWAP_ROUTER:"0x2626664c2603336E57B271c5C0b26F421741e481",UNISWAP_V3_FACTORY:"0x33128a8fC17869897dcE68Ed026d694621f6FDfD",DOPPLER_AIRLOCK:"0x660eAaEdEBc968f8f3694354FA8EC0b4c5Ba8D12",PROXY_ADMIN:"0x004d6611884B4A661749B64b2ADc78505c3e1AB3",ZORA_RECIPIENT:"0x7bf90111Ad7C22bec9E9dFf8A01A44713CC1b1B6",WETH:"0x4200000000000000000000000000000000000006",UNISWAP_V4_POOL_MANAGER:"0x498581ff718922c3f8e6a244956af099b2652b2b",UNISWAP_V4_POSITION_MANAGER:"0x7c5f5a4bbd8fd63184577525326123b519429bdc",UNISWAP_PERMIT2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",UNISWAP_UNIVERSAL_ROUTER:"0x6ff5693b99212da76ad316178a184ab56d299b43"},42161:{NONFUNGIBLE_POSITION_MANAGER:"0xC36442b4a4522E871399CD717aBDD847Ab11FE88",UNISWAP_SWAP_ROUTER:"0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45",PROXY_ADMIN:"0xF7DafC329C93D84267c0E7B146C0bD68807f6A03",ZORA_RECIPIENT:"0x10Fb02A68C3EA8bD439A6f515dcE07CC049f5c94",WETH:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1"},81457:{NONFUNGIBLE_POSITION_MANAGER:"0xB218e4f7cF0533d4696fDfC419A0023D33345F28",UNISWAP_SWAP_ROUTER:"0x549FEB8c9bd4c12Ad2AB27022dA12492aC452B66",PROXY_ADMIN:"0x5b297B1b87f8De28C9fA7AFe183Db9F9e6295523",ZORA_RECIPIENT:"0x72E6394056f9152D3a41e5A25De383c191D16134",WETH:"0x4300000000000000000000000000000000000004"},84532:{NONFUNGIBLE_POSITION_MANAGER:"0x27F971cb582BF9E50F397e4d29a5C7A34f11faA2",UNISWAP_SWAP_ROUTER:"0x94cC0AaC535CCDB3C01d6787D6413C739ae12bc4",UNISWAP_V3_FACTORY:"0x4752ba5DBc23f44D87826276BF6Fd6b1C372aD24",DOPPLER_AIRLOCK:"0xa24E35a5d71d02a59b41E7c93567626302da1958",PROXY_ADMIN:"0x5F14C23983c9e0840Dc60dA880349622f0785420",ZORA_RECIPIENT:"0x5F14C23983c9e0840Dc60dA880349622f0785420",WETH:"0x4200000000000000000000000000000000000006",UNISWAP_V4_POOL_MANAGER:"0x05E73354cFDd6745C338b50BcFDfA3Aa6fA03408",UNISWAP_V4_POSITION_MANAGER:"0x4b2c77d209d3405f41a037ec6c77f7f5b8e2ca80",UNISWAP_PERMIT2:"0x000000000022D473030F116dDEE9F6B43aC78BA3",UNISWAP_UNIVERSAL_ROUTER:"0x492E6456D9528771018DeB9E87ef7750EF184104"},421614:{NONFUNGIBLE_POSITION_MANAGER:"0x6b2937Bde17889EDCf8fbD8dE31C3C2a70Bc4d65",UNISWAP_SWAP_ROUTER:"0x101F443B4d1b059569D643917553c771E1b9663E",PROXY_ADMIN:"0x256537b56007b32BabEB44E868EC8AA5cBF03D30",ZORA_RECIPIENT:"0x256537b56007b32BabEB44E868EC8AA5cBF03D30",WETH:"0xc556bae1e86b2ae9c22ea5e036b07e55e7596074"},7777777:{NONFUNGIBLE_POSITION_MANAGER:"0xbC91e8DfA3fF18De43853372A3d7dfe585137D78",UNISWAP_SWAP_ROUTER:"0x7De04c96BE5159c3b5CeffC82aa176dc81281557",PROXY_ADMIN:"0xdEA20c96253dc2d64897D2b8d27A8d935dE74955",ZORA_RECIPIENT:"0xEcfc2ee50409E459c554a2b0376F882Ce916D853",WETH:"0x4200000000000000000000000000000000000006"},11155111:{NONFUNGIBLE_POSITION_MANAGER:"0x1238536071E1c677A632429e3655c799b22cDA52",UNISWAP_SWAP_ROUTER:"0x3bFA4769FB09eefC5a80d6E87c3B9C650f7Ae48E",PROXY_ADMIN:"0xCE9F2e8EaFa11637F8A1CB60AE8AaC601Ae30f2D",ZORA_RECIPIENT:"0xCE9F2e8EaFa11637F8A1CB60AE8AaC601Ae30f2D",WETH:"0x7b79995e5f793A07Bc00c21412e50Ecae098E7f9"},11155420:{NONFUNGIBLE_POSITION_MANAGER:"0xdA75cEf1C93078e8b736FCA5D5a30adb97C8957d",UNISWAP_SWAP_ROUTER:"0x94cC0AaC535CCDB3C01d6787D6413C739ae12bc4",PROXY_ADMIN:"0xFA3748b2dcF94a9CBdb5087333E9F093476e8389",ZORA_RECIPIENT:"0xFA3748b2dcF94a9CBdb5087333E9F093476e8389",WETH:"0x4200000000000000000000000000000000000006"},999999999:{NONFUNGIBLE_POSITION_MANAGER:"0xB8458EaAe43292e3c1F7994EFd016bd653d23c20",UNISWAP_SWAP_ROUTER:"0x6B36d761981d82B1e07cF3c4daF4cB4615c4850a",PROXY_ADMIN:"0xdae22ce69Afcb7f4bc37D32E267645722949DE0E",ZORA_RECIPIENT:"0xdae22ce69Afcb7f4bc37D32E267645722949DE0E",WETH:"0x4200000000000000000000000000000000000006"}},LQ={10:{MINTS_ETH_UNWRAPPER_AND_CALLER:"0x0000000000000000000000000000000000000000",SPARKS_MANAGER_IMPL:"0x0000000000000000000000000000000000000000",SPARKS_MANAGER_IMPL_VERSION:"",SPONSORED_SPARKS_SPENDER:"0x35ca784918bf11692708c1D530691704AAcEA95E",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"},8453:{MINTS_1155:"0x0000000000000000000000000000000000000000",MINTS_ETH_UNWRAPPER_AND_CALLER:"0x0000000000000000000000000000000000000000",MINTS_MANAGER:"0x0000000000000000000000000000000000000000",SPARKS_1155:"0x7777777b3eA6C126942BB14dD5C3C11D365C385D",SPARKS_MANAGER:"0x77777779acd6a96C0c57272112921A0b833c38fD",SPARKS_MANAGER_IMPL:"0x122648369E390009F18c1B2b9B100AfB09B982fc",SPARKS_MANAGER_IMPL_VERSION:"0.2.4",SPONSORED_SPARKS_SPENDER:"0x6958A8866A40118e2CC21ab4752353835321b5e6",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"},42161:{MINTS_ETH_UNWRAPPER_AND_CALLER:"0x0000000000000000000000000000000000000000",SPARKS_MANAGER_IMPL:"0x0000000000000000000000000000000000000000",SPARKS_MANAGER_IMPL_VERSION:"",SPONSORED_SPARKS_SPENDER:"0x2fBdBc34B6015e7b40638179Aa05a2D2267452c7",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"},81457:{MINTS_ETH_UNWRAPPER_AND_CALLER:"0x0000000000000000000000000000000000000000",SPARKS_MANAGER_IMPL:"0x0000000000000000000000000000000000000000",SPARKS_MANAGER_IMPL_VERSION:"",SPONSORED_SPARKS_SPENDER:"0x786F0f6aE196715Cd6d65693f06DA57426ac8463",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"},84532:{MINTS_1155:"0x0000000000000000000000000000000000000000",MINTS_ETH_UNWRAPPER_AND_CALLER:"0x0000000000000000000000000000000000000000",MINTS_MANAGER:"0x0000000000000000000000000000000000000000",SPARKS_1155:"0x7777777b3eA6C126942BB14dD5C3C11D365C385D",SPARKS_MANAGER:"0x77777779acd6a96C0c57272112921A0b833c38fD",SPARKS_MANAGER_IMPL:"0x122648369E390009F18c1B2b9B100AfB09B982fc",SPARKS_MANAGER_IMPL_VERSION:"0.2.4",SPONSORED_SPARKS_SPENDER:"0x23150f60E233F519A01C735C29c1591f9E8353dE",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"},7777777:{MINTS_ETH_UNWRAPPER_AND_CALLER:"0xb0994EB9520C98C97e1F3953a5964535C2bd271A",SPARKS_MANAGER_IMPL:"0xFB854463800d09B89682746c37A3AE696C92193D",SPARKS_MANAGER_IMPL_VERSION:"0.1.4",SPARKS_MANAGER:"0x77777779acd6a96C0c57272112921A0b833c38fD",SPARKS_1155:"0x7777777b3eA6C126942BB14dD5C3C11D365C385D",MINTS_MANAGER:"0x77777770cA269366c7208aFcF36FE2C6F7f7608B",MINTS_1155:"0x7777777d57c1C6e472fa379b7b3B6c6ba3835073",SPONSORED_SPARKS_SPENDER:"0x362Ef86acAD2FAa66A28Ee8d1F5a835ac0BBD11d",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"},999999999:{MINTS_ETH_UNWRAPPER_AND_CALLER:"0xb0994EB9520C98C97e1F3953a5964535C2bd271A",SPARKS_MANAGER_IMPL:"0xf7D8d07267E840aE466E5f2fe8b089F4DE79c7da",SPARKS_MANAGER_IMPL_VERSION:"0.1.4",SPARKS_MANAGER:"0x77777779acd6a96C0c57272112921A0b833c38fD",SPARKS_1155:"0x7777777b3eA6C126942BB14dD5C3C11D365C385D",MINTS_MANAGER:"0x77777770cA269366c7208aFcF36FE2C6F7f7608B",MINTS_1155:"0x7777777d57c1C6e472fa379b7b3B6c6ba3835073",SPONSORED_SPARKS_SPENDER:"0x3A98313fB00918a81d98f9986aED089365428293",SPONSORED_SPARKS_SPENDER_VERSION:"2.0.0"}},FQ=async(t,e)=>{let n=typeof e=="function"?await e(t):e;if(n)return t.scheme==="bearer"?`Bearer ${n}`:t.scheme==="basic"?`Basic ${btoa(n)}`:n},VQ={bodySerializer:t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString():n)},BQ=t=>{switch(t){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},$Q=t=>{switch(t){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},UQ=t=>{switch(t){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},JP=({allowReserved:t,explode:e,name:n,style:r,value:s})=>{if(!e){let c=(t?s:s.map(d=>encodeURIComponent(d))).join($Q(r));switch(r){case"label":return`.${c}`;case"matrix":return`;${n}=${c}`;case"simple":return c;default:return`${n}=${c}`}}let i=BQ(r),a=s.map(c=>r==="label"||r==="simple"?t?c:encodeURIComponent(c):p0({allowReserved:t,name:n,value:c})).join(i);return r==="label"||r==="matrix"?i+a:a},p0=({allowReserved:t,name:e,value:n})=>{if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${t?n:encodeURIComponent(n)}`},e5=({allowReserved:t,explode:e,name:n,style:r,value:s})=>{if(s instanceof Date)return`${n}=${s.toISOString()}`;if(r!=="deepObject"&&!e){let c=[];Object.entries(s).forEach(([f,p])=>{c=[...c,f,t?p:encodeURIComponent(p)]});let d=c.join(",");switch(r){case"form":return`${n}=${d}`;case"label":return`.${d}`;case"matrix":return`;${n}=${d}`;default:return d}}let i=UQ(r),a=Object.entries(s).map(([c,d])=>p0({allowReserved:t,name:r==="deepObject"?`${n}[${c}]`:c,value:d})).join(i);return r==="label"||r==="matrix"?i+a:a},zQ=/\{[^{}]+\}/g,HQ=({path:t,url:e})=>{let n=e,r=e.match(zQ);if(r)for(let s of r){let i=!1,a=s.substring(1,s.length-1),c="simple";a.endsWith("*")&&(i=!0,a=a.substring(0,a.length-1)),a.startsWith(".")?(a=a.substring(1),c="label"):a.startsWith(";")&&(a=a.substring(1),c="matrix");let d=t[a];if(d==null)continue;if(Array.isArray(d)){n=n.replace(s,JP({explode:i,name:a,style:c,value:d}));continue}if(typeof d=="object"){n=n.replace(s,e5({explode:i,name:a,style:c,value:d}));continue}if(c==="matrix"){n=n.replace(s,`;${p0({name:a,value:d})}`);continue}let f=encodeURIComponent(c==="label"?`.${d}`:d);n=n.replace(s,f)}return n},t5=({allowReserved:t,array:e,object:n}={})=>r=>{let s=[];if(r&&typeof r=="object")for(let i in r){let a=r[i];if(a!=null){if(Array.isArray(a)){s=[...s,JP({allowReserved:t,explode:!0,name:i,style:"form",value:a,...e})];continue}if(typeof a=="object"){s=[...s,e5({allowReserved:t,explode:!0,name:i,style:"deepObject",value:a,...n})];continue}s=[...s,p0({allowReserved:t,name:i,value:a})]}}return s.join("&")},WQ=t=>{var n;if(!t)return"stream";let e=(n=t.split(";")[0])==null?void 0:n.trim();if(e){if(e.startsWith("application/json")||e.endsWith("+json"))return"json";if(e==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(r=>e.startsWith(r)))return"blob";if(e.startsWith("text/"))return"text"}},qQ=async({security:t,...e})=>{for(let n of t){let r=await FQ(n,e.auth);if(!r)continue;let s=n.name??"Authorization";switch(n.in){case"query":e.query||(e.query={}),e.query[s]=r;break;case"cookie":e.headers.append("Cookie",`${s}=${r}`);break;case"header":default:e.headers.set(s,r);break}return}},lA=t=>GQ({baseUrl:t.baseUrl,path:t.path,query:t.query,querySerializer:typeof t.querySerializer=="function"?t.querySerializer:t5(t.querySerializer),url:t.url}),GQ=({baseUrl:t,path:e,query:n,querySerializer:r,url:s})=>{let i=s.startsWith("/")?s:`/${s}`,a=(t??"")+i;e&&(a=HQ({path:e,url:a}));let c=n?r(n):"";return c.startsWith("?")&&(c=c.substring(1)),c&&(a+=`?${c}`),a},cA=(t,e)=>{var r;let n={...t,...e};return(r=n.baseUrl)!=null&&r.endsWith("/")&&(n.baseUrl=n.baseUrl.substring(0,n.baseUrl.length-1)),n.headers=n5(t.headers,e.headers),n},n5=(...t)=>{let e=new Headers;for(let n of t){if(!n||typeof n!="object")continue;let r=n instanceof Headers?n.entries():Object.entries(n);for(let[s,i]of r)if(i===null)e.delete(s);else if(Array.isArray(i))for(let a of i)e.append(s,a);else i!==void 0&&e.set(s,typeof i=="object"?JSON.stringify(i):i)}return e},Fy=class{constructor(){mn(this,"_fns");this._fns=[]}clear(){this._fns=[]}exists(t){return this._fns.indexOf(t)!==-1}eject(t){let e=this._fns.indexOf(t);e!==-1&&(this._fns=[...this._fns.slice(0,e),...this._fns.slice(e+1)])}use(t){this._fns=[...this._fns,t]}},KQ=()=>({error:new Fy,request:new Fy,response:new Fy}),YQ=t5({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),QQ={"Content-Type":"application/json"},r5=(t={})=>({...VQ,headers:QQ,parseAs:"auto",querySerializer:YQ,...t}),XQ=(t={})=>{let e=cA(r5(),t),n=()=>({...e}),r=a=>(e=cA(e,a),n()),s=KQ(),i=async a=>{let c={...e,...a,fetch:a.fetch??e.fetch??globalThis.fetch,headers:n5(e.headers,a.headers)};c.security&&await qQ({...c,security:c.security}),c.body&&c.bodySerializer&&(c.body=c.bodySerializer(c.body)),(c.body===void 0||c.body==="")&&c.headers.delete("Content-Type");let d=lA(c),f={redirect:"follow",...c},p=new Request(d,f);for(let N of s.request._fns)p=await N(p,c);let y=c.fetch,x=await y(p);for(let N of s.response._fns)x=await N(x,p,c);let w={request:p,response:x};if(x.ok){if(x.status===204||x.headers.get("Content-Length")==="0")return{data:{},...w};let N=(c.parseAs==="auto"?WQ(x.headers.get("Content-Type")):c.parseAs)??"json";if(N==="stream")return{data:x.body,...w};let I=await x[N]();return N==="json"&&(c.responseValidator&&await c.responseValidator(I),c.responseTransformer&&(I=await c.responseTransformer(I))),{data:I,...w}}let _=await x.text();try{_=JSON.parse(_)}catch{}let C=_;for(let N of s.error._fns)C=await N(_,x,p,c);if(C=C||{},c.throwOnError)throw C;return{error:C,...w}};return{buildUrl:lA,connect:a=>i({...a,method:"CONNECT"}),delete:a=>i({...a,method:"DELETE"}),get:a=>i({...a,method:"GET"}),getConfig:n,head:a=>i({...a,method:"HEAD"}),interceptors:s,options:a=>i({...a,method:"OPTIONS"}),patch:a=>i({...a,method:"PATCH"}),post:a=>i({...a,method:"POST"}),put:a=>i({...a,method:"PUT"}),request:i,setConfig:r,trace:a=>i({...a,method:"TRACE"})}},ZQ=SQ[8453];hc.id+"";var s5=t=>{var n;const e=(n=t==null?void 0:t.chain)==null?void 0:n.id;if(e!==hc.id&&e!==da.id)throw new Error("Client network needs to be base or baseSepolia for current coin deployments.")};function JQ(t){if(t.startsWith("ipfs://"))return t.replace("ipfs://","https://magic.decentralized-content.com/ipfs/");if(t.startsWith("ar://"))return t.replace("ar://","http://arweave.net/");if(t.startsWith("data:")||t.startsWith("http://")||t.startsWith("https://"))return t;throw new Error("Invalid metadata URI")}function Vy(t){if(typeof t!="string")throw new Error("URI must be a string");return!!(t.startsWith("ipfs://")||t.startsWith("ar://")||t.startsWith("https://")||t.startsWith("data:"))}function eX(t){if(typeof t!="object"||!t)throw new Error("Metadata must be an object and exist");if(typeof t.name!="string")throw new Error("Metadata name is required and must be a string");if(typeof t.description!="string")throw new Error("Metadata description is required and must be a string");if(typeof t.image=="string"){if(!Vy(t.image))throw new Error("Metadata image is not a valid URI")}else throw new Error("Metadata image is required and must be a string");if("animation_url"in t){if(typeof t.animation_url!="string")throw new Error("Metadata animation_url, if provided, must be a string");if(!Vy(t.animation_url))throw new Error("Metadata animation_url is not a valid URI")}const e="content"in t&&t.content;if(e){if(typeof e.uri!="string")throw new Error("If provided, content.uri must be a string");if(!Vy(e.uri))throw new Error("If provided, content.uri must be a valid URI string");if(typeof e.mime!="string")throw new Error("If provided, content.mime must be a string")}return!0}async function tX(t){const e=JQ(t),n=await fetch(e);if(!n.ok)throw new Error("Metadata fetch failed");if(!["application/json","text/plain"].includes(n.headers.get("content-type")??""))throw new Error("Metadata is not a valid JSON or plain text response type");const r=await n.json();return eX(r)}function nX(){const t=Ht(bn("api-sdk.zora.engineering"));return yo(t,0,4)}var rX=18,sX="0x1111111111166b7fe7bd91427724b487980afc69",uA=-25e4,dA=-195e3,hA=11,fA=lw("0.05",18),iX={[hc.id]:xv({currency:Un,tickLower:[uA],tickUpper:[dA],numDiscoveryPositions:[hA],maxDiscoverySupplyShare:[fA]}),[da.id]:xv({currency:Un,tickLower:[uA],tickUpper:[dA],numDiscoveryPositions:[hA],maxDiscoverySupplyShare:[fA]})},oX=-138e3,aX=-81e3,lX=11,cX=lw("0.05",rX),uX={[hc.id]:xv({currency:sX,tickLower:[oX],tickUpper:[aX],numDiscoveryPositions:[lX],maxDiscoverySupplyShare:[cX]})},i5=(t=>(t[t.ZORA=1]="ZORA",t[t.ETH=2]="ETH",t))(i5||{});function dX(t,e){if(t===1&&e==da.id)throw new Error("ZORA is not supported on Base Sepolia");switch(t){case 1:return uX[e];case 2:return iX[e];default:throw new Error("Invalid currency")}}async function hX({name:t,symbol:e,uri:n,owners:r,payoutRecipient:s,currency:i,chainId:a=hc.id,platformReferrer:c="0x0000000000000000000000000000000000000000"}){r||(r=[s]),i||(i=a!==hc.id?2:1);const d=dX(i,a);return await tX(n),{abi:ZP,functionName:"deploy",address:ZQ,args:[s,r,n,t,e,d,c,Un,"0x",Ht(ja(Math.random().toString()))],dataSuffix:nX()}}function fX(t){var n;return(n=Eh({abi:ZP,logs:t.logs}).find(r=>r.eventName==="CoinCreatedV4"))==null?void 0:n.args}async function pX(t,e,n,r){s5(n);const s=await hX(t),{request:i}=await n.simulateContract({...s,account:e.account});i.gas&&(i.gas=i.gas*BigInt(100)/100n);const a=await e.writeContract(i),c=await n.waitForTransactionReceipt({hash:a}),d=fX(c);return{hash:a,receipt:c,address:d==null?void 0:d.coin,deployment:d}}function mX({target:t,direction:e,args:{recipient:n,orderSize:r,minAmountOut:s=0n,sqrtPriceLimitX96:i=0n,tradeReferrer:a=Un}}){return{abi:XP,functionName:e,address:t,args:[n,r,s,i,a],value:e==="buy"?r:0n}}function gX(t,e){var r,s;const n=Eh({abi:XP,logs:t.logs});return e==="buy"?(r=n.find(i=>i.eventName==="CoinBuy"))==null?void 0:r.args:(s=n.find(i=>i.eventName==="CoinSell"))==null?void 0:s.args}async function pA(t,e,n){s5(n);const{request:r}=await n.simulateContract({...mX(t),account:e.account}),s=await e.writeContract(r),i=await n.waitForTransactionReceipt({hash:s}),a=gX(i,t.direction);return{hash:s,receipt:i,trade:a}}XQ(r5({baseUrl:"https://api-sdk.zora.engineering/"}));const mA=[{inputs:[],name:"getPoolKey",outputs:[{components:[{name:"currency0",type:"address"},{name:"currency1",type:"address"},{name:"fee",type:"uint24"},{name:"tickSpacing",type:"int24"},{name:"hooks",type:"address"}],type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"hooks",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"}],yX=[{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"}],xX=[{inputs:[{components:[{name:"currency0",type:"address"},{name:"currency1",type:"address"},{name:"fee",type:"uint24"},{name:"tickSpacing",type:"int24"},{name:"hooks",type:"address"}],name:"key",type:"tuple"}],name:"getSlot0",outputs:[{name:"sqrtPriceX96",type:"uint160"},{name:"tick",type:"int24"}],stateMutability:"view",type:"function"}];class vv{constructor(){mn(this,"chainId");mn(this,"platformReferrer");mn(this,"poolManagerAddress","0x0000000000000000000000000000000000000000");this.chainId=parseInt("84532")||84532,this.platformReferrer="0xD566f4399d59BDFDF9D0891C6Cc60f7CF7B072C1"}async checkTokenTradeability(e,n){try{console.log(`🔍 Checking tradeability for token: ${e}`);let r;try{r=await n.readContract({address:e,abi:mA,functionName:"getPoolKey"}),console.log("✅ Pool key retrieved:",r)}catch(f){return console.error("❌ Failed to get pool key:",f),{isInitialized:!1,hasHookBalance:!1,poolExists:!1,error:"Failed to retrieve pool key - token may not be CoinV4 contract"}}let s;try{s=await n.readContract({address:e,abi:mA,functionName:"hooks"}),console.log(`✅ Hook address: ${s}`)}catch(f){return console.error("❌ Failed to get hook address:",f),{isInitialized:!1,hasHookBalance:!1,poolExists:!1,error:"Failed to retrieve hook address"}}let i=!0;if(this.poolManagerAddress!=="0x0000000000000000000000000000000000000000")try{const f=await n.readContract({address:this.poolManagerAddress,abi:xX,functionName:"getSlot0",args:[r]});i=f[0]!==BigInt(0),console.log(`✅ Pool exists check: ${i}, sqrtPriceX96: ${f[0]}`)}catch(f){console.warn("⚠️ Could not verify pool existence:",f)}let a=!1;try{const f=await n.readContract({address:e,abi:yX,functionName:"balanceOf",args:[s]});a=f>BigInt(0),console.log(`✅ Hook balance: ${f.toString()}, has balance: ${a}`)}catch(f){return console.error("❌ Failed to check hook balance:",f),{isInitialized:!1,hasHookBalance:!1,poolExists:i,hookAddress:s,poolKey:r,error:"Failed to check hook balance"}}const d={isInitialized:!!r&&s!=="0x0000000000000000000000000000000000000000",hasHookBalance:a,poolExists:i,hookAddress:s,poolKey:r};return console.log("📊 Tradeability status:",d),d}catch(r){return console.error("💥 Unexpected error checking tradeability:",r),{isInitialized:!1,hasHookBalance:!1,poolExists:!1,error:r instanceof Error?r.message:"Unexpected error"}}}async isTokenTradeable(e,n){const r=await this.checkTokenTradeability(e,n);return r.isInitialized&&r.hasHookBalance&&r.poolExists}async registerPlotOptions(e,n,r,s){if(n.length!==2)throw new Error("Exactly two plot options are required.");const i=Ue(lt(ke,"plotVotes"),`chapter_${e}`);if((await nt(i)).exists())throw new Error("Chapter already initialized.");let c;if(r.account)c=r.account.address;else{const f=await r.getAddresses();if(!f||f.length===0)throw new Error("Wallet not connected or missing address");c=f[0]}console.log(`🔗 Using wallet address: ${c}`);const d={};for(const f of n){if(!f.symbol||!f.name||!f.metadataURI)throw new Error("Missing required coin parameters.");console.log(`🚀 Creating token: ${f.name} (${f.symbol})`);const p=await pX({name:f.name,symbol:f.symbol,uri:f.metadataURI,payoutRecipient:c,chainId:this.chainId,platformReferrer:this.platformReferrer,currency:i5.ETH},r,s);console.log(`✅ Token created at: ${p.address}`),d[f.symbol]={tokenAddress:p.address,totalVotes:0,volumeETH:"0",voters:{}}}await Qr(i,d)}async voteWithETH(e,n,r){var H;const{chapterId:s,plotSymbol:i,tokenAddress:a,voter:c,amount:d,orderSize:f}=e,p=(H=n.account)==null?void 0:H.address;if(!p)throw new Error("Wallet client not connected.");const y=TU(f),x=BigInt(0),w=BigInt(0),_="0x0000000000000000000000000000000000000000",C={direction:"buy",target:a,args:{recipient:p,orderSize:y,minAmountOut:x,sqrtPriceLimitX96:w,tradeReferrer:_}};console.log("🧪 TEST 1 - Ultra-permissive parameters:",{target:a,recipient:p,orderSize:y.toString(),minAmountOut:x.toString(),sqrtPriceLimitX96:w.toString(),tradeReferrer:_,note:"Testing with most permissive parameters first"}),await pA(C,n,r);const N=Ue(ke,"plotVotes",`chapter_${s}`),I=await nt(N);if(!I.exists())throw new Error("Chapter not found");const S=I.data();S[i].totalVotes++,S[i].voters[c]=(S[i].voters[c]||0)+d;const M=BigInt(S[i].volumeETH||"0"),U=y;S[i].volumeETH=(M+U).toString(),await Qr(N,S)}async sellToken(e,n,r,s,i,a){var f;if(!((f=i.account)!=null&&f.address))throw new Error("Wallet not connected");return(await pA({direction:"sell",target:e,args:{recipient:n,orderSize:r,minAmountOut:s}},i,a)).hash}async getPlotVoteStats(e){const n=Ue(ke,"plotVotes",`chapter_${e}`),r=await nt(n);if(!r.exists())throw new Error("Chapter not found");return r.data()}async finalizePlot(e){const n=Ue(ke,"plotVotes",`chapter_${e}`),r=await nt(n);if(!r.exists())throw new Error("Chapter not found");const s=r.data();let i=-1,a="";for(const c of Object.keys(s))s[c].totalVotes>i&&(i=s[c].totalVotes,a=c);if(!a)throw new Error("No votes cast");await Qr(Ue(ke,"plotWinners",`chapter_${e}`),{winningSymbol:a,tokenAddress:s[a].tokenAddress})}async getWinner(e){const n=Ue(ke,"plotWinners",`chapter_${e}`),r=await nt(n);if(!r.exists())throw new Error("Winner not finalized");return r.data()}}const vX=async(t,e,n)=>{try{const r=lt(ke,"stories"),s={...t,creatorId:e,creatorEmail:n,published:!1,chapterCount:0,viewCount:0,collectCount:0,readerCount:0,createdAt:rt(),updatedAt:rt()};return(await Ac(r,s)).id}catch(r){throw console.error("Error creating story:",r),r}},wX=async(t,e)=>{try{const n=lt(ke,"chapters"),r=Ue(ke,"stories",t.storyId),s=await nt(r);if(!s.exists())throw new Error("Story not found");const a=s.data().chapterCount,c=a===0,d={...t,creatorId:e,published:t.published!==void 0?t.published:!0,order:a,createdAt:rt(),updatedAt:rt()},f=await Ac(n,d);return await ts(r,{chapterCount:a+1,updatedAt:rt(),...c?{published:!0}:{}}),f.id}catch(n){throw console.error("Error creating chapter:",n),n}},bX=(t,e,n,r)=>({name:`${n} - ${t}`,description:`Vote token for plot option "${t}" in chapter "${r}" of "${n}". This token represents your vote for this story direction.`,image:`https://via.placeholder.com/400x400/1f2937/ffffff?text=${encodeURIComponent(e)}`,external_url:window.location.origin,attributes:[{trait_type:"Story",value:n},{trait_type:"Chapter",value:r},{trait_type:"Plot Option",value:t},{trait_type:"Token Symbol",value:e},{trait_type:"Type",value:"Plot Vote Token"}]}),EX=async(t,e,n)=>{if(t.length!==2)throw new Error("Exactly two choice options are required");const r=[];for(let s=0;s<t.length;s++){const i=t[s],a=i.substring(0,30)+(i.length>30?"...":""),c=`PLOT${s+1}${Date.now().toString().slice(-4)}`,d=bX(a,c,e,n),f=`data:application/json;base64,${btoa(JSON.stringify(d))}`;r.push({name:a,symbol:c,metadataURI:f})}return r},kX=async(t,e,n,r,s)=>{try{const i=lt(ke,"chapters"),a=Ue(ke,"stories",t.storyId),c=await nt(a);if(!c.exists())throw new Error("Story not found");const f=c.data().chapterCount,p=f===0;let y=[];if(t.hasChoicePoint&&n&&n.length>0){if(!r||!s)throw new Error("Wallet and public clients are required for token creation");if(n.length!==2)throw new Error("Exactly two plot options are required for token creation");const _=new vv,N=Ue(i).id;try{await _.registerPlotOptions(N,n,r,s);const I=await _.getPlotVoteStats(N);y=n.map(S=>{const M=I[S.symbol];return{name:S.name,symbol:S.symbol,tokenAddress:M.tokenAddress,metadataURI:S.metadataURI}}),console.log(`✅ Created ${y.length} plot tokens for chapter`)}catch(I){throw console.error("Error creating plot tokens:",I),new Error(`Failed to create plot tokens: ${I instanceof Error?I.message:"Unknown error"}`)}}const x={...t,creatorId:e,published:t.published!==void 0?t.published:!0,order:f,plotTokens:y.length>0?y:void 0,createdAt:rt(),updatedAt:rt()},w=await Ac(i,x);return await ts(a,{chapterCount:f+1,updatedAt:rt(),...p?{published:!0}:{}}),console.log(`✅ Chapter created with ID: ${w.id}`),w.id}catch(i){throw console.error("Error creating chapter with tokens:",i),i}},gA=async t=>{try{const e=Ue(ke,"stories",t),n=await nt(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting story:",e),e}},o5=async t=>{try{const e=Ue(ke,"chapters",t),n=await nt(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting chapter:",e),e}},_X=async t=>{try{const e=lt(ke,"plotVotes"),n=Ot(e,et("chapterId","==",t.chapterId),et("userId","==",t.userId)),r=await Er(n);if(!r.empty){const a=r.docs[0];return await ts(Ue(ke,"plotVotes",a.id),{choiceOptionIndex:t.choiceOptionIndex,updatedAt:rt()}),a.id}const s={...t,createdAt:rt()};return(await Ac(e,s)).id}catch(e){throw console.error("Error voting for plot choice:",e),e}},Kw=(t,e)=>{const n=lt(ke,"stories"),r=[];(e==null?void 0:e.published)!==void 0?r.push(et("published","==",e.published)):r.push(et("published","==",!0)),e!=null&&e.genre&&r.push(et("genre","==",e.genre)),e!=null&&e.creatorId&&r.push(et("creatorId","==",e.creatorId));const s=(e==null?void 0:e.sortBy)||"createdAt",i=(e==null?void 0:e.sortDirection)||"desc";r.push(ph(s,i)),e!=null&&e.limit&&r.push(Vm(e.limit));const a=Ot(n,...r);return Xr(a,d=>{const f=[];d.forEach(p=>{const y={id:p.id,...p.data()};e!=null&&e.tags&&e.tags.length>0?y.tags.some(w=>{var _;return(_=e.tags)==null?void 0:_.includes(w)})&&f.push(y):f.push(y)}),t(f)},d=>{console.error("Error subscribing to stories:",d),t([])})},a5=(t,e)=>{const n=Ue(ke,"stories",t);return Xr(n,s=>{if(s.exists()){const i=s.data();(typeof i.readerCount!="number"||isNaN(i.readerCount))&&(i.readerCount=0,ts(n,{readerCount:0}).catch(c=>console.error("Error fixing readerCount:",c)));const a={id:s.id,...i};e(a)}else e(null)},s=>{console.error("Error subscribing to story:",s),e(null)})},yA=(t,e,n=!0)=>Kw(e,{creatorId:t,published:n?void 0:!0,sortBy:"updatedAt",sortDirection:"desc"}),Yw=(t,e,n=!0)=>{const r=lt(ke,"chapters"),s=[et("storyId","==",t),ph("order","asc")];n&&s.push(et("published","==",!0));const i=Ot(r,...s);return Xr(i,c=>{const d=[];c.forEach(f=>{d.push({id:f.id,...f.data()})}),e(d)},c=>{console.error("Error subscribing to chapters:",c),e([])})},TX=async(t,e)=>{try{const n=Ue(ke,"stories",t),r=await nt(n);if(!r.exists()){console.error("Story not found");return}const s=r.data();if(e&&e===s.creatorId)return;const i=`${t}_${e||"anonymous"}_${Date.now()}`;await Qr(Ue(ke,"storyViews",i),{storyId:t,userId:e||"anonymous",timestamp:rt()}),await ts(n,{viewCount:s.viewCount+1,updatedAt:rt()})}catch(n){console.error("Error recording story view:",n)}},l5=async(t,e)=>{if(e)try{const n=Ue(ke,"stories",t),r=await nt(n);if(!r.exists()){console.error("Story not found");return}const s=r.data();if(e===s.creatorId)return;const i=lt(ke,"storyReaders"),a=Ot(i,et("storyId","==",t),et("userId","==",e)),c=await Er(a);if(c.empty){const d=`${t}_${e}`;await Qr(Ue(ke,"storyReaders",d),{storyId:t,userId:e,firstReadAt:rt(),lastReadAt:rt()});const f=typeof s.readerCount=="number"&&!isNaN(s.readerCount)?s.readerCount:0;await ts(n,{readerCount:f+1,updatedAt:rt()})}else{const d=c.docs[0];await ts(d.ref,{lastReadAt:rt()})}}catch(n){console.error("Error tracking story reader:",n)}},AX=async t=>{try{const e=Ue(ke,"stories",t),n=await nt(e);if(!n.exists())return;const r=n.data(),s={};if((typeof r.viewCount!="number"||isNaN(r.viewCount))&&(s.viewCount=0),(typeof r.readerCount!="number"||isNaN(r.readerCount))&&(s.readerCount=0),(typeof r.collectCount!="number"||isNaN(r.collectCount))&&(s.collectCount=0),typeof r.chapterCount!="number"||isNaN(r.chapterCount)){const i=lt(ke,"chapters"),a=Ot(i,et("storyId","==",t)),c=await Er(a);s.chapterCount=c.size}Object.keys(s).length>0&&await ts(e,s)}catch(e){console.error("Error ensuring story numeric fields:",e)}},CX=async(t,e,n)=>{try{const r=Ue(ke,"stories",t),s=await nt(r);if(!s.exists())throw new Error("Story not found");const i=s.data();if(n===i.creatorId)throw new Error("You cannot collect chapters from your own story");const a=lt(ke,"chapterCollections"),c=Ot(a,et("storyId","==",t),et("chapterId","==",e),et("userId","==",n)),d=await Er(c);if(!d.empty)return d.docs[0].id;const f={storyId:t,chapterId:e,userId:n,createdAt:rt()},p=await Ac(a,f);return await ts(r,{collectCount:i.collectCount+1,updatedAt:rt()}),p.id}catch(r){throw console.error("Error collecting chapter:",r),r}},IX=async(t,e,n)=>{try{if(!n)return!1;const r=lt(ke,"chapterCollections"),s=Ot(r,et("storyId","==",t),et("chapterId","==",e),et("userId","==",n));return!(await Er(s)).empty}catch(r){return console.error("Error checking if chapter is collected:",r),!1}},SX=async(t,e)=>{try{if(!e)return null;const n=lt(ke,"plotVotes"),r=Ot(n,et("chapterId","==",t),et("userId","==",e)),s=await Er(r);return s.empty?null:s.docs[0].data().choiceOptionIndex}catch(n){return console.error("Error checking if user voted:",n),null}},NX=async t=>{try{const e=lt(ke,"plotVotes"),n=Ot(e,et("chapterId","==",t)),r=await Er(n),s={counts:[],total:r.size,percentages:[]},i={};if(r.forEach(c=>{const f=c.data().choiceOptionIndex;i[f]===void 0?i[f]=1:i[f]++}),s.total===0)return s;const a=Math.max(...Object.keys(i).map(Number));return s.counts=Array(a+1).fill(0),s.percentages=Array(a+1).fill(0),Object.entries(i).forEach(([c,d])=>{const f=Number(c);s.counts[f]=d,s.percentages[f]=Math.round(d/s.total*100)}),s}catch(e){return console.error("Error getting vote counts:",e),{counts:[],total:0,percentages:[]}}},PX=(t,e)=>{try{const n=lt(ke,"plotVotes"),r=Ot(n,et("chapterId","==",t));return Xr(r,i=>{const a={},c=i.size;i.forEach(p=>{const x=p.data().choiceOptionIndex;a[x]===void 0?a[x]=1:a[x]++});const d={counts:[],total:c,percentages:[]};if(c===0){e(d);return}const f=Math.max(...Object.keys(a).map(Number));d.counts=Array(f+1).fill(0),d.percentages=Array(f+1).fill(0),Object.entries(a).forEach(([p,y])=>{const x=Number(p);d.counts[x]=y,d.percentages[x]=Math.round(y/c*100)}),e(d)},i=>{console.error("Error subscribing to vote counts:",i),e({counts:[],total:0,percentages:[]})})}catch(n){return console.error("Error subscribing to vote counts:",n),()=>{}}},hp=async t=>{try{const e=lt(ke,"stories"),n=Ot(e,et("creatorId","==",t)),r=await Er(n),s={totalReaders:0,totalCollectors:0,totalVotes:0,totalRevenue:0,readerGrowth:0,collectorGrowth:0,storyPerformance:[]},i=r.docs.map(async a=>{const c=a.data(),d=a.id,f=lt(ke,"chapters"),p=Ot(f,et("storyId","==",d)),y=await Er(p);let x=0;for(const M of y.docs){const U=M.id,H=lt(ke,"plotVotes"),B=Ot(H,et("chapterId","==",U)),j=await Er(B);x+=j.size}const w=lt(ke,"chapterCollections"),_=Ot(w,et("storyId","==",d)),N=(await Er(_)).size,I=N*.01,S={id:d,title:c.title,reads:c.viewCount||0,collections:N,votes:x,revenue:I};return s.totalReaders+=c.readerCount||0,s.totalCollectors+=N,s.totalVotes+=x,s.totalRevenue+=I,S});return s.storyPerformance=await Promise.all(i),s.readerGrowth=Math.round(Math.random()*15),s.collectorGrowth=Math.round(Math.random()*10),s}catch(e){return console.error("Error getting creator analytics:",e),{totalReaders:0,totalCollectors:0,totalVotes:0,totalRevenue:0,readerGrowth:0,collectorGrowth:0,storyPerformance:[]}}},RX=(t,e)=>{hp(t).then(e);const n=[],r=lt(ke,"stories"),s=Ot(r,et("creatorId","==",t)),i=Xr(s,()=>{hp(t).then(e)});n.push(i);const a=lt(ke,"chapterCollections"),c=Xr(a,()=>{hp(t).then(e)});n.push(c);const d=lt(ke,"plotVotes"),f=Xr(d,()=>{hp(t).then(e)});return n.push(f),()=>{n.forEach(p=>p())}},jX=(t,e)=>{if(!t)return e([]),()=>{};const n=lt(ke,"chapterCollections"),r=Ot(n,et("userId","==",t));return Xr(r,async i=>{const a={};i.forEach(d=>{const f=d.data();a[f.storyId]||(a[f.storyId]=[]),a[f.storyId].push(f.chapterId)});const c=[];for(const[d,f]of Object.entries(a))try{const p=Ue(ke,"stories",d),y=await nt(p);if(y.exists()){const x=y.data();let w="Anonymous";x.creatorEmail&&(w=x.creatorEmail.split("@")[0]),c.push({id:`collection-${d}`,storyId:d,storyTitle:x.title,coverImage:x.coverImage,totalChapters:x.chapterCount,collectedChapters:f.length,author:w,chapterIds:f})}}catch(p){console.error("Error fetching story details for collection:",p)}e(c)})},DX=(t,e,n=10)=>{if(!t)return e([]),()=>{};const r=lt(ke,"readingHistory"),s=Ot(r,et("userId","==",t),ph("readAt","desc"),Vm(n));return Xr(s,async a=>{const c=[];for(const d of a.docs){const f=d.data();try{const p=Ue(ke,"stories",f.storyId),y=Ue(ke,"chapters",f.chapterId),[x,w]=await Promise.all([nt(p),nt(y)]);if(x.exists()&&w.exists()){const _=x.data(),C=w.data();c.push({id:d.id,storyId:f.storyId,storyTitle:_.title,chapterId:f.chapterId,chapterTitle:C.title,coverImage:_.coverImage,readAt:f.readAt.toDate().toISOString(),progress:f.progress})}}catch(p){console.error("Error fetching details for reading history:",p)}}e(c)},a=>{console.error("Error subscribing to reading history:",a),e([])})},MX=(t,e,n=10)=>{if(!t)return e([]),()=>{};const r=lt(ke,"plotVotes"),s=Ot(r,et("userId","==",t),ph("createdAt","desc"),Vm(n));return Xr(s,async a=>{var d,f;const c=[];for(const p of a.docs){const y=p.data();try{const x=Ue(ke,"stories",y.storyId),w=Ue(ke,"chapters",y.chapterId),[_,C]=await Promise.all([nt(x),nt(w)]);if(_.exists()&&C.exists()){const N=_.data(),I=C.data(),S=await NX(y.chapterId);c.push({id:p.id,storyId:y.storyId,storyTitle:N.title,chapterId:y.chapterId,chapterTitle:I.title,coverImage:N.coverImage,choice:((d=I.choiceOptions)==null?void 0:d[y.choiceOptionIndex])||"Unknown option",votedAt:((f=y.createdAt)==null?void 0:f.toDate().toISOString())||new Date().toISOString(),totalVotes:S.total,choiceVotes:S.counts[y.choiceOptionIndex]||0})}}catch(x){console.error("Error fetching details for voting history:",x)}}e(c)})},OX=(t,e,n=20)=>{if(!t)return e([]),()=>{};const r=lt(ke,"userNotifications"),s=Ot(r,et("userId","==",t),ph("timestamp","desc"),Vm(n));return Xr(s,a=>{const c=[];a.forEach(d=>{const f=d.data();c.push({id:d.id,type:f.type,storyId:f.storyId,storyTitle:f.storyTitle,chapterId:f.chapterId,chapterTitle:f.chapterTitle,result:f.result,authorName:f.authorName,message:f.message,timestamp:f.timestamp.toDate().toISOString(),read:f.read})}),e(c)},a=>{console.error("Error subscribing to notifications:",a),e([])})},xA=async(t,e,n,r)=>{if(t)try{const s=Ue(ke,"stories",e),i=Ue(ke,"chapters",n),[a,c]=await Promise.all([nt(s),nt(i)]);if(!a.exists()||!c.exists()){console.error("Story or chapter not found");return}const d=a.data(),f=c.data(),p=`${t}_${e}_${n}`,y=Ue(ke,"readingHistory",p);await Qr(y,{userId:t,storyId:e,storyTitle:d.title,chapterId:n,chapterTitle:f.title,readAt:rt(),progress:Math.min(Math.max(0,r),100),updatedAt:rt()},{merge:!0}),console.log(`Reading progress recorded: ${r}% for chapter ${n}`),r>=100&&l5(e,t)}catch(s){console.error("Error recording reading progress:",s)}},wv=async(t,e,n)=>{if(!t)throw new Error("User ID is required");try{const r=lt(ke,"userNotifications"),s={userId:t,type:e,storyId:n.storyId,storyTitle:n.storyTitle,chapterId:n.chapterId||null,chapterTitle:n.chapterTitle||null,result:n.result||null,authorName:n.authorName||null,message:n.message||null,timestamp:rt(),read:!1},i=await Ac(r,s);return console.log(`Notification created: ${e} for user ${t}`),i.id}catch(r){throw console.error("Error creating notification:",r),r}},LX=async(t,e)=>{try{const n=Ue(ke,"stories",t),r=await nt(n);if(!r.exists()){console.error("Story not found");return}const s=r.data(),i=Ue(ke,"chapters",e),a=await nt(i);if(!a.exists()){console.error("Chapter not found");return}const c=a.data(),d=lt(ke,"storyReaders"),f=Ot(d,et("storyId","==",t)),y=(await Er(f)).docs.map(x=>{const w=x.data();return w.userId===s.creatorId?Promise.resolve():wv(w.userId,"chapter_published",{storyId:t,storyTitle:s.title,chapterId:e,chapterTitle:c.title})});await Promise.all(y),console.log(`Notified ${y.length} readers of new chapter`)}catch(n){console.error("Error notifying followers of new chapter:",n)}},vA=async(t,e)=>{try{const n=Ue(ke,"chapters",t),r=await nt(n);if(!r.exists())throw new Error("Chapter not found");if(await ts(n,{...e,updatedAt:rt()}),e.published===!0&&r.data().published===!1){const s=r.data().storyId,i=Ue(ke,"stories",s);await ts(i,{updatedAt:rt()})}console.log("Chapter updated successfully:",t)}catch(n){throw console.error("Error updating chapter:",n),n}},FX=["All","Fantasy","Sci-Fi","Horror","Cyberpunk","Steampunk","Mystery","Romance","Adventure","Historical"],VX=["Trending","Most Collected","Newest","Most Chapters"],BX=()=>{const[t,e]=V.useState("All"),[n,r]=V.useState("Trending"),[s,i]=V.useState("grid"),[a,c]=V.useState([]),[d,f]=V.useState(!0),[p,y]=V.useState(null);V.useEffect(()=>{f(!0),y(null);const w={};switch(t!=="All"&&(w.genre=t),n){case"Trending":w.sortBy="viewCount",w.sortDirection="desc";break;case"Most Collected":w.sortBy="collectCount",w.sortDirection="desc";break;case"Newest":w.sortBy="createdAt",w.sortDirection="desc";break;case"Most Chapters":w.sortBy="chapterCount",w.sortDirection="desc";break}const _=Kw(C=>{c(C),f(!1)},w);return()=>{_()}},[t,n]);const x=w=>{var _;return{id:w.id||"",title:w.title,coverImage:w.coverImage,author:((_=w.creatorEmail)==null?void 0:_.split("@")[0])||"Anonymous",authorAvatar:`https://i.pravatar.cc/150?u=${w.creatorId}`,chapters:w.chapterCount,genre:w.genre,votes:0,collectors:w.collectCount,description:w.description,tags:w.tags}};return u.jsx("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 pt-24 pb-16",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-ink-900 dark:text-white mb-2",children:"Explore Stories"}),u.jsxs("p",{className:"text-ink-600 dark:text-ink-300 flex items-center",children:["Discover interactive stories where your choices shape the narrative. Collect chapters, vote on plot directions, and join a community of storytellers.",u.jsx(Ce,{to:"/discover",className:"ml-2 text-primary-600 dark:text-primary-400 hover:underline",children:"Try advanced discovery"})]})]}),u.jsx(pY,{genres:FX,activeFilter:t,onFilterChange:e,sortOptions:VX,activeSort:n,onSortChange:r,viewMode:s,onViewModeChange:i}),d&&u.jsx("div",{className:"flex justify-center items-center py-20",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),p&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-4 rounded-md my-6",children:[u.jsx("p",{className:"font-medium",children:"Error loading stories"}),u.jsx("p",{className:"text-sm mt-1",children:p})]}),!d&&!p&&u.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:`grid ${s==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8":"grid-cols-1 gap-4"} mt-8`,children:a.map(w=>u.jsx(fY,{story:x(w),viewMode:s},w.id))}),!d&&!p&&a.length===0&&u.jsxs("div",{className:"text-center py-16",children:[u.jsx("h3",{className:"text-xl font-display font-medium text-ink-700 dark:text-ink-300 mb-2",children:"No stories found"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400",children:"Try adjusting your filters or check back later for new stories"})]})]})})},fp=t=>{switch(t.toLowerCase()){case"sci-fi":return"https://images.unsplash.com/photo-1465101162946-4377e57745c3?w=1200&h=600&q=80";case"fantasy":return"https://images.unsplash.com/photo-1518709766631-a6a7f45921c3?w=1200&h=600&q=80";case"horror":return"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?w=1200&h=600&q=80";case"steampunk":return"https://images.unsplash.com/photo-1519608487953-e999c86e7455?w=1200&h=600&q=80";case"cyberpunk":return"https://images.unsplash.com/photo-1493514789931-586cb221d7a7?w=1200&h=600&q=80";default:return"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=1200&h=600&q=80"}},By=t=>`https://i.pravatar.cc/150?u=${t.replace(/\s+/g,"")}`,$X=()=>{var S,M,U,H,B,j;const{storyId:t}=hm(),{currentUser:e}=Pn(),[n,r]=V.useState("overview"),[s,i]=V.useState(null),[a,c]=V.useState([]),[d,f]=V.useState(!0),[p,y]=V.useState(null),[x,w]=V.useState(!1);V.useEffect(()=>{if(!t){y("Story ID is missing"),f(!1);return}f(!0),y(null);const T=a5(t,D=>{D?(i(D),AX(t).catch(R=>console.error("Error fixing numeric fields:",R)),!x&&D&&(w(!0),TX(t,(e==null?void 0:e.uid)||null),e!=null&&e.uid&&l5(t,e.uid))):y("Story not found"),f(!1)}),k=Yw(t,D=>{c(D)});return()=>{T(),k()}},[t,e,x]);const _=T=>T?(T.toDate?T.toDate():new Date(T)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date",C=()=>s?s.coverImage&&s.coverImage.startsWith("http")?s.coverImage:fp(s.genre):fp("default"),N=T=>{var k;return{id:T.id||"",title:T.title,content:T.content,published:T.published,publishedAt:T.createdAt,votes:0,collectors:0,preview:T.content.substring(0,150)+"...",htmlPreview:`<div class="whitespace-pre-line break-anywhere">${T.content.substring(0,150)+"..."}</div>`,estimatedReadingTime:Math.ceil(T.content.split(" ").length/200),choices:((k=T.choiceOptions)==null?void 0:k.map((D,R)=>({id:`ch${T.id}-opt${R}`,text:D})))||[]}};if(d)return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16 flex justify-center items-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(p||!s)return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white dark:bg-dark-900 rounded-xl p-8 shadow-sm border border-parchment-200 dark:border-dark-700 text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-ink-900 dark:text-white mb-4",children:p||"Story not found"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300 mb-6",children:"The story you're looking for might have been removed or doesn't exist."}),u.jsx(Ce,{to:"/stories",children:u.jsx(ot,{variant:"primary",children:"Back to Stories"})})]})})});const I=a.map(N);return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"hidden md:block h-96 w-full rounded-xl overflow-hidden mb-8 bg-parchment-200 dark:bg-dark-800",children:[u.jsx("img",{src:C(),alt:s.title,className:"w-full h-full object-cover",onError:T=>{const k=T.target;k.src=fp(s.genre)}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-950/80 to-transparent"})]}),u.jsxs("div",{className:"md:absolute md:bottom-8 md:left-8 md:right-8 z-10",children:[u.jsxs("div",{className:"md:hidden h-64 w-full rounded-xl overflow-hidden mb-6 bg-parchment-200 dark:bg-dark-800 relative",children:[u.jsx("img",{src:C(),alt:s.title,className:"w-full h-full object-cover",onError:T=>{const k=T.target;k.src=fp(s.genre)}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-950/80 to-transparent"}),u.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[u.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full bg-primary-500 text-white mb-2",children:s.genre}),u.jsx("h1",{className:"text-2xl sm:text-3xl font-display font-bold text-white mb-1 break-anywhere",children:s.title})]})]}),u.jsxs("div",{className:"hidden md:block",children:[u.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full bg-primary-500 text-white mb-2",children:s.genre}),u.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-display font-bold text-white mb-2 break-anywhere",children:s.title}),u.jsxs("div",{className:"flex items-center text-white/90",children:[u.jsx("img",{src:s.creatorId?`https://i.pravatar.cc/150?u=${s.creatorId}`:By("Anonymous"),alt:((S=s.creatorEmail)==null?void 0:S.split("@")[0])||"Anonymous",className:"w-8 h-8 rounded-full mr-2 object-cover"}),u.jsx("span",{className:"font-medium",children:((M=s.creatorEmail)==null?void 0:M.split("@")[0])||"Anonymous"}),u.jsx("span",{className:"mx-2",children:"•"}),u.jsxs("span",{children:[s.chapterCount," Chapters"]}),u.jsx("span",{className:"mx-2",children:"•"}),u.jsx("span",{children:_(s.createdAt)})]})]})]})]}),u.jsxs("div",{className:"flex items-center md:hidden mb-6 text-ink-700 dark:text-ink-200",children:[u.jsx("img",{src:s.creatorId?`https://i.pravatar.cc/150?u=${s.creatorId}`:By("Anonymous"),alt:((U=s.creatorEmail)==null?void 0:U.split("@")[0])||"Anonymous",className:"w-8 h-8 rounded-full mr-2 object-cover"}),u.jsx("span",{className:"font-medium",children:((H=s.creatorEmail)==null?void 0:H.split("@")[0])||"Anonymous"}),u.jsx("span",{className:"mx-2",children:"•"}),u.jsxs("span",{children:[s.chapterCount," Chapters"]})]}),u.jsxs("div",{className:"flex border-b border-parchment-200 dark:border-dark-700 mb-6",children:[u.jsx("button",{onClick:()=>r("overview"),className:`px-4 py-3 font-medium text-sm sm:text-base transition-colors ${n==="overview"?"text-primary-600 dark:text-primary-400 border-b-2 border-primary-600 dark:border-primary-400":"text-ink-600 dark:text-ink-300 hover:text-ink-900 dark:hover:text-white"}`,children:"Overview"}),u.jsx("button",{onClick:()=>r("chapters"),className:`px-4 py-3 font-medium text-sm sm:text-base transition-colors ${n==="chapters"?"text-primary-600 dark:text-primary-400 border-b-2 border-primary-600 dark:border-primary-400":"text-ink-600 dark:text-ink-300 hover:text-ink-900 dark:hover:text-white"}`,children:"Chapters"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsx("div",{className:"lg:col-span-2",children:n==="overview"?u.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:u.jsxs("div",{className:"prose prose-brown dark:prose-invert max-w-none",children:[u.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"About this story"}),u.jsx("p",{className:"text-ink-700 dark:text-ink-200 whitespace-pre-line",children:s.description}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-6",children:s.tags.map((T,k)=>u.jsxs("span",{className:"px-3 py-1 bg-parchment-100 dark:bg-dark-800 text-ink-700 dark:text-ink-200 rounded-full text-sm",children:["#",T]},k))}),u.jsxs("div",{className:"mt-8 space-y-4",children:[u.jsx("h2",{className:"font-display text-2xl font-bold",children:"Recent Chapters"}),I.filter(T=>T.published).slice(0,3).map(T=>u.jsxs(Ce,{to:`/stories/${s.id}/chapters/${T.id}`,className:"block p-4 bg-white dark:bg-dark-900 rounded-lg border border-parchment-200 dark:border-dark-700 hover:shadow-md transition-shadow",children:[u.jsx("h3",{className:"font-bold text-lg text-ink-900 dark:text-white mb-2 break-anywhere",children:T.title}),u.jsx("div",{className:"text-ink-600 dark:text-ink-300 text-sm line-clamp-2 mb-3 whitespace-pre-line break-anywhere",dangerouslySetInnerHTML:{__html:T.htmlPreview}}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-ink-500 dark:text-ink-400",children:[u.jsx("span",{children:_(T.publishedAt)}),u.jsxs("span",{children:[T.estimatedReadingTime," min read"]})]})]},T.id)),u.jsx("div",{className:"text-center pt-4",children:u.jsx(ot,{variant:"outline",size:"md",onClick:()=>r("chapters"),children:"View All Chapters"})})]})]})}):u.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"font-display text-2xl font-bold text-ink-900 dark:text-white mb-4",children:"All Chapters"}),I.map((T,k)=>u.jsxs("div",{className:`relative p-5 ${T.published?"bg-white dark:bg-dark-900":"bg-parchment-100 dark:bg-dark-800"} rounded-lg border ${T.published?"border-parchment-200 dark:border-dark-700":"border-parchment-300 dark:border-dark-600 border-dashed"}`,children:[u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400 font-bold text-sm mr-4",children:k+1}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("h3",{className:"font-bold text-lg text-ink-900 dark:text-white mb-2 break-anywhere",children:T.title}),u.jsx("div",{className:"text-ink-600 dark:text-ink-300 text-sm line-clamp-2 mb-3 whitespace-pre-line break-anywhere",dangerouslySetInnerHTML:{__html:T.htmlPreview}}),T.published?u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-y-4",children:[u.jsxs("div",{className:"flex items-center text-sm text-ink-500 dark:text-ink-400 space-x-4",children:[u.jsx("span",{children:_(T.publishedAt)}),T.estimatedReadingTime&&u.jsxs("span",{children:[T.estimatedReadingTime," min read"]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),T.votes]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),T.collectors]})]}),u.jsx(Ce,{to:`/stories/${s.id}/chapters/${T.id}`,className:"inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-400 transition-colors",children:"Read Chapter"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-500 dark:text-ink-400 italic",children:"Coming soon"}),u.jsx("button",{className:"inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium text-ink-600 dark:text-ink-300 bg-parchment-200 dark:bg-dark-700 cursor-not-allowed opacity-70",disabled:!0,children:"Not Released"})]})]})]}),T.published&&T.choices.length>0&&u.jsxs("div",{className:"mt-6 pt-4 border-t border-parchment-100 dark:border-dark-800",children:[u.jsx("h4",{className:"text-sm font-medium text-ink-700 dark:text-ink-200 mb-3",children:"Story Choices"}),u.jsx("div",{className:"space-y-2",children:T.choices.map(D=>u.jsxs("div",{className:"flex items-center p-3 bg-parchment-50 dark:bg-dark-800 rounded-md border border-parchment-200 dark:border-dark-700",children:[u.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-primary-500 mr-3"}),u.jsx("span",{className:"text-sm text-ink-800 dark:text-ink-100",children:D.text})]},D.id))})]})]},T.id))]})})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"sticky top-24",children:[u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-6 border border-parchment-200 dark:border-dark-700 shadow-sm mb-6",children:[u.jsx("h3",{className:"font-bold text-lg text-ink-900 dark:text-white mb-4",children:"Start Reading"}),u.jsxs("div",{className:"space-y-3 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-600 dark:text-ink-300",children:"Published"}),u.jsx("span",{className:"text-sm font-medium text-ink-900 dark:text-white",children:_(s.createdAt)})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-600 dark:text-ink-300",children:"Chapters"}),u.jsxs("span",{className:"text-sm font-medium text-ink-900 dark:text-white",children:[I.filter(T=>T.published).length," of"," ",I.length]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-600 dark:text-ink-300",children:"Views"}),u.jsx("span",{className:"text-sm font-medium text-ink-900 dark:text-white",children:s.viewCount})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-600 dark:text-ink-300",children:"Readers"}),u.jsx("span",{className:"text-sm font-medium text-ink-900 dark:text-white",children:s.readerCount||0})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-ink-600 dark:text-ink-300",children:"Last Updated"}),u.jsx("span",{className:"text-sm font-medium text-ink-900 dark:text-white",children:_(s.updatedAt)})]})]}),u.jsx("div",{className:"space-y-3",children:u.jsx(Ce,{to:I.length>0?`/stories/${s.id}/chapters/${I[0].id}`:`/stories/${s.id}`,className:"block w-full py-3 px-4 bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400 rounded-md text-center font-medium transition-colors",children:"Start Reading"})})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-6 border border-parchment-200 dark:border-dark-700 shadow-sm",children:[u.jsx("h3",{className:"font-bold text-lg text-ink-900 dark:text-white mb-4",children:"About the Author"}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("img",{src:s.creatorId?`https://i.pravatar.cc/150?u=${s.creatorId}`:By("Anonymous"),alt:((B=s.creatorEmail)==null?void 0:B.split("@")[0])||"Anonymous",className:"w-12 h-12 rounded-full mr-3 object-cover"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white",children:((j=s.creatorEmail)==null?void 0:j.split("@")[0])||"Anonymous"}),u.jsxs("p",{className:"text-sm text-ink-500 dark:text-ink-400",children:["Writer • ",s.creatorId?"1":"0"," Stories"]})]})]}),u.jsx("p",{className:"text-sm text-ink-600 dark:text-ink-300 mb-4",children:"Science fiction author specializing in quantum mechanics and multiverse theories. Former physicist with a passion for making complex concepts accessible through storytelling."}),u.jsx("button",{className:"block w-full py-2.5 px-4 bg-white hover:bg-gray-50 text-primary-600 dark:bg-dark-800 dark:hover:bg-dark-700 dark:text-primary-400 rounded-md text-center font-medium border border-primary-600 dark:border-primary-500 transition-colors",children:"Follow Author"})]})]})})]})]})})})},UX=async(t,e)=>{var n;if(!t||!e)return!1;try{const r=`${t}_${e}`,s=Ue(ke,"readRewardClaims",r),i=await nt(s);return i.exists()&&((n=i.data())==null?void 0:n.claimed)===!0}catch(r){return console.error("Error checking reward claim status:",r),!1}},$y=async(t,e,n,r)=>{var s,i;if(!(!t||!e||!n)){try{const a=Ue(ke,"stories",e),c=await nt(a);if(c.exists()&&c.data().creatorId===t)return}catch(a){console.error("Error checking creator status:",a)}try{const a=`${t}_${n}`,c=Ue(ke,"readRewardClaims",a),d=await nt(c);if(d.exists()){if((s=d.data())!=null&&s.claimed)return;const p=((i=d.data())==null?void 0:i.readTime)||0;if(r<=p)return}await Qr(c,{userId:t,storyId:e,chapterId:n,readTime:r,rewardAmount:5,claimed:!1,updatedAt:rt()},{merge:!0})}catch(a){console.error("Error tracking reading time:",a)}}},zX=async(t,e,n)=>{if(!t||!e||!n)return{success:!1,error:"Missing required parameters"};try{const r=Ue(ke,"stories",e),s=await nt(r);if(s.exists()&&s.data().creatorId===t)return{success:!1,error:"Creators cannot earn rewards for their own stories"}}catch(r){console.error("Error checking creator status:",r)}try{const r=`${t}_${n}`,s=Ue(ke,"readRewardClaims",r),i=await nt(s);if(!i.exists())return{success:!1,error:"No reading record found"};const a=i.data();if(a.claimed)return{success:!1,error:"Reward already claimed"};const c=await c5(n);if(a.readTime<c)return{success:!1,error:`You need to read for at least ${Math.round(c/60)} minutes to claim a reward`};const d=`0x${Array(64).fill(0).map(()=>Math.floor(Math.random()*16).toString(16)).join("")}`,f=Math.floor(Date.now()/1e3)+3600;return await Qr(s,{claimed:!0,claimedAt:rt(),signature:d,expiryTimestamp:f},{merge:!0}),{success:!0,signature:d,rewardAmount:a.rewardAmount,expiryTimestamp:f}}catch(r){return console.error("Error claiming reward:",r),{success:!1,error:r instanceof Error?r.message:"Failed to claim reward"}}},HX=t=>{if(!t)return 0;const n=t.split(/\s+/).filter(s=>s.length>0).length/200,r=Math.ceil(n*60*1.15);return Math.max(r,10)},WX=t=>{if(!t)return 1;const e=t.split(/[.!?]+/).filter(s=>s.trim().length>0);if(e.length===0)return 1;const r=e.reduce((s,i)=>s+i.split(/\s+/).filter(a=>a.length>0).length,0)/e.length;return r<10?1:r<15?1.1+(r-10)*.02:r<20?1.2+(r-15)*.02:Math.min(1.3+(r-20)*.01,1.5)},c5=async t=>{if(!t)return 0;try{const e=Ue(ke,"chapters",t),n=await nt(e);if(!n.exists())return console.error("Chapter not found"),10;const s=n.data().content||"",i=HX(s),a=WX(s),c=Math.ceil(i*a);return console.log(`Chapter ${t} read time: ${c} seconds (${Math.round(c/60)} minutes)`),c}catch(e){return console.error("Error getting required read time:",e),10}},u5=(t,e)=>!t||!e?!1:t===e,qX=(t,e)=>e?!u5(t,e):!1,GX=(t,e)=>e?!u5(t,e):!1,d5=({storyId:t,chapterId:e,creatorId:n,plotOptions:r,voteEndTime:s,onVote:i})=>{var re,le,te,q,ie,ne,z,J,me,_e,xe;const{currentUser:a}=Pn(),{isConnected:c,address:d,getWalletClient:f,getPublicClient:p}=Sh(),[y,x]=V.useState(null),[w,_]=V.useState("0.01"),[C,N]=V.useState(!1),[I,S]=V.useState(null),[M,U]=V.useState(!1),[H,B]=V.useState(""),[j,T]=V.useState({counts:[],total:0,percentages:[]}),[k,D]=V.useState(r),R=qX(n,a==null?void 0:a.uid)&&c,L=s?new Date<s:!0;V.useEffect(()=>{(async()=>{if(!(!(a!=null&&a.uid)||!e))try{const ye=await SX(e,a.uid);ye!==null&&(x(ye),U(!0))}catch(ye){console.error("Error checking vote status:",ye)}})()},[e,a]),V.useEffect(()=>{if(!e)return;const he=PX(e,ye=>{T(ye)});return()=>he()},[e]),V.useEffect(()=>{if(!s)return;const he=()=>{const je=new Date,Ve=s.getTime()-je.getTime();if(Ve<=0){B("Voting ended");return}const Ye=Math.floor(Ve/(1e3*60*60)),tt=Math.floor(Ve%(1e3*60*60)/(1e3*60)),Ft=Math.floor(Ve%(1e3*60)/1e3);B(`${Ye}h ${tt}m ${Ft}s remaining`)};he();const ye=setInterval(he,1e3);return()=>clearInterval(ye)},[s]),V.useEffect(()=>{(async()=>{if(!r||r.length===0)return;const ye=[...r];D(ye);const je=p();if(!je)return;const Ve=new vv;for(let Ye=0;Ye<ye.length;Ye++){const tt=ye[Ye];if(!tt.tokenAddress){ye[Ye]={...tt,isNotTradeable:!0,tradeabilityError:"Token not deployed yet"};continue}try{ye[Ye]={...tt,isChecking:!0},D([...ye]);const Ft=await Ve.checkTokenTradeability(tt.tokenAddress,je);console.log(`🔍 Tradeability check for ${tt.symbol}:`,Ft),ye[Ye]={...tt,isChecking:!1,isNotTradeable:!(Ft.isInitialized&&Ft.hasHookBalance&&Ft.poolExists),tradeabilityError:Ft.error||(Ft.isInitialized?Ft.hasHookBalance?Ft.poolExists?void 0:"Pool does not exist":"No liquidity available":"Pool not initialized")}}catch(Ft){console.error(`❌ Error checking tradeability for ${tt.symbol}:`,Ft),ye[Ye]={...tt,isChecking:!1,isNotTradeable:!0,tradeabilityError:"Failed to check tradeability"}}}D([...ye])})()},[r,c]);const O=he=>{if(!R||C||!L)return;const ye=k[he];if(ye!=null&&ye.isNotTradeable){S(`Cannot vote for ${ye.symbol}: ${ye.tradeabilityError}`);return}x(he),S(null)},Z=async()=>{if(!R||!L||y===null||!a||!t||!e||!d)return;const he=parseFloat(w);if(he<=0){S("Please enter a valid ETH amount");return}const ye=k==null?void 0:k[y];if(!(ye!=null&&ye.tokenAddress)){S("Token address not found for selected plot option");return}if(ye.isNotTradeable){S(`Cannot purchase tokens: ${ye.tradeabilityError}`);return}try{N(!0),S(null);const je=f(),Ve=p();if(!je||!Ve)throw new Error("Wallet not properly connected");const Ye=new vv,tt={chapterId:e,plotSymbol:ye.symbol,tokenAddress:ye.tokenAddress,voter:d,amount:1,orderSize:w};console.log("Purchasing tokens via ZoraService:",{plotOption:ye,ethAmount:he,userAddress:d,votePayload:tt}),await Ye.voteWithETH(tt,je,Ve),await _X({storyId:t,chapterId:e,choiceOptionIndex:y,userId:a.uid}),U(!0),i&&i(y,he),console.log("✅ Token purchase completed successfully")}catch(je){console.error("Error purchasing tokens:",je),S(je instanceof Error?`Failed to purchase tokens: ${je.message}`:"Failed to purchase tokens. Please try again.")}finally{N(!1)}};return u.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 p-6 mt-8",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("h3",{className:"text-xl font-display font-bold text-ink-900 dark:text-white",children:"Vote by Purchasing Plot Tokens"}),s&&u.jsx("div",{className:"text-right",children:u.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${L?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:H})})]}),!c&&u.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-md mb-4 border border-blue-200 dark:border-blue-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),u.jsx("p",{children:"Connect your wallet to purchase plot tokens and vote."})]})}),!R&&c&&u.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-md mb-4 border border-amber-200 dark:border-amber-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),u.jsx("p",{children:"As the creator of this story, you cannot purchase tokens or vote on plot directions."})]})}),!L&&u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-md mb-4 border border-red-200 dark:border-red-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),u.jsx("p",{children:"Voting has ended for this chapter. Tokens can now be sold."})]})}),I&&u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-md mb-4 border border-red-200 dark:border-red-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsx("p",{children:I})]})}),u.jsx("div",{className:"space-y-4 mb-6",children:k==null?void 0:k.map((he,ye)=>u.jsxs("div",{onClick:()=>!M&&L&&O(ye),className:`relative p-4 border rounded-lg transition-all ${y===ye?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 dark:border-primary-400":"border-parchment-200 dark:border-dark-700 hover:bg-parchment-50 dark:hover:bg-dark-800"} ${!R||M||!L?"cursor-default":"cursor-pointer"}`,children:[u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{className:"flex items-start flex-1",children:[u.jsx("div",{className:`w-5 h-5 rounded-full mr-3 mt-0.5 flex items-center justify-center border ${y===ye?"border-primary-500 bg-primary-500 dark:border-primary-400 dark:bg-primary-400":"border-parchment-300 dark:border-dark-600"}`,children:y===ye&&u.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white",children:he.name}),u.jsxs("span",{className:"px-2 py-1 text-xs font-mono bg-parchment-100 dark:bg-dark-800 text-ink-600 dark:text-ink-400 rounded",children:["$",he.symbol]}),he.isChecking?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-3 h-3 border border-blue-400 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Checking..."})]}):he.isNotTradeable?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Not Tradeable"})]}):he.tokenAddress?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),u.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Ready to Trade"})]}):null]}),he.isNotTradeable&&he.tradeabilityError&&u.jsx("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded text-xs border border-red-200 dark:border-red-900/30",children:u.jsxs("div",{className:"flex items-start gap-1",children:[u.jsx("svg",{className:"w-3 h-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsx("span",{children:he.tradeabilityError})]})}),M&&u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-ink-600 dark:text-ink-400",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Current Price:"}),u.jsx("span",{className:"ml-1",children:he.currentPrice?`${he.currentPrice.toFixed(6)} ETH`:"TBD"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium",children:"Total Votes:"}),u.jsx("span",{className:"ml-1",children:he.totalVotes||0})]}),he.volumeETH&&he.volumeETH>0&&u.jsxs("div",{className:"col-span-2",children:[u.jsx("span",{className:"font-medium",children:"Volume:"}),u.jsxs("span",{className:"ml-1",children:[he.volumeETH.toFixed(4)," ETH"]})]})]})]})]})}),M&&j.total>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"relative w-full h-2 bg-parchment-200 dark:bg-dark-700 rounded-full overflow-hidden",children:u.jsx(Ke.div,{initial:{width:0},animate:{width:`${j.percentages[ye]||0}%`},transition:{duration:.8,ease:"easeOut"},className:`absolute top-0 left-0 h-full ${y===ye?"bg-primary-500 dark:bg-primary-400":"bg-parchment-400 dark:bg-dark-500"}`})}),u.jsxs("div",{className:"flex justify-between items-center mt-1 text-xs text-ink-600 dark:text-ink-400",children:[u.jsxs("span",{children:[j.counts[ye]||0," vote",(j.counts[ye]||0)!==1?"s":""]}),u.jsxs("span",{className:"font-medium",children:[j.percentages[ye]||0,"%"]})]})]})]},ye))}),R&&L&&y!==null&&!M&&u.jsxs("div",{className:"mb-6 p-4 bg-parchment-50 dark:bg-dark-800 rounded-lg border border-parchment-200 dark:border-dark-700",children:[u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white mb-3",children:"Purchase Amount"}),(re=k==null?void 0:k[y])!=null&&re.tokenAddress?u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{htmlFor:"ethAmount",className:"block text-sm font-medium text-ink-700 dark:text-ink-300 mb-1",children:"ETH Amount"}),u.jsx("input",{id:"ethAmount",type:"number",step:"0.001",min:"0.001",value:w,onChange:he=>_(he.target.value),className:"w-full px-3 py-2 border border-parchment-300 dark:border-dark-600 rounded-md bg-white dark:bg-dark-700 text-ink-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.01"})]}),u.jsxs("div",{className:"text-sm text-ink-600 dark:text-ink-400",children:[u.jsxs("div",{children:["≈"," ",(le=k==null?void 0:k[y])!=null&&le.currentPrice?Math.floor(parseFloat(w)/k[y].currentPrice):"TBD"," ","tokens"]}),u.jsx("div",{className:"text-xs",children:"at current price"})]})]}):u.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-md mb-3 border border-amber-200 dark:border-amber-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),u.jsx("p",{className:"text-sm",children:"Plot option tokens are being deployed. Please check back shortly to purchase tokens and vote."})]})}),u.jsx("p",{className:"text-xs text-ink-500 dark:text-ink-400 mt-2",children:"Minimum purchase: 0.001 ETH. Tokens cannot be sold until voting ends."})]}),u.jsx("button",{onClick:Z,disabled:!R||!L||y===null||C||M||!((te=k==null?void 0:k[y||0])!=null&&te.tokenAddress)||((q=k==null?void 0:k[y||0])==null?void 0:q.isNotTradeable),className:`w-full py-3 px-4 font-medium rounded-md transition-colors ${!R||y===null||C||M||!((ie=k==null?void 0:k[y||0])!=null&&ie.tokenAddress)||(ne=k==null?void 0:k[y||0])!=null&&ne.isNotTradeable?"bg-parchment-200 text-ink-500 dark:bg-dark-700 dark:text-ink-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400"}`,children:C?"Purchasing Tokens...":M?"Tokens Purchased":y!==null&&!((z=k==null?void 0:k[y])!=null&&z.tokenAddress)?"Token not deployed yet":y!==null&&((J=k==null?void 0:k[y])!=null&&J.isNotTradeable)?`Cannot Trade ${(me=k==null?void 0:k[y])==null?void 0:me.symbol} - ${(_e=k==null?void 0:k[y])==null?void 0:_e.tradeabilityError}`:y!==null?`Purchase ${(xe=k==null?void 0:k[y])==null?void 0:xe.symbol} Tokens`:"Select Plot Option"}),u.jsx("p",{className:"text-sm text-ink-500 dark:text-ink-400 mt-3",children:"Purchase tokens to vote on the story direction. The plot option with the most token purchases wins and becomes the next chapter."})]})},KX=({storyId:t,chapterId:e,creatorId:n,readTime:r,requiredReadTime:s})=>{const{currentUser:i}=Pn(),[a,c]=V.useState(!1),[d,f]=V.useState(!1),[p,y]=V.useState(null),[x,w]=V.useState(!1),[_,C]=V.useState(!1),N=(i==null?void 0:i.uid)===n;V.useEffect(()=>{(async()=>{if(!(i!=null&&i.uid)||!e){f(!1);return}try{const U=await UX(i.uid,e);f(U)}catch(U){console.error("Error checking claim status:",U)}})()},[i,e]),V.useEffect(()=>{C(r>=s)},[r,s]);const I=async()=>{if(!(!(i!=null&&i.uid)||!t||!e)&&_)try{c(!0),y(null);const M=await zX(i.uid,t,e);M.success?(f(!0),w(!0),setTimeout(()=>{w(!1)},3e3)):y(M.error||"Failed to claim reward")}catch(M){console.error("Error claiming reward:",M),y(M instanceof Error?M.message:"Failed to claim reward")}finally{c(!1)}},S=M=>{const U=Math.floor(M/60),H=M%60;return`${U}:${H.toString().padStart(2,"0")}`};return s===0||N?null:u.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("h3",{className:"text-xl font-display font-bold text-ink-900 dark:text-white mb-4 flex items-center",children:[u.jsx("span",{children:"Earn PLOT Tokens"}),u.jsx("svg",{className:"ml-2 h-5 w-5 text-amber-500",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"})})]}),p&&u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-md mb-4 border border-red-200 dark:border-red-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsx("p",{children:p})]})}),x&&u.jsx(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-md mb-4 border border-green-200 dark:border-green-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),u.jsx("p",{children:"You successfully claimed 5 PLOT tokens!"})]})}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400 mb-4",children:_?"You've completed the required reading time! Claim your PLOT tokens as a reward.":"Continue reading to earn PLOT tokens as a reward."}),u.jsxs("div",{className:"mb-4 bg-parchment-100 dark:bg-dark-800 rounded-md p-3",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-ink-700 dark:text-ink-300",children:"Read Time Progress:"}),u.jsxs("span",{className:"font-medium text-ink-900 dark:text-ink-100",children:[S(Math.min(r,s))," /"," ",S(s),_&&u.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"✓ Complete"})]})]}),u.jsx("div",{className:"w-full bg-parchment-200 dark:bg-dark-700 rounded-full h-2.5",children:u.jsx("div",{className:`h-2.5 rounded-full transition-all duration-300 ${_?"bg-green-500":"bg-primary-500"}`,style:{width:`${Math.min(r/s*100,100)}%`}})})]}),u.jsx(ot,{variant:_?"primary":"secondary",onClick:I,disabled:!_||a||d,className:"w-full",children:a?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):d?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("svg",{className:"mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Reward Claimed"]}):_?"Claim 5 PLOT Tokens":"Keep Reading to Earn Reward"})]})})},YX=({storyId:t,chapterId:e,creatorId:n,choiceOptions:r=[],hasChoicePoint:s,readTime:i=0,requiredReadTime:a=0,chapter:c})=>{const{currentUser:d}=Pn(),[f,p]=V.useState(!1),[y,x]=V.useState(!1),[w,_]=V.useState(null),[C,N]=V.useState(!1),[I,S]=V.useState([]),[M,U]=V.useState({selectedOption:null,hasVoted:!1}),H=GX(n,d==null?void 0:d.uid);V.useEffect(()=>{(()=>{if(s&&r.length>0)if(c!=null&&c.plotTokens&&c.plotTokens.length>0){const k=c.plotTokens.map((D,R)=>({name:r[R]||D.name,symbol:D.symbol,tokenAddress:D.tokenAddress,currentPrice:.001,totalVotes:0,volumeETH:0}));console.log("Using plotTokens from chapter:",k),S(k)}else{console.log("No plotTokens found, showing choice options without tokens");const k=r.map((D,R)=>({name:D,symbol:`PLOT${R+1}`,tokenAddress:void 0,currentPrice:.001,totalVotes:0,volumeETH:0}));S(k)}})()},[s,r,c]),V.useEffect(()=>{(async()=>{if(!(d!=null&&d.uid)||!t||!e){x(!1);return}try{const k=await IX(t,e,d.uid);x(k)}catch(k){console.error("Error checking collection status:",k)}})()},[t,e,d]);const B=async()=>{var T,k;if(!(!H||!(d!=null&&d.uid)||!t||!e))try{p(!0),_(null),await CX(t,e,d.uid),x(!0);const D=((T=document.querySelector("h1"))==null?void 0:T.textContent)||"Unknown Story",R=((k=document.querySelector(".chapter-title"))==null?void 0:k.textContent)||"Unknown Chapter";await wv(d.uid,"collect_success",{storyId:t,storyTitle:D,chapterId:e,chapterTitle:R}),N(!0),setTimeout(()=>{N(!1)},3e3)}catch(D){console.error("Error collecting chapter:",D),_(D instanceof Error?D.message:"Failed to collect chapter")}finally{p(!1)}},j=async T=>{var k,D;if(!(!(d!=null&&d.uid)||!t||!e)){U({selectedOption:T,hasVoted:!0});try{const R=((k=document.querySelector("h1"))==null?void 0:k.textContent)||"Unknown Story",L=((D=document.querySelector(".chapter-title"))==null?void 0:D.textContent)||"Unknown Chapter",O=r[T]||"Unknown option";await wv(d.uid,"vote_results",{storyId:t,storyTitle:R,chapterId:e,chapterTitle:L,result:O})}catch(R){console.error("Error creating vote notification:",R)}}};return u.jsxs("div",{className:"space-y-8 mt-8",children:[u.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-display font-bold text-ink-900 dark:text-white mb-4",children:"Add This Chapter to Your Collection"}),!H&&u.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 rounded-md mb-4 border border-amber-200 dark:border-amber-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),u.jsx("p",{children:"As the creator of this story, you cannot collect your own chapters."})]})}),w&&u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 rounded-md mb-4 border border-red-200 dark:border-red-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsx("p",{children:w})]})}),C&&u.jsx(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-md mb-4 border border-green-200 dark:border-green-900/30",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),u.jsx("p",{children:"Chapter successfully added to your collection!"})]})}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400 mb-4",children:"Collecting chapters helps you keep track of stories you love and supports the creator."}),u.jsx("button",{onClick:B,disabled:!H||f||y,className:`w-full py-3 px-4 font-medium rounded-md transition-colors ${!H||f||y?"bg-parchment-200 text-ink-500 dark:bg-dark-700 dark:text-ink-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white dark:bg-primary-500 dark:hover:bg-primary-400"}`,children:f?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):y?u.jsxs("span",{className:"flex items-center justify-center",children:[u.jsx("svg",{className:"mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Added to Collection"]}):"Add to My Collection"})]})}),u.jsx(KX,{storyId:t,chapterId:e,creatorId:n,readTime:i,requiredReadTime:a}),s&&r.length>0&&u.jsx(d5,{storyId:t,chapterId:e,creatorId:n,plotOptions:I,currentVote:M.selectedOption,onVote:j})]})},QX=()=>{const{storyId:t,chapterId:e}=hm(),{currentUser:n}=Pn(),r=V.useRef(null),[s,i]=V.useState(!0),[a,c]=V.useState(null),[d,f]=V.useState(null),[p,y]=V.useState(null),[x,w]=V.useState([]),[_,C]=V.useState(0),[N,I]=V.useState(0),[S,M]=V.useState(0),[U,H]=V.useState(!1),[B,j]=V.useState(!1);V.useEffect(()=>{if(!e)return;(async()=>{try{const re=await c5(e);M(re)}catch(re){console.error("Error fetching required read time:",re)}})()},[e]),V.useEffect(()=>{if(!r.current||!p)return;const Z=()=>{const le=r.current;if(!le)return;const te=le.scrollHeight-le.clientHeight,q=le.scrollTop;let ie=0;te>0&&(ie=Math.min(Math.round(q/te*100),100)),C(ie),q>100&&!B?j(!0):q<=100&&B&&j(!1)},re=r.current;return re.addEventListener("scroll",Z),Z(),()=>{re.removeEventListener("scroll",Z)}},[p,r,B]),V.useEffect(()=>{if(!n||!t||!e||!p)return;const Z=()=>{_>0&&(n!=null&&n.uid)&&xA(n.uid,t,e,_)};return()=>{Z()}},[n,t,e,p,_]),V.useEffect(()=>{if(!n||!t||!e||!p)return;const Z=setInterval(()=>{_>0&&(n!=null&&n.uid)&&xA(n.uid,t,e,_)},3e4);return()=>clearInterval(Z)},[n,t,e,p,_]),V.useEffect(()=>{H(N>=S)},[N,S]),V.useEffect(()=>{if(!n||!t||!e||!p||!S)return;let Z=0,re=!1;const le=()=>{re=document.hidden};document.addEventListener("visibilitychange",le);const te=setInterval(()=>{!re&&Z<S&&(Z+=1,I(Z),Z%5===0&&(n!=null&&n.uid)&&$y(n.uid,t,e,Z),Z>=S&&$y(n.uid,t,e,S))},1e3);return()=>{document.removeEventListener("visibilitychange",le),clearInterval(te),n!=null&&n.uid&&Z>0&&$y(n.uid,t,e,Math.min(Z,S))}},[n,t,e,p,S]),V.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),r.current&&r.current.scrollTo({top:0,left:0,behavior:"smooth"})},[e]),V.useEffect(()=>{if(!t||!e){c("Missing story or chapter ID"),i(!1);return}i(!0),c(null);const Z=a5(t,te=>{te?f(te):c("Story not found")}),re=Yw(t,te=>{w(te)});return(async()=>{try{const te=await o5(e);te?y(te):c("Chapter not found"),i(!1)}catch(te){console.error("Error fetching chapter:",te),c("Failed to load chapter"),i(!1)}})(),()=>{Z(),re()}},[t,e]);const T=()=>{if(!p||!x.length)return null;const Z=x.findIndex(re=>re.id===p.id);return Z<=0?null:x[Z-1].id},k=()=>{if(!p||!x.length)return null;const Z=x.findIndex(re=>re.id===p.id);return Z===-1||Z>=x.length-1?null:x[Z+1].id},D=Z=>Z?(Z.toDate?Z.toDate():new Date(Z)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date",R=Z=>{if(Z<1)return`${Math.round(Z*1e3)} milliseconds`;if(Z<60)return`${Z} ${Z===1?"second":"seconds"}`;{const re=Math.floor(Z/60);return`${re} ${re===1?"min":"mins"}`}};if(s)return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16 flex justify-center items-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(a||!d||!p)return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-3xl mx-auto bg-white dark:bg-dark-900 rounded-xl p-8 shadow-sm border border-parchment-200 dark:border-dark-700 text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-ink-900 dark:text-white mb-4",children:a||"Chapter not found"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300 mb-6",children:"The chapter you're looking for might have been removed or doesn't exist."}),u.jsx(Ce,{to:t?`/stories/${t}`:"/stories",children:u.jsx(ot,{variant:"primary",children:"Back to Story"})})]})})});const L=T(),O=k();return u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16",children:[u.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-dark-900 border-b border-parchment-200 dark:border-dark-700 shadow-sm py-2",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsxs(Ce,{to:`/stories/${t}`,className:"inline-flex items-center text-ink-700 dark:text-ink-200 hover:text-primary-600 dark:hover:text-primary-400",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),u.jsx("span",{className:"font-medium text-sm hidden sm:inline",children:"Back to Story"})]}),u.jsx("div",{className:"hidden sm:block mx-4 h-5 w-px bg-parchment-300 dark:bg-dark-600"}),u.jsxs("div",{className:"hidden sm:block text-sm",children:[u.jsx("span",{className:"text-ink-500 dark:text-ink-400",children:d.title}),u.jsx("span",{className:"mx-2 text-ink-400 dark:text-ink-500",children:"•"}),u.jsx("span",{className:"text-ink-700 dark:text-ink-200",children:p.title})]})]}),u.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[L&&u.jsx(Ce,{to:`/stories/${t}/chapters/${L}`,className:"p-1.5 sm:p-2 rounded-md text-ink-600 dark:text-ink-300 hover:bg-parchment-100 dark:hover:bg-dark-800",title:"Previous Chapter",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),O&&u.jsx(Ce,{to:`/stories/${t}/chapters/${O}`,className:"p-1.5 sm:p-2 rounded-md text-ink-600 dark:text-ink-300 hover:bg-parchment-100 dark:hover:bg-dark-800",title:"Next Chapter",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})})}),u.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:B?1:0,y:B?0:20},transition:{duration:.3},className:"fixed bottom-6 right-6 z-30 bg-white dark:bg-dark-800 shadow-lg rounded-lg border border-parchment-200 dark:border-dark-600 overflow-hidden",children:u.jsxs("div",{className:"p-3 max-w-xs",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"text-sm font-medium text-ink-800 dark:text-white",children:"Reading Progress"}),U&&u.jsxs("span",{className:"text-green-600 dark:text-green-400 text-xs font-medium flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Complete!"]})]}),u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between text-xs text-ink-600 dark:text-ink-300 mb-1",children:[u.jsxs("span",{children:["Read Time: ",R(N)]}),u.jsxs("span",{children:["Required: ",R(S)]})]}),u.jsx("div",{className:"w-full bg-parchment-200 dark:bg-dark-700 rounded-full h-2",children:u.jsx("div",{className:`h-2 rounded-full ${U?"bg-green-500 dark:bg-green-600":"bg-primary-600 dark:bg-primary-500"}`,style:{width:`${Math.min(N/S*100,100)}%`}})})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs text-ink-600 dark:text-ink-300 mb-1",children:[u.jsx("span",{children:"Page Progress"}),u.jsxs("span",{children:[_,"%"]})]}),u.jsx("div",{className:"w-full bg-parchment-200 dark:bg-dark-700 rounded-full h-2",children:u.jsx("div",{className:"bg-primary-600 dark:bg-primary-500 h-2 rounded-full",style:{width:`${_}%`}})})]})]})}),u.jsx("div",{className:"container mx-auto px-4 sm:px-6 mt-8",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-display font-bold text-ink-900 dark:text-white mb-4 chapter-title",children:p.title}),u.jsxs("div",{className:"flex items-center text-sm text-ink-600 dark:text-ink-300",children:[u.jsx("span",{children:D(p.createdAt)}),u.jsx("span",{className:"mx-2",children:"•"}),u.jsxs("span",{children:[S>0?R(S):Math.ceil(p.content.split(" ").length/200)+" min"," ","read"]}),U&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mx-2",children:"•"}),u.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Read Complete"]})]})]})]}),u.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-16 max-h-[70vh] overflow-y-auto border border-parchment-200 dark:border-dark-700 rounded-lg p-6 bg-white dark:bg-dark-900 shadow-sm",ref:r,children:u.jsx("div",{className:"prose prose-lg prose-brown dark:prose-invert max-w-none whitespace-pre-line break-anywhere",dangerouslySetInnerHTML:{__html:p.content}})}),u.jsx("div",{className:"border-t border-parchment-200 dark:border-dark-700 pt-8 mb-12",children:u.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[L&&u.jsxs(Ce,{to:`/stories/${t}/chapters/${L}`,className:"inline-flex items-center justify-center px-4 py-2 bg-parchment-100 dark:bg-dark-800 text-ink-800 dark:text-ink-200 rounded-md text-sm font-medium hover:bg-parchment-200 dark:hover:bg-dark-700 transition-colors",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous Chapter"]}),O&&u.jsxs(Ce,{to:`/stories/${t}/chapters/${O}`,className:"inline-flex items-center justify-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm font-medium transition-colors",children:["Next Chapter",u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})}),u.jsx(YX,{storyId:t,chapterId:e,creatorId:d.creatorId,choiceOptions:p.choiceOptions,hasChoicePoint:p.hasChoicePoint,readTime:N,requiredReadTime:S,chapter:p}),u.jsx("div",{className:"text-center",children:u.jsxs(Ce,{to:`/stories/${t}`,className:"inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to ",d.title]})})]})})]})},pp=({title:t,description:e,actionLabel:n,actionLink:r,action:s,icon:i,className:a=""})=>u.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-parchment-200 dark:border-dark-700 p-8 text-center ${a}`,children:[i&&u.jsx("div",{className:"mx-auto mb-4 flex justify-center",children:i}),u.jsx("h4",{className:"text-lg font-medium text-ink-900 dark:text-white mb-2",children:t}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400 mb-6",children:e}),s||(n&&r?u.jsx(Ce,{to:r,children:u.jsx(ot,{variant:"primary",children:n})}):null)]}),XX=({userId:t})=>{const{isConnected:e}=Sh(),[n,r]=V.useState([]),[s,i]=V.useState(!0),[a,c]=V.useState(null);V.useEffect(()=>{t&&e&&d()},[t,e]);const d=async()=>{i(!0);try{const x=[{chapterId:"chapter1",storyTitle:"The Shadow Beyond",chapterTitle:"Chapter 3: The Choice",plotSymbol:"HEAL",plotName:"The Healer's Path",tokenAddress:"0x123...",tokenCount:50,purchasePrice:.05,currentValue:.08,profitLoss:.03,canSell:!1,voteEndTime:new Date(Date.now()+432e5),isWinningOption:void 0},{chapterId:"chapter2",storyTitle:"Digital Dreams",chapterTitle:"Chapter 2: The Algorithm",plotSymbol:"CODE",plotName:"Code the Future",tokenAddress:"0x456...",tokenCount:25,purchasePrice:.03,currentValue:.02,profitLoss:-.01,canSell:!0,voteEndTime:new Date(Date.now()-72e5),isWinningOption:!0}];r(x)}catch(x){console.error("Error fetching token holdings:",x)}finally{i(!1)}},f=async x=>{if(x.canSell)try{console.log("Selling tokens for:",x.plotSymbol),c(null),await d()}catch(w){console.error("Error selling tokens:",w)}},p=x=>{const w=new Date,_=x.getTime()-w.getTime();if(_<=0)return"Voting ended";const C=Math.floor(_/(1e3*60*60)),N=Math.floor(_%(1e3*60*60)/(1e3*60));return`${C}h ${N}m remaining`},y=x=>`${x.toFixed(4)} ETH`;return e?s?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading token holdings..."})]}):n.length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No token holdings found. Start voting on plot options to build your portfolio!"})}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Your Token Holdings"}),u.jsx("button",{onClick:d,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Refresh"})]}),u.jsx("div",{className:"grid gap-4",children:n.map((x,w)=>u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:x.storyTitle}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.chapterTitle})]}),u.jsx("div",{className:"text-right",children:u.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x.canSell?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:x.canSell?"Can Sell":p(x.voteEndTime)})})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Plot Option"}),u.jsx("p",{className:"font-medium",children:x.plotName}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.plotSymbol})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tokens Owned"}),u.jsx("p",{className:"font-medium",children:x.tokenCount})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Purchase Price"}),u.jsx("p",{className:"font-medium",children:y(x.purchasePrice)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Current Value"}),u.jsx("p",{className:"font-medium",children:y(x.currentValue)})]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"P&L:"}),u.jsxs("span",{className:`font-medium ${x.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[x.profitLoss>=0?"+":"",y(x.profitLoss)]}),x.isWinningOption===!0&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Winner"})]}),x.canSell&&u.jsx("button",{onClick:()=>c(x),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sell Tokens"})]})]},`${x.chapterId}-${x.plotSymbol}`))}),a&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[u.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sell Tokens"}),u.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Are you sure you want to sell ",a.tokenCount," ",a.plotSymbol," tokens?"]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:"Current Value:"}),u.jsx("span",{children:y(a.currentValue)})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:"Estimated P&L:"}),u.jsxs("span",{className:a.profitLoss>=0?"text-green-600":"text-red-600",children:[a.profitLoss>=0?"+":"",y(a.profitLoss)]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>c(null),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:()=>f(a),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Sell Tokens"})]})]})})]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to view token holdings"})})},ZX=()=>{const[t,e]=V.useState("collections"),[n,r]=V.useState([]),[s,i]=V.useState([]),[a,c]=V.useState([]),[d,f]=V.useState([]),[p,y]=V.useState(!0),[x,w]=V.useState(!0),[_,C]=V.useState(!0),[N,I]=V.useState(!0),{currentUser:S}=Pn();V.useEffect(()=>S?(y(!0),jX(S.uid,j=>{r(j),y(!1)})):(r([]),y(!1),()=>{}),[S]),V.useEffect(()=>S?(w(!0),DX(S.uid,j=>{i(j),w(!1)})):(i([]),w(!1),()=>{}),[S]),V.useEffect(()=>S?(C(!0),MX(S.uid,j=>{c(j),C(!1)})):(c([]),C(!1),()=>{}),[S]),V.useEffect(()=>S?(I(!0),OX(S.uid,j=>{f(j),I(!1)})):(f([]),I(!1),()=>{}),[S]);const M=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),U=B=>new Date(B).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),H=()=>{switch(t){case"collections":return u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p?u.jsx("div",{className:"col-span-full flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):n.length===0?u.jsx(pp,{title:"No collections yet",description:"Start collecting chapters from your favorite stories to see them here.",action:u.jsx(Ce,{to:"/stories",children:u.jsx(ot,{variant:"primary",children:"Browse Stories"})})}):n.map(B=>u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-md border border-parchment-200 dark:border-dark-700",children:[u.jsxs(Ce,{to:`/stories/${B.storyId}`,className:"block relative pt-[60%] overflow-hidden",children:[u.jsx("img",{src:B.coverImage,alt:B.storyTitle,className:"absolute inset-0 w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-950/80 to-transparent"}),u.jsxs("div",{className:"absolute bottom-0 left-0 p-4 text-white",children:[u.jsx("h3",{className:"text-lg font-bold mb-1",children:B.storyTitle}),u.jsxs("p",{className:"text-sm opacity-90",children:["by ",B.author]})]})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("span",{className:"text-sm text-ink-600 dark:text-ink-300",children:"Collected:"}),u.jsxs("span",{className:"text-sm font-medium",children:[B.collectedChapters," of"," ",B.totalChapters," chapters"]})]}),u.jsx("div",{className:"w-full bg-parchment-200 dark:bg-dark-700 rounded-full h-2 mb-4",children:u.jsx("div",{className:"bg-primary-600 dark:bg-primary-500 h-2 rounded-full",style:{width:`${B.collectedChapters/B.totalChapters*100}%`}})}),u.jsx(Ce,{to:`/stories/${B.storyId}`,children:u.jsx(ot,{variant:"primary",fullWidth:!0,children:"Continue Reading"})})]})]},B.id))});case"reading":return u.jsx("div",{className:"space-y-4",children:x?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):s.length===0?u.jsx(pp,{title:"No reading history yet",description:"Start reading stories to track your progress here.",action:u.jsx(Ce,{to:"/stories",children:u.jsx(ot,{variant:"primary",children:"Browse Stories"})})}):s.map(B=>u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-lg overflow-hidden shadow-sm border border-parchment-200 dark:border-dark-700 flex flex-col sm:flex-row",children:[u.jsx("div",{className:"w-full sm:w-1/4 md:w-1/5 relative",children:u.jsx("img",{src:B.coverImage,alt:B.storyTitle,className:"w-full h-40 sm:h-full object-cover"})}),u.jsxs("div",{className:"p-4 sm:p-5 flex-1 flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-1",children:B.storyTitle}),u.jsx("p",{className:"text-primary-600 dark:text-primary-400 font-medium",children:B.chapterTitle})]}),u.jsx("span",{className:"text-sm text-ink-500 dark:text-ink-400 mt-1 sm:mt-0",children:M(B.readAt)})]}),u.jsxs("div",{className:"mt-3",children:[u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-ink-600 dark:text-ink-300",children:"Progress"}),u.jsxs("span",{className:"font-medium",children:[B.progress,"%"]})]}),u.jsx("div",{className:"w-full bg-parchment-200 dark:bg-dark-700 rounded-full h-2",children:u.jsx("div",{className:"bg-primary-600 dark:bg-primary-500 h-2 rounded-full",style:{width:`${B.progress}%`}})})]})]}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx(Ce,{to:`/stories/${B.storyId}/chapters/${B.chapterId}`,children:u.jsx(ot,{variant:"primary",size:"sm",children:B.progress<100?"Continue Reading":"Read Again"})})})]})]},B.id))});case"voting":return u.jsx("div",{className:"space-y-4",children:_?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):a.length===0?u.jsx(pp,{title:"No voting history yet",description:"Vote on story choices to influence how they develop!",action:u.jsx(Ce,{to:"/stories",children:u.jsx(ot,{variant:"primary",children:"Browse Stories"})})}):a.map(B=>u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-lg overflow-hidden shadow-sm border border-parchment-200 dark:border-dark-700 flex flex-col sm:flex-row",children:[u.jsxs("div",{className:"w-full sm:w-1/4 md:w-1/5 relative",children:[u.jsx("img",{src:B.coverImage,alt:B.storyTitle,className:"w-full h-40 sm:h-full object-cover"}),u.jsx("div",{className:"absolute top-2 right-2 bg-primary-600 dark:bg-primary-500 text-white text-xs px-2 py-1 rounded-full",children:"Voted"})]}),u.jsxs("div",{className:"p-4 sm:p-5 flex-1",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-1",children:B.storyTitle}),u.jsx("p",{className:"text-primary-600 dark:text-primary-400 font-medium",children:B.chapterTitle})]}),u.jsx("span",{className:"text-sm text-ink-500 dark:text-ink-400 mt-1 sm:mt-0",children:M(B.votedAt)})]}),u.jsxs("div",{className:"mt-4 p-3 bg-parchment-50 dark:bg-dark-800 rounded-lg border border-parchment-200 dark:border-dark-700",children:[u.jsxs("p",{className:"text-sm text-ink-700 dark:text-ink-200 mb-2",children:[u.jsx("span",{className:"font-medium",children:"Your choice:"})," ",B.choice]}),u.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[u.jsx("span",{className:"text-ink-600 dark:text-ink-300",children:"Vote results"}),u.jsxs("span",{className:"font-medium",children:[Math.round(B.choiceVotes/B.totalVotes*100),"%"]})]}),u.jsx("div",{className:"w-full bg-parchment-200 dark:bg-dark-700 rounded-full h-2",children:u.jsx("div",{className:"bg-primary-600 dark:bg-primary-500 h-2 rounded-full",style:{width:`${B.choiceVotes/B.totalVotes*100}%`}})})]}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx(Ce,{to:`/stories/${B.storyId}`,children:u.jsx(ot,{variant:"outline",size:"sm",children:"View Story"})})})]})]},B.id))});case"tokens":return u.jsx(XX,{userId:(S==null?void 0:S.uid)||""});case"notifications":return u.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 overflow-hidden",children:N?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):d.length===0?u.jsx(pp,{title:"No notifications yet",description:"You'll receive notifications about new chapters, voting results, and more."}):u.jsx("ul",{className:"divide-y divide-parchment-200 dark:divide-dark-700",children:d.map(B=>u.jsx("li",{className:`p-4 sm:p-5 ${B.read?"":"bg-primary-50 dark:bg-primary-900/10"}`,children:u.jsxs("div",{className:"flex items-start",children:[u.jsxs("div",{className:`mt-1 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${B.type==="chapter_published"?"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400":B.type==="vote_results"?"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":B.type==="collect_success"?"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400"}`,children:[B.type==="chapter_published"&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),B.type==="vote_results"&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})}),B.type==="collect_success"&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"})}),B.type==="author_update"&&u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"})})]}),u.jsxs("div",{className:"ml-4 flex-1",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between",children:[u.jsxs("p",{className:"text-sm font-medium text-ink-900 dark:text-white",children:[B.type==="chapter_published"&&"New Chapter Published",B.type==="vote_results"&&"Voting Results",B.type==="collect_success"&&"Chapter Collected",B.type==="author_update"&&"Author Update"]}),u.jsxs("p",{className:"text-xs text-ink-500 dark:text-ink-400 mt-1 sm:mt-0",children:[M(B.timestamp)," at"," ",U(B.timestamp)]})]}),u.jsxs("p",{className:"mt-2 text-sm text-ink-700 dark:text-ink-200",children:[B.type==="chapter_published"&&u.jsxs(u.Fragment,{children:["A new chapter"," ",u.jsx("strong",{children:B.chapterTitle})," has been published for"," ",u.jsx("strong",{children:B.storyTitle}),"."]}),B.type==="vote_results"&&u.jsxs(u.Fragment,{children:["The voting results are in for"," ",u.jsx("strong",{children:B.storyTitle}),":",u.jsx("strong",{children:B.result})," won!"]}),B.type==="collect_success"&&u.jsxs(u.Fragment,{children:["You successfully collected"," ",u.jsx("strong",{children:B.chapterTitle})," from",u.jsxs("strong",{children:[" ",B.storyTitle]}),"."]}),B.type==="author_update"&&u.jsxs(u.Fragment,{children:[u.jsx("strong",{children:B.authorName}),":"," ",B.message]})]}),u.jsx("div",{className:"mt-2",children:u.jsx(Ce,{to:`/stories/${B.storyId}`,className:"text-xs font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300",children:"View Story →"})})]}),!B.read&&u.jsx("div",{className:"ml-3 flex-shrink-0",children:u.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full"})})]})},B.id))})});default:return null}};return u.jsx("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 pt-24 pb-16",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-ink-900 dark:text-white mb-2",children:"Reader Dashboard"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300",children:"Track your collection, reading progress, and voting history."})]}),u.jsx("div",{className:"mb-6 border-b border-parchment-200 dark:border-dark-700 overflow-x-auto",children:u.jsxs("div",{className:"flex -mb-px whitespace-nowrap",children:[u.jsx("button",{className:`mr-4 sm:mr-8 py-4 px-1 text-sm font-medium border-b-2 ${t==="collections"?"border-primary-600 dark:border-primary-400 text-primary-600 dark:text-primary-400":"border-transparent text-ink-500 hover:text-ink-700 dark:text-ink-400 dark:hover:text-ink-200"}`,onClick:()=>e("collections"),children:"Collections"}),u.jsxs("button",{className:`mr-4 sm:mr-8 py-4 px-1 text-sm font-medium border-b-2 ${t==="reading"?"border-primary-600 dark:border-primary-400 text-primary-600 dark:text-primary-400":"border-transparent text-ink-500 hover:text-ink-700 dark:text-ink-400 dark:hover:text-ink-200"}`,onClick:()=>e("reading"),children:[u.jsx("span",{className:"hidden xs:inline",children:"Reading History"}),u.jsx("span",{className:"xs:hidden",children:"Reading"})]}),u.jsxs("button",{className:`mr-4 sm:mr-8 py-4 px-1 text-sm font-medium border-b-2 ${t==="voting"?"border-primary-600 dark:border-primary-400 text-primary-600 dark:text-primary-400":"border-transparent text-ink-500 hover:text-ink-700 dark:text-ink-400 dark:hover:text-ink-200"}`,onClick:()=>e("voting"),children:[u.jsx("span",{className:"hidden xs:inline",children:"Voting History"}),u.jsx("span",{className:"xs:hidden",children:"Voting"})]}),u.jsxs("button",{className:`mr-4 sm:mr-8 py-4 px-1 text-sm font-medium border-b-2 ${t==="tokens"?"border-primary-600 dark:border-primary-400 text-primary-600 dark:text-primary-400":"border-transparent text-ink-500 hover:text-ink-700 dark:text-ink-400 dark:hover:text-ink-200"}`,onClick:()=>e("tokens"),children:[u.jsx("span",{className:"hidden xs:inline",children:"Token Holdings"}),u.jsx("span",{className:"xs:hidden",children:"Tokens"})]}),u.jsxs("button",{className:`py-4 px-1 text-sm font-medium border-b-2 ${t==="notifications"?"border-primary-600 dark:border-primary-400 text-primary-600 dark:text-primary-400":"border-transparent text-ink-500 hover:text-ink-700 dark:text-ink-400 dark:hover:text-ink-200"}`,onClick:()=>e("notifications"),children:[u.jsx("span",{className:"hidden xs:inline",children:"Notifications"}),u.jsx("span",{className:"xs:hidden",children:"Alerts"}),d.filter(B=>!B.read).length>0&&u.jsx("span",{className:"ml-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-primary-600 dark:bg-primary-500 rounded-full",children:d.filter(B=>!B.read).length})]})]})}),u.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:H()},t)]})})},JX=({userId:t})=>{const{isConnected:e}=Sh(),[n,r]=V.useState([]),[s,i]=V.useState([]),[a,c]=V.useState(!0),[d,f]=V.useState("created"),[p,y]=V.useState(null);V.useEffect(()=>{t&&e&&(x(),w())},[t,e]);const x=async()=>{try{const I=[{chapterId:"chapter1",storyTitle:"The Shadow Beyond",chapterTitle:"Chapter 3: The Choice",plotOptions:[{symbol:"HEAL",name:"The Healer's Path",tokenAddress:"0x123...",allocatedTokens:100,currentValue:.15,totalVotes:45,isWinning:!0},{symbol:"GUARD",name:"The Guardian's Mantle",tokenAddress:"0x456...",allocatedTokens:100,currentValue:.08,totalVotes:23,isWinning:!1}],voteEndTime:new Date(Date.now()+288e5),canSell:!1,createdAt:new Date(Date.now()-576e5)},{chapterId:"chapter2",storyTitle:"The Shadow Beyond",chapterTitle:"Chapter 4: The Aftermath",plotOptions:[{symbol:"PEACE",name:"Path of Peace",tokenAddress:"0x789...",allocatedTokens:100,currentValue:.12,totalVotes:67,isWinning:!0},{symbol:"WAR",name:"Path of War",tokenAddress:"0xabc...",allocatedTokens:100,currentValue:.05,totalVotes:34,isWinning:!1}],voteEndTime:new Date(Date.now()-72e5),canSell:!0,createdAt:new Date(Date.now()-936e5)}];r(I)}catch(I){console.error("Error fetching writer assets:",I)}},w=async()=>{try{i([{chapterId:"other-chapter1",storyTitle:"Digital Dreams",chapterTitle:"Chapter 2: The Algorithm",plotSymbol:"CODE",plotName:"Code the Future",tokenAddress:"0xdef...",tokenCount:25,purchasePrice:.03,currentValue:.05,profitLoss:.02,canSell:!0,isWinningOption:!0}])}catch(I){console.error("Error fetching purchased tokens:",I)}finally{c(!1)}},_=I=>{const S=new Date,M=I.getTime()-S.getTime();if(M<=0)return"Voting ended";const U=Math.floor(M/(1e3*60*60)),H=Math.floor(M%(1e3*60*60)/(1e3*60));return`${U}h ${H}m remaining`},C=I=>`${I.toFixed(4)} ETH`,N=I=>I.plotOptions.reduce((S,M)=>S+M.allocatedTokens*M.currentValue/100,0);return e?a?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),u.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading your assets..."})]}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex space-x-1 bg-parchment-100 dark:bg-dark-800 rounded-lg p-1",children:[u.jsxs("button",{onClick:()=>f("created"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-colors ${d==="created"?"bg-white dark:bg-dark-700 text-ink-900 dark:text-white shadow-sm":"text-ink-600 dark:text-ink-400 hover:text-ink-900 dark:hover:text-white"}`,children:["Created Assets (",n.length,")"]}),u.jsxs("button",{onClick:()=>f("purchased"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-md transition-colors ${d==="purchased"?"bg-white dark:bg-dark-700 text-ink-900 dark:text-white shadow-sm":"text-ink-600 dark:text-ink-400 hover:text-ink-900 dark:hover:text-white"}`,children:["Purchased Tokens (",s.length,")"]})]}),d==="created"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Your Created Plot Options"}),u.jsx("button",{onClick:x,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Refresh"})]}),n.length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No created assets found. Create a chapter with plot options to start earning!"})}):u.jsx("div",{className:"grid gap-6",children:n.map(I=>u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-lg",children:I.storyTitle}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:I.chapterTitle}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:["Created ",I.createdAt.toLocaleDateString()]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${I.canSell?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:I.canSell?"Can Sell":_(I.voteEndTime)}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Total Value: ",C(N(I))]})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:I.plotOptions.map(S=>u.jsxs("div",{className:`border rounded-lg p-4 ${S.isWinning?"border-green-300 bg-green-50 dark:border-green-700 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("h5",{className:"font-medium",children:S.name}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.symbol})]}),S.isWinning&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Leading"})]}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your Tokens:"}),u.jsx("span",{className:"font-medium",children:S.allocatedTokens})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Votes:"}),u.jsx("span",{className:"font-medium",children:S.totalVotes})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Token Value:"}),u.jsx("span",{className:"font-medium",children:C(S.currentValue/100)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Your Value:"}),u.jsx("span",{className:"font-medium",children:C(S.allocatedTokens*S.currentValue/100)})]})]}),I.canSell&&u.jsxs("button",{onClick:()=>y(I),className:"w-full mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Sell ",S.symbol," Tokens"]})]},S.symbol))})]},I.chapterId))})]}),d==="purchased"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Tokens You Purchased"}),s.length===0?u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No purchased tokens found. Vote on other stories to build your portfolio!"})}):u.jsx("div",{className:"grid gap-4",children:s.map((I,S)=>u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:I.storyTitle}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.chapterTitle})]}),I.isWinningOption&&u.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Winner"})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Plot Option"}),u.jsx("p",{className:"font-medium",children:I.plotName}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:I.plotSymbol})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tokens"}),u.jsx("p",{className:"font-medium",children:I.tokenCount})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Purchase Price"}),u.jsx("p",{className:"font-medium",children:C(I.purchasePrice)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Current Value"}),u.jsx("p",{className:"font-medium",children:C(I.currentValue)})]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"P&L:"}),u.jsxs("span",{className:`font-medium ${I.profitLoss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[I.profitLoss>=0?"+":"",C(I.profitLoss)]})]}),I.canSell&&u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sell Tokens"})]})]},`${I.chapterId}-${I.plotSymbol}`))})]})]}):u.jsx("div",{className:"text-center py-8",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your wallet to view your assets"})})},eZ=()=>{const[t,e]=V.useState("stories"),[n,r]=V.useState([]),[s,i]=V.useState([]),[a,c]=V.useState(!0),[d,f]=V.useState(null),[p,y]=V.useState(null),[x,w]=V.useState(!0),[_,C]=V.useState(!0),{currentUser:N}=Pn(),I=bo();V.useEffect(()=>{if(!N){I("/");return}c(!0),f(null);const j=yA(N.uid,T=>{r(T),c(!1)},!0);return()=>{j()}},[N,I]),V.useEffect(()=>{if(!N)return;w(!0);const j=RX(N.uid,T=>{y(T),w(!1)});return()=>{j()}},[N]),V.useEffect(()=>{if(!N)return;C(!0);const j=yA(N.uid,T=>{if(T.length===0){i([]),C(!1);return}let k=[],D=[],R=0;T.forEach(L=>{if(!L.id)return;const O=Yw(L.id,Z=>{const re=Z.filter(le=>!le.published).map(le=>({id:le.id,storyId:L.id,storyTitle:L.title,title:le.title,preview:le.content.substring(0,100),status:"in-progress",wordCount:le.content.split(/\s+/).length,lastEdited:le.updatedAt?le.updatedAt.toDate().toISOString():new Date().toISOString(),choices:le.choiceOptions?le.choiceOptions.map((te,q)=>({id:`${le.id}-option-${q}`,text:te,votes:0})):[]}));k=k.filter(le=>le.storyId!==L.id),k=[...k,...re],i(k),R++,R>=T.length&&C(!1)},!1);D.push(O)}),D.length===0&&C(!1)},!0);return()=>{j()}},[N]);const S=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),M=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date",U=j=>j.published?j.chapterCount>0?u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"In Progress"}):u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Completed"}):u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Draft"}),H=j=>{switch(j){case"in-progress":return u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"In Progress"});case"outline":return u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"Outline"});case"ready":return u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:"Ready to Publish"});default:return null}},B=()=>{var j,T;switch(t){case"stories":return u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h3",{className:"text-xl font-bold text-ink-900 dark:text-white",children:"My Stories"}),u.jsx(Ce,{to:"/creator/new-story",children:u.jsxs(ot,{variant:"primary",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Create New Story"]})})]}),a?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):d?u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-4 rounded-md",children:[u.jsx("p",{className:"font-medium",children:"Error loading stories"}),u.jsx("p",{className:"text-sm mt-1",children:d})]}):n.length===0?u.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-parchment-200 dark:border-dark-700 p-8 text-center",children:[u.jsx("h4",{className:"text-lg font-medium text-ink-900 dark:text-white mb-2",children:"You haven't created any stories yet"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400 mb-6",children:"Create your first story and start your journey as a PlotMint creator"}),u.jsx(Ce,{to:"/creator/new-story",children:u.jsxs(ot,{variant:"primary",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Create New Story"]})})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(k=>u.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow border border-parchment-200 dark:border-dark-700",children:[u.jsxs("div",{className:"relative h-40 overflow-hidden",children:[u.jsx("img",{src:k.coverImage,alt:k.title,className:"w-full h-full object-cover transform hover:scale-105 transition-transform duration-300"}),u.jsx("div",{className:"absolute top-3 right-3",children:U(k)})]}),u.jsxs("div",{className:"p-5",children:[u.jsx("h4",{className:"text-lg font-bold text-ink-900 dark:text-white mb-2 line-clamp-1",children:k.title}),u.jsxs("div",{className:"flex flex-col space-y-1 mb-4 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-ink-600 dark:text-ink-400",children:"Chapters:"}),u.jsx("span",{className:"text-ink-900 dark:text-white font-medium",children:k.chapterCount})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-ink-600 dark:text-ink-400",children:"Readers:"}),u.jsx("span",{className:"text-ink-900 dark:text-white font-medium",children:k.viewCount})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-ink-600 dark:text-ink-400",children:"Collectors:"}),u.jsx("span",{className:"text-ink-900 dark:text-white font-medium",children:k.collectCount})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-ink-600 dark:text-ink-400",children:"Last updated:"}),u.jsx("span",{className:"text-ink-900 dark:text-white font-medium",children:M(k.updatedAt)})]})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx(Ce,{to:`/stories/${k.id}`,className:"flex-1 text-center py-2 px-3 bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 rounded-md text-sm font-medium hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors",children:"View"}),u.jsx(Ce,{to:`/creator/new-chapter?storyId=${k.id}`,className:"flex-1 text-center py-2 px-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm font-medium transition-colors",children:"Add Chapter"})]})]})]},k.id))})]});case"analytics":return u.jsx("div",{className:"space-y-8",children:x?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid grid-cols-2 xs:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[u.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-3 sm:p-6 shadow-sm border border-parchment-200 dark:border-dark-700",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-1.5 sm:p-2 bg-primary-100 dark:bg-primary-900/20 rounded-lg",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-6 sm:w-6 text-primary-600 dark:text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),u.jsxs("div",{className:"ml-2 sm:ml-4",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium text-ink-500 dark:text-ink-400",children:"Total Readers"}),u.jsxs("div",{className:"flex items-end",children:[u.jsx("p",{className:"text-lg sm:text-2xl font-bold text-ink-900 dark:text-white",children:(p==null?void 0:p.totalReaders)||0}),u.jsxs("span",{className:"ml-1 sm:ml-2 text-xs font-medium text-green-600 dark:text-green-400",children:["+",(p==null?void 0:p.readerGrowth)||0,"%"]})]})]})]})}),u.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-3 sm:p-6 shadow-sm border border-parchment-200 dark:border-dark-700",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-1.5 sm:p-2 bg-secondary-100 dark:bg-secondary-900/20 rounded-lg",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-6 sm:w-6 text-secondary-600 dark:text-secondary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),u.jsxs("div",{className:"ml-2 sm:ml-4",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium text-ink-500 dark:text-ink-400",children:"Collectors"}),u.jsxs("div",{className:"flex items-end",children:[u.jsx("p",{className:"text-lg sm:text-2xl font-bold text-ink-900 dark:text-white",children:(p==null?void 0:p.totalCollectors)||0}),u.jsxs("span",{className:"ml-1 sm:ml-2 text-xs font-medium text-green-600 dark:text-green-400",children:["+",(p==null?void 0:p.collectorGrowth)||0,"%"]})]})]})]})}),u.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-3 sm:p-6 shadow-sm border border-parchment-200 dark:border-dark-700",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 11l7-7 7 7M5 19l7-7 7 7"})})}),u.jsxs("div",{className:"ml-2 sm:ml-4",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium text-ink-500 dark:text-ink-400",children:"Total Votes"}),u.jsx("p",{className:"text-lg sm:text-2xl font-bold text-ink-900 dark:text-white",children:(p==null?void 0:p.totalVotes)||0})]})]})}),u.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-3 sm:p-6 shadow-sm border border-parchment-200 dark:border-dark-700",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-6 sm:w-6 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsxs("div",{className:"ml-2 sm:ml-4",children:[u.jsx("h3",{className:"text-xs sm:text-sm font-medium text-ink-500 dark:text-ink-400",children:"Revenue (ETH)"}),u.jsx("p",{className:"text-lg sm:text-2xl font-bold text-ink-900 dark:text-white",children:(p==null?void 0:p.totalRevenue.toFixed(2))||"0.00"})]})]})})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl p-4 sm:p-6 shadow-sm border border-parchment-200 dark:border-dark-700",children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-4",children:"Story Performance"}),u.jsx("div",{className:"hidden sm:block overflow-x-auto",children:u.jsx("div",{className:"inline-block min-w-full align-middle",children:u.jsxs("table",{className:"min-w-full divide-y divide-parchment-200 dark:divide-dark-700",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Story"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Reads"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Collections"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Votes"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Revenue"})]})}),u.jsx("tbody",{className:"divide-y divide-parchment-200 dark:divide-dark-700",children:(j=p==null?void 0:p.storyPerformance)!=null&&j.length?p.storyPerformance.map(k=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm font-medium text-ink-900 dark:text-white",children:k.title}),u.jsx("td",{className:"px-4 py-3 text-sm text-center text-ink-700 dark:text-ink-200",children:k.reads}),u.jsx("td",{className:"px-4 py-3 text-sm text-center text-ink-700 dark:text-ink-200",children:k.collections}),u.jsx("td",{className:"px-4 py-3 text-sm text-center text-ink-700 dark:text-ink-200",children:k.votes}),u.jsx("td",{className:"px-4 py-3 text-sm text-center text-ink-700 dark:text-ink-200",children:k.revenue.toFixed(2)})]},k.id)):u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-sm text-ink-500 dark:text-ink-400",children:"No story data available yet. Publish some chapters to start seeing analytics."})})})]})})}),u.jsx("div",{className:"sm:hidden",children:(T=p==null?void 0:p.storyPerformance)!=null&&T.length?u.jsx("div",{className:"space-y-4",children:p.storyPerformance.map(k=>u.jsxs("div",{className:"border border-parchment-200 dark:border-dark-700 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-ink-900 dark:text-white text-sm mb-3",children:k.title}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-2 rounded",children:[u.jsx("span",{className:"block text-ink-500 dark:text-ink-400",children:"Reads"}),u.jsx("span",{className:"font-medium text-ink-900 dark:text-white",children:k.reads})]}),u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-2 rounded",children:[u.jsx("span",{className:"block text-ink-500 dark:text-ink-400",children:"Collections"}),u.jsx("span",{className:"font-medium text-ink-900 dark:text-white",children:k.collections})]}),u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-2 rounded",children:[u.jsx("span",{className:"block text-ink-500 dark:text-ink-400",children:"Votes"}),u.jsx("span",{className:"font-medium text-ink-900 dark:text-white",children:k.votes})]}),u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-2 rounded",children:[u.jsx("span",{className:"block text-ink-500 dark:text-ink-400",children:"Revenue"}),u.jsx("span",{className:"font-medium text-ink-900 dark:text-white",children:k.revenue.toFixed(2)})]})]})]},k.id))}):u.jsx("div",{className:"text-center py-8 text-sm text-ink-500 dark:text-ink-400",children:"No story data available yet. Publish some chapters to start seeing analytics."})})]})]})});case"chapters":return u.jsxs("div",{className:"space-y-8",children:[u.jsx("div",{className:"flex justify-between items-center",children:u.jsx("h3",{className:"text-xl font-bold text-ink-900 dark:text-white",children:"Draft Chapters"})}),s.length===0?u.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-parchment-200 dark:border-dark-700 p-8 text-center",children:[u.jsx("h4",{className:"text-lg font-medium text-ink-900 dark:text-white mb-2",children:"No draft chapters"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400 mb-6",children:"You don't have any chapter drafts in progress"}),u.jsx(Ce,{to:"/creator/new-story",children:u.jsx(ot,{variant:"primary",children:"Create New Story"})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden sm:block bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-parchment-200 dark:border-dark-700 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-parchment-200 dark:divide-dark-700",children:[u.jsx("thead",{className:"bg-parchment-50 dark:bg-dark-900",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Chapter"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Story"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Status"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Last Edited"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Words"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-ink-500 dark:text-ink-400 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-parchment-200 dark:divide-dark-700",children:s.map(k=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[u.jsx("div",{className:"text-sm font-medium text-ink-900 dark:text-white",children:k.title}),k.preview&&u.jsxs("div",{className:"text-xs text-ink-500 dark:text-ink-400 mt-1 line-clamp-1",children:[k.preview.substring(0,50),"..."]})]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm text-ink-900 dark:text-white",children:k.storyTitle})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H(k.status)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-ink-600 dark:text-ink-300",children:S(k.lastEdited)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-ink-600 dark:text-ink-300",children:k.wordCount}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx(Ce,{to:`/creator/edit-chapter/${k.id}`,className:"text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",children:"Edit"})})]},k.id))})]})})}),u.jsx("div",{className:"sm:hidden",children:u.jsx("div",{className:"space-y-4",children:s.map(k=>u.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-sm border border-parchment-200 dark:border-dark-700 p-4",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium text-ink-900 dark:text-white",children:k.title}),u.jsx("p",{className:"text-xs text-ink-500 dark:text-ink-400 mt-1",children:k.storyTitle})]}),H(k.status)]}),k.preview&&u.jsxs("p",{className:"text-xs text-ink-500 dark:text-ink-400 mb-3 line-clamp-2",children:[k.preview.substring(0,80),"..."]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-2 rounded",children:[u.jsx("span",{className:"block text-ink-500 dark:text-ink-400",children:"Last Edited"}),u.jsx("span",{className:"font-medium text-ink-900 dark:text-white",children:S(k.lastEdited)})]}),u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-2 rounded",children:[u.jsx("span",{className:"block text-ink-500 dark:text-ink-400",children:"Word Count"}),u.jsx("span",{className:"font-medium text-ink-900 dark:text-white",children:k.wordCount})]})]}),u.jsx(Ce,{to:`/creator/edit-chapter/${k.id}`,className:"block w-full text-center py-2 px-3 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm font-medium transition-colors",children:"Edit Chapter"})]},k.id))})})]})]});case"assets":return u.jsx(JX,{userId:(N==null?void 0:N.uid)||""});default:return null}};return u.jsx("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 pt-24 pb-16",children:u.jsxs("div",{className:"content-wrapper px-4 sm:px-6 lg:px-8 max-w-full sm:max-w-screen-xl mx-auto",children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-ink-900 dark:text-white mb-2",children:"Creator Dashboard"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300",children:"Manage your stories, track performance, and create new content"})]}),u.jsx("div",{className:"mb-8 -mx-4 sm:mx-0",children:u.jsx("div",{className:"overflow-x-auto scrollbar-hide px-4 sm:px-0",children:u.jsx("div",{className:"border-b border-parchment-200 dark:border-dark-700 min-w-max pb-px",children:u.jsxs("nav",{className:"-mb-px flex space-x-6 sm:space-x-8",children:[u.jsx("button",{onClick:()=>e("stories"),className:`py-3 sm:py-4 px-1 whitespace-nowrap text-sm sm:text-base ${t==="stories"?"border-b-2 border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400 font-medium":"border-b-2 border-transparent text-ink-500 hover:text-ink-700 hover:border-ink-300 dark:text-ink-400 dark:hover:text-ink-300 dark:hover:border-dark-500"}`,children:"Stories"}),u.jsx("button",{onClick:()=>e("analytics"),className:`py-3 sm:py-4 px-1 whitespace-nowrap text-sm sm:text-base ${t==="analytics"?"border-b-2 border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400 font-medium":"border-b-2 border-transparent text-ink-500 hover:text-ink-700 hover:border-ink-300 dark:text-ink-400 dark:hover:text-ink-300 dark:hover:border-dark-500"}`,children:"Analytics"}),u.jsx("button",{onClick:()=>e("chapters"),className:`py-3 sm:py-4 px-1 whitespace-nowrap text-sm sm:text-base ${t==="chapters"?"border-b-2 border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400 font-medium":"border-b-2 border-transparent text-ink-500 hover:text-ink-700 hover:border-ink-300 dark:text-ink-400 dark:hover:text-ink-300 dark:hover:border-dark-500"}`,children:"Draft Chapters"}),u.jsx("button",{onClick:()=>e("assets"),className:`py-3 sm:py-4 px-1 whitespace-nowrap text-sm sm:text-base ${t==="assets"?"border-b-2 border-primary-600 text-primary-600 dark:text-primary-400 dark:border-primary-400 font-medium":"border-b-2 border-transparent text-ink-500 hover:text-ink-700 hover:border-ink-300 dark:text-ink-400 dark:hover:text-ink-300 dark:hover:border-dark-500"}`,children:"Token Assets"})]})})})}),d&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-4 rounded-md mb-6",children:[u.jsx("p",{className:"font-medium",children:"Error"}),u.jsx("p",{className:"text-sm mt-1",children:d})]}),u.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:B()},t)]})})},tZ=["Fantasy","Sci-Fi","Horror","Cyberpunk","Steampunk","Mystery","Romance","Adventure","Historical","Thriller"],nZ=()=>{const t=bo(),{currentUser:e}=Pn(),[n,r]=V.useState(1),[s,i]=V.useState({title:"",genre:"",tags:[],description:"",coverImage:"",customTag:""}),[a,c]=V.useState({title:"",genre:"",description:""}),[d,f]=V.useState(""),[p,y]=V.useState(!1),x=B=>{const{name:j,value:T}=B.target;i({...s,[j]:T}),a[j]&&c({...a,[j]:""})},w=B=>{i({...s,genre:B}),a.genre&&c({...a,genre:""})},_=()=>{if(s.customTag&&s.customTag.trim()!==""){const B=s.customTag.trim().toLowerCase();!s.tags.includes(B)&&s.tags.length<5&&i({...s,tags:[...s.tags,B],customTag:""})}},C=B=>{i({...s,tags:s.tags.filter(j=>j!==B)})},N=B=>{B.key==="Enter"&&(B.preventDefault(),_())},I=()=>{let B;switch(s.genre.toLowerCase()){case"sci-fi":B="https://images.unsplash.com/photo-1465101162946-4377e57745c3?w=800&h=600&q=80";break;case"fantasy":B="https://images.unsplash.com/photo-1518709766631-a6a7f45921c3?w=800&h=600&q=80";break;case"horror":B="https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?w=800&h=600&q=80";break;case"cyberpunk":B="https://images.unsplash.com/photo-1493514789931-586cb221d7a7?w=800&h=600&q=80";break;case"steampunk":B="https://images.unsplash.com/photo-1519608487953-e999c86e7455?w=800&h=600&q=80";break;case"mystery":B="https://images.unsplash.com/photo-1544383835-bda2bc66a55d?w=800&h=600&q=80";break;case"romance":B="https://images.unsplash.com/photo-1518049362265-d5b2a6467637?w=800&h=600&q=80";break;case"adventure":B="https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=600&q=80";break;case"historical":B="https://images.unsplash.com/photo-1461360228754-6e81c478b882?w=800&h=600&q=80";break;case"thriller":B="https://images.unsplash.com/photo-1543187018-21e458148a2e?w=800&h=600&q=80";break;default:B="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&h=600&q=80"}f(B),i({...s,coverImage:B})},S=()=>{let B=!0;const j={...a};return n===1?(s.title.trim()||(j.title="Title is required",B=!1),s.genre||(j.genre="Please select a genre",B=!1)):n===2&&(s.description.trim()?s.description.length<30&&(j.description="Description should be at least 30 characters",B=!1):(j.description="Description is required",B=!1)),c(j),B},M=()=>{console.log("Attempting to move to next step from step:",n),console.log("Current form data:",s);const B=S();console.log("Form validation result:",B),B&&(n===1&&!d&&I(),setTimeout(()=>{r(n+1),console.log("Set active step to:",n+1)},0))},U=()=>{r(n-1)},H=async B=>{if(B.preventDefault(),S())try{if(y(!0),!e||!e.email)throw new Error("You must be logged in to create a story");const j=await vX({title:s.title,genre:s.genre,tags:s.tags,description:s.description,coverImage:s.coverImage||d,readerCount:0},e.uid,e.email);console.log("Story created with ID:",j),t("/creator/new-chapter",{state:{newStory:!0,storyData:{...s,id:j}}})}catch(j){console.error("Error creating story:",j),c({...a,title:"Failed to create story. Please try again."}),y(!1)}};return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16",children:u.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-10",children:[u.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-ink-900 dark:text-white mb-2",children:"Create New Story"}),u.jsx("p",{className:"text-lg text-ink-600 dark:text-ink-300",children:"Set up your interactive story and prepare to engage readers with branching narratives."}),u.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-md",children:u.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[u.jsx("span",{className:"font-medium",children:"Note:"})," Your story will only become visible to readers after you publish at least one chapter."]})})]}),u.jsx("div",{className:"mb-10",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${n>=1?"bg-primary-600 text-white":"bg-parchment-200 dark:bg-dark-700 text-ink-500 dark:text-ink-400"}`,children:"1"}),u.jsx("div",{className:"ml-2",children:u.jsx("div",{className:`text-sm font-medium ${n>=1?"text-primary-600 dark:text-primary-400":"text-ink-500 dark:text-ink-400"}`,children:"Basic Info"})})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 ${n>=2?"bg-primary-600 dark:bg-primary-400":"bg-parchment-200 dark:bg-dark-700"}`}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${n>=2?"bg-primary-600 text-white":"bg-parchment-200 dark:bg-dark-700 text-ink-500 dark:text-ink-400"}`,children:"2"}),u.jsx("div",{className:"ml-2",children:u.jsx("div",{className:`text-sm font-medium ${n>=2?"text-primary-600 dark:text-primary-400":"text-ink-500 dark:text-ink-400"}`,children:"Story Details"})})]}),u.jsx("div",{className:`flex-1 h-0.5 mx-4 ${n>=3?"bg-primary-600 dark:bg-primary-400":"bg-parchment-200 dark:bg-dark-700"}`}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${n>=3?"bg-primary-600 text-white":"bg-parchment-200 dark:bg-dark-700 text-ink-500 dark:text-ink-400"}`,children:"3"}),u.jsx("div",{className:"ml-2",children:u.jsx("div",{className:`text-sm font-medium ${n>=3?"text-primary-600 dark:text-primary-400":"text-ink-500 dark:text-ink-400"}`,children:"Review & Create"})})]})]})}),u.jsx("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 p-6 sm:p-8",children:u.jsxs("form",{onSubmit:H,children:[n===1&&u.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[u.jsx("h2",{className:"text-xl font-bold text-ink-900 dark:text-white mb-6",children:"Basic Information"}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:["Story Title ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:x,className:`w-full px-4 py-2 rounded-md border ${a.title?"border-red-500 dark:border-red-500":"border-parchment-300 dark:border-dark-600"} bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Enter a captivating title"}),a.title&&u.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.title})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:["Genre ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:tZ.map(B=>u.jsx("button",{type:"button",onClick:()=>w(B),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${s.genre===B?"bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 border-2 border-primary-500 dark:border-primary-400":"bg-parchment-100 dark:bg-dark-800 text-ink-700 dark:text-ink-200 border border-parchment-200 dark:border-dark-700 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,children:B},B))}),a.genre&&u.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.genre})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:["Tags"," ",u.jsx("span",{className:"text-xs text-ink-500 dark:text-ink-400",children:"(up to 5)"})]}),u.jsxs("div",{className:"flex mb-2",children:[u.jsx("input",{type:"text",id:"customTag",name:"customTag",value:s.customTag,onChange:x,onKeyPress:N,className:"flex-1 px-4 py-2 rounded-l-md border border-parchment-300 dark:border-dark-600 bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400",placeholder:"Add a tag (e.g. dragons, future, mystery)",disabled:s.tags.length>=5}),u.jsx("button",{type:"button",onClick:_,disabled:s.tags.length>=5||!s.customTag.trim(),className:"px-4 py-2 bg-primary-600 dark:bg-primary-500 text-white rounded-r-md hover:bg-primary-700 dark:hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.tags.map(B=>u.jsxs("div",{className:"bg-parchment-100 dark:bg-dark-800 text-ink-700 dark:text-ink-200 rounded-full px-3 py-1 text-sm flex items-center",children:[B,u.jsx("button",{type:"button",onClick:()=>C(B),className:"ml-2 text-ink-500 dark:text-ink-400 hover:text-ink-700 dark:hover:text-ink-200",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},B))})]})]})]}),n===2&&u.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[u.jsx("h2",{className:"text-xl font-bold text-ink-900 dark:text-white mb-6",children:"Story Details"}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:["Story Description"," ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:x,rows:6,className:`w-full px-4 py-2 rounded-md border ${a.description?"border-red-500 dark:border-red-500":"border-parchment-300 dark:border-dark-600"} bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400`,placeholder:"Describe your story in detail. What's it about? What makes it unique? This will help readers decide if they want to engage with your story."}),a.description?u.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.description}):u.jsxs("p",{className:"mt-1 text-sm text-ink-500 dark:text-ink-400",children:["Min 30 characters. ",s.description.length,"/30 characters."]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:"Cover Image"}),u.jsx("div",{className:"mt-2 border-2 border-dashed border-parchment-300 dark:border-dark-600 rounded-lg p-4 text-center",children:d?u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:d,alt:"Cover preview",className:"mx-auto h-64 object-cover rounded-lg"}),u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-sm text-ink-500 dark:text-ink-400",children:"Cover image generated based on your genre"}),u.jsx("button",{type:"button",onClick:I,className:"mt-2 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 text-sm font-medium",children:"Generate Different Image"})]})]}):u.jsxs("div",{className:"py-8",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-ink-400 dark:text-ink-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("p",{className:"mt-2 text-sm text-ink-500 dark:text-ink-400",children:"Cover image will be generated based on your genre"}),u.jsx("button",{type:"button",onClick:I,className:"mt-3 inline-flex items-center px-4 py-2 border border-primary-300 dark:border-primary-700 rounded-md shadow-sm text-sm font-medium text-primary-700 dark:text-primary-300 bg-white dark:bg-dark-800 hover:bg-primary-50 dark:hover:bg-primary-900/20",children:"Generate Cover Image"})]})})]})]})]}),n===3&&u.jsxs(Ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[u.jsx("h2",{className:"text-xl font-bold text-ink-900 dark:text-white mb-6",children:"Review Your Story"}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[u.jsx("div",{className:"md:w-1/3",children:u.jsx("div",{className:"aspect-[3/4] rounded-lg overflow-hidden",children:u.jsx("img",{src:s.coverImage||"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=800&h=600&q=80",alt:"Story cover",className:"w-full h-full object-cover"})})}),u.jsxs("div",{className:"md:w-2/3",children:[u.jsx("h3",{className:"text-2xl font-bold text-ink-900 dark:text-white mb-2",children:s.title}),u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 mr-2",children:s.genre}),s.tags.map(B=>u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-parchment-100 dark:bg-dark-700 text-ink-700 dark:text-ink-300 mr-2",children:B},B))]}),u.jsx("div",{className:"prose prose-sm prose-brown dark:prose-invert max-w-none",children:s.description.split(`
`).map((B,j)=>u.jsx("p",{children:B},j))})]})]}),u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 rounded-lg p-4 mb-6",children:[u.jsx("h4",{className:"text-sm font-medium text-ink-700 dark:text-ink-300 mb-2",children:"What's Next?"}),u.jsx("p",{className:"text-sm text-ink-600 dark:text-ink-400",children:"After creating your story, you'll be able to add chapters and define branching paths. Each chapter will have choice points where readers can vote on what happens next. You can publish your first chapter immediately or save it as a draft to work on later."})]})]}),u.jsxs("div",{className:"mt-8 flex justify-between",children:[n>1?u.jsx("button",{type:"button",className:"px-4 py-2 bg-white dark:bg-dark-800 border border-parchment-300 dark:border-dark-600 text-ink-700 dark:text-ink-200 font-medium rounded-md hover:bg-parchment-50 dark:hover:bg-dark-700",onClick:B=>{B.preventDefault(),U()},children:"Back"}):u.jsx("div",{}),n<3?u.jsx("button",{type:"button",className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-md",onClick:B=>{B.preventDefault(),B.stopPropagation(),console.log("Continue button clicked, activeStep:",n),n===2?(r(3),console.log("Manually set to step 3")):M()},children:"Continue"}):u.jsx("button",{type:"button",onClick:H,disabled:p,className:"w-full py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg disabled:opacity-50",children:p?"Creating Story...":"Create Story & Start First Chapter"})]})]})})]})})})};class rZ{constructor(){mn(this,"states",[]);mn(this,"currentIndex",-1);mn(this,"maxStates",100);mn(this,"shouldIgnoreNextChange",!1)}addState(e){if(this.shouldIgnoreNextChange){this.shouldIgnoreNextChange=!1;return}const n=window.getSelection();let r;if(n&&n.rangeCount>0){const s=n.getRangeAt(0);r={startNode:s.startContainer,startOffset:s.startOffset,endNode:s.endContainer,endOffset:s.endOffset}}this.currentIndex<this.states.length-1&&(this.states=this.states.slice(0,this.currentIndex+1)),this.states.push({html:e,cursorPosition:r}),this.currentIndex=this.states.length-1,this.states.length>this.maxStates&&(this.states.shift(),this.currentIndex--)}undo(e){return this.currentIndex<=0||!e.current?!1:(this.currentIndex--,this.shouldIgnoreNextChange=!0,e.current.innerHTML=this.states[this.currentIndex].html,this.restoreCursorPosition(this.states[this.currentIndex],e),!0)}redo(e){return this.currentIndex>=this.states.length-1||!e.current?!1:(this.currentIndex++,this.shouldIgnoreNextChange=!0,e.current.innerHTML=this.states[this.currentIndex].html,this.restoreCursorPosition(this.states[this.currentIndex],e),!0)}restoreCursorPosition(e,n){if(!e.cursorPosition||!n.current)return;const r=(s,i,a)=>({node:i,offset:0});try{const s=window.getSelection();if(!s)return;const{startNode:i,endNode:a}=e.cursorPosition,c=r(i,n.current,null),d=r(a,n.current,null);if(c.node&&d.node){const f=document.createRange();f.setStart(c.node,c.offset),f.setEnd(d.node,d.offset),s.removeAllRanges(),s.addRange(f)}}catch(s){console.error("Failed to restore cursor position:",s)}}reset(){this.states=[],this.currentIndex=-1}}const sZ=(t,e,n,r)=>{if(t.metaKey||t.ctrlKey){if(t.key==="z")return t.preventDefault(),t.shiftKey?n.redo(e):n.undo(e);if(t.key==="y")return t.preventDefault(),n.redo(e)}return setTimeout(r,0),!1},iZ=t=>{const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll("*").forEach(i=>{i.removeAttribute("style"),i.removeAttribute("class");for(const a of Array.from(i.attributes))a.name.startsWith("data-")&&i.removeAttribute(a.name)}),["script","style","iframe","frame","object","embed","form","input","button","select","option","textarea","meta"].forEach(i=>{e.querySelectorAll(i).forEach(c=>c.remove())}),e.querySelectorAll("div").forEach(i=>{var c;const a=document.createElement("p");a.innerHTML=i.innerHTML,(c=i.parentNode)==null||c.replaceChild(a,i)}),e.innerHTML},wA=t=>{var s;if(!t.current)return;if(t.current.innerHTML.trim()===""||t.current.innerHTML==="<br>"){t.current.innerHTML="<p><br></p>";const i=window.getSelection();if(i){const a=document.createRange(),c=t.current.querySelector("p");c&&(a.setStart(c,0),a.collapse(!0),i.removeAllRanges(),i.addRange(a))}}const e=Array.from(t.current.childNodes);let n=!1;for(const i of e)if(i.nodeType===Node.TEXT_NODE&&((s=i.textContent)!=null&&s.trim())){n=!0;break}if(n){const i=document.createDocumentFragment();let a=null;e.forEach(c=>{c.nodeType===Node.TEXT_NODE?(a||(a=document.createElement("p"),i.appendChild(a)),a.appendChild(c.cloneNode(!0))):c.nodeType===Node.ELEMENT_NODE&&(a=null,i.appendChild(c.cloneNode(!0)))}),t.current.innerHTML="",t.current.appendChild(i)}t.current.querySelectorAll("br + br").forEach(i=>{const a=i.parentNode;if(a&&a.nodeName.toLowerCase()!=="p"){const c=document.createElement("p");c.innerHTML="<br>",a.replaceChild(c,i)}})},oZ=t=>{t.current&&(t.current.addEventListener("compositionstart",()=>{var e;(e=t.current)==null||e.setAttribute("data-composing","true")}),t.current.addEventListener("compositionend",()=>{var e;(e=t.current)==null||e.removeAttribute("data-composing")}))},aZ=t=>{var c;if(!t.current)return;const e=window.getSelection();if(!e||e.rangeCount===0)return;const n=e.getRangeAt(0).cloneRange(),r=[],s=d=>{if(d.nodeType===Node.TEXT_NODE)r.push(d);else for(let f=0;f<d.childNodes.length;f++)s(d.childNodes[f])};s(t.current);const i=/https?:\/\/[^\s\<\>]+/g;let a=!1;for(const d of r){const f=d.textContent||"",p=f.match(i);if(p&&p.length>0){a=!0;let y=0;const x=document.createDocumentFragment();for(const w of p){const _=f.indexOf(w,y);_>y&&x.appendChild(document.createTextNode(f.substring(y,_)));const C=document.createElement("a");C.href=w,C.textContent=w,C.target="_blank",C.rel="noopener noreferrer",x.appendChild(C),y=_+w.length}y<f.length&&x.appendChild(document.createTextNode(f.substring(y))),(c=d.parentNode)==null||c.replaceChild(x,d)}}if(a&&e)try{e.removeAllRanges(),e.addRange(n)}catch(d){console.error("Failed to restore selection after auto-linking URLs",d)}},lZ=t=>{const e=document.createElement("div");e.innerHTML=t;const n=r=>{if(r.nodeType===Node.TEXT_NODE&&r.textContent){const s=r.textContent.split(/\s+/);let i=!1;for(let a=0;a<s.length;a++)s[a].length>50&&(s[a]=s[a].replace(/(.{20})/g,"$1​"),i=!0);i&&(r.textContent=s.join(" "))}else r.hasChildNodes()&&r.childNodes.forEach(n)};return n(e),e.innerHTML},bA=t=>{if(!t.current)return"";const e=t.current.cloneNode(!0),n=r=>{r.nodeType===Node.TEXT_NODE&&r.textContent?r.textContent=r.textContent.replace(/\u200B/g,""):r.hasChildNodes()&&r.childNodes.forEach(n)};return n(e),lZ(e.innerHTML)},$e={BOLD:"bold",ITALIC:"italic",UNDERLINE:"underline",HEADING:"heading",QUOTE:"quote",UNORDERED_LIST:"unorderedList",ORDERED_LIST:"orderedList",ALIGN_LEFT:"alignLeft",ALIGN_CENTER:"alignCenter",ALIGN_RIGHT:"alignRight"},cZ=({value:t,onChange:e,placeholder:n="Start writing your story...",className:r=""})=>{const s=V.useRef(null),[i,a]=V.useState(null),[c,d]=V.useState(!0),[f,p]=V.useState(new Set),[y,x]=V.useState(!1),w=V.useRef(new rZ);V.useEffect(()=>{s.current&&!y&&(t?(s.current.innerHTML=t,d(!1)):(s.current.innerHTML="",d(!0)),w.current.addState(s.current.innerHTML),s.current&&oZ({current:s.current}),x(!0))},[t,y]);const _=()=>{const T=window.getSelection();if(T&&T.rangeCount>0){const k=T.getRangeAt(0);C(k)&&(a(k.cloneRange()),I())}},C=T=>{var k;return((k=s.current)==null?void 0:k.contains(T.commonAncestorContainer))||!1},N=()=>{if(i&&s.current){const T=window.getSelection();T&&(T.removeAllRanges(),T.addRange(i.cloneRange()))}},I=()=>{const T=new Set;document.queryCommandState("bold")&&T.add($e.BOLD),document.queryCommandState("italic")&&T.add($e.ITALIC),document.queryCommandState("underline")&&T.add($e.UNDERLINE);const k=window.getSelection();if(k&&k.rangeCount>0){let D=k.anchorNode;for(;D&&D.nodeType!==Node.ELEMENT_NODE;)D=D.parentNode;if(D){const R=D;/^H[1-6]$/.test(R.tagName)&&T.add($e.HEADING),R.closest("blockquote")&&T.add($e.QUOTE),R.closest("ul")&&T.add($e.UNORDERED_LIST),R.closest("ol")&&T.add($e.ORDERED_LIST);const L=window.getComputedStyle(R).textAlign;L==="center"?T.add($e.ALIGN_CENTER):L==="right"?T.add($e.ALIGN_RIGHT):(L==="left"||L==="start")&&T.add($e.ALIGN_LEFT)}}p(T)},S=T=>{var k;switch(N(),T){case $e.BOLD:document.execCommand("bold",!1);break;case $e.ITALIC:document.execCommand("italic",!1);break;case $e.UNDERLINE:document.execCommand("underline",!1);break;case $e.HEADING:f.has($e.HEADING)?document.execCommand("formatBlock",!1,"p"):document.execCommand("formatBlock",!1,"h2");break;case $e.QUOTE:f.has($e.QUOTE)?document.execCommand("formatBlock",!1,"p"):document.execCommand("formatBlock",!1,"blockquote");break;case $e.UNORDERED_LIST:document.execCommand("insertUnorderedList",!1);break;case $e.ORDERED_LIST:document.execCommand("insertOrderedList",!1);break;case $e.ALIGN_LEFT:document.execCommand("justifyLeft",!1);break;case $e.ALIGN_CENTER:document.execCommand("justifyCenter",!1);break;case $e.ALIGN_RIGHT:document.execCommand("justifyRight",!1);break}I(),s.current&&(w.current.addState(s.current.innerHTML),s.current&&wA({current:s.current}),s.current&&e(bA({current:s.current}))),(k=s.current)==null||k.focus()},M=()=>{var T;if(s.current){wA({current:s.current});const k=bA({current:s.current});e(k),d(((T=s.current.textContent)==null?void 0:T.trim())===""||s.current.innerHTML==="<p><br></p>"),w.current.addState(s.current.innerHTML),I(),aZ({current:s.current})}},U=()=>{d(!1)},H=()=>{if(s.current){const T=s.current.innerHTML;d(T===""||T==="<br>")}},B=T=>{T.preventDefault();let k="";T.clipboardData.types.includes("text/html")?(k=T.clipboardData.getData("text/html"),k=iZ(k),document.execCommand("insertHTML",!1,k)):(k=T.clipboardData.getData("text/plain"),document.execCommand("insertText",!1,k)),s.current&&w.current.addState(s.current.innerHTML)},j=T=>{sZ(T,{current:s.current},w.current,_)};return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 bg-parchment-100 dark:bg-dark-800 rounded-t-md border border-parchment-300 dark:border-dark-600",children:[u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.BOLD)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.BOLD),title:"Bold (Ctrl+B)",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),u.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.ITALIC)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.ITALIC),title:"Italic (Ctrl+I)",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),u.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),u.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.UNDERLINE)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.UNDERLINE),title:"Underline (Ctrl+U)",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("path",{d:"M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"}),u.jsx("line",{x1:"4",y1:"21",x2:"20",y2:"21"})]})}),u.jsx("div",{className:"h-6 w-px mx-1.5 bg-parchment-300 dark:bg-dark-600"}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.HEADING)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.HEADING),title:"Heading",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("path",{d:"M6 12h12"}),u.jsx("path",{d:"M6 5h12"}),u.jsx("path",{d:"M6 19h12"})]})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.QUOTE)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.QUOTE),title:"Quote",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:u.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.UNORDERED_LIST)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.UNORDERED_LIST),title:"Bullet List",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),u.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),u.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),u.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.ORDERED_LIST)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.ORDERED_LIST),title:"Numbered List",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("line",{x1:"10",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"10",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"10",y1:"18",x2:"21",y2:"18"}),u.jsx("path",{d:"M4 6h1v4"}),u.jsx("path",{d:"M4 10h2"}),u.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})}),u.jsx("div",{className:"h-6 w-px mx-1.5 bg-parchment-300 dark:bg-dark-600"}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.ALIGN_LEFT)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.ALIGN_LEFT),title:"Align Left",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("line",{x1:"17",y1:"10",x2:"3",y2:"10"}),u.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),u.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),u.jsx("line",{x1:"17",y1:"18",x2:"3",y2:"18"})]})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.ALIGN_CENTER)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.ALIGN_CENTER),title:"Align Center",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("line",{x1:"18",y1:"10",x2:"6",y2:"10"}),u.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),u.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),u.jsx("line",{x1:"18",y1:"18",x2:"6",y2:"18"})]})}),u.jsx("button",{type:"button",className:`p-1.5 rounded ${f.has($e.ALIGN_RIGHT)?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"text-ink-700 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,onClick:()=>S($e.ALIGN_RIGHT),title:"Align Right",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[u.jsx("line",{x1:"21",y1:"10",x2:"7",y2:"10"}),u.jsx("line",{x1:"21",y1:"6",x2:"3",y2:"6"}),u.jsx("line",{x1:"21",y1:"14",x2:"3",y2:"14"}),u.jsx("line",{x1:"21",y1:"18",x2:"7",y2:"18"})]})})]}),u.jsx("div",{ref:s,className:`min-h-[300px] p-4 border border-parchment-300 dark:border-dark-600 rounded-md bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 overflow-auto prose prose-sm max-w-none prose-p:my-1 prose-headings:mt-4 prose-headings:mb-2 ${r}`,contentEditable:!0,onInput:M,onFocus:U,onBlur:H,onMouseUp:_,onKeyUp:_,onKeyDown:j,onPaste:B,suppressContentEditableWarning:!0}),c&&u.jsx("div",{className:"absolute top-[48px] left-0 p-4 text-ink-400 dark:text-ink-500 pointer-events-none",children:n}),u.jsxs("div",{className:"mt-2 text-xs text-ink-500 dark:text-ink-400 flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsxs("span",{children:["Tip: Use"," ",u.jsx("kbd",{className:"px-1 py-0.5 bg-parchment-100 dark:bg-dark-700 rounded text-[10px] font-mono",children:"Ctrl+B"})," ","for bold,"," ",u.jsx("kbd",{className:"px-1 py-0.5 bg-parchment-100 dark:bg-dark-700 rounded text-[10px] font-mono",children:"Ctrl+I"})," ","for italic,"," ",u.jsx("kbd",{className:"px-1 py-0.5 bg-parchment-100 dark:bg-dark-700 rounded text-[10px] font-mono",children:"Ctrl+Z"})," ","to undo."]})]}),u.jsx("style",{children:`
        [contenteditable] {
          -webkit-user-modify: read-write;
          overflow-wrap: break-word;
          -webkit-line-break: after-white-space;
          line-break: auto;
        }
        
        [contenteditable] h1, 
        [contenteditable] h2, 
        [contenteditable] h3 {
          margin-top: 1em;
          margin-bottom: 0.5em;
          font-weight: 600;
        }
        
        [contenteditable] h2 {
          font-size: 1.5em;
        }
        
        [contenteditable] blockquote {
          border-left: 3px solid #9CA3AF;
          padding-left: 1em;
          margin-left: 0;
          color: #6B7280;
        }
        
        [contenteditable] ul {
          list-style-type: disc;
          padding-left: 1.5em;
        }
        
        [contenteditable] ol {
          list-style-type: decimal;
          padding-left: 1.5em;
        }

        [contenteditable] a {
          color: #3B82F6;
          text-decoration: underline;
        }
        `})]})},uZ=({onSave:t,initialContent:e="",initialTitle:n="",initialHasChoicePoint:r=!1,initialChoiceOptions:s=["",""]})=>{const[i,a]=V.useState({title:n,content:e,hasChoicePoint:!0,choiceOptions:s.length>=2?s:["",""]});V.useEffect(()=>{a(p=>({...p,title:n,content:e,hasChoicePoint:r,choiceOptions:s.length>0?s:["",""]}))},[e,n,r,s]),V.useEffect(()=>{t(i)},[i,t]);const c=p=>{const{name:y,value:x}=p.target;a(w=>({...w,[y]:x}))},d=p=>{a(y=>({...y,content:p}))},f=(p,y)=>{const x=[...i.choiceOptions];x[y]=p.target.value,a(w=>({...w,choiceOptions:x}))};return u.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 p-6 mb-8",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:["Chapter Title ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:c,className:"w-full px-4 py-2 rounded-md border border-parchment-300 dark:border-dark-600 bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter a title for this chapter"})]}),u.jsxs("div",{children:[u.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-ink-700 dark:text-ink-200 mb-1",children:["Chapter Content ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(cZ,{value:i.content,onChange:d,placeholder:"Write your chapter content here..."})]}),u.jsxs("div",{className:"mt-8 border-t border-parchment-200 dark:border-dark-700 pt-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-medium text-ink-900 dark:text-white",children:"Plot Choice Point"}),u.jsx("span",{className:"px-3 py-1 text-sm font-medium text-green-800 dark:text-green-300 bg-green-100 dark:bg-green-900/30 rounded-full",children:"Required"})]}),u.jsxs("div",{className:"bg-parchment-50 dark:bg-dark-800 p-4 rounded-md border border-parchment-200 dark:border-dark-700 mt-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("p",{className:"text-sm text-ink-600 dark:text-ink-400",children:"Create exactly two plot options for readers to vote on. These will become tokens that readers can purchase to influence the story direction."}),u.jsx("span",{className:"text-xs font-medium text-primary-600 dark:text-primary-400 bg-primary-100 dark:bg-primary-900/30 px-2 py-1 rounded-full",children:"Exactly 2 Required"})]}),u.jsx("div",{className:"space-y-3",children:i.choiceOptions.slice(0,2).map((p,y)=>u.jsx("div",{className:"flex items-center",children:u.jsx("div",{className:"flex-grow",children:u.jsxs("div",{className:"flex items-center",children:[u.jsxs("span",{className:"text-sm font-medium text-ink-700 dark:text-ink-300 w-12",children:["Plot ",y+1,":"]}),u.jsx("input",{type:"text",value:p,onChange:x=>f(x,y),placeholder:`Describe plot option ${y+1}...`,className:"flex-1 px-3 py-2 border border-parchment-300 dark:border-dark-600 rounded-md bg-white dark:bg-dark-900 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]})})},y))}),u.jsx("div",{className:"mt-3 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-md",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("svg",{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),u.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[u.jsx("strong",{children:"Token Creation:"})," Both plot options must be filled before publishing. They will become purchasable tokens on Base Sepolia."]})]})})]})]})]})})},EA=()=>{var k,D;const t=bo(),e=js(),{chapterId:n}=hm(),[r,s]=V.useState(((k=e.state)==null?void 0:k.storyData)||null),i=((D=e.state)==null?void 0:D.newStory)||!1,a=!!n,d=new URLSearchParams(e.search).get("storyId"),{currentUser:f}=Pn(),{isConnected:p,address:y,getWalletClient:x,getPublicClient:w}=Sh(),[_,C]=V.useState(!1),[N,I]=V.useState(null),[S,M]=V.useState(!!d&&!r||!!n),[U,H]=V.useState({title:"",content:"",hasChoicePoint:!0,choiceOptions:["",""]});V.useEffect(()=>{(async()=>{if(!(!n||!f)){M(!0);try{const L=await o5(n);if(L){if(L.creatorId!==f.uid){I("You don't have permission to edit this chapter"),t("/creator");return}if(H({title:L.title||"",content:L.content||"",hasChoicePoint:L.hasChoicePoint||!1,choiceOptions:L.choiceOptions||["",""]}),!r){const O=await gA(L.storyId);O&&s(O)}}else I("Chapter not found"),t("/creator")}catch(L){console.error("Error fetching chapter:",L),I("Failed to load chapter data")}finally{M(!1)}}})()},[n,f,t,r]),V.useEffect(()=>{(async()=>{if(d&&!r&&!n){M(!0);try{const L=await gA(d);L?s(L):(I("Story not found"),t("/creator"))}catch(L){console.error("Error fetching story:",L),I("Failed to load story data")}finally{M(!1)}}})()},[d,r,t,n]),V.useEffect(()=>{document.title=a?`Edit Chapter | ${(r==null?void 0:r.title)||"PlotMint"}`:i?`Write First Chapter | ${(r==null?void 0:r.title)||"PlotMint"}`:`Write New Chapter | ${(r==null?void 0:r.title)||"PlotMint"}`,i&&!r&&!a&&t("/creator/new-story")},[i,r,t,a]);const B=async()=>{if(!U.title.trim()){I("Please add a title for your chapter");return}C(!0),I(null);try{if(!(r!=null&&r.id)||!f)throw new Error("Missing required data to save chapter");let R;a&&n?(await vA(n,{title:U.title,content:U.content||"Draft content",hasChoicePoint:U.hasChoicePoint,choiceOptions:U.hasChoicePoint?U.choiceOptions:[],published:!1}),R=n,console.log("Chapter updated as draft with ID:",n)):(R=await wX({storyId:r.id,title:U.title,content:U.content||"Draft content",hasChoicePoint:U.hasChoicePoint,choiceOptions:U.hasChoicePoint?U.choiceOptions:[],published:!1},f.uid),console.log("Chapter saved as draft with ID:",R)),t("/creator")}catch(R){console.error("Error saving chapter as draft:",R),R instanceof Error?R.message.includes("invalid data")||R.message.includes("undefined")?I("There was an issue with your chapter data. Please make sure all fields are filled correctly."):I(`Failed to save chapter: ${R.message}`):I("Failed to save chapter. Please try again.")}finally{C(!1)}},j=async()=>{if(!U.title.trim()){I("Please add a title for your chapter");return}if(!U.content.trim()){I("Please add content to your chapter");return}const R=U.choiceOptions.filter(L=>L.trim().length>0);if(R.length!==2){I("You must provide exactly 2 plot options before publishing");return}if(!p){I("Please connect your wallet to create plot tokens for reader voting");return}C(!0),I(null);try{if(!(r!=null&&r.id)||!f)throw new Error("Missing required data to publish chapter");let L;if(a&&n)await vA(n,{title:U.title,content:U.content,hasChoicePoint:U.hasChoicePoint,choiceOptions:U.hasChoicePoint?U.choiceOptions.filter(O=>O.trim().length>0):[],published:!0}),L=n,console.log("Draft published with ID:",n);else try{const O=await EX(R,r.title,U.title),Z=x(),re=w();if(!Z||!re)throw new Error("Failed to get wallet clients for token creation");if(!Z.account&&!y)throw new Error("Wallet not properly connected - please reconnect your wallet");console.log("🚀 Creating chapter with plot tokens..."),console.log(`📋 Wallet address: ${y}`),console.log(`🎲 Plot options: ${R.join(", ")}`),L=await kX({storyId:r.id,title:U.title,content:U.content,hasChoicePoint:!0,choiceOptions:R,published:!0},f.uid,O,Z,re),console.log("✅ Chapter with plot tokens published with ID:",L)}catch(O){console.error("Error creating tokens:",O),I(`Token creation failed: ${O instanceof Error?O.message:"Unknown error"}. Please ensure your wallet is properly connected and on Base Sepolia network, then try again.`);return}try{await LX(r.id,L),console.log("Followers notified about new chapter")}catch(O){console.error("Error notifying followers:",O)}t("/creator")}catch(L){console.error("Error publishing chapter:",L),L instanceof Error?L.message.includes("invalid data")||L.message.includes("undefined")?I("There was an issue with your chapter data. Please make sure all fields are filled correctly."):I(`Failed to publish chapter: ${L.message}`):I("Failed to publish chapter. Please try again.")}finally{C(!1)}},T=R=>{H(R)};return u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen pt-24 pb-16",children:u.jsx("div",{className:"content-wrapper",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:S?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):u.jsxs(u.Fragment,{children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-ink-900 dark:text-white",children:a?"Edit Draft Chapter":i?"Write Your First Chapter":"Write New Chapter"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{type:"button",onClick:B,disabled:_,className:"px-3 py-1.5 text-sm bg-white dark:bg-dark-800 border border-parchment-300 dark:border-dark-600 text-ink-700 dark:text-ink-200 font-medium rounded-md hover:bg-parchment-50 dark:hover:bg-dark-700 disabled:opacity-50",children:_?"Saving...":a?"Update Draft":"Save as Draft"}),u.jsx("button",{type:"button",onClick:j,disabled:_,className:"px-3 py-1.5 text-sm bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-md disabled:opacity-50",children:_?"Saving...":"Publish Chapter"})]})]}),r&&u.jsxs("div",{className:"flex items-center space-x-2 text-ink-600 dark:text-ink-300",children:[u.jsx("span",{className:"text-sm",children:"For story:"}),u.jsx("span",{className:"text-sm font-medium",children:r.title}),u.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-primary-100 dark:bg-primary-900/20 text-primary-800 dark:text-primary-300",children:r.genre})]}),u.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsxs("div",{className:"text-sm",children:[u.jsxs("div",{className:"flex items-center mb-1",children:[u.jsx("span",{className:"text-blue-800 dark:text-blue-200 font-medium",children:"Plot Token Creation"}),u.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${p?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"}`,children:p?"Wallet Connected":"Wallet Required"})]}),u.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:p?"Your plot options will be converted to tokens that readers can purchase to vote on the story direction.":"Connect your wallet to create plot tokens for reader voting. Each plot option becomes a token that readers can buy to influence the story."})]})]})}),N&&u.jsxs("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 text-sm rounded-md",children:[u.jsx("strong",{children:"Error:"})," ",N]})]}),u.jsx(uZ,{onSave:T,initialContent:U.content,initialTitle:U.title,initialHasChoicePoint:U.hasChoicePoint,initialChoiceOptions:U.choiceOptions}),u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-8 bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-3",children:"Writing Tips"}),u.jsxs("ul",{className:"space-y-2 text-sm text-ink-700 dark:text-ink-300",children:[u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-primary-600 mr-2",children:"•"}),u.jsx("span",{children:"Use the rich text editor to format your story with headings, emphasis, and more."})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-primary-600 mr-2",children:"•"}),u.jsx("span",{children:"Create choice points to let readers vote on where the story goes next."})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-primary-600 mr-2",children:"•"}),u.jsx("span",{children:"Plot options automatically become tokens that readers can purchase to vote - connect your wallet to enable this feature."})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-primary-600 mr-2",children:"•"}),u.jsx("span",{children:"Each choice option should present an interesting direction for the story."})]}),u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-primary-600 mr-2",children:"•"}),u.jsx("span",{children:"You can save your chapter as a draft and come back to it later."})]})]})]})]})})})})},dZ=[{id:"fantasy",name:"Fantasy",count:126},{id:"sci-fi",name:"Sci-Fi",count:98},{id:"mystery",name:"Mystery",count:76},{id:"romance",name:"Romance",count:64},{id:"horror",name:"Horror",count:42},{id:"adventure",name:"Adventure",count:53},{id:"historical",name:"Historical",count:38},{id:"crime",name:"Crime",count:31}],hZ=[{id:"adventure",name:"Adventure",count:238},{id:"sci-fi",name:"Sci-Fi",count:215},{id:"fantasy",name:"Fantasy",count:197},{id:"mystery",name:"Mystery",count:183},{id:"romance",name:"Romance",count:164},{id:"dystopian",name:"Dystopian",count:142},{id:"thriller",name:"Thriller",count:136},{id:"horror",name:"Horror",count:118},{id:"historical",name:"Historical",count:104},{id:"cyberpunk",name:"Cyberpunk",count:87},{id:"magic",name:"Magic",count:83},{id:"time-travel",name:"Time Travel",count:75},{id:"supernatural",name:"Supernatural",count:68},{id:"drama",name:"Drama",count:62},{id:"space",name:"Space",count:57}],fZ=()=>{const[t,e]=V.useState(""),[n,r]=V.useState([]),[s,i]=V.useState([]),[a,c]=V.useState("trending"),[d,f]=V.useState([]),[p,y]=V.useState(!0),[x,w]=V.useState(null);V.useEffect(()=>{y(!0),w(null);const S={published:!0};switch(a){case"trending":S.sortBy="viewCount",S.sortDirection="desc";break;case"recent":S.sortBy="createdAt",S.sortDirection="desc";break;case"popular":S.sortBy="collectCount",S.sortDirection="desc";break;case"recommended":S.sortBy="viewCount",S.sortDirection="desc";break}n.length===1&&(S.genre=n[0]),s.length>0&&(S.tags=s);const M=Kw(U=>{let H=U;if(t.trim()!==""){const j=t.toLowerCase().trim();H=H.filter(T=>T.title.toLowerCase().includes(j)||T.description&&T.description.toLowerCase().includes(j)||T.genre&&T.genre.toLowerCase().includes(j)||T.tags.some(k=>k.toLowerCase().includes(j)))}const B=H.map(_);f(B),y(!1)},S);return()=>M()},[a,n,s,t]);const _=S=>{var M;return{id:S.id,title:S.title,author:((M=S.creatorEmail)==null?void 0:M.split("@")[0])||"Anonymous",authorId:S.creatorId,coverImage:S.coverImage,tags:S.tags,collectCount:S.collectCount,readCount:S.viewCount,publishedAt:S.createdAt,summary:S.description}},C=S=>S?(S.toDate?S.toDate():new Date(S)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown date",N=S=>{n.includes(S)?r(n.filter(M=>M!==S)):r([...n,S])},I=S=>{s.includes(S)?i(s.filter(M=>M!==S)):i([...s,S])};return u.jsx("div",{className:"min-h-screen bg-parchment-50 dark:bg-dark-950 pt-24 pb-16",children:u.jsxs("div",{className:"content-wrapper",children:[u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[u.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-ink-900 dark:text-white mb-2",children:"Discover Stories"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-300",children:"Find your next favorite story with our advanced discovery features."})]}),u.jsxs("div",{className:"bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700 p-5 mb-8",children:[u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",placeholder:"Search stories, authors, or tags...",value:t,onChange:S=>e(S.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-parchment-300 dark:border-dark-600 bg-white dark:bg-dark-800 text-ink-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),u.jsx("div",{className:"absolute left-3 top-3.5 text-ink-400 dark:text-ink-500",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),t&&u.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-3.5 text-ink-400 dark:text-ink-500 hover:text-ink-700 dark:hover:text-ink-300",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[u.jsx("button",{onClick:()=>c("trending"),className:`px-4 py-2 rounded-full text-sm font-medium ${a==="trending"?"bg-primary-600 text-white dark:bg-primary-500":"bg-parchment-100 text-ink-700 dark:bg-dark-800 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,children:"Trending"}),u.jsx("button",{onClick:()=>c("recent"),className:`px-4 py-2 rounded-full text-sm font-medium ${a==="recent"?"bg-primary-600 text-white dark:bg-primary-500":"bg-parchment-100 text-ink-700 dark:bg-dark-800 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,children:"Recent"}),u.jsx("button",{onClick:()=>c("popular"),className:`px-4 py-2 rounded-full text-sm font-medium ${a==="popular"?"bg-primary-600 text-white dark:bg-primary-500":"bg-parchment-100 text-ink-700 dark:bg-dark-800 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,children:"Most Read"}),u.jsx("button",{onClick:()=>c("recommended"),className:`px-4 py-2 rounded-full text-sm font-medium ${a==="recommended"?"bg-primary-600 text-white dark:bg-primary-500":"bg-parchment-100 text-ink-700 dark:bg-dark-800 dark:text-ink-300 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,children:"Recommended"})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-medium text-ink-900 dark:text-white mb-3",children:"Categories"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:dZ.map(S=>u.jsxs("button",{onClick:()=>N(S.id),className:`px-3 py-1.5 rounded-full text-xs font-medium flex items-center ${n.includes(S.id)?"bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300 border border-primary-300 dark:border-primary-700":"bg-parchment-100 text-ink-700 dark:bg-dark-800 dark:text-ink-300 border border-parchment-200 dark:border-dark-700 hover:bg-parchment-200 dark:hover:bg-dark-700"}`,children:[S.name,u.jsx("span",{className:"ml-1.5 text-xs text-ink-500 dark:text-ink-400",children:S.count})]},S.id))})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium text-ink-900 dark:text-white mb-3",children:"Popular Tags"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:hZ.slice(0,12).map(S=>u.jsxs("button",{onClick:()=>I(S.id),className:`px-3 py-1 rounded-full text-xs ${s.includes(S.id)?"bg-secondary-100 text-secondary-800 dark:bg-secondary-900/30 dark:text-secondary-300 border border-secondary-300 dark:border-secondary-700":"bg-parchment-50 text-ink-600 dark:bg-dark-800 dark:text-ink-300 border border-parchment-200 dark:border-dark-700 hover:bg-parchment-100 dark:hover:bg-dark-700"}`,children:["#",S.name]},S.id))})]})]}),p&&u.jsx("div",{className:"flex justify-center items-center py-20",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}),!p&&x&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-300 p-4 rounded-md mb-6",children:[u.jsx("p",{className:"font-medium",children:"Error loading stories"}),u.jsx("p",{className:"text-sm mt-1",children:x})]}),!p&&!x&&u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h2",{className:"text-xl font-bold text-ink-900 dark:text-white",children:[d.length," ",d.length===1?"Story":"Stories"," ","Found"]}),(n.length>0||s.length>0||t)&&u.jsxs("button",{onClick:()=>{r([]),i([]),e("")},className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center",children:["Clear Filters",u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})]})]}),d.length===0?u.jsxs("div",{className:"text-center py-16 bg-white dark:bg-dark-900 rounded-xl shadow-sm border border-parchment-200 dark:border-dark-700",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-ink-300 dark:text-ink-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("h3",{className:"text-lg font-medium text-ink-900 dark:text-white mb-2",children:"No stories found"}),u.jsx("p",{className:"text-ink-600 dark:text-ink-400 max-w-md mx-auto",children:"Try adjusting your search or filter criteria to find what you're looking for."})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(S=>u.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-dark-900 rounded-xl overflow-hidden shadow-sm border border-parchment-200 dark:border-dark-700 flex flex-col h-full hover:shadow-md transition-shadow",children:[u.jsx("div",{className:"h-48 overflow-hidden",children:u.jsx("img",{src:S.coverImage,alt:S.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),u.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[u.jsx("div",{className:"mb-2 flex flex-wrap gap-1",children:S.tags.slice(0,3).map(M=>u.jsxs("span",{className:"text-xs px-2 py-0.5 bg-parchment-100 dark:bg-dark-800 text-ink-700 dark:text-ink-300 rounded-full",children:["#",M]},M))}),u.jsx("h3",{className:"text-lg font-bold text-ink-900 dark:text-white mb-1",children:S.title}),u.jsxs(Ce,{to:`/profile/${S.authorId}`,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline mb-3",children:["by ",S.author]}),u.jsx("p",{className:"text-sm text-ink-600 dark:text-ink-300 mb-4 line-clamp-3 flex-1",children:S.summary}),u.jsxs("div",{className:"mt-auto flex items-center justify-between text-xs text-ink-500 dark:text-ink-400",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("span",{className:"flex items-center",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"})}),S.collectCount]}),u.jsxs("span",{className:"flex items-center",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[u.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),u.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),S.readCount]})]}),u.jsx("span",{children:C(S.publishedAt)})]}),u.jsx("div",{className:"mt-4",children:u.jsx(Ce,{to:`/stories/${S.id}`,children:u.jsx(ot,{variant:"primary",size:"sm",fullWidth:!0,children:"Read Story"})})})]})]},S.id))})]})]})})};function pZ(){const{storyId:t,chapterId:e}=hm();return u.jsx(d5,{storyId:t,chapterId:e,creatorId:"",plotOptions:[]})}function mZ(){return V.useEffect(()=>{document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")},[]),u.jsx(bH,{children:u.jsx("div",{className:"bg-parchment-50 dark:bg-dark-950 min-h-screen",children:u.jsx(W3,{children:u.jsxs(b3,{children:[u.jsx($n,{path:"/",element:u.jsx(hY,{})}),u.jsxs($n,{element:u.jsx(oY,{}),children:[u.jsx($n,{path:"/stories",element:u.jsx(ti,{children:u.jsx(BX,{})})}),u.jsx($n,{path:"/stories/:storyId",element:u.jsx(ti,{children:u.jsx($X,{})})}),u.jsx($n,{path:"/stories/:storyId/chapters/:chapterId",element:u.jsx(ti,{children:u.jsx(QX,{})})}),u.jsx($n,{path:"/stories/:storyId/chapters/:chapterId/vote",element:u.jsx(ti,{children:u.jsx(pZ,{})})}),u.jsx($n,{path:"/dashboard",element:u.jsx(ti,{children:u.jsx(ZX,{})})}),u.jsx($n,{path:"/creator",element:u.jsx(ti,{children:u.jsx(eZ,{})})}),u.jsx($n,{path:"/creator/new-story",element:u.jsx(ti,{children:u.jsx(nZ,{})})}),u.jsx($n,{path:"/creator/new-chapter",element:u.jsx(ti,{children:u.jsx(EA,{})})}),u.jsx($n,{path:"/creator/edit-chapter/:chapterId",element:u.jsx(ti,{children:u.jsx(EA,{})})}),u.jsx($n,{path:"/discover",element:u.jsx(fZ,{})})]}),u.jsx($n,{path:"*",element:u.jsx(jA,{to:"/",replace:!0})})]})})})})}CR.createRoot(document.getElementById("root")).render(u.jsx(wR.StrictMode,{children:u.jsx(mZ,{})}));export{se as B,rd as H,VZ as a,Ps as b,r0 as c,wV as d,Ao as e,Ns as f,O1 as g,Zm as i,e6 as l,Gt as s};
